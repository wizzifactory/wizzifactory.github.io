<!DOCTYPE html>
<html ---exportName="html">
    <head>
        <title>The Wizzi Factory</title>
        <link href="normalize.css" rel="stylesheet">
        <link href="wizzifactory.css" rel="stylesheet">
    </head>
    <body>
        <header class="header" role="banner">
            <div class="header-logo">
                <a href="index.html"><img src="logo.svg">
                </a>
            </div>
            <nav role="navigation" class="header-items">
                <a class="header-item" href="overview.html">View</a>
                <a class="header-item" href="starter.html">Starter</a>
                <a class="selected-header-item" href="docs.html">Documentation</a>
                <a class="header-item" href="specs.html">Specs</a>
                <a class="header-item" href="labs.html">Labs</a>
                <a class="header-item" href="project.html">Project</a>
                <a class="header-item" href="contribs.html">Contribs</a>
            </nav>
        </header>
        <main>
            <div class="main-sidebar-left">
                <section id="main-toc" class="toc">
                    <h3>Contents:</h3>
                    <ol>
                        <li><a href="#concept-1">Introduction</a>
                        </li>
                        <li><a>Package: wizzi-core</a>
                        <ol>
                            <li><a href="#concept-2">Utility modules</a>
                            </li>
                        </ol>
                        </li>
                        <li><a>Package: wizzi-ittf / structure</a>
                        <ol>
                            <li><a href="#concept-3">Ittf notation</a>
                            </li>
                            <li><a href="#concept-4">Ittf document</a>
                            </li>
                            <li><a href="#concept-5">TemplateableIttfDocument</a>
                            </li>
                            <li><a href="#concept-6">Js-Wizzi</a>
                            </li>
                            <li><a href="#concept-7">Ittf statement nodes</a>
                            </li>
                            <li><a href="#concept-8">Primary Ittf document</a>
                            </li>
                            <li><a href="#concept-9">Mixin Ittf document</a>
                            </li>
                            <li><a href="#concept-10">Includeable Ittf document</a>
                            </li>
                        </ol>
                        </li>
                        <li><a>Package: wizzi-ittf / behaviour</a>
                        <ol>
                            <li><a href="#concept-11">Ittf model loader</a>
                            </li>
                            <li><a href="#concept-12">Ittf evaluator</a>
                            </li>
                            <li><a href="#concept-13">Js-Wizzi runner</a>
                            </li>
                            <li><a href="#concept-14">Js-Wizzi context</a>
                            </li>
                        </ol>
                        </li>
                        <li><a>Package: wizzi-schema / structure</a>
                        <ol>
                            <li><a href="#concept-15">Wizzi schema</a>
                            </li>
                            <li><a href="#concept-16">Wizzi meta schema</a>
                            </li>
                            <li><a href="#concept-17">Wizzi model type</a>
                            </li>
                            <li><a href="#concept-18">Wizzi model instance</a>
                            </li>
                        </ol>
                        </li>
                        <li><a>Package: wizzi-schema / behaviour</a>
                        <ol>
                            <li><a href="#concept-19">Wizzi model factory</a>
                            </li>
                            <li><a href="#concept-20">Wizzi model production</a>
                            </li>
                        </ol>
                        </li>
                        <li><a>Package: wizzi-factory / structure</a>
                        <ol>
                            <li><a href="#WizziFactoryPackage">Wizzi Factory Package</a>
                            </li>
                            <li><a href="#ProductionManager">ProductionManager</a>
                            </li>
                            <li><a href="#wfjob-WizziSchema">The wfjob Wizzi Schema</a>
                            </li>
                        </ol>
                        </li>
                        <li><a>Package: wizzi-factory / behaviour</a>
                        <ol>
                            <li><a href="#concept-24">Artifact generation</a>
                            </li>
                            <li><a href="#concept-25">IttfTemplate artifact</a>
                            </li>
                            <li><a href="#concept-26">SwigTemplate artifact</a>
                            </li>
                            <li><a href="#concept-27">CodeWrite artifact</a>
                            </li>
                            <li><a href="#concept-28">Wizzi model transformer</a>
                            </li>
                        </ol>
                        </li>
                    </ol>
                </section>
            </div>
            <div class="main-content">
                <h2 id="concept-1">Introduction</h2>
                <div class="summary">
                        <p>Software Artifacts are generated by <a href="#WizziFactoryProduction">WizziFactoryProductions</a>.</p>    <h4>To setup productions you must build <a href="#WizziFactoryPackage">WizziFactoryPackages</a> that expose:</h4>        <ul><li>WizziSchemas    </li>        <li>WizziModelTypes    </li>        <li>WizziModelFactories    </li>        <li>WizziModelTransformers    </li>        <li>ArtifactGenerators    </li>    </ul>    <h4>There are 4 standard packages on which you can build a WizziPackage:</h4>        <ul><li>wizzi-core    </li>        <li>wizzi-ittf    </li>        <li>wizzi-schema    </li>        <li>wizzi-factory    </li>    </ul>    <p>A fifth standard package, wizzi-legacy, contains the implementation of some WizziLanguageSchemas of a previous sperimental version of the Wizzi Factory that are used for bootstrapping the project. They are the js (javascript), html, css and json WizziLanguageSchema.</p>    <p>This documentation describes the structural and behavioural components of the standard packages.</p>    <p>For a step by step tutorial on how to build the first WizziPackage and the first WizziFactoryProduction go to the <a href="starter.js">Starter</a> section.</p>    <p>To search prototypes that you may integrate into your solutions go to the <a href="labs.js">Labs</a> section.</p>    <p>The wizzi-legacy package is not used to build Starter and Labs WizziPackages; they develop their own versions of WizziLanguageSchemas.</p></div>
                <section>
                    <h2>Package wizzi-core</h2>
                    <h2 id="concept-2">Utility modules</h2>
                    <div class="summary">
                            <h4>The wizzi-core package contains a set of utility modules concerning:</h4>        <ul><li>file management;    </li>        <li>logging;    </li>        <li>error management;    </li>        <li>string, xml and html writing;    </li>        <li>interpolation;    </li>        <li>lineparsing;    </li>        <li>various verify functions.    </li>    </ul></div>
                    <h2>Package wizzi-ittf / structure</h2>
                    <h2 id="concept-3">Ittf notation</h2>
                    <div class="summary">
                            <p>Ittf stays for Indented Text Tree Format, the notation format of the Wizzi Factory modeling system.</p>    <p>It is a textual representation of a <a href="https://en.wikipedia.org/wiki/Tree_(data_structure)">tree data structure</a> where child nodes are indented one level below their parent.</p>    <p>Example. This is a tree data structure in Ittf format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">html</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">body</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="tag">ul</span><span class="pln"> </span></li><li class="L4"><span class="pnl">            </span><span class="tag">li</span><span class="pln"> </span></li><li class="L5"><span class="pnl">                </span><span class="tag">a</span><span class="pln"> The Wizzi Factory</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">href</span><span class="pln"> https://wizzifactory.github.io</span></li></ol></pre><p>Some Ittf terms:</p>            <table class="pretty-table"><tr><td>IttfDocument        </td>            <td>A text document containing a tree data structure described using the Ittf notation.        </td>            </tr>            <tr><td>IttfNode        </td>            <td>A node item; a string of chars on a single line, that is parsed in a name, value pair separated by a whitechar (space or TAB).        </td>            </tr>            <tr><td>IttfNodeName        </td>            <td>The name part of an IttfNode, also IttfNodeTag.        </td>            </tr>            <tr><td>IttfNodeValue        </td>            <td>The value part of an IttfNode; may be optional or required; may be multi-line (see the $. IttfNodeStatement for multi-line IttfNodeValues).        </td>            </tr>            <tr><td>IttfNodeParent        </td>            <td>The parent node of an IttfNode.        </td>            </tr>            <tr><td>IttfNodeRoot        </td>            <td>The root node of an IttfDocument; its IttfNodeParent is null.        </td>            </tr>            <tr><td>IttfNodeBranch        </td>            <td>The sub tree of an IttfNode that is not the IttfNodeRoot.        </td>            </tr>            <tr><td>IttfNodeChildren        </td>            <td>The child nodes of an IttfNode.        </td>            </tr>    </table></div>
                    <h2 id="concept-4">Ittf document</h2>
                    <div class="summary">
                            <p>An IttfDocument is the persistence format of a WizziModel.</p>    <p>It is a textual representation of a <a href="https://en.wikipedia.org/wiki/Tree_(data_structure)">tree data structure</a> modeled using the Ittf notation.</p>    <p>This could be an IttfDocument also:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">html</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">body</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="tag">ul</span><span class="pln"> </span></li><li class="L4"><span class="pnl">            </span><span class="tag">li</span><span class="pln"> </span></li><li class="L5"><span class="pnl">                </span><span class="tag">a</span><span class="pln"> The Wizzi Factory</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">href</span><span class="pln"> https://wizzifactory.github.io</span></li></ol></pre><p>An IttfDocument is composable and templateable. It is parsed and processed by an IttfModelLoader into an in memory javascript tree structure named IttfModel.</p>    <h4>It may contain two kind of nodes:</h4>        <ul><li>an IttfDomainNode, that is an IttfNode describing an element or attribute of the domain that is modeled;<pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">table</span><span class="pln"> user</span></li><li class="L2"><span class="pnl">    </span><span class="tag">column</span><span class="pln"> UserName</span></li><li class="L3"><span class="pnl">    </span><span class="tag">column</span><span class="pln"> Email</span></li></ol></pre>    </li>        <li>an IttfStatementNode, that is an IttfNode containg a composition or templating instruction for the IttfModelLoader.<pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="kwd">$foreach</span><span class="pln"> item in collection</span></li><li class="L2"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre>    </li>    </ul>    <p>All the IttfNodes of an IttfDocument, included the IttfRootNode, are templateable. An IttfNodeValue of an IttfDomainNode may contain templated expressions. IttfStatementNodes may contain template control statements. Even IttfRootNodes may be IttfStatementNodes. The root node of an IttfDocument may be a MixinCall that will be replaced by the called MixinIttfDocument.</p>    <h4>There are three kinds of IttfDocuments</h4>    <ul />        <table class="pretty-table">            <tr>                <td>PrimaryIttfDocument            </td>                            <td>The primary source of a WizziModelInstance, which Uri is passed to the IttfModelLoader.            </td>                    </tr>                    <tr>                <td>MixinIttfDocument            </td>                            <td>A TemplateableIttfDocument that can be mixed in a calling IttfDocument using a MixinCall.            </td>                    </tr>                    <tr>                <td>IncludeableIttfDocument            </td>                            <td>An IttfDocument that can be included AS IS in another IttfDocument.            </td>                    </tr>            </table></div>
                    <h2 id="concept-5">TemplateableIttfDocument</h2>
                    <div class="summary">
                            <p>Some terms:</p>            <table class="pretty-table"><tr><td>TemplateableIttfDocument        </td>                <td>Is a mix of:<li>IttfDomainNodes with a PlainIttfNodeValue.<pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">primaryKey</span><span class="pln"> User_ID</span></li></ol></pre>            </li>                <li>IttfDomainNodes with a TemplatedIttfNodeValue; they require interpolation (VariableSubstitution).<pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">primaryKey</span><span class="pln"> ${ table.name.toUpperCase() }_ID</span></li></ol></pre>            </li>                <li>IttfTemplateControlNodes, they allow TemplateConditionalInclusion<pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="kwd">$if</span><span class="expr"> table.hasPrimaryKey()</span></li><li class="L2"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre>            </li>                <li>JsWizziIttfNodes, they can manipulate the TemplateContext.<pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="kwd">$</span><span class="expr"> var columnCount = table.columns.length;</span></li></ol></pre>            </li>                    </td>            </tr>            <tr><td>TemplateContext        </td>            <td>Contains the context values for VariableSubstitution and evaluation of IttfTemplateControlNodes.        </td>            </tr>            <tr><td>TemplateResolution        </td>            <td>A TemplateableIttfDocument is <i>resolved in</i> a TemplateContext.        </td>            </tr>    </table>    <p>The TemplateContext is created from the IttfLoadingContext that is passed to the IttfModelLoader. In case of a MixinIttfDocument the MixinCallParameters are added to it; they override any property of the IttfLoadingContext with the same name.</p>    <p>The IttfTemplateEvaluator generates and execute in memory a javascript module that rebuilds the IttfModel node tree, processing expressions and flow control statements declared in the IttfNodes of the TemplateableIttfDocument.</p></div>
                    <h2 id="concept-6">Js-Wizzi</h2>
                    <div class="summary">
                            <p>Js-Wizzi is an implementation of a subset of the ECMA-262 javascript standard that the Wizzi Factory uses for interpolation and IttfDocuments transformations.</p>    <p>Js-Wizzi uses the quite efficent <a href="http://esprima.org/">esprima</a> parsing infrastructure and a customized javascript engine (see the JsWizziRunner component). The esprima syntax tree format is expected to be compatible with the Mozilla SpiderMonkey Parser API.</p>    <p>IttfDocuments developers use the Js-Wizzi syntax for writing template expressions in IttfNodeValues and template context manipulation statements ($ and $global IttfNodeStatements).</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag" /><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">ul</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="kwd">$</span><span class="expr"> var i = 0;</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$while</span><span class="pln"> i &lt; 10</span></li><li class="L5"><span class="pnl">            </span><span class="tag">li</span><span class="pln"> counting ${i}</span></li><li class="L6"><span class="pnl">            </span><span class="kwd">$</span><span class="expr"> i++;</span></li></ol></pre><h4>The syntax tree node types implemented by Js-Wizzi are:</h4>        <ul><li>VariableDeclaration    </li>                <li>STATEMENTS<ul><li>EmptyStatement            </li>                <li>ExpressionStatement            </li>                <li>IfStatement            </li>                <li>WhileStatement            </li>                <li>DoWhileStatement            </li>                <li>ForStatement            </li>                <li>ForInStatement            </li>                <li>BreakStatement            </li>                <li>ContinueStatement            </li>                <li>ReturnStatement            </li>                    </ul>            </li>                <li>EXPRESSIONS<ul><li>UnaryExpression: !            </li>                <li>BinaryExpression: +. -, *, /, ==, ===, !=, !==, >=, >, <=, <            </li>                <li>UpdateExpressions: ++, --            </li>                <li>LogicalExpression: &&, ||            </li>                <li>ConditionalExpression: test ? consequent : alternate            </li>                <li>CallExpression            </li>                <li>MemberExpression            </li>                <li>AssignmentExpression: =, *=, /=, %=, +=, -=, <<=, >>=, >>>=, &=, ^=, |=            </li>                <li>ArrayExpression            </li>                <li>ObjectExpression            </li>                <li>FunctionCall            </li>                    </ul>            </li>            <li>FunctionDeclaration<div>Simple function declaration. No prototypes. No function objects; functions cannot be built by code and used like objects.        </div>            </li>    </ul></div>
                    <h2 id="concept-7">Ittf statement nodes</h2>
                    <div class="summary">
                            <p>IttfStatementNodes allow IttfDocuments to act as composable and templateable tree data structures.</p>    <h3>MixinCall statement</h3>    <p>Format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="mix">mixin-path(</span><span class="pln"> mixin-param-1 [mixin-param-2, [...]] ).</span></li><li class="L3"><span class="pnl">        </span><span class="tag">[</span><span class="pln"> optional ittfnodebranch ]</span></li></ol></pre><p>A MixinCall is recognized by the lexer because the IttfNodeName ends with an open parenthesis. The chars before the parens are the relative path to the called MixinIttfDocument. The base path is the current IttfDocumentUri. No whitechar must separate the mixin-path and the open paren.</p>    <p>The MixinIttfDocument is inserted in the calling IttfDocument replacing the MixinCall node. If the MixinCall node has children they, by default, are appended to the IttfRootNode of the MixinIttfDocument. But if the MixinIttfDocument has a descendent that is a default $hook IttfStatementNode, the children of the MixinCall node replace the $hook node.</p>    <p>For example this MixinIttfDocument has an $hook node where children of the MixinCall statement will be appended.</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">table</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">tr</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="kwd">$hook</span><span class="pln"> </span></li></ol></pre><p>A MixinCall may be the IttfRootNode of the calling IttfDocument:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="mix">mylayout(</span><span class="pln"> home )</span></li><li class="L2"><span class="pnl">    </span><span class="tag">div</span><span class="pln"> My content</span></li></ol></pre><h3>$include statement</h3>    <p>Format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$include</span><span class="pln"> include-path</span></li></ol></pre><p>include-path is the relative path to an IncludeableIttfDocument. The base path is the current IttfDocumentUri.</p>    <p>The IncludeableIttfDocument is included AS IS replacing the $include IttfStatementNode.</p>    <p>An $include IttfStatementNode cannot have children nodes.</p>    <h3>$hook statement</h3>    <p>Format</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$hook</span><span class="pln"> name</span></li></ol></pre><p>An $hook IttfStatementNode is a named insertion point where IttfNodeBranches can be appended. The name is optional, when missing its value is 'default'.</p>    <p>It has to be replaced and may not have child nodes.</p>    <p>See the statements MixinCall and AppendHookCall, for how to append IttfNodeBranches to an $hook node.</p>    <h3>AppendHookCall statement</h3>    <p>Format</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$append</span><span class="pln"> hook-name</span></li><li class="L3"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> ittfnodebranch ...</span></li></ol></pre><p>An $append IttfStatementNode is the root of an IttfNodeBranch that should be appended to an ancestor $hook IttfStatementNode of name hook-name. The IttfNodeChildren of the $append node are cut & pasted replacing the $hook node.</p>    <h3>$group statement</h3>    <p>Format</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="kwd">$group</span><span class="pln"> empty-value</span></li><li class="L2"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> ittfnodebranch ...</span></li></ol></pre><p>An IttfDocument must be a tree and have one and only one IttfRootNode.</p>    <p>The $group IttfStatementNode is a convenience node that may be used as the IttfRootNode of an includeable or mixin IttfDocument with more that one IttfRootNodes.</p>    <h3>$if, $elif, $else statements</h3>    <p>Format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$if</span><span class="expr"> js-wizzi-conditional-expression</span></li><li class="L3"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> ittfnodebranch ...</span></li><li class="L4"><span class="pnl">    </span><span class="kwd">$elif</span><span class="expr"> js-wizzi-conditional-expression</span></li><li class="L5"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> ittfnodebranch ...</span></li><li class="L6"><span class="pnl">    </span><span class="kwd">$else</span><span class="pln"> empty-value</span></li><li class="L7"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> ittfnodebranch ...</span></li></ol></pre><p>Children node are included/excluded depending on the value of the conditional-expression, that is written in Js-Wizzi.</p>    <h3>$foreach statement</h3>    <p>Format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$foreach</span><span class="pln"> item-name in js-wizzi-collection-name</span></li><li class="L3"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> ittfnodebranch ...</span></li></ol></pre><p>This is a repeat template statement where item-name is user defined and js-wizzi-collection-name is a Js-Wizzi expression that evaluates to an iterable.</p>    <p>The var statement that declares item-name is auto-generated.</p>    <p>Descendent nodes are repeated having item-name as a context value in scope.</p>    <h3>$break, $continue statements</h3>    <p>Format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$break</span><span class="pln"> empty-value</span></li><li class="L3"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> </span></li><li class="L4"><span class="pnl">    </span><span class="kwd">$continue</span><span class="pln"> empty-value</span></li></ol></pre><p>This statements have the same meaning than in javascript but operate breaking or continuing the template repetition.</p>    <p>Currently a label for continuation is not implemented.</p>    <h3>$while statement</h3>    <p>Format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$while</span><span class="pln"> js-wizzi-conditional-expression</span></li><li class="L3"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> ittfnodebranch ...</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$</span><span class="expr"> js-wizzi-exit-condition-change</span></li></ol></pre><p>This is a repeat template statement where descendent nodes are repeated until the js-wizzi-conditional-expression evaluates to false.</p>    <p>$ or $global statements must be used to modify the context values of the exit condition. There is a limit of 10000 iterations to avoid infinite loops, after that an exception is raised.</p>    <h3>$ statement</h3>    <p>May declare and modify template context variables that have IttfDocument scope.</p>    <div>May modify template context variables that have global scope.</div>    <div>Statements are js-wizzi instructions.</div>    <p>Single line format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$</span><span class="expr"> js-wizzi-statement</span></li></ol></pre><p>Multi-line format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="kwd">$</span><span class="expr"> </span></li><li class="L2"><span class="pnl">    </span><span class="expr">js-wizzi-statement</span><span class="expr"> </span></li><li class="L3"><span class="pnl">    </span><span class="expr">js-wizzi-statement</span><span class="expr"> </span></li><li class="L4"><span class="pnl">    </span><span class="expr">...</span><span class="expr"> </span></li></ol></pre><h3>$, $global statements</h3>    <p>May declare and modify template context variables of the global scope.</p>    <div>Statements are js-wizzi instructions.</div>    <p>Single line format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$global</span><span class="pln"> js-wizzi-statement</span></li></ol></pre><p>Multi-line format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="kwd">$global</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="expr">js-wizzi-statement</span><span class="expr"> </span></li><li class="L3"><span class="pnl">    </span><span class="expr">js-wizzi-statement</span><span class="expr"> </span></li><li class="L4"><span class="pnl">    </span><span class="expr">...</span><span class="expr"> </span></li></ol></pre></div>
                    <h2 id="concept-8">Primary Ittf document</h2>
                    <div class="summary">
                            <p>A PrimaryIttfDocument is a TemplateableIttfDocument that contains the root IttfNode of a WizziModel.</p>    <p>Usually the root node of a PrimaryIttfDocument is the root DomainNode of a WizziModel.</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">html</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">head</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> </span></li><li class="L4"><span class="pnl">    </span><span class="tag">body</span><span class="pln"> </span></li><li class="L5"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre><p>There are exceptions.</p>    <p>The IttfNodeRoot can be a MixinCall to a MixinIttfDocument, which IttfNodeRoot will become the root DomainNode of the model;</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">layout()</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">section</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre><p>Or can be a branch domain node of a WizziModelInstance, it is not required to be the root node;</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">div</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre><p>A PrimaryIttfDocument may declare a $params IttfStatementNode as a child of the IttfNodeRoot. Being a primary source, parameters cannot be passed by MixinCalls but can be passed in the IttfLoadingContext.</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">html</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> borderColor</span></li><li class="L3"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre></div>
                    <h2 id="concept-9">Mixin Ittf document</h2>
                    <div class="summary">
                            <p>A MixinIttfDocument is a TempleatableIttfDocument that may be mixed in another IttfDocument.</p>    <p>May have binding parameters that are set on the template context with MixinIttfDocument scope.</p>    <p>May contain named $hook IttfNodes where children of the MixinCall node can be appended.</p>    <p>This could be a MixinIttfDocument named lia.html.ittf</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">li</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> text, href|#</span></li><li class="L3"><span class="pnl">    </span><span class="tag">a</span><span class="pln"> ${text}</span></li><li class="L4"><span class="pnl">        </span><span class="tag">href</span><span class="pln"> ${href}</span></li><li class="L5"><span class="pnl">    </span><span class="kwd">$hook</span><span class="pln"> default $$ the name default may be omitted</span></li></ol></pre><p>And this could be a calling ItffDocument</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">html</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> </span></li><li class="L3"><span class="pnl">    </span><span class="tag">ul</span><span class="pln"> </span></li><li class="L4"><span class="pnl">        </span><span class="mix">lia(</span><span class="pln"> Wizzi factory, https://wizzifactory.github.io/)</span></li><li class="L5"><span class="pnl">            </span><span class="tag">br</span><span class="pln"> </span></li><li class="L6"><span class="pnl">            </span><span class="tag">span</span><span class="pln"> A model driven software factory.</span></li><li class="L7"><span class="pnl">        </span><span class="mix">lia(</span><span class="pln"> NodeJs, https://nodejs.org/en/)</span></li></ol></pre></div>
                    <h2 id="concept-10">Includeable Ittf document</h2>
                    <div class="summary">
                            <p>An IncludeableIttfDocument is an IttfDocument that can be included in another IttfDocument.</p>    <p>It may not have a $params IttfStatementNode as a child of its root node.</p>    <p>It is included AS IS in the including IttfDocument replacing the $include IttfStatementNode that calls the inclusion.</p>    <p>Since it is included before the AppendHook and Evaluation steps it may contain expression and template control nodes just like any other TemplateableIttfDocument.</p></div>
                    <h2>Package wizzi-ittf / behaviour</h2>
                    <h2 id="concept-11">Ittf model loader</h2>
                    <div class="summary">
                            <p>The IttfModelLoader is the transformation engine of the Wizzi Factory.</p>    <p>It is exposed by the index.js module of the wizzi-ittf package:</p>        <pre class="prettyprint-js">
    var md = module.exports = {};
    /*
        params
            ittfDocumentUri : The uri or filepath of the source PrimaryIttfDocument
            requestContext: The template binding context
            callback : The async callback function that will receive
            the resulting IttfModel or an error object
    */
    md.load = function (ittfDocumentUri, requestContext, callback) {
        if (typeof callback !== 'function') {
            throw new Error("Ittf.load. A callback is required");
        }
        // ...
    }
<p>It transforms a source IttfDocument into a final IttfModel:</p>        <ul><li>parses the IttfDocument;    </li>        <li>resolves MixinCalls, IncludeCalls and AppendHookCalls;    </li>        <li>processes template control nodes and other IttfNodeStatements;    </li>        <li>interpolates IttfNodeValues that contain IttfTemplateExpressions;    </li>        <li>rebuilds the transformed tree structure of the processed IttfDocument into a final IttfModel.    </li>    </ul>    <p>Uses the following components</p>        <ul><li>IttfLexer    </li>        <li>IttfParser    </li>        <li>IttfIncluder    </li>        <li>IttfMixer    </li>        <li>IttfAppender    </li>        <li>IttfEvaluator    </li>    </ul>    <h2>API</h2>    <p>The IttfModelLoader is used internally by WizziModelFactories, but you can access its API requiring the wizzi-ittf package.</p></div>
                    <h2 id="concept-12">Ittf evaluator</h2>
                    <div class="summary">
                            <p>Is the IttfModelLoader component that resolves the template elements of an IttfDocument.</p>    <h4>It receives in input:</h4>            <ul><li>A TempIttfModel<h4>A tree data structure that is the output of the IttfModelLoading components:        </h4>                <ul><li>IttfLexer            </li>                <li>IttfParser            </li>                <li>IttfIncluder            </li>                <li>IttfAppender            </li>                    </ul>            </li>        <li>an IttfLoadingContext; a context object passed to the IttfModelLoader.    </li>    </ul>    <p>The IttfEvaluator traverses the TempIttfModel and generates an IttfModelResolveScript, an in memory javascript module that rebuilds the tree structure of the TempIttfModel resolving TemplatedIttfNodeValues and IttfTemplateControlNodes.</p>    <p>The IttfModelResolveScript is parsed using the esprima parser and executed using the JsWizziRunner.</p>    <p>The JsWizziRunnerContext is initialized with the IttfLoadingContext and manipulated at runtime by the IttfModelResolveScript itself.</p>    <h2>API</h2>    <p>Currently the IttfEvaluator is not exposed by the wizzi-ittf package.</p></div>
                    <h2 id="concept-13">Js-Wizzi runner</h2>
                    <div class="summary">
                            <p>JsWizziRunner is the Wizzi Factory javascript processor, used to transform IttfDocuments containing IttfNodeStatements and templated IttfNodeValues into a final IttfModel.</p>    <p>It can executes Js-Wizzi scripts, a subset of javascript.</p>    <p>It uses the quite efficent <a href="http://esprima.org/">esprima</a> parsing infrastructure, and has a good performance.</p>    <p>The execution context values of the JsWizziRunner are initialized and manipulated using the JsWizziContext object that must be passed to it.</p></div>
                    <h2 id="concept-14">Js-Wizzi context</h2>
                    <div class="summary">
                            <p>Is the context object used by the JsWizziRunner.</p>    <p>The current context may be switched among 'NodeBuild', 'SourceIttfDocument' and 'Global' so it can be used to implement an IttfDocument level scope of execution.</p></div>
                    <h2>Package wizzi-schema / structure</h2>
                    <h2 id="concept-15">Wizzi schema</h2>
                    <div class="summary">
                            <p>The domains of interest for the productions of Software Artifacts are modeled using WizziSchemas, the core modeling tool of the Wizzi Factory.</p>    <p>A schema is modeled using the Ittf notation and may be composed by one or many IttfDocuments.</p>    <p>An example of WizziSchema:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">wizzischema</span><span class="pln"> rdbms</span></li><li class="L2"><span class="pnl">    </span><span class="tag">e</span><span class="pln"> catalog</span></li><li class="L3"><span class="pnl">        </span><span class="tag">r</span><span class="pln"> table/s</span></li><li class="L4"><span class="pnl">    </span><span class="tag">e</span><span class="pln"> table</span></li><li class="L5"><span class="pnl">        </span><span class="tag">r</span><span class="pln"> column/s</span></li><li class="L6"><span class="pnl">        </span><span class="tag">r</span><span class="pln"> index/es</span></li><li class="L7"><span class="pnl">    </span><span class="tag">e</span><span class="pln"> column</span></li><li class="L8"><span class="pnl">        </span><span class="tag">a</span><span class="pln"> type</span></li><li class="L9"><span class="pnl">        </span><span class="tag">a</span><span class="pln"> caption</span></li><li class="L0"><span class="pnl">        </span><span class="tag">a</span><span class="pln"> defaultValue</span></li><li class="L1"><span class="pnl">            </span><span class="tag">tag</span><span class="pln"> default</span></li><li class="L2"><span class="pnl">    </span><span class="tag">e</span><span class="pln"> index</span></li><li class="L3"><span class="pnl">        </span><span class="tag">a</span><span class="pln"> primary</span></li><li class="L4"><span class="pnl">            </span><span class="tag">type</span><span class="pln"> boolean</span></li><li class="L5"><span class="pnl">        </span><span class="tag">a</span><span class="pln"> unique</span></li><li class="L6"><span class="pnl">            </span><span class="tag">type</span><span class="pln"> boolean</span></li><li class="L7"><span class="pnl">        </span><span class="tag">r</span><span class="pln"> column/s</span></li></ol></pre><p>WizziSchemas are then transformed in javascript object models, named WizziModelTypes, that can be instantiated and loaded with instance model data by a WizziModelFactory. WizziModelInstances can be transformed and/or used as data contexts in ArtifactProductions.</p>    <p>A sample rdbms WizziModel conformant to the previous WizziSchema:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">rdbms</span><span class="pln"> School</span></li><li class="L2"><span class="pnl">    </span><span class="tag">table</span><span class="pln"> Student</span></li><li class="L3"><span class="pnl">        </span><span class="tag">column</span><span class="pln"> Id</span></li><li class="L4"><span class="pnl">            </span><span class="tag">type</span><span class="pln"> integer</span></li><li class="L5"><span class="pnl">        </span><span class="tag">column</span><span class="pln"> Name</span></li><li class="L6"><span class="pnl">            </span><span class="tag">type</span><span class="pln"> string</span></li><li class="L7"><span class="pnl">        </span><span class="tag">index</span><span class="pln"> Student-PK</span></li><li class="L8"><span class="pnl">            </span><span class="tag">primary</span><span class="pln"> true</span></li><li class="L9"><span class="pnl">            </span><span class="tag">column</span><span class="pln"> Id</span></li><li class="L0"><span class="pnl">    </span><span class="tag">table</span><span class="pln"> Course</span></li><li class="L1"><span class="pnl">        </span><span class="tag">column</span><span class="pln"> Id</span></li><li class="L2"><span class="pnl">            </span><span class="tag">type</span><span class="pln"> integer</span></li><li class="L3"><span class="pnl">        </span><span class="tag">column</span><span class="pln"> Title</span></li><li class="L4"><span class="pnl">            </span><span class="tag">type</span><span class="pln"> string</span></li><li class="L5"><span class="pnl">        </span><span class="tag">index</span><span class="pln"> Student-PK</span></li><li class="L6"><span class="pnl">            </span><span class="tag">primary</span><span class="pln"> true</span></li><li class="L7"><span class="pnl">            </span><span class="tag">column</span><span class="pln"> Id</span></li></ol></pre><p>A WizziSchema has itself a WizziModelType, with its WizziModelFactory, created from a meta schema named 'wizzischema'.</p>    <p>WizziModelTypes and WizziModelFactories are artifacts generated from a WizziSchema by a WizziModelProduction.</p>    <p>See the WizziSchema specification.</p></div>
                    <h2 id="concept-16">Wizzi meta schema</h2>
                    <div class="summary">
                            <p>A WizziMetaSchema is the meta model of a WizziSchema.</p>    <p>It models a WizziSchema with the same notation with which a WizziSchema models a WizziModelType.</p>    <p>It describes the model elements: WizziSchema, Element, Attribute, Relation, Restrict, ExportTo, Require and Method.</p>    <h3>WizziSchema element</h3>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">wizzischema</span><span class="pln"> schema-name</span></li><li class="L2"><span class="pnl">    </span><span class="tag">[0..n]<b><i>requires</i></b></span><span class="pln"> </span></li><li class="L3"><span class="pnl">    </span><span class="tag">[0..n]<b><i>exportTos</i></b></span><span class="pln"> </span></li><li class="L4"><span class="pnl">    </span><span class="tag">[1..n]<b><i>elements</i></b></span><span class="pln"> </span></li></ol></pre><h2>Model elements</h2>    <h3>Element element</h3>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">e</span><span class="pln"> element-name [: super-element-name]</span></li><li class="L3"><span class="pnl">        </span><span class="tag"><i>super</i></span><span class="pln"> super-element-name</span></li><li class="L4"><span class="pnl">        </span><span class="tag"><i>tag</i></span><span class="pln"> tag-string</span></li><li class="L5"><span class="pnl">        </span><span class="tag"><i>xml-tag</i></span><span class="pln"> xml-tag-string</span></li><li class="L6"><span class="pnl">        </span><span class="tag"><i>is-abstract</i></span><span class="pln"> </span></li><li class="L7"><span class="pnl">        </span><span class="tag"><i>is-root</i></span><span class="pln"> </span></li><li class="L8"><span class="pnl">        </span><span class="tag"><i>name-is-required</i></span><span class="pln"> </span></li><li class="L9"><span class="pnl">        </span><span class="tag"><i>add-to-children</i></span><span class="pln"> </span></li><li class="L0"><span class="pnl">        </span><span class="tag">[0..n]<b><i>attributes</i></b></span><span class="pln"> </span></li><li class="L1"><span class="pnl">        </span><span class="tag">[0..n]<b><i>relations</i></b></span><span class="pln"> </span></li><li class="L2"><span class="pnl">        </span><span class="tag">[0..n]<b><i>methods</i></b></span><span class="pln"> </span></li></ol></pre><h3>Relation element</h3>    <p>Format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">r</span><span class="pln"> related-element-name[ [plural-suffix-a] / plural-suffix-b ]</span></li><li class="L3"><span class="pnl">        </span><span class="tag"><i>one-to-one</i></span><span class="pln"> </span></li><li class="L4"><span class="pnl">        </span><span class="tag"><i>no-get</i></span><span class="pln"> </span></li></ol></pre><p>Example:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">e</span><span class="pln"> table : dbitem</span></li><li class="L3"><span class="pnl">        </span><span class="tag">r</span><span class="pln"> column/s</span></li><li class="L4"><span class="pnl">        </span><span class="tag">r</span><span class="pln"> propert-y/ies</span></li><li class="L5"><span class="pnl">        </span><span class="tag">r</span><span class="pln"> displayLayout</span></li><li class="L6"><span class="pnl">            </span><span class="tag">one-to-one</span><span class="pln"> </span></li></ol></pre><p>related-element-name plus the eventual plural-suffix-a must give the name of an Element element defined in the schema (that is the related Element); in the example: column, property, displayLayout.</p>    <h3>Attribute element</h3>    <p>Describes an attribute of an Element element.</p>    <p>Format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">a</span><span class="pln"> attribute-name</span></li><li class="L3"><span class="pnl">        </span><span class="tag"><i>tag</i></span><span class="pln"> tag-string</span></li><li class="L4"><span class="pnl">        </span><span class="tag"><i>xml-tag</i></span><span class="pln"> xml-tag-string</span></li><li class="L5"><span class="pnl">        </span><span class="tag"><i>type</i></span><span class="pln"> type-name</span></li><li class="L6"><span class="pnl">        </span><span class="tag"><i>default</i></span><span class="pln"> default-value</span></li><li class="L7"><span class="pnl">        </span><span class="tag"><i>default-when-declared</i></span><span class="pln"> default-value-when-declared</span></li><li class="L8"><span class="pnl">        </span><span class="tag"><i>is-datatype</i></span><span class="pln"> </span></li><li class="L9"><span class="pnl">        </span><span class="tag"><i>is-required</i></span><span class="pln"> </span></li><li class="L0"><span class="pnl">        </span><span class="tag">[0..n]<b><i>restricts</i></b></span><span class="pln"> </span></li></ol></pre><h3>Restrict element</h3>    <p>Format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">restrict</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="tag">[0..n]enum</span><span class="pln"> enum-value</span></li><li class="L4"><span class="pnl">        </span><span class="tag"><i>max-length</i></span><span class="pln"> value</span></li><li class="L5"><span class="pnl">        </span><span class="tag"><i>min-length</i></span><span class="pln"> value</span></li><li class="L6"><span class="pnl">        </span><span class="tag"><i>max-value</i></span><span class="pln"> value</span></li><li class="L7"><span class="pnl">        </span><span class="tag"><i>min-value</i></span><span class="pln"> value</span></li><li class="L8"><span class="pnl">        </span><span class="tag"><i>regexp</i></span><span class="pln"> value</span></li></ol></pre><h2>Model type code elements</h2>    <p>The following elements of the WizziMetaSchema consent the insertion of javascript code in the WizziModelType that will be generated by the WizziModelProduction</p>    <h3>ExportTo element</h3>    <p>Format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">wizzischema</span><span class="pln"> schema-name</span></li><li class="L2"><span class="pnl">    </span><span class="tag">export-to</span><span class="pln"> format-name</span></li></ol></pre><p>Corrently available format is: 'json'.</p>    <p>En exportTo element causes the insertion in the WizziModelType of the WizziSchema of the prototype functions for exporting the tree data structure of the model in the requested format.</p>    <h3>Require element</h3>    <p>Format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">wizzischema</span><span class="pln"> schema-name</span></li><li class="L2"><span class="pnl">    </span><span class="tag">require</span><span class="pln"> module-name</span></li><li class="L3"><span class="pnl">        </span><span class="tag"><i>declare-var</i></span><span class="pln"> var-name</span></li><li class="L4"><span class="pnl">        </span><span class="tag"><i>invoke</i></span><span class="pln"> invoke-string</span></li><li class="L5"><span class="pnl">        </span><span class="tag"><i>kind</i></span><span class="pln"> kind-name</span></li></ol></pre><h3>Method element</h3>    <p>Declares a method that will be added in the WizziModelType to the pseudo-class of the containing Element. The method can access and manipulate the entire model tree structure.</p>    <p>Format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> method-name</span></li><li class="L3"><span class="pnl">        </span><span class="tag">[0..n]<b><i>params</i></b></span><span class="pln"> </span></li><li class="L4"><span class="pnl">        </span><span class="tag">[0..n]<b><i>statements</i></b></span><span class="pln"> </span></li></ol></pre><h3>Parameter element</h3>    <p>Format:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">param</span><span class="pln"> param-name</span></li></ol></pre><h3>Statement element</h3>    <p>The statement element uses a subset of the CodeWizziSchema 'js'</p></div>
                    <h2 id="concept-17">Wizzi model type</h2>
                    <div class="summary">
                            <p>A WizziModelType is the javascript representation of a WizziSchema.</p>    <p>Mapping of a WizziSchema to a WizziModelType</p>            <table><tr><td>Require element        </td>            <td>javascript/jsnode require statement        </td>            </tr>            <tr><td>Element element        </td>            <td>javascript pseudo-class        </td>            </tr>            <tr><td>Super attribute        </td>            <td>javascript pseudo-inehritance.        </td>            </tr>            <tr><td>Attribute element        </td>            <td>Property of a primitive type of the element pseudo-class        </td>            </tr>            <tr><td>Restrict element        </td>            <td>Validation statements in the wzVerify method of the element pseudo-class        </td>            </tr>            <tr><td>One-to-many Relation element        </td>            <td>javascript array of Right elements as a property of Left element pseudo-class        </td>            </tr>            <tr><td>One-to-one Relation element        </td>            <td>javascript object of Right element as a property of Left element pseudo-class        </td>            </tr>            <tr><td>Method element        </td>            <td>javascript function in the prototype of the element pseudo-class        </td>            </tr>            <tr><td>ExportTo element        </td>            <td>javascript function in the prototype of the element pseudo-class that implements the export of the model instance        </td>            </tr>    </table>    <p>WizziModelType pseudo-classes are instantiated by the WizziModelFactory during a WizziModelLoading.</p></div>
                    <h2 id="concept-18">Wizzi model instance</h2>
                    <div class="summary">
                            <p>A WizziModelInstance is an instance of a WizziModelType created by a WizziModelFactory.</p>    <h4>It is a javascript object that may be used as a context object:</h4>        <ul><li>in an ArtifactGeneration;    </li>        <li>in a WizziModelTransformation;    </li>        <li>in the WizziModelLoading of another WizziModelInstance.    </li>    </ul></div>
                    <h2>Package wizzi-schema / behaviour</h2>
                    <h2 id="concept-19">Wizzi model factory</h2>
                    <div class="summary">
                            <p>A WizziModelFactory loads an IttfDocument into a WizziModelInstance of a WizziModelType.</p>    <p>Uses the IttfModelLoader to load the IttfDocument into an IttfModel.</p>    <p>Instantiate the WizziModelInstance and calls its LoadFrom method passing the IttfModel as an argument.</p>    <p>Calls the wzInitialize and wzVerify methods on the WizziModelInstance.</p>    <p>If the model is validated returns it through a callback.</p></div>
                    <h2 id="concept-20">Wizzi model production</h2>
                    <div class="summary">
                            <p>The WizziModelProduction is the Wizzi Factory production that generates a WizziModelType and its WizziModelFactory from a WizziSchema.</p>    <p>It is packaged in the wizzi-schema package for convenience reasons in the bootstrap stage of the Wizzi Factory.</p>    <h2>API</h2>    <p /></div>
                    <h2>Package wizzi-factory / structure</h2>
                    <h2 id="WizziFactoryPackage">Wizzi Factory Package</h2>
                    <div class="summary">
                            <p>ArtifactProductions are packaged in node.js/npm modules containing:</p>        <ul><li>WizziSchemas    </li>        <li>WizziModelTypes    </li>        <li>WizziModelFactories    </li>        <li>WizziModelTransformers    </li>        <li>ArtifactGenerators    </li>    </ul>    <p>A WizziFactoryPackage has a standard folder structure</p>        <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">node_modules</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">&lt;package-name&gt</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="tag">lib</span><span class="pln"> </span></li><li class="L4"><span class="pnl">            </span><span class="tag">artifacts</span><span class="pln"> </span></li><li class="L5"><span class="pnl">                </span><span class="tag">&lt;wizzischema-name&gt</span><span class="pln"> </span></li><li class="L6"><span class="pnl">                    </span><span class="tag">&lt;artifact-name&gt</span><span class="pln"> </span></li><li class="L7"><span class="pnl">                        </span><span class="tag">gen</span><span class="pln"> </span></li><li class="L8"><span class="pnl">                            </span><span class="tag">ittf</span><span class="pln"> </span></li><li class="L9"><span class="pnl">                                </span><span class="tag">[0..n]&lt;ittfdocument-name&gt.&lt;language-wizzi-schema&gt.ittf</span><span class="pln"> </span></li><li class="L0"><span class="pnl">                            </span><span class="tag">main.js</span><span class="pln"> </span></li><li class="L1"><span class="pnl">                            </span><span class="tag">[0..n]&lt;helper-module&gt.js</span><span class="pln"> </span></li><li class="L2"><span class="pnl">                    </span><span class="tag">&lt;transformer-name&gt</span><span class="pln"> </span></li><li class="L3"><span class="pnl">                        </span><span class="tag">trans</span><span class="pln"> </span></li><li class="L4"><span class="pnl">                            </span><span class="tag">main.js</span><span class="pln"> </span></li><li class="L5"><span class="pnl">                            </span><span class="tag">[0..n]&lt;helper-module&gt.js</span><span class="pln"> </span></li><li class="L6"><span class="pnl">            </span><span class="tag">wizzi</span><span class="pln"> </span></li><li class="L7"><span class="pnl">                </span><span class="tag">models</span><span class="pln"> </span></li><li class="L8"><span class="pnl">                    </span><span class="tag">&lt;wizzischema-name&gt;-model.js</span><span class="pln"> </span></li><li class="L9"><span class="pnl">                    </span><span class="tag">&lt;wizzischema-name&gt;-factory.js</span><span class="pln"> </span></li><li class="L0"><span class="pnl">                </span><span class="tag">schemas</span><span class="pln"> </span></li><li class="L1"><span class="pnl">                    </span><span class="tag">&lt;wizzischema-name&gt;.wizzischema.ittf</span><span class="pln"> </span></li><li class="L2"><span class="pnl">        </span><span class="tag">index.js</span><span class="pln"> </span></li></ol></pre><p>The index.js module of the package exports the functions:<li>getWizziModelFactory(wizziSchemaName)    </li>        <li>getModelTransformer(transformerPath)    </li>        <li>getArtifactGenerator(artifactPath)    </li>    </p></div>
                    <h2 id="ProductionManager">ProductionManager</h2>
                    <div class="summary">
                            <p>The ProductionManager is a node.js module that orchestrate the execution of a WizziFactoryJob.</p>    <p>A job may request ArtifactProductions available in many WizziFactoryPackages.</p>    <p>Jobs are modeled using the <i>wfjob</i> WizziSchema, and are executed passing the uri of the PrimaryIttfDocument of a wfjob to the ProductionManager.</p>    <p>Required WizziFactoryPackages must be registered to the ProductionManager before calling a job execution.</p>    <p>They must be npm installed. A global install is recommended.</p>    <h3>An example of the execution of a Production job</h3>    <pre class="prettyprint-js">
    var path = require('path');
    var util = require('util');
    var log = require('wizzi-core').log(module);
    var ProductionManager = require('wizzi-factory').ProductionManager;
    var options = require('wizzi-factory').options;
    var thisWizziModule = require('./index');
    
    var pman = new ProductionManager(options({
        indentSpaces: 4, // 1 indent (tab) = 4 spaces
        basedir: __dirname,
        verbose: 2 // 0= error only, 1=warnings, 2=all
    }));
    pman.registerWizziModule(thisWizziModule);
    pman.addWfJob({
        options: {}, // optional, override production options
        wfjob: {
            src: path.join(__dirname, 'lib', 'ittf', 'wizzifactory.wfjob.ittf')
        }
    });
    pman.run(function (err, result) {
        if (err) {
            return log.error('Error running production: ' + util.inspect(err, { depth: null }));
        }
        log.success('run completed');
        pman.persistToFile(function (err, result) {
            if (err) {
                return log.error('Error persisting production to file: ' + util.inspect(err, { depth: null }));
            }
            log.success('persistToFile completed');
        });
    });
</div>
                    <h2 id="wfjob-WizziSchema">The wfjob Wizzi Schema</h2>
                    <div class="summary">
                            <h3>The wfjob Ittf notation</h3>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">wfjob</span><span class="pln"> job-name</span></li><li class="L2"><span class="pnl">    </span><span class="tag">models-base-folder</span><span class="pln"> models-folder-path</span></li><li class="L3"><span class="pnl">    </span><span class="tag">dest-base-folder</span><span class="pln"> dest-folder-path</span></li><li class="L4"><span class="pnl">    </span><span class="kwd">$$[0..n]<b><i>models</i></b></span><span class="pln"> </span></li><li class="L5"><span class="pnl">    </span><span class="tag">model</span><span class="pln"> model-name</span></li><li class="L6"><span class="pnl">        </span><span class="tag">src</span><span class="pln"> src-path</span></li><li class="L7"><span class="pnl">        </span><span class="tag">schema</span><span class="pln"> schema-name</span></li><li class="L8"><span class="pnl">        </span><span class="kwd">$$[0..n]<b><i>modelRefs</i></b></span><span class="pln"> </span></li><li class="L9"><span class="pnl">        </span><span class="tag">model-ref</span><span class="pln"> model-name</span></li><li class="L0"><span class="pnl">            </span><span class="tag">export-name</span><span class="pln"> </span></li><li class="L1"><span class="pnl">            </span><span class="kwd">$$[0..n]<b><i>transformers</i></b></span><span class="pln"> </span></li><li class="L2"><span class="pnl">            </span><span class="tag">transformer</span><span class="pln"> transformer-name</span></li><li class="L3"><span class="pnl">    </span><span class="tag" /><span class="pln"> </span></li><li class="L4"><span class="pnl">    </span><span class="kwd">$$[1..n]<b><i>lines</i></b></span><span class="pln"> </span></li><li class="L5"><span class="pnl">    </span><span class="tag">line</span><span class="pln"> line-name</span></li><li class="L6"><span class="pnl">        </span><span class="tag">cwd-folder</span><span class="pln"> cwd-folder-path</span></li><li class="L7"><span class="pnl">        </span><span class="tag">dest-folder</span><span class="pln"> dest-folder-path</span></li><li class="L8"><span class="pnl">        </span><span class="kwd">$$[1..n]<b><i>artifacts</i></b></span><span class="pln"> </span></li><li class="L9"><span class="pnl">        </span><span class="tag">artifact</span><span class="pln"> artifact-name</span></li><li class="L0"><span class="pnl">            </span><span class="tag">src</span><span class="pln"> ittfdocument-path</span></li><li class="L1"><span class="pnl">            </span><span class="tag">schema</span><span class="pln"> language-schema-name</span></li><li class="L2"><span class="pnl">            </span><span class="tag">generation</span><span class="pln"> artifact-generator-name</span></li><li class="L3"><span class="pnl">            </span><span class="tag">dest-path</span><span class="pln"> artifact-file-path</span></li><li class="L4"><span class="pnl">            </span><span class="tag">extension</span><span class="pln"> artifact-file-extension</span></li><li class="L5"><span class="pnl">            </span><span class="kwd">$$</span><span class="pln"> [0..n]&lt;b&gt;&lt;i&gt;modelRefs&lt;/i&gt;&lt;/b&gt;</span></li><li class="L6"><span class="pnl">            </span><span class="tag">model-ref</span><span class="pln"> model-name</span></li><li class="L7"><span class="pnl">                </span><span class="tag">export-name</span><span class="pln"> </span></li><li class="L8"><span class="pnl">                </span><span class="kwd">$$</span><span class="pln"> [0..n]&lt;b&gt;&lt;i&gt;transformers&lt;/i&gt;&lt;/b&gt;</span></li><li class="L9"><span class="pnl">                </span><span class="tag">transformer</span><span class="pln"> transformer-name</span></li><li class="L0"><span class="pnl">    </span><span class="tag" /><span class="pln"> </span></li><li class="L1"><span class="pnl">    </span><span class="kwd">$$[1..n]<b><i>productions</i></b></span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">production</span><span class="pln"> production-name</span></li><li class="L3"><span class="pnl">        </span><span class="tag">dest-folder</span><span class="pln"> dest-folder-path</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$$[1..n]<b><i>lineRefs</i></b></span><span class="pln"> </span></li><li class="L5"><span class="pnl">        </span><span class="tag">line-ref</span><span class="pln"> line-name</span></li><li class="L6"><span class="pnl">    </span><span class="tag" /><span class="pln"> </span></li></ol></pre><h3>An example of wfjob</h3><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">wfjob</span><span class="pln"> documentation</span></li><li class="L2"><span class="pnl">    </span><span class="tag" /><span class="pln"> </span></li><li class="L3"><span class="pnl">    </span><span class="kwd">$</span><span class="expr"> </span></li><li class="L4"><span class="pnl">        </span><span class="expr">var</span><span class="expr"> models_folder = __dirname;</span></li><li class="L5"><span class="pnl">        </span><span class="expr">var</span><span class="expr"> src_root_folder = models_folder;</span></li><li class="L6"><span class="pnl">        </span><span class="expr">var</span><span class="expr"> dest_folder = path.resolve(models_folder, ../out );</span></li><li class="L7"><span class="pnl">    </span><span class="tag" /><span class="pln"> </span></li><li class="L8"><span class="pnl">    </span><span class="tag">models-base-folder</span><span class="pln"> ${models_folder}</span></li><li class="L9"><span class="pnl">    </span><span class="tag" /><span class="pln"> </span></li><li class="L0"><span class="pnl">    </span><span class="tag">model</span><span class="pln"> overview</span></li><li class="L1"><span class="pnl">        </span><span class="tag">src</span><span class="pln"> overview.docs.ittf</span></li><li class="L2"><span class="pnl">        </span><span class="tag">schema</span><span class="pln"> docs</span></li><li class="L3"><span class="pnl">    </span><span class="tag" /><span class="pln"> </span></li><li class="L4"><span class="pnl">    </span><span class="tag">line</span><span class="pln"> root</span></li><li class="L5"><span class="pnl">        </span><span class="tag">cwd-folder</span><span class="pln"> ${src_root_folder}</span></li><li class="L6"><span class="pnl">        </span><span class="tag">artifact</span><span class="pln"> overview.html.ittf</span></li><li class="L7"><span class="pnl">            </span><span class="tag">src</span><span class="pln"> overview.html.ittf</span></li><li class="L8"><span class="pnl">            </span><span class="tag">generator</span><span class="pln"> html/document</span></li><li class="L9"><span class="pnl">            </span><span class="tag">schema</span><span class="pln"> html</span></li><li class="L0"><span class="pnl">            </span><span class="tag">extension</span><span class="pln"> html</span></li><li class="L1"><span class="pnl">            </span><span class="tag">model-ref</span><span class="pln"> overview</span></li><li class="L2"><span class="pnl">                </span><span class="tag">transformer</span><span class="pln"> docs/preprint</span></li><li class="L3"><span class="pnl">    </span><span class="tag" /><span class="pln"> </span></li><li class="L4"><span class="pnl">    </span><span class="tag">production</span><span class="pln"> </span></li><li class="L5"><span class="pnl">        </span><span class="tag">dest-folder</span><span class="pln"> ${dest_folder}</span></li><li class="L6"><span class="pnl">        </span><span class="tag">line-ref</span><span class="pln"> root</span></li></ol></pre></div>
                    <h2>Package wizzi-factory / behaviour</h2>
                    <h2 id="concept-24">Artifact generation</h2>
                    <div class="summary">
                            <p>The Wizzi Factory uses three kinds of artifact generators.</p>        <ul><li>IttfTemplates    </li>        <li>SwigTemplates    </li>        <li>CodeWriters    </li>    </ul>    <p>IttfTemplates are IttfDocuments conformants to a LanguageWizziSchema (js, html, css, ...).</p>    <p>SwigTemplates are text documents that will be transformed using the <a href="http://paularmstrong.github.io/swig/">swig</a> template engine.</p>    <p>CodeWriters are node.js modules that generate an artifact by code.</p></div>
                    <h2 id="concept-25">IttfTemplate artifact</h2>
                    <div class="summary">
                            <p>An artifact using the IttfTemplate method has a template that is an IttfDocument conformant to a LanguageWizziSchema.</p>    <p>For example a js WizziSchema template:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag" /><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$foreach</span><span class="pln"> table in rdbms.tables</span></li><li class="L3"><span class="pnl">        </span><span class="tag">class</span><span class="pln"> ${table.name}</span></li><li class="L4"><span class="pnl">            </span><span class="tag">super</span><span class="pln"> TableObject</span></li><li class="L5"><span class="pnl">            </span><span class="tag">ctor</span><span class="pln"> </span></li><li class="L6"><span class="pnl">                </span><span class="kwd">$foreach</span><span class="pln"> column in table.columns</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> this.${column.name} = ${column.default}</span></li></ol></pre><p>The artifact generator exposed to the Wizzi Factory must be a node.js module named main.js.</p>    <p>The CodeWriteArtifact module and the IttfDocument must must have this location in the WizziFactoryPackage:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">node_modules</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">&lt;package-name&gt</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="tag">lib</span><span class="pln"> </span></li><li class="L4"><span class="pnl">            </span><span class="tag">artifacts</span><span class="pln"> </span></li><li class="L5"><span class="pnl">                </span><span class="tag">&lt;wizzischema-name&gt</span><span class="pln"> </span></li><li class="L6"><span class="pnl">                    </span><span class="tag">&lt;artifact-name&gt</span><span class="pln"> </span></li><li class="L7"><span class="pnl">                        </span><span class="tag">gen</span><span class="pln"> </span></li><li class="L8"><span class="pnl">                            </span><span class="tag">ittf</span><span class="pln"> </span></li><li class="L9"><span class="pnl">                                </span><span class="tag">ittfdocument-name.&lt;language-wizzi-schema&gt.ittf</span><span class="pln"> </span></li><li class="L0"><span class="pnl">                            </span><span class="tag">main.js</span><span class="pln"> </span></li></ol></pre><p>The path &lt;wizzischema-name&gt/&lt;artifact-name&gt must be unique in the Wizzi Factory and is the value to be declared in the generator attribute of the artifact element of a wfjob document.</p>    <p>For example:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">wfjob</span><span class="pln"> job-name</span></li><li class="L2"><span class="pnl">    </span><span class="tag" /><span class="pln"> </span></li><li class="L3"><span class="pnl">    </span><span class="tag">line</span><span class="pln"> line-name</span></li><li class="L4"><span class="pnl">        </span><span class="tag">artifact</span><span class="pln"> artifact-name</span></li><li class="L5"><span class="pnl">            </span><span class="tag">...</span><span class="pln"> </span></li><li class="L6"><span class="pnl">            </span><span class="tag">generator</span><span class="pln"> &lt;wizzischema-name&gt/&lt;artifact-name&gt</span></li><li class="L7"><span class="pnl">            </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre><p>A sample IttfTemplateArtifact node.js code:</p>        <pre class="prettyprint-js">
    var util = require('util');
    var path = require('path');
    var yyyWizziPackage = require('yyyWizziPackage');
    var jsModuleGenerator = yyyWizziPackage.getArtifactGenerator('js/module');
    var md = module.exports = {};
    var myname = 'rdbms.mongodbtableschema.main';
    /*
        parameters
            model: a WizziModelInstance of schema 'rdbms'
            ctx: an ArtifactGenerationContext instance
    */
    md.gen = function (model, ctx) {
        var ittfPath = path.join(__dirname, 'ittf', 'xxx.js.ittf');
        jsModuleGenerator(ittfPath, {
            schema: model,
        }, function(err, result) {
            if (err) { throw new Error(err); }
            ctx.w(result);
        });
    }
<p>See the specification of the ArtifactGenerationContext passed to the CodeWriteArtifact.</p></div>
                    <h2 id="concept-26">SwigTemplate artifact</h2>
                    <div class="summary">
                            <p>An artifact using the SwigTemplate method is a text document that will be processed by the <a href="http://paularmstrong.github.io/swig/">swig</a> template engine.</p>    <p>For example:</p>        <pre class="prettyprint-js">
    {% for table in rdbms.tables %}
        function {{table.name}}() {
            {% for column in table.columns %}
                this.{{column.name}} = {{column.default}};
            {% endfor %}
        }
        util.inherit({{table.name}}, TableObject);
    {% endfor %}
<p>The artifact generation from a swig template is built-in in the Wizzi Factory and do not require a node.js module.</p>    <p>To declare a SwigTemplateArtifact in a wfjob document the generator attribute of the artifact element must have value 'swig'</p>    <p>For example:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">wfjob</span><span class="pln"> job-name</span></li><li class="L2"><span class="pnl">    </span><span class="tag" /><span class="pln"> </span></li><li class="L3"><span class="pnl">    </span><span class="tag">line</span><span class="pln"> line-name</span></li><li class="L4"><span class="pnl">        </span><span class="tag">artifact</span><span class="pln"> artifact-name</span></li><li class="L5"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> </span></li><li class="L6"><span class="pnl">        </span><span class="tag">generator</span><span class="pln"> swig</span></li><li class="L7"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre></div>
                    <h2 id="concept-27">CodeWrite artifact</h2>
                    <div class="summary">
                            <p>An artifact using the code write method has no template.</p>    <p>The ArtifactGenerator exposed to the Wizzi Factory is a node.js module that contains the statements for generating the artifact writing its content into the ArtifactGenerationContext that is passed to the ArtifactGenerator as a parameter by the ProductionManager.</p>    <p>The CodeWriteArtifact module must be named main.js and must have this location in the WizziFactoryPackage:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">node_modules</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">&lt;package-name&gt</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="tag">lib</span><span class="pln"> </span></li><li class="L4"><span class="pnl">            </span><span class="tag">artifacts</span><span class="pln"> </span></li><li class="L5"><span class="pnl">                </span><span class="tag">&lt;wizzischema-name&gt</span><span class="pln"> </span></li><li class="L6"><span class="pnl">                    </span><span class="tag">&lt;artifact-name&gt</span><span class="pln"> </span></li><li class="L7"><span class="pnl">                        </span><span class="tag">gen</span><span class="pln"> </span></li><li class="L8"><span class="pnl">                            </span><span class="tag">main.js</span><span class="pln"> </span></li></ol></pre><p>The path &lt;wizzischema-name&gt/&lt;artifact-name&gt must be unique in the Wizzi Factory and is the value to be declared in the generator attribute of the artifact element of a wfjob document.</p>    <p>For example</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">wfjob</span><span class="pln"> job-name</span></li><li class="L2"><span class="pnl">    </span><span class="tag" /><span class="pln"> </span></li><li class="L3"><span class="pnl">    </span><span class="tag">line</span><span class="pln"> line-name</span></li><li class="L4"><span class="pnl">        </span><span class="tag">artifact</span><span class="pln"> artifact-name</span></li><li class="L5"><span class="pnl">            </span><span class="tag">...</span><span class="pln"> </span></li><li class="L6"><span class="pnl">            </span><span class="tag">generator</span><span class="pln"> &lt;wizzischema-name&gt/&lt;artifact-name&gt</span></li><li class="L7"><span class="pnl">            </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre><p>A sample CodeWriteArtifact node.js code:</p>        <pre class="prettyprint-js">
    var md = module.exports = {};
    var myname = 'rdbms.mongodbtableschema.main';
    /*
        parameters
            model: a WizziModelInstance of schema 'rdbms'
            ctx: an ArtifactGenerationContext instance
    */
    md.gen = function (model, ctx) {
        model.tables.forEach(function (table) {
            
            // write statements using the ctx object write functions
            ctx.w('...')     // write with line feed
            ctx.write('...') // write without line feed
            ctx.a('VARNAME', value) // declare a context variable
            ctx.w('xxx {VARNAME}(yyy)') // write with line feed and interpolation
        });
    }
<p>See the specification of the ArtifactGenerationContext passed to the CodeWriteArtifact.</p></div>
                    <h2 id="concept-28">Wizzi model transformer</h2>
                    <div class="summary">
                            <p>Wizzi Factory model transformers are node.js modules with a specific interface.</p>    <p>WizziModelTransformer sample:</p>        <pre class="prettyprint-js">
    var error = require('wizzi-core').error;
    var md = module.exports = {};
    var myname = 'model.transformer.xxx.main';
    md.trans = function(model, ctx, callback) {
        if (model.wzElement != 'xxx') {
            error.error(myname + '.gen. Model wzElement must be xxx. Found: ' + model.wzElement, model);
        }
        var __result = {};
        ...
        // transformation statements
        ...
        callback(null, __result);
    };
<p>A WizziModelTransformer must have this location in the WizziFactoryPackage:</p>    <pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">node_modules</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">&lt;package-name&gt</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="tag">lib</span><span class="pln"> </span></li><li class="L4"><span class="pnl">            </span><span class="tag">artifacts</span><span class="pln"> </span></li><li class="L5"><span class="pnl">                </span><span class="tag">&lt;wizzischema-name&gt</span><span class="pln"> </span></li><li class="L6"><span class="pnl">                    </span><span class="tag">&lt;transformer-name&gt</span><span class="pln"> </span></li><li class="L7"><span class="pnl">                        </span><span class="tag">trans</span><span class="pln"> </span></li><li class="L8"><span class="pnl">                            </span><span class="tag">main.js</span><span class="pln"> </span></li></ol></pre><p>The path &lt;wizzischema-name&gt/&lt;transformer-name&gt must be unique in the Wizzi Factory and is the value to be declared in the transformer attribute of the model-ref element of a wfjob document.</p>    <p>For example:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl" /><span class="tag">wfjob</span><span class="pln"> job-name</span></li><li class="L2"><span class="pnl">    </span><span class="tag" /><span class="pln"> </span></li><li class="L3"><span class="pnl">    </span><span class="tag">line</span><span class="pln"> line-name</span></li><li class="L4"><span class="pnl">        </span><span class="tag">artifact</span><span class="pln"> artifact-name</span></li><li class="L5"><span class="pnl">            </span><span class="tag">...</span><span class="pln"> </span></li><li class="L6"><span class="pnl">            </span><span class="tag">model-ref</span><span class="pln"> model-name</span></li><li class="L7"><span class="pnl">                </span><span class="tag">transformer</span><span class="pln"> transformer-path</span></li><li class="L8"><span class="pnl">            </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre></div>
                </section>
            </div>
        </main>
        <script src="wizzifactory.js"></script>
    </body>

</html>
