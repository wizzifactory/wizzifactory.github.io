<!doctype html>
<html VERSION-5="5" VERSION-4="4" version="5">
    <head>
        <title>The Wizzi Factory</title>
        <link href="normalize.css" rel="stylesheet">
        <link href="wizzifactory.css" rel="stylesheet">
    </head>
    <body>
        <a href="https://github.com/wizzifactory"><img style="position: fixed; top: 0; right: 0; border: 0; z-index: 100;" src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png">
        </a>
        <header class="header" role="banner">
            <div class="header-logo">
                <a class="logo" href="index.html">Wizzi Factory</a>
            </div>
            <nav role="navigation" class="header-items">
                <a class="header-item" href="overview.html">View</a>
                <a class="header-item" href="starter.html">Starters</a>
                <a class="selected-header-item" href="docs.html">Documentation</a>
                <a class="header-item" href="specs.html">Specs</a>
                <a class="header-item" href="labs.html">Labs</a>
                <a class="header-item" href="project.html">Project</a>
                <a class="header-item" href="contribs.html">Contribs</a>
            </nav>
        </header>
        <main>
            <div class="main-sidebar-left">
                <section id="main-toc" class="toc">
                    <h3>Contents:</h3>
                    <ol>
                        <li><a href="#concept-1">Introduction</a>
                        </li>
                        <li><a>Package: wizzi-core</a>
                        <ol>
                            <li><a href="#concept-2">Utility modules</a>
                            </li>
                        </ol>
                        </li>
                        <li><a>Package: wizzi-ittf / structure</a>
                        <ol>
                            <li><a href="#concept-3">Ittf notation</a>
                            </li>
                            <li><a href="#concept-4">Ittf document</a>
                            </li>
                            <li><a href="#concept-5">Templateable ittf document</a>
                            </li>
                            <li><a href="#concept-6">Js-Wizzi</a>
                            </li>
                            <li><a href="#concept-7">Ittf command nodes</a>
                            </li>
                            <li><a href="#concept-8">Primary Ittf document</a>
                            </li>
                            <li><a href="#concept-9">Mixin ittf document</a>
                            </li>
                            <li><a href="#concept-10">Includeable ittf document</a>
                            </li>
                        </ol>
                        </li>
                    </ol>
                </section>
            </div>
            <div class="main-content">
                <h2 id="concept-1">Introduction</h2>
                <div class="summary">
                    <p>Software Artifacts are generated by <a href="#WizziFactoryProduction">WizziFactoryProductions</a>.</p><h4>To setup productions you must build <a href="#WizziFactoryPackage">WizziFactoryPackages</a> that expose:</h4><ul>    <li>WizziSchemas    </li><li>WizziModelTypes    </li><li>WizziModelFactories    </li><li>WizziModelTransformers    </li><li>ArtifactGenerators    </li></ul><h4>There are 4 standard packages on which you can build a WizziPackage:</h4><ul>    <li>wizzi-core    </li><li>wizzi-ittf    </li><li>wizzi-schema    </li><li>wizzi-factory    </li></ul><p>A fifth standard package, wizzi-legacy, contains the implementation of some WizziLanguageSchemas of a previous sperimental version of the Wizzi Factory that are used for bootstrapping the project. They are the js (javascript), html, css and json WizziLanguageSchema.</p><p>This documentation describes the structural and behavioural components of the standard packages.</p><p>For a step by step tutorial on how to build the first WizziPackage and the first WizziFactoryProduction go to the <a href="starter.js">Starter</a> section.</p><p>To search prototypes that you may integrate into your solutions go to the <a href="labs.js">Labs</a> section.</p><p>The wizzi-legacy package is not used to build Starter and Labs WizziPackages; they develop their own versions of WizziLanguageSchemas.</p></div>
                <section>
                    <h2>Package wizzi-core</h2>
                    <h2 id="concept-2">Utility modules</h2>
                    <div class="summary">
                        <h4>The wizzi-core package contains a set of utility modules concerning:</h4><ul>    <li>file management;    </li><li>logging;    </li><li>error management;    </li><li>string, xml and html writing;    </li><li>interpolation;    </li><li>lineparsing;    </li><li>various verify functions.    </li></ul></div>
                    <h2>Package wizzi-ittf / structure</h2>
                    <h2 id="concept-3">Ittf notation</h2>
                    <div class="summary">
                        <p>Ittf stays for Indented Text Tree Format, the notation format of every wizzi factory model.</p><p>It is a textual representation of a <a href="https://en.wikipedia.org/wiki/Tree_(data_structure)">tree data structure</a> where child nodes are indented one level below their parent.</p><p>Example. This is a tree data structure in Ittf format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">html</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">body</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="tag">ul</span><span class="pln"> </span></li><li class="L4"><span class="pnl">            </span><span class="tag">li</span><span class="pln"> </span></li><li class="L5"><span class="pnl">                </span><span class="tag">a</span><span class="pln"> The Wizzi Factory</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">href</span><span class="pln"> https://wizzifactory.github.io</span></li></ol></pre><p>Some Ittf terms:</p><table class="pretty-table">    <tr>        <td>IttfDocument        </td><td>A text document containing a tree data structure written using the Ittf notation.        </td>    </tr><tr>        <td>IttfNode        </td><td>A node item; a string of chars on a single line, that is parsed in a name, value pair separated by a whitechar (space or TAB).        </td>    </tr><tr>        <td>Name        </td><td>The name part of an IttfNode, also IttfNodeTag.        </td>    </tr><tr>        <td>Value        </td><td>The value part of an IttfNode; may be optional or required; may be multi-line (see the $. \ command nodes for multi-line values).        </td>    </tr><tr>        <td>Parent        </td><td>The parent node of an IttfNode.        </td>    </tr><tr>        <td>Root        </td><td>The root node of an IttfDocument; its Parent is null.        </td>    </tr><tr>        <td>Branch        </td><td>A sub tree of an IttfNode that is not the root.        </td>    </tr><tr>        <td>Children        </td><td>The child nodes of an IttfNode.        </td>    </tr></table></div>
                    <h2 id="concept-4">Ittf document</h2>
                    <div class="summary">
                        <p>An IttfDocument is the persistence format of a WizziModel.</p><p>It is a textual representation of a <a href="https://en.wikipedia.org/wiki/Tree_(data_structure)">tree data structure</a> modeled using the Ittf notation.</p><p>This could be an IttfDocument also:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">html</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">body</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="tag">ul</span><span class="pln"> </span></li><li class="L4"><span class="pnl">            </span><span class="tag">li</span><span class="pln"> </span></li><li class="L5"><span class="pnl">                </span><span class="tag">a</span><span class="pln"> The Wizzi Factory</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">href</span><span class="pln"> https://wizzifactory.github.io</span></li></ol></pre><p>An IttfDocument is composable and templateable. It is parsed and processed by an IttfModelLoader into an in memory javascript tree structure named IttfModel.</p><h4>It may contain two kind of nodes:</h4><ul>    <li>an IttfDomainNode, that is an IttfNode describing an element or attribute of the domain that is modeled;<pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">table</span><span class="pln"> user</span></li><li class="L2"><span class="pnl">    </span><span class="tag">column</span><span class="pln"> UserName</span></li><li class="L3"><span class="pnl">    </span><span class="tag">column</span><span class="pln"> Email</span></li></ol></pre>    </li><li>an IttfStatementNode, that is an IttfNode containg a composition or templating instruction for the IttfModelLoader.<pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="kwd">$foreach</span><span class="pln"> item in collection</span></li><li class="L2"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre>    </li></ul><p>All the IttfNodes of an IttfDocument, included the IttfRootNode, are templateable. An IttfNodeValue of an IttfDomainNode may contain templated expressions. IttfStatementNodes may contain template control statements. Even IttfRootNodes may be IttfStatementNodes. The root node of an IttfDocument may be a MixinCall that will be replaced by the called MixinIttfDocument.</p><h4>There are three kinds of IttfDocuments</h4><ul></ul><table class="pretty-table">    <tr>        <td>PrimaryIttfDocument        </td><td>The primary source of a WizziModelInstance, which Uri is passed to the IttfModelLoader.        </td>    </tr><tr>        <td>MixinIttfDocument        </td><td>A TemplateableIttfDocument that can be mixed in a calling IttfDocument using a MixinCall.        </td>    </tr><tr>        <td>IncludeableIttfDocument        </td><td>An IttfDocument that can be included AS IS in another IttfDocument.        </td>    </tr></table></div>
                    <h2 id="concept-5">Templateable ittf document</h2>
                    <div class="summary">
                        <p>Some terms:</p><table class="pretty-table">    <tr>        <td>TemplateableIttfDocument        </td><td>Is a mix of:            <li>IttfDomainNodes with a PlainIttfNodeValue.<pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">primaryKey</span><span class="pln"> User_ID</span></li></ol></pre>            </li><li>IttfDomainNodes with a TemplatedIttfNodeValue; they require interpolation (VariableSubstitution).<pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">primaryKey</span><span class="pln"> ${ table.name.toUpperCase() {}_ID</span></li></ol></pre>            </li><li>IttfTemplateControlNodes, they allow TemplateConditionalInclusion<pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="kwd">$if</span><span class="expr"> table.hasPrimaryKey()</span></li><li class="L2"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre>            </li><li>JsWizziIttfNodes, they can manipulate the TemplateContext.<pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="kwd">$</span><span class="expr"> var columnCount = table.columns.length;</span></li></ol></pre>            </li>        </td>    </tr><tr>        <td>TemplateContext        </td><td>Contains the context values for VariableSubstitution and evaluation of IttfTemplateControlNodes.        </td>    </tr><tr>        <td>TemplateResolution        </td><td>A TemplateableIttfDocument is <i>resolved in</i> a TemplateContext.        </td>    </tr></table><p>The TemplateContext is created from the IttfLoadingContext that is passed to the IttfModelLoader. In case of a MixinIttfDocument the MixinCallParameters are added to it; they override any property of the IttfLoadingContext with the same name.</p><p>The IttfTemplateEvaluator generates and execute in memory a javascript module that rebuilds the IttfModel node tree, processing expressions and flow control statements declared in the IttfNodes of the TemplateableIttfDocument.</p></div>
                    <h2 id="concept-6">Js-Wizzi</h2>
                    <div class="summary">
                        <p>Js-Wizzi is a subset of ECMA-262 javascript standard used by the wizzi factory for processing templated ittf documents.</p><p>Js-Wizzi uses the quite efficent <a href="http://esprima.org/">esprima</a> parsing infrastructure and a customized javascript engine (Js-Wizzi-Runner).</p><p>Ittf documents may contain Js-Wizzi statements in    <ul>        <li>Value of domain nodes<pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag"></span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">caption</span><span class="pln"> ${ name.capitalize() {}</span></li></ol></pre>        </li><li>Conditional expression of $if, $elif, $while command nodes        </li><li>Collection name of $foreach command node        </li><li>Body of $ and $global command nodes        </li>    </ul></p><p>Example of use of Js-Wizzi<pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag"></span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">ul</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="kwd">$</span><span class="expr"> var i = 0;</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$while</span><span class="pln"> i &lt; 10</span></li><li class="L5"><span class="pnl">            </span><span class="tag">li</span><span class="pln"> counting ${i}</span></li><li class="L6"><span class="pnl">            </span><span class="kwd">$</span><span class="expr"> i++;</span></li></ol></pre></p><p>The esprima syntax tree format is expected to be compatible with the Mozilla SpiderMonkey Parser API.</p><h4>The node types implemented by Js-Wizzi are:</h4><ul>    <li>VariableDeclaration    </li><li>STATEMENTS        <ul>            <li>EmptyStatement            </li><li>ExpressionStatement            </li><li>IfStatement            </li><li>WhileStatement            </li><li>DoWhileStatement            </li><li>ForStatement            </li><li>ForInStatement            </li><li>BreakStatement            </li><li>ContinueStatement            </li><li>ReturnStatement            </li>        </ul>    </li><li>EXPRESSIONS        <ul>            <li>UnaryExpression: !            </li><li>BinaryExpression: +. -, *, /, ==, ===, !=, !==, >=, >, <=, <            </li><li>UpdateExpressions: ++, --            </li><li>LogicalExpression: &&, ||            </li><li>ConditionalExpression: test ? consequent : alternate            </li><li>CallExpression            </li><li>MemberExpression            </li><li>AssignmentExpression: =, *=, /=, %=, +=, -=, <<=, >>=, >>>=, &=, ^=, |=            </li><li>ArrayExpression            </li><li>ObjectExpression            </li><li>FunctionCall            </li>        </ul>    </li><li>FunctionDeclaration        <div>Simple function declaration. No prototypes. No function objects; functions cannot be built by code and used like objects.        </div>    </li></ul></div>
                    <h2 id="concept-7">Ittf command nodes</h2>
                    <div class="summary">
                        <p>Ittf command nodes allow ittf documents to act as composable and templateable tree data structures.</p><h3>Mixin inclusion command</h3><p>Format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="mix">mixin-path(</span><span class="pln"> mixin-param-1 [mixin-param-2, [...]] ).</span></li><li class="L3"><span class="pnl">        </span><span class="tag">[</span><span class="pln"> optional ittf node branch ]</span></li></ol></pre><p>A mixin inclusion is recognized by the lexer when a node name ends with an open parenthesis. The chars before the parens are the relative path to the mixin. The base path is the current ittf document uri. No whitechar may separate the mixin path and the open paren.</p><p>The mixin ittf is inserted in the including ittf replacing the inclusion command node. If the includer node has children they, by default, are appended to the root node of the mixin. But if the mixin root has a descendant that is a default $hook command node, than the children of the includer node replace the $hook node.</p><p>Example of mixin with an $hook node where children of the includer node will be appended.</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">table</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">tr</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="kwd">$hook</span><span class="pln"> </span></li></ol></pre><p>Root nodes can be command inclusion nodes:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="mix">mylayout(</span><span class="pln"> home )</span></li><li class="L2"><span class="pnl">    </span><span class="tag">div</span><span class="pln"> My content</span></li></ol></pre><h3>$include</h3><p>Format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$include</span><span class="pln"> include-path</span></li></ol></pre><p>include-path is the relative path to an includeable ittf. The base path is the current ittf document uri.</p><p>The includeable is included AS IS replacing the $include command node.</p><p>An $include command node may not have children nodes.</p><h3>$params</h3><p>Format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">rootnode</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> name1[:type[|default]][, name2[...</span></li></ol></pre><p>Example:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">li</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> text, href</span></li><li class="L3"><span class="pnl">    </span><span class="tag">a</span><span class="pln"> ${text}</span></li><li class="L4"><span class="pnl">        </span><span class="tag">href</span><span class="pln"> ${href}</span></li></ol></pre><h3>$hook</h3><p>Format</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$hook</span><span class="pln"> name</span></li></ol></pre><p>An $hook command node is a named insertion point where IttfNodeBranches can be appended. The name is optional, when missing its value is 'default'.</p><p>It has to be replaced and may not have child nodes.</p><p>See the statements MixinCall and AppendHookCall, for how to append IttfNodeBranches to an $hook node.</p><h3>$append</h3><p>Format</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$append</span><span class="pln"> hook-name</span></li><li class="L3"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> nodeb ranch ...</span></li></ol></pre><p>An $append command node is the root of a node branch that should be appended to an ancestor $hook of name hook-name. The $append children nodes replace the $hook node.</p><h3>$group</h3><p>Format</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="kwd">$group</span><span class="pln"> empty-value</span></li><li class="L2"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> node branch ...</span></li></ol></pre><p>An ittf document must have one and only one root node.</p><p>The $group command node is a convenience node that may be used as the root of an includeable or mixin with many root nodes.</p><p>The $group node disappear in the builded tree.</p><h3>$if, $elif, $else</h3><p>Format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$if</span><span class="expr"> js-wizzi-conditional-expression</span></li><li class="L3"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> nodeb ranch ...</span></li><li class="L4"><span class="pnl">    </span><span class="kwd">$elif</span><span class="expr"> js-wizzi-conditional-expression</span></li><li class="L5"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> nodeb ranch ...</span></li><li class="L6"><span class="pnl">    </span><span class="kwd">$else</span><span class="pln"> empty-value</span></li><li class="L7"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> nodeb ranch ...</span></li></ol></pre><p>Children node are included/excluded depending on the value of the conditional-expression, written in Js-Wizzi.</p><h3>$foreach statement</h3><p>Format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$foreach</span><span class="pln"> item-name in collection-name</span></li><li class="L3"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> node branch ...</span></li></ol></pre><p>This is a repeat template where item-name is user defined and collection-name is a Js-Wizzi expression that evaluates to an iterable.</p><p>The var statement that declares item-name is auto-generated.</p><p>Descendant nodes are repeated having item-name as a context value in scope.</p><h3>$break, $continue</h3><p>Format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$break</span><span class="pln"> empty-value</span></li><li class="L3"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> </span></li><li class="L4"><span class="pnl">    </span><span class="kwd">$continue</span><span class="pln"> empty-value</span></li></ol></pre><p>This statements have the same meaning than in javascript but operate breaking or continuing the template repetition.</p><p>Currently a label for continuation is not implemented.</p><h3>$while</h3><p>Format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$while</span><span class="pln"> js-wizzi-conditional-expression</span></li><li class="L3"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> node branch ...</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$</span><span class="expr"> js-wizzi-exit-condition-change</span></li></ol></pre><p>This is a repeat template statement where descendant nodes are repeated until the js-wizzi-conditional-expression evaluates to false.</p><p>$ or $global command nodes must be used to modify the context values of the exit condition. There is a limit of 10000 iterations to guard against accidental loops, after that an exception is raised.</p><h3>$ comman node</h3><p>Allow manipulation of the template context.</p><p>May declare and modify template context variables that have ittf document scope.</p><div>May modify template context variables that have global scope.</div><div>Statements are js-wizzi instructions.</div><p>Single line format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$</span><span class="expr"> js-wizzi-statement</span></li></ol></pre><p>Multi-line format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="kwd">$</span><span class="expr"> </span></li><li class="L2"><span class="pnl">    </span><span class="expr">js-wizzi-statement</span><span class="expr"> </span></li><li class="L3"><span class="pnl">    </span><span class="expr">js-wizzi-statement</span><span class="expr"> </span></li><li class="L4"><span class="pnl">    </span><span class="expr">...</span><span class="expr"> </span></li></ol></pre><h3>$global command node</h3><p>May declare and modify template context variables of the global scope.</p><div>Statements are js-wizzi instructions.</div><p>Single line format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$global</span><span class="pln"> js-wizzi-statement</span></li></ol></pre><p>Multi-line format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="kwd">$global</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="expr">js-wizzi-statement</span><span class="expr"> </span></li><li class="L3"><span class="pnl">    </span><span class="expr">js-wizzi-statement</span><span class="expr"> </span></li><li class="L4"><span class="pnl">    </span><span class="expr">...</span><span class="expr"> </span></li></ol></pre></div>
                    <h2 id="concept-8">Primary Ittf document</h2>
                    <div class="summary">
                        <p>A Primary ittf document has the root node that is the root of a wizzi model.</p><p>Usually the root node is a domain node.</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">html</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">head</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> </span></li><li class="L4"><span class="pnl">    </span><span class="tag">body</span><span class="pln"> </span></li><li class="L5"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre><p>But it may be also a mixin inclusion command node.</p><p>The IttfNodeRoot can be a MixinCall to a MixinIttfDocument, which IttfNodeRoot will become the root DomainNode of the model;</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">layout()</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">section</span><span class="pln"> </span></li><li class="L3"><span class="pnl">        </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre><p>Or can be a branch domain node of a WizziModelInstance, it is not required to be the root node;</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">div</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre><p>A PrimaryIttfDocument may declare a $params IttfStatementNode as a child of the IttfNodeRoot. Being a primary source, parameters cannot be passed by MixinCalls but can be passed in the IttfLoadingContext.</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">html</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> borderColor</span></li><li class="L3"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> </span></li></ol></pre></div>
                    <h2 id="concept-9">Mixin ittf document</h2>
                    <div class="summary">
                        <p>A mixin ittf document may be mixed in another ittf document.</p><p>It may have binding parameters that are set on its template evaluation context and are in scope of its nodes only (not of nodes eventually included or mixed).</p><p>May contain named $hook nodes where children of the node invoking the mixin inclusion can be appended.</p><p>Example mixin ittf document</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">li</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> text, href|#</span></li><li class="L3"><span class="pnl">    </span><span class="tag">a</span><span class="pln"> ${text}</span></li><li class="L4"><span class="pnl">        </span><span class="tag">href</span><span class="pln"> ${href}</span></li><li class="L5"><span class="pnl">    </span><span class="kwd">$hook</span><span class="pln"> default $$ the name default may be omitted</span></li></ol></pre><p>Example of inclusion invoking document</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">html</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> </span></li><li class="L3"><span class="pnl">    </span><span class="tag">ul</span><span class="pln"> </span></li><li class="L4"><span class="pnl">        </span><span class="mix">lia(</span><span class="pln"> Wizzi factory, https://wizzifactory.github.io/)</span></li><li class="L5"><span class="pnl">            </span><span class="tag">br</span><span class="pln"> </span></li><li class="L6"><span class="pnl">            </span><span class="tag">span</span><span class="pln"> A model driven software factory.</span></li><li class="L7"><span class="pnl">        </span><span class="mix">lia(</span><span class="pln"> NodeJs, https://nodejs.org)</span></li></ol></pre></div>
                    <h2 id="concept-10">Includeable ittf document</h2>
                    <div class="summary">
                        <p>An includeable ittf document can be included in another IttfDocument.</p><p>It may not have a $params IttfStatementNode as a child of its root node.</p><p>It is included AS IS replacing the $include command node that invokes the inclusion.</p><p>Since it is included before append and evaluation steps it may contain expression and template nodes just like any other templateable.</p><p>It may contain $include command nodes.</p><p>TODO May it contain mixin inclusion commmand nodes?</p></div>
                </section>
            </div>
        </main>
        <script src="wizzifactory.js"></script>
    </body>

</html>
