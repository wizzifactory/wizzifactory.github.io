<!doctype html>
<html VERSION-5="5" VERSION-4="4" version="5">
    <head>
        <title>The Wizzi Factory</title>
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link href="normalize.css" rel="stylesheet">
        <link href="wizzifactory.css" rel="stylesheet">
        <link href="styles.css" rel="stylesheet">
    </head>
    <body>
        <div class="site">
            <header class="navigation">
                <div class="container navigation__inner">
                    <div class="logo">
                        <span class="logo-w">W</span>
                        <span class="logo-i1">i</span>
                        <span class="logo-z1">z</span>
                        <span class="logo-z2">z</span>
                        <span class="logo-i2">i</span>
                        <span>&nbsp;</span>
                        <span class="logo-f">f</span>
                        <span class="logo-a">a</span>
                        <span class="logo-c">c</span>
                        <span class="logo-t">t</span>
                        <span class="logo-o">o</span>
                        <span class="logo-r">r</span>
                        <span class="logo-y">y</span>
                    </div>
                    <nav class="navigation__links">
                        <a href="concepts.html" class="navigation__link">Concepts</a>
                        <a href="docs.html" class="navigation__link">Docs</a>
                        <a href="api/kernel.html" class="navigation__link">Api</a>
                        <a href="code/wizzi.html.html" class="navigation__link">Code</a>
                        <a href="starters/wizzi-demo.html" class="navigation__link">Starters</a>
                        <a href="project/roadmap.html" class="navigation__link">Project</a>
                    </nav>
                    <div class="navigation__search">
                        <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;">
                            <input type="text" class="navigation__search-input ds-input" placeholder="Search documentationâ€¦" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="position: relative; vertical-align: top;">
                            <pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; word-spacing: 0px; letter-spacing: normal; text-indent: 7px; text-rendering: auto; text-transform: none;"></pre>
                            <span class="ds-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="position: absolute; top: 100%; z-index: 100; display: none; left: 0px; right: auto;">
                                <div class="ds-dataset-1"></div>
                            </span>
                        </span>
                        <button class="navigation__search-icon icon-magnifying-glass"></button>
                        <button class="navigation__search-icon icon-cross"></button>
                    </div>
                    <a href="//github.com/webpack/webpack" target="_blank" class="navigation__icon" title="GitHub Repository"><i class="sidecar__icon icon-github"></i>
                    </a>
                    <a href="//stackoverflow.com/questions/tagged/webpack" target="_blank" class="navigation__icon" title="See Questions on Stack Overflow"><i class="sidecar__icon icon-stack-overflow"></i>
                    </a>
                </div>
                <div class="navigation__bottom">
                    <div class="container navigation__inner">
                        <a class="navigation__child" href="code/wizzi.html"></a>
                        <a class="navigation__child" href="code/wizzi-mtree.html"></a>
                        <a class="navigation__child" href="code/wizzi-repo.html"></a>
                        <a class="navigation__child" href="code/wizzi-mongodb.html"></a>
                        <a class="navigation__child" href="code/wizzi-utils.html"></a>
                        <a class="navigation__child" href="code/wizzi-core.html"></a>
                        <a class="navigation__child" href="code/wizzi-meta.html"></a>
                        <a class="navigation__child" href="code/wizzi-demo.html"></a>
                    </div>
                </div>
            </header>
        </div>
        <main id="main-content">
            <div style="border-bottom: 1px solid blue">Work in progress. Not ready.</div>
            <div class="main-sidebar-left">
                <section id="main-toc" class="toc">
                    <h3>Contents:</h3>
                    <div class="acidjs-css3-treeview">
                        <ul>
                            <li><input type="checkbox" checked id="f2">
                            <span></span>
                            <label for="f2">v3-wizzi</label>
                            <ul>
                                <li><input type="checkbox" checked id="f3">
                                <span></span>
                                <label for="f3">ittf</label>
                                <ul>
                                    <li><input type="checkbox" id="f4">
                                    <span></span>
                                    <label for="f4">examples</label>
                                    <ul>
                                        <li><input type="checkbox" id="f5">
                                        <span></span>
                                        <label for="f5">html</label>
                                        <ul>
                                            <li><input type="checkbox" id="f6">
                                            <span></span>
                                            <label for="f6">ittf__copy</label>
                                            <ul>
                                                <li><a href="#d1">basic.html.ittf</a>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><a href="#d2">index.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f7">
                                        <span></span>
                                        <label for="f7">js</label>
                                        <ul>
                                            <li><input type="checkbox" id="f8">
                                            <span></span>
                                            <label for="f8">ittf__copy</label>
                                            <ul>
                                                <li><a href="#d3">basic.js.ittf</a>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><a href="#d4">index.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><input type="checkbox" id="f9">
                                    <span></span>
                                    <label for="f9">lib</label>
                                    <ul>
                                        <li><input type="checkbox" id="f10">
                                        <span></span>
                                        <label for="f10">acl</label>
                                        <ul>
                                            <li><a href="#d5">acl.js.ittf</a>
                                            </li>
                                            <li><a href="#d6">aclstat.js.ittf</a>
                                            </li>
                                            <li><a href="#d7">index.js.ittf</a>
                                            </li>
                                            <li><a href="#d8">statistics.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f11">
                                        <span></span>
                                        <label for="f11">artifact</label>
                                        <ul>
                                            <li><a href="#d9">artifactInfo.js.ittf</a>
                                            </li>
                                            <li><a href="#d10">asyncArtifactGenerator.js.ittf</a>
                                            </li>
                                            <li><a href="#d11">block.js.ittf</a>
                                            </li>
                                            <li><a href="#d12">genContext.js.ittf</a>
                                            </li>
                                            <li><a href="#d13">line.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f12">
                                        <span></span>
                                        <label for="f12">io</label>
                                        <ul>
                                            <li><input type="checkbox" id="f13">
                                            <span></span>
                                            <label for="f13">t</label>
                                            <ul>
                                                <li><input type="checkbox" id="f14">
                                                <span></span>
                                                <label for="f14">filesystem</label>
                                                <ul>
                                                    <li><a href="#d14">copyFile.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d15">exists.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d16">fsstat.ittf</a>
                                                    </li>
                                                    <li><a href="#d17">glob.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d18">isFile.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d19">isFolder.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d20">mkdir.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d21">readdir.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d22">readFile.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d23">stat.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d24">writeFile.js.ittf</a>
                                                    </li>
                                                </ul>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><a href="#d25">errors.js.ittf</a>
                                            </li>
                                            <li><a href="#d26">filesystem.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f15">
                                        <span></span>
                                        <label for="f15">model</label>
                                        <ul>
                                            <li><input type="checkbox" id="f16">
                                            <span></span>
                                            <label for="f16">t</label>
                                            <ul>
                                                <li><input type="checkbox" id="f17">
                                                <span></span>
                                                <label for="f17">modelinfo</label>
                                                <ul>
                                                    <li><a href="#d27">loading.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d28">sources.js.ittf</a>
                                                    </li>
                                                </ul>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><a href="#d29">asyncModelLoader.js.ittf</a>
                                            </li>
                                            <li><a href="#d30">modelInfo.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f18">
                                        <span></span>
                                        <label for="f18">production</label>
                                        <ul>
                                            <li><input type="checkbox" id="f19">
                                            <span></span>
                                            <label for="f19">helpers</label>
                                            <ul>
                                                <li><a href="#d31">sourceTree.js.ittf</a>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><input type="checkbox" id="f20">
                                            <span></span>
                                            <label for="f20">t</label>
                                            <ul>
                                                <li><input type="checkbox" id="f21">
                                                <span></span>
                                                <label for="f21">manager</label>
                                                <ul>
                                                    <li><a href="#d32">async_initialize_artifactInfos.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d33">async_persister.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d34">async_runner.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d35">generations.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d36">state.js.ittf</a>
                                                    </li>
                                                </ul>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><a href="#d37">asyncWfJobRunner.js.ittf</a>
                                            </li>
                                            <li><a href="#d38">context.js.ittf</a>
                                            </li>
                                            <li><a href="#d39">manager.js.ittf</a>
                                            </li>
                                            <li><a href="#d40">options.js.ittf</a>
                                            </li>
                                            <li><a href="#d41">persister.js.ittf</a>
                                            </li>
                                            <li><a href="#d42">readme.md.ittf</a>
                                            </li>
                                            <li><a href="#d43">runner.js.ittf</a>
                                            </li>
                                            <li><a href="#d44">service.js.ittf</a>
                                            </li>
                                            <li><a href="#d45">wfjob.js.ittf</a>
                                            </li>
                                            <li><a href="#d46">wfpackageloader.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f22">
                                        <span></span>
                                        <label for="f22">services</label>
                                        <ul>
                                            <li><input type="checkbox" id="f23">
                                            <span></span>
                                            <label for="f23">t</label>
                                            <ul>
                                                <li><input type="checkbox" id="f24">
                                                <span></span>
                                                <label for="f24">pluginsManager</label>
                                                <ul>
                                                    <li><a href="#d47">architect.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d48">artifact-generator.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d49">initialize.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d50">model-factory.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d51">model-transformer.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d52">register.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d53">resolve-module.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d54">resolve-package.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d55">schema-definition.js.ittf</a>
                                                    </li>
                                                </ul>
                                                </li>
                                                <li><input type="checkbox" id="f25">
                                                <span></span>
                                                <label for="f25">runnerServer</label>
                                                <ul>
                                                    <li><a href="#d56">apiServer.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d57">factoryServer.js.ittf</a>
                                                    </li>
                                                </ul>
                                                </li>
                                                <li><input type="checkbox" id="f26">
                                                <span></span>
                                                <label for="f26">wizziFactory</label>
                                                <ul>
                                                    <li><a href="#d58">artifact-generation.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d59">getParams.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d60">initialize.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d61">model-loading.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d62">model-transformation.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d63">modelTypes-generation.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d64">mtree-loading.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d65">request-context.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d66">schema-definition.js.ittf</a>
                                                    </li>
                                                </ul>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><a href="#d67">pluginsManager.js.ittf</a>
                                            </li>
                                            <li><a href="#d68">runnerServer.js.ittf</a>
                                            </li>
                                            <li><a href="#d69">wizziFactory.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f27">
                                        <span></span>
                                        <label for="f27">util</label>
                                        <ul>
                                            <li><input type="checkbox" id="f28">
                                            <span></span>
                                            <label for="f28">t</label>
                                            <ul>
                                                <li><input type="checkbox" id="f29">
                                                <span></span>
                                                <label for="f29">lineparser</label>
                                                <ul>
                                                    <li><a href="#d70">parse.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d71">parseInterpolation.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d72">parseNameValue.js.ittf</a>
                                                    </li>
                                                </ul>
                                                </li>
                                                <li><input type="checkbox" id="f30">
                                                <span></span>
                                                <label for="f30">log</label>
                                                <ul>
                                                    <li><a href="#d73">log.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d74">myLogger.js.ittf</a>
                                                    </li>
                                                </ul>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><a href="#d75">fail.js.ittf</a>
                                            </li>
                                            <li><a href="#d76">file.js.ittf</a>
                                            </li>
                                            <li><a href="#d77">htmlbuilder.js.ittf</a>
                                            </li>
                                            <li><a href="#d78">interpolate.js.ittf</a>
                                            </li>
                                            <li><a href="#d79">lineparser.js.ittf</a>
                                            </li>
                                            <li><a href="#d80">log.js.ittf</a>
                                            </li>
                                            <li><a href="#d81">stringWriter.js.ittf</a>
                                            </li>
                                            <li><a href="#d82">verify.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f31">
                                        <span></span>
                                        <label for="f31">wizzi</label>
                                        <ul>
                                            <li><input type="checkbox" id="f32">
                                            <span></span>
                                            <label for="f32">models</label>
                                            <ul>
                                                <li><input type="checkbox" id="f33">
                                                <span></span>
                                                <label for="f33">bootstrap</label>
                                                <ul>
                                                    <li><input type="checkbox" id="f34">
                                                    <span></span>
                                                    <label for="f34">t</label>
                                                    <ul>
                                                        <li><input type="checkbox" id="f35">
                                                        <span></span>
                                                        <label for="f35">wizzischema</label>
                                                        <ul>
                                                            <li><input type="checkbox" id="f36">
                                                            <span></span>
                                                            <label for="f36">t</label>
                                                            <ul>
                                                                <li><a href="#d83">element_derived.ittf</a>
                                                                </li>
                                                                <li><a href="#d84">element_flat_attributes.ittf</a>
                                                                </li>
                                                                <li><a href="#d85">element_flat_relations.ittf</a>
                                                                </li>
                                                                <li><a href="#d86">element_gettags.js.ittf</a>
                                                                </li>
                                                                <li><a href="#d87">element_load.js.ittf</a>
                                                                </li>
                                                            </ul>
                                                            </li>
                                                            <li><a href="#d88">attribute.js.ittf</a>
                                                            </li>
                                                            <li><a href="#d89">choice.js.ittf</a>
                                                            </li>
                                                            <li><a href="#d90">choiceOrdered.js.ittf</a>
                                                            </li>
                                                            <li><a href="#d91">choiceSet.js.ittf</a>
                                                            </li>
                                                            <li><a href="#d92">comment.ittf</a>
                                                            </li>
                                                            <li><a href="#d93">element.js.ittf</a>
                                                            </li>
                                                            <li><a href="#d94">exportTo.ittf</a>
                                                            </li>
                                                            <li><a href="#d95">facet.js.ittf</a>
                                                            </li>
                                                            <li><a href="#d96">include.js.ittf</a>
                                                            </li>
                                                            <li><a href="#d97">method.js.ittf</a>
                                                            </li>
                                                            <li><a href="#d98">node.js.ittf</a>
                                                            </li>
                                                            <li><a href="#d99">relation.js.ittf</a>
                                                            </li>
                                                            <li><a href="#d100">require.ittf</a>
                                                            </li>
                                                            <li><a href="#d101">restrict.ittf</a>
                                                            </li>
                                                        </ul>
                                                        </li>
                                                        <li><a href="#d102">clazz.js.ittf</a>
                                                        </li>
                                                        <li><a href="#d103">schema_analizer.js.ittf</a>
                                                        </li>
                                                        <li><a href="#d104">schema_loader.ittf</a>
                                                        </li>
                                                    </ul>
                                                    </li>
                                                    <li><a href="#d105">util.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d106">wfschema-boot-model.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d107">wfschema-boot-modelDef.js.ittf</a>
                                                    </li>
                                                </ul>
                                                </li>
                                            </ul>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><a href="#d108">config.js.ittf</a>
                                        </li>
                                        <li><a href="#d109">errors.js.ittf</a>
                                        </li>
                                        <li><a href="#d110">option.js.ittf</a>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><input type="checkbox" id="f37">
                                    <span></span>
                                    <label for="f37">root</label>
                                    <ul>
                                        <li><input type="checkbox" id="f38">
                                        <span></span>
                                        <label for="f38">t</label>
                                        <ul>
                                            <li><input type="checkbox" id="f39">
                                            <span></span>
                                            <label for="f39">index</label>
                                            <ul>
                                                <li><a href="#d111">autostart.js.ittf</a>
                                                </li>
                                                <li><a href="#d112">f-artifact-generation.js.ittf</a>
                                                </li>
                                                <li><a href="#d113">f-ittf-loading.js.ittf</a>
                                                </li>
                                                <li><a href="#d114">f-model-factory.js.ittf</a>
                                                </li>
                                                <li><a href="#d115">f-model-transformation.js.ittf</a>
                                                </li>
                                                <li><a href="#d116">f-schema-object.js.ittf</a>
                                                </li>
                                                <li><a href="#d117">pluginsManager.js.ittf</a>
                                                </li>
                                                <li><a href="#d118">start_runnerServer.js.ittf</a>
                                                </li>
                                                <li><a href="#d119">start.js.ittf</a>
                                                </li>
                                                <li><a href="#d120">wizzi_instance_job.js.ittf</a>
                                                </li>
                                                <li><a href="#d121">wizzi_instance.js.ittf</a>
                                                </li>
                                                <li><a href="#d122">wizzi_modelTypes.js.ittf</a>
                                                </li>
                                            </ul>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><a href="#d123">index.js.ittf</a>
                                        </li>
                                        <li><a href="#d124">package.json.ittf</a>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><input type="checkbox" id="f40">
                                    <span></span>
                                    <label for="f40">t</label>
                                    <ul>
                                        <li><a href="#d125">checked_call_return_set.js.ittf</a>
                                        </li>
                                        <li><a href="#d126">checked_call_return.js.ittf</a>
                                        </li>
                                        <li><a href="#d127">checked_call.js.ittf</a>
                                        </li>
                                        <li><a href="#d128">error.js.ittf</a>
                                        </li>
                                        <li><a href="#d129">f_cb_no_err.js.ittf</a>
                                        </li>
                                        <li><a href="#d130">f_cb_test.js.ittf</a>
                                        </li>
                                        <li><a href="#d131">f_cb.js.ittf</a>
                                        </li>
                                        <li><a href="#d132">r_cb_error.js.ittf</a>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><input type="checkbox" id="f41">
                                    <span></span>
                                    <label for="f41">tests</label>
                                    <ul>
                                        <li><input type="checkbox" id="f42">
                                        <span></span>
                                        <label for="f42">artifact</label>
                                        <ul>
                                            <li><input type="checkbox" id="f43">
                                            <span></span>
                                            <label for="f43">ittf__copy</label>
                                            <ul>
                                                <li><a href="#d133">gc_one.ittf</a>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><a href="#d134">genContext.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f44">
                                        <span></span>
                                        <label for="f44">mocks</label>
                                        <ul>
                                            <li><a href="#d135">misc.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f45">
                                        <span></span>
                                        <label for="f45">services</label>
                                        <ul>
                                            <li><input type="checkbox" id="f46">
                                            <span></span>
                                            <label for="f46">ittf__copy</label>
                                            <ul>
                                                <li><input type="checkbox" id="f47">
                                                <span></span>
                                                <label for="f47">css</label>
                                                <ul>
                                                    <li><a href="#d136">simple.css.ittf</a>
                                                    </li>
                                                </ul>
                                                </li>
                                                <li><input type="checkbox" id="f48">
                                                <span></span>
                                                <label for="f48">html</label>
                                                <ul>
                                                    <li><a href="#d137">simple.html.ittf</a>
                                                    </li>
                                                </ul>
                                                </li>
                                                <li><input type="checkbox" id="f49">
                                                <span></span>
                                                <label for="f49">wfschema</label>
                                                <ul>
                                                    <li><a href="#d138">simple.wfschema.ittf</a>
                                                    </li>
                                                </ul>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><input type="checkbox" id="f50">
                                            <span></span>
                                            <label for="f50">t</label>
                                            <ul>
                                                <li><input type="checkbox" id="f51">
                                                <span></span>
                                                <label for="f51">wizzifactory</label>
                                                <ul>
                                                    <li><a href="#d139">modelTypes.js.ittf</a>
                                                    </li>
                                                </ul>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><a href="#d140">pluginsManager.js.ittf</a>
                                            </li>
                                            <li><a href="#d141">wizziFactory.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f52">
                                        <span></span>
                                        <label for="f52">t</label>
                                        <ul>
                                            <li><a href="#d142">async.js.ittf</a>
                                            </li>
                                            <li><a href="#d143">co_run_test.js.ittf</a>
                                            </li>
                                            <li><a href="#d144">co_run.js.ittf</a>
                                            </li>
                                            <li><a href="#d145">expect_throw_error.js.ittf</a>
                                            </li>
                                            <li><a href="#d146">f_cb_done.js.ittf</a>
                                            </li>
                                            <li><a href="#d147">f_cb_no_err.js.ittf</a>
                                            </li>
                                            <li><a href="#d148">f_cb_test.js.ittf</a>
                                            </li>
                                            <li><a href="#d149">itasync.js.ittf</a>
                                            </li>
                                            <li><a href="#d150">mongo_before_async.js.ittf</a>
                                            </li>
                                            <li><a href="#d151">tobe_array.js.ittf</a>
                                            </li>
                                            <li><a href="#d152">tobe_equal.js.ittf</a>
                                            </li>
                                            <li><a href="#d153">tobe_false.js.ittf</a>
                                            </li>
                                            <li><a href="#d154">tobe_null.js.ittf</a>
                                            </li>
                                            <li><a href="#d155">tobe_number.js.ittf</a>
                                            </li>
                                            <li><a href="#d156">tobe_object.js.ittf</a>
                                            </li>
                                            <li><a href="#d157">tobe_string_value.js.ittf</a>
                                            </li>
                                            <li><a href="#d158">tobe_string.js.ittf</a>
                                            </li>
                                            <li><a href="#d159">tobe_true.js.ittf</a>
                                            </li>
                                            <li><a href="#d160">tobe_undefined.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f53">
                                        <span></span>
                                        <label for="f53">util</label>
                                        <ul>
                                            <li><input type="checkbox" id="f54">
                                            <span></span>
                                            <label for="f54">ittf__copy</label>
                                            <ul>
                                                <li><a href="#d161">gc_one.ittf</a>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><a href="#d162">file.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                    </ul>
                                    </li>
                                </ul>
                                </li>
                                <li><a href="#d163">generate.wfjob.ittf</a>
                                </li>
                            </ul>
                            </li>
                        </ul>
                    </div>
                </section>
            </div>
            <div class="main-content">
                <div style="margin-bottom: 70px;" id="d1">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/examples/html/ittf__copy/basic.html.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">html</span></li><li class="L2"><span class="pnl">    </span><span class="tag">head</span></li><li class="L3"><span class="pnl">    </span><span class="tag">body</span></li><li class="L4"><span class="pnl">        </span><span class="tag">h1</span><span class="pln"> Hello world</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d2">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/examples/html/index.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> fs = require('fs')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> index = require('../../index')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> file = require('../../lib/util/file')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../../lib/util/verify')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> suffix_in = '.html.ittf'</span></li><li class="L9"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> suffix_out = '.g.html'</span></li><li class="L0"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> index.createFactory</span></li><li class="L1"><span class="pnl">        </span><span class="tag">@</span><span class="pln"> 'stefi'</span></li><li class="L2"><span class="pnl">        </span><span class="tag">@</span><span class="pln"> 'admin'</span></li><li class="L3"><span class="pnl">        </span><span class="tag">{</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> repo</span></li><li class="L5"><span class="pnl">                </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> storeKind 'filesystem'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> plugins</span></li><li class="L8"><span class="pnl">                </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> items</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">[</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'wizzi-html'</span></li><li class="L2"><span class="pnl">        </span><span class="mix frag-to-link-a" data-frag-id="d130">f_cb_test(</span><span class="arg"> wf </span><span class="mix">)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ittfPath</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> __dirname</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'ittf'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> item in getFiles(ittfPath)</span></li><li class="L8"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> item = item.substring(0, item.length - suffix_in.length)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">log</span><span class="pln"> 'item', item</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> execute(item, wf)</span></li><li class="L1"><span class="pnl">    </span><span class="tag">+</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> _ execute('function')</span></li><li class="L3"><span class="pnl">    </span><span class="tag">+</span></li><li class="L4"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> execute</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> wf</span></li><li class="L7"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> ittfSource</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> __dirname</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'ittf'</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> name + suffix_in</span></li><li class="L2"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> artifactOutput</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L4"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> __dirname</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'ittf'</span></li><li class="L6"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> name + suffix_out</span></li><li class="L7"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> wf.loadModelAndGenerateArtifact</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> ittfSource</span></li><li class="L9"><span class="pnl">            </span><span class="tag">{</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'html/document'</span></li><li class="L1"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d130">f_cb_test(</span><span class="arg"> artifactText </span><span class="mix">)</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> file.write</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> artifactOutput</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> artifactText</span></li><li class="L5"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> getFiles</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> srcpath</span></li><li class="L7"><span class="pnl">        </span><span class="tag">return</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> fs.readdirSync</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> srcpath</span></li><li class="L0"><span class="pnl">                </span><span class="tag">._</span><span class="pln"> filter</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">=></span></li><li class="L2"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> file</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">return</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">&&</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> fs.lstatSync(path.join(srcpath, file)).isFile()</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> verify.endsWith(file, suffix_in)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d3">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/examples/js/ittf__copy/basic.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> Hello</span></li><li class="L4"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> sayHello</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L6"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'Hello ' + name</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d4">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/examples/js/index.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> fs = require('fs')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> index = require('../../index')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> file = require('../../lib/util/file')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../../lib/util/verify')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> suffix_in = '.js.ittf'</span></li><li class="L9"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> suffix_out = '.g.js'</span></li><li class="L0"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> index.createFactory</span></li><li class="L1"><span class="pnl">        </span><span class="tag">@</span><span class="pln"> 'stefi'</span></li><li class="L2"><span class="pnl">        </span><span class="tag">@</span><span class="pln"> 'admin'</span></li><li class="L3"><span class="pnl">        </span><span class="tag">{</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> repo</span></li><li class="L5"><span class="pnl">                </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> storeKind 'filesystem'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> plugins</span></li><li class="L8"><span class="pnl">                </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> items</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">[</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'wizzi-js'</span></li><li class="L2"><span class="pnl">        </span><span class="mix frag-to-link-a" data-frag-id="d130">f_cb_test(</span><span class="arg"> wf </span><span class="mix">)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ittfPath</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> __dirname</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'ittf'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> item in getFiles(ittfPath)</span></li><li class="L8"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> item = item.substring(0, item.length - suffix_in.length)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">log</span><span class="pln"> 'item', item</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> execute(item, wf)</span></li><li class="L1"><span class="pnl">    </span><span class="tag">+</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> _ execute('function')</span></li><li class="L3"><span class="pnl">    </span><span class="tag">+</span></li><li class="L4"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> execute</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> wf</span></li><li class="L7"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> ittfSource</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> __dirname</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'ittf'</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> name + suffix_in</span></li><li class="L2"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> artifactOutput</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L4"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> __dirname</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'ittf'</span></li><li class="L6"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> name + suffix_out</span></li><li class="L7"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> wf.loadModelAndGenerateArtifact</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> ittfSource</span></li><li class="L9"><span class="pnl">            </span><span class="tag">{</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'js/module'</span></li><li class="L1"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d130">f_cb_test(</span><span class="arg"> artifactText </span><span class="mix">)</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> file.write</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> artifactOutput</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> artifactText</span></li><li class="L5"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> getFiles</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> srcpath</span></li><li class="L7"><span class="pnl">        </span><span class="tag">return</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> fs.readdirSync</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> srcpath</span></li><li class="L0"><span class="pnl">                </span><span class="tag">._</span><span class="pln"> filter</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">=></span></li><li class="L2"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> file</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">return</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">&&</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> fs.lstatSync(path.join(srcpath, file)).isFile()</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> verify.endsWith(file, suffix_in)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d5">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/acl/acl.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> Acl</span></li><li class="L4"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> config</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> wizziConfig</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.config = config</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wizziConfig = wizziConfig</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> checkAuth</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userId</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> subscriptionType</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> operId</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> resourceType</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> resourceName</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> subscriptionType === 'admin'</span></li><li class="L6"><span class="pnl">                </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> ok true</span></li><li class="L9"><span class="pnl">            </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> ok false</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> reason userId + ' not authorized to ' + operId</span></li><li class="L3"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports = Acl</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d6">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/acl/aclstat.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> Acl = require('./acl')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> Statistics = require('./statistics')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> config = null</span></li><li class="L6"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> AclStat</span></li><li class="L7"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userId</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> subscriptionType</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> aclConfig</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> statisticsConfig</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.userId = userId</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.subscriptionType = subscriptionType</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.aclConfig = aclConfig</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.statisticsConfig = statisticsConfig</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this._init()</span></li><li class="L7"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> _init</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> config == null</span></li><li class="L9"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> config = require('../../index').config</span></li><li class="L0"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi.acl.AclStat._init.config', config</span></li><li class="L1"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi.acl.AclStat._init.aclConfig', this.aclConfig</span></li><li class="L2"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi.acl.AclStat._init.statisticsConfig', this.statisticsConfig</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.acl = new Acl(this.aclConfig, config)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.statistics = new Statistics(this.statisticsConfig, config)</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> checkAuth</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> operId</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> resourceType</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> resourceName</span></li><li class="L9"><span class="pnl">            </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.acl.checkAuth</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.userId</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.subscriptionType</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> operId</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> resourceType</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> resourceName</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> stat</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> operId</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L9"><span class="pnl">            </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.statistics.stat</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.userId</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.subscriptionType</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> operId</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L5"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports = AclStat</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d7">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/acl/index.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> md</span></li><li class="L4"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> module.exports =</span></li><li class="L5"><span class="pnl">            </span><span class="tag">{</span></li><li class="L6"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.AclStat = require('./aclstat')</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d8">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/acl/statistics.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> Statistics</span></li><li class="L4"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> config</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> wizziConfig</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.config = config</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wizziConfig = wizziConfig</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> stat</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userId</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> subscriptionType</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> operId</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L4"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> TODO</span></li><li class="L5"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports = Statistics</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d9">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/artifact/artifactInfo.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">+</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> assert = require('assert')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> util = require('util')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> _ = require('lodash')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../util/verify')</span></li><li class="L9"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> interpolate = require('../util/interpolate')</span></li><li class="L0"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> ModelInfo = require("../model/modelinfo").ModelInfo</span></li><li class="L1"><span class="pnl">    </span><span class="tag">+</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> ArtifactInfo is a wrapper around an &lt;artifact&gt; element</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> of a &lt;wfjob&gt; WizziModel.</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> The config parameter has already been preprocessed</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> by the lib/production/wfjob.js module.</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> param config:Object {</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> name:String,</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> options:Object {</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> basedir:String // Uri</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> dotgExtensionPrefix:Boolean</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> },</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> model:Object {  // ModelInfo config object</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> see lib/production/wfjob.js for creation</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> see lib/model/modelInfo.js for use</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> },</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> isWfJob:Boolean,</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> transformers:Array {</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> name:String</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> dumpFile:String    // Uri</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> },</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> gen:Object {</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> generator:String // generator name</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> },</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> dest:Object {</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> fullpath:String    // Uri</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> folder:String      // a basepath Uri, may be relative</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> baseFolder:String  // a basepath Uri (required when folder is relative)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> path:String        // relative path</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> extension:String</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L3"><span class="pnl">    </span><span class="tag">+</span></li><li class="L4"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> logme</span></li><li class="L5"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> false</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> console.log.apply(console, arguments)</span></li><li class="L7"><span class="pnl">    </span><span class="tag">+</span></li><li class="L8"><span class="pnl">    </span><span class="tag">wz-class</span><span class="pln"> ArtifactInfo</span></li><li class="L9"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> config</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.name = config.name</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.options = config.options</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isObject(config.model)</span></li><li class="L4"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.modelInfo = new ModelInfo(config.model)</span></li><li class="L5"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.contextInfos = null</span></li><li class="L6"><span class="pnl">            </span><span class="tag">else</span></li><li class="L7"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.contextInfos = []</span></li><li class="L8"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> item in config.contexts</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.contextInfos.push</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">new</span><span class="pln"> ModelInfo(item)</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.modelInfo = null</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.isWfJob = config.isWfJob</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.transformers = config.transformers</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.gen = config.gen</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.dest = config.dest</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wfjob = config.wfjob</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.genContexts = []</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> initialize</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> productionManager</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.productionManager = productionManager</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.modelInfo</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.modelInfo.productionManager</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> productionManager</span></li><li class="L4"><span class="pnl">            </span><span class="tag">else</span></li><li class="L5"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> item in this.contextInfos</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> item.productionManager</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> productionManager</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.options</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> _.merge</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> productionManager.options || {}</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.options || {}</span></li><li class="L3"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addGenContext</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.genContexts.push(ctx)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> isWizziFactoryJob</span></li><li class="L7"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.modelInfo != null && this.modelInfo.getContextCollectionInfo() == null && this.isWfJob</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> isWizziModelArtifact</span></li><li class="L9"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.modelInfo != null && this.modelInfo.getContextCollectionInfo() == null &&</span></li><li class="L0"><span class="pnl">                </span><span class="tag">\b</span><span class="pln"> verify.isObject(this.gen) &&</span></li><li class="L1"><span class="pnl">                </span><span class="tag">\b</span><span class="pln"> verify.isNotEmpty(this.gen.generator)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> isWizziCollectionArtifact</span></li><li class="L3"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.modelInfo != null &&</span></li><li class="L4"><span class="pnl">                </span><span class="tag">\b</span><span class="pln"> verify.isObject(this.modelInfo.getContextCollectionInfo()) &&</span></li><li class="L5"><span class="pnl">                </span><span class="tag">\b</span><span class="pln"> verify.isObject(this.gen)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> isCodeWriteArtifact</span></li><li class="L7"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.modelInfo == null && verify.isObject(this.gen) && verify.isNotEmpty(this.gen.generator)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> isFinalArtifact</span></li><li class="L9"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.modelInfo != null &&</span></li><li class="L0"><span class="pnl">                </span><span class="tag">\b</span><span class="pln"> (verify.isObject(this.gen) === false || verify.isEmpty(this.gen.generator))</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getItemsToPersistToFile</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> check</span></li><li class="L4"><span class="pnl">                </span><span class="tag">{</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> items</span></li><li class="L6"><span class="pnl">                </span><span class="tag">[</span></li><li class="L7"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> genContext in this.genContexts</span></li><li class="L8"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> srcPath = genContext.srcPath</span></li><li class="L9"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> this.isWizziCollectionArtifact()</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> collectionItem = genContext.model</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> assert.strictEqual</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> verify.isObject(collectionItem)</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> true</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'genContext.model must contain an object.'</span></li><li class="L5"><span class="pnl">                    </span><span class="mix frag-to-link-a" data-frag-id="d127">checked_call(</span><span class="arg"> ipcontext </span><span class="mix">)</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> this.getInterpolatePathNameContext(collectionItem)</span></li><li class="L7"><span class="pnl">                    </span><span class="mix frag-to-link-a" data-frag-id="d127">checked_call(</span><span class="arg"> destUri </span><span class="mix">)</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> this.getDestinationUri(srcPath)</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> filepath</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> interpolate</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> destUri</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> ipcontext</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> delimiter '{}'</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> logme('ArtifactInfo.getItemsToPersistToFile.ipcontext', ipcontext, 'filepath', filepath)</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> check[filepath]</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">return</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> this.error</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> "Duplicated destination filepath: " + filepath</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> "getItemsToPersistToFile"</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> check[filepath] = true</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> persisteable</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> artifactInfo this</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> genContext genContext</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> filepath filepath</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> items.push(persisteable)</span></li><li class="L8"><span class="pnl">                </span><span class="tag">else</span></li><li class="L9"><span class="pnl">                    </span><span class="mix frag-to-link-a" data-frag-id="d127">checked_call(</span><span class="arg"> destUri </span><span class="mix">)</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> this.getDestinationUri(srcPath)</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> persisteable</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> artifactInfo this</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> genContext genContext</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> filepath destUri</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> items.push(persisteable)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> callback(null, items)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getInterpolatePathNameContext</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> collectionItem</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.isWizziCollectionArtifact()</span></li><li class="L1"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> result</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> info = this.modelInfo.getContextCollectionInfo()</span></li><li class="L4"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> templValue in info.pathTemplateValues</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> templValue.function</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> result[templValue.token] = collectionItem[templValue.function]()</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> verify.isEmpty(result[templValue.token])</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> this.error</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'the path template value function must return a not empty string for token: "' + templValue.token + '"'</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'getInterpolatePathNameContext'</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">elif</span><span class="pln"> templValue.attribute</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> result[templValue.token] = collectionItem[templValue.attribute]</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'result[templValue.token]'</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> result[templValue.token]</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> verify.isEmpty</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> result[templValue.token]</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> verify.isEmpty(result[templValue.token])</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">return</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> this.error</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'the path template value attribute "' + templValue.attribute + '" must return a not empty string for token: "' + templValue.token + '"'</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'getInterpolatePathNameContext'</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">return</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> this.error</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> 'path template value must contain an attribute or a function value for token: "' + templValue.token + '"'</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> 'getInterpolatePathNameContext'</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> result</span></li><li class="L0"><span class="pnl">            </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                </span><span class="tag">return</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.error</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> "Method called on an artifact that is not a wizzi collection artifact."</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'getInterpolatePathNameContext'</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getDestinationUri</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> srcPath</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> dest = this.dest</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> opt = this.options</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> msg</span></li><li class="L0"><span class="pnl">                </span><span class="tag">[</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'ArtifactInfo.getDestinationUri'</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'config.dest'</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isNotEmpty(dest.fullpath)</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> dest.fullpath</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isEmpty(dest.folder)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.error</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'A not empty dest.folder is required'</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'getDestinationUri'</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> destpath</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> dest.path && verify.isAbsolutePath(dest.path)</span></li><li class="L2"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> destpath = path.join(dest.path, srcPath)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">else</span></li><li class="L4"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> srcPath = dest.path ? dest.path : srcPath</span></li><li class="L5"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> verify.isEmpty(srcPath)</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> this.error</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'A not empty srcPath is required'</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'getDestinationUri'</span></li><li class="L0"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> destpath = path.join(dest.folder, srcPath)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.isFinalArtifact() === false</span></li><li class="L2"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> ext</span></li><li class="L3"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> dest.extension === '@@null'</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> ext = ""</span></li><li class="L5"><span class="pnl">                </span><span class="tag">else</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> ext = (dest.extension || '.js')</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> ext = verify.startsWith(ext, '.') ? ext : ('.' + ext)</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> ext.toLowerCase() !== '.ittf'</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> destpath.substr(- (5), 5).toLowerCase() === '.ittf'</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> destpath = destpath.substr(0, (destpath.length - 5))</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> ext = verify.endsWith(destpath, ext) ? '' : this.options.dotgExtensionPrefix ? ('.g' + ext) : ext</span></li><li class="L2"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> destpath = (destpath + ext)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">else</span></li><li class="L4"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> destpath.indexOf('__copy') &gt;= 0</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> destpath = verify.replaceAll(destpath, '__copy', '')</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isAbsolutePath(destpath)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> destpath</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isEmpty(dest.baseFolder)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.error</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'When dest.folder is a relative path, a not empty dest.baseFolder value is required.'</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'getDestinationUri'</span></li><li class="L3"><span class="pnl">            </span><span class="tag">return</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> dest.baseFolder</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> destpath</span></li><li class="L7"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> error</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> message</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> method</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> err</span></li><li class="L1"><span class="pnl">                </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> message message</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> source "wizzi/lib/production/artifactinfo.js/" + method</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> modelInfo this.modelInfo</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> logme(err)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> err</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> dump</span></li><li class="L9"><span class="pnl">            </span><span class="tag">throw</span></li><li class="L0"><span class="pnl">                </span><span class="tag">new</span><span class="pln"> Error('Not implemented')</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> relPath</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.modelInfo</span></li><li class="L3"><span class="pnl">                </span><span class="tag">return</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.modelInfo.srcFullPath()</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">._</span><span class="pln"> substr(this.options.basedir.length + 1)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">else</span></li><li class="L7"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> 'null'</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> toString</span></li><li class="L9"><span class="pnl">            </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                </span><span class="tag">[</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> '\n'</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'ArtifactInfo '</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'name:'</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.name</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'model.src:'</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.relPath</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> ', gen.generator:'</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">iif</span><span class="pln"> this.gen</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">then</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> this.gen.generator</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">else</span><span class="pln"> 'none'</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> '\n'</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">._</span><span class="pln"> join(' ')</span></li><li class="L4"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> terminate</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.modelInfo</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.modelInfo.terminate()</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.contextInfos</span></li><li class="L8"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> item in this.contextInfos</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> item.terminate()</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.genContexts</span></li><li class="L1"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> item in this.genContexts</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> item.terminate()</span></li><li class="L3"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> isArtifactConfig</span></li><li class="L4"><span class="pnl">            </span><span class="tag">static</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> test</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !test</span></li><li class="L7"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !verify.isObject(test.options)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !verify.isObject(test.model) && !verify.isObject(test.contexts)</span></li><li class="L1"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !verify.isObject(test.dest)</span></li><li class="L3"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !verify.isObject(test.gen)</span></li><li class="L5"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> true</span></li><li class="L7"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> isArtifactInstance</span></li><li class="L8"><span class="pnl">            </span><span class="tag">static</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> test</span></li><li class="L0"><span class="pnl">            </span><span class="tag">throw</span></li><li class="L1"><span class="pnl">                </span><span class="tag">new</span><span class="pln"> Error('Not implemented')</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d10">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/artifact/asyncArtifactGenerator.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> util = require('util')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> async = require('async')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../util/verify')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> GenContext = require('./genContext')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> logme</span></li><li class="L9"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> false</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> console.log.apply(console, arguments)</span></li><li class="L1"><span class="pnl">    </span><span class="tag">+</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Generation functions are called by the production/runner.</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> A generation produces an array of writeContext, ready for persisting the artifact,</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> that are accumulated into the artifactInfo.</span></li><li class="L6"><span class="pnl">    </span><span class="tag">+</span></li><li class="L7"><span class="pnl">    </span><span class="tag">wz-var</span><span class="pln"> AsyncArtifactGenerator</span></li><li class="L8"><span class="pnl">        </span><span class="tag">{</span></li><li class="L9"><span class="pnl">            </span><span class="tag">#</span></li><li class="L0"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> param artifactInfo:ArtifactInfo</span></li><li class="L1"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> param generator:Object { // retrieved from a WizziPackage</span></li><li class="L2"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> gen:Function   // executes generation</span></li><li class="L3"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L4"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> param modelInfos:Array of ModelInfo</span></li><li class="L5"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> param contextModelsCollection:Array of Objects (WizziModelInstances or other)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> 1 Context object for each ModelInfo</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> generate</span></li><li class="L8"><span class="pnl">                </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> artifactInfo</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> generator</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> modelInfos</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> contextModelsCollection</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> verify.isObject(generator) == false || verify.isFunction(generator.gen) == false</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">return</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'The parameter "generator" must be an object and must contain the "gen" function.'</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'generate'</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> artifactInfo</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> genItems</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">[</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">for</span><span class="pln"> var i = 0; i &lt; modelInfos.length; i++</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> modelInfo = modelInfos[i]</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> contextModelItem = contextModelsCollection[i]</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> genContext</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">new</span><span class="pln"> GenContext</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> model null</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> srcPath modelInfo.src()</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> srcFullPath modelInfo.srcFullPath()</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> options artifactInfo.options</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> pman artifactInfo.productionManager</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> genItems.push</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> generator generator</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> modelContext contextModelItem</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> genContext genContext</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> async.map</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> genItems</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> AsyncArtifactGenerator._gen_item</span></li><li class="L2"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> genContexts </span><span class="mix">)</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">foreach</span><span class="pln"> item in genContexts</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> artifactInfo.addGenContext(item)</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> oper 'AsyncArtifactGenerator.generate'</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> status 'success'</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> item 'genContexts.count: ' + genContexts.length</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> generateFromCollectionContexts</span></li><li class="L2"><span class="pnl">                </span><span class="tag">function</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> artifactInfo</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> generator</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> modelInfos</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> contextModelsCollectionCollection</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> verify.isObject(generator) == false || verify.isFunction(generator.gen) == false</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'The parameter "generator" must be an object and must contain the "gen" function.'</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'generateFromCollectionContexts'</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> artifactInfo</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> genItems</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">[</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">for</span><span class="pln"> var i = 0; i &lt; modelInfos.length; i++</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> modelInfo = modelInfos[i]</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> contextModelsCollection = contextModelsCollectionCollection[i]</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">for</span><span class="pln"> var j = 0; j &lt; contextModelsCollection.length; j++</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">var</span><span class="pln"> contextModelItem = contextModelsCollection[j]</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> logme('AsyncArtifactGenerator.generateFromCollectionContexts', 'item', j, contextModelItem)</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">var</span><span class="pln"> genContext</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">new</span><span class="pln"> GenContext</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> model contextModelItem.___collItem</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> srcPath modelInfo.src()</span></li><li class="L8"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> srcFullPath modelInfo.srcFullPath()</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> options artifactInfo.options</span></li><li class="L0"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> pman artifactInfo.productionManager</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> genItems.push</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> generator generator</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> modelContext contextModelItem</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> genContext genContext</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> async.map</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> genItems</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> AsyncArtifactGenerator._gen_item</span></li><li class="L9"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> genContexts </span><span class="mix">)</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">foreach</span><span class="pln"> item in genContexts</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> artifactInfo.addGenContext(item)</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> oper 'AsyncArtifactGenerator.generate'</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> status 'success'</span></li><li class="L7"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> item 'genContexts.count: ' + genContexts.length</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> generateCodeWrite</span></li><li class="L9"><span class="pnl">                </span><span class="tag">function</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> artifactInfo</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> generator</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> contextModelsCollection</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> verify.isObject(generator) == false || verify.isFunction(generator.gen) == false</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">return</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'The parameter "generator" must be an object and must contain the "gen" function.'</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'generateCodeWrite'</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> artifactInfo</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> modelContext</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> contextModelsCollection.forEach</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> item</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> modelContext[item.___exportName] = item</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> genContext</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">new</span><span class="pln"> GenContext</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> model null</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> srcPath null</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> srcFullPath null</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> options artifactInfo.options</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> pman artifactInfo.productionManager</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">new</span><span class="pln"> generator.gen(modelContext, genContext)</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> artifactInfo.addGenContext(genContext)</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> oper 'AsyncArtifactGenerator.generateCodeWrite'</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> status 'success'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> _gen_item</span></li><li class="L3"><span class="pnl">                </span><span class="tag">function</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> genInfo</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'AsyncArtifactGenerator._gen_item'</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'genInfo.modelContext'</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> genInfo.modelContext</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">new</span><span class="pln"> genInfo.generator.gen</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> genInfo.modelContext</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> genInfo.genContext</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> error</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> message</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> method</span></li><li class="L7"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> err</span></li><li class="L8"><span class="pnl">            </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> message message</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> source "wizzi/lib/artifact/asyncArtifactGenerator.js/" + method</span></li><li class="L2"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> logme(err)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> err</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d11">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/artifact/block.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> line = require('./line')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> Block</span></li><li class="L5"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.lines = []</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.options = (options || {})</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.indentValue = (this.options.indent || 0)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.currentline = null</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> forceIndent</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> save = this.indentValue</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.indentValue = value</span></li><li class="L5"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> save</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> indent</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.indentValue += typeof (value) !== 'undefined' ? value : 1</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> deindent</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.indentValue -= typeof (value) !== 'undefined' ? value : 1</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.indentValue = Math.max(0, this.indentValue)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> w</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.currentline != null</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.currentline.add(text)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.lines.push</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.currentline</span></li><li class="L9"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.currentline = null</span></li><li class="L0"><span class="pnl">            </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.lines.push</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">new</span><span class="pln"> line</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> text</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> this.indentValue</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> this.options</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> write</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.currentline != null</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.currentline.add(text)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.currentline = new line(text, this.indentValue, this.options)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> appendFile</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> filePath</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.currentline != null</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.currentline.addFile(filePath)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.lines.push</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.currentline</span></li><li class="L8"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.currentline = null</span></li><li class="L9"><span class="pnl">            </span><span class="tag">else</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.lines.push</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">new</span><span class="pln"> line</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> filePath</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> this.indentValue</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> this.options</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> true</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> toStream</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> stream</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L9"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> item in this.lines</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> item.toStream(stream, ctx)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.currentline != null</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.currentline.toStream(stream, ctx)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> terminate</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> delete (this.options)</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> delete (this.currentline)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> item in this.lines</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> item.terminate()</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> hydrate</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> lines</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.currentline = null</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.lines = []</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> l</span></li><li class="L4"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> item in lines</span></li><li class="L5"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> l = new line('', 0, options)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> l.hydrate(item)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.lines.push(l)</span></li><li class="L8"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports = Block</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d12">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/artifact/genContext.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> file = require('../util/file')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> StringWriter = require('../util/stringwriter')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../util/verify')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> block = require('./block')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> interpolate = require('../util/interpolate')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> errors = require('../errors')</span></li><li class="L9"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> GenContext</span></li><li class="L0"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> genconfig</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !verify.isObject(genconfig)</span></li><li class="L3"><span class="pnl">                </span><span class="tag">throw</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">new</span><span class="pln"> Error('GenContext: genconfig argument must be an Object')</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !verify.isObject(genconfig.options)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">throw</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">new</span><span class="pln"> Error('GenContext: genconfig.options argument must be an Object')</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.genconfig = genconfig</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.model = genconfig.model</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.srcPath = genconfig.srcPath</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.pman = genconfig.pman</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.block = new block(this.genconfig.options)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.values = this.genconfig.options.data || {}</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.writeFilePath = null</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.isEmpty = true</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> forceIndent</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.block.forceIndent(value)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> indent</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.block.indent(value)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> deindent</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.block.deindent(value)</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> a</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.values[name] = value</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> g</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L1"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.values[name]</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> r</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.values[name]</span></li><li class="L5"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> delete (this.values[name])</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> w</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.writeFilePath != null</span></li><li class="L9"><span class="pnl">                </span><span class="tag">throw</span><span class="pln"> new Error('Cannot write when a file write has been requested: ' + this.writeFilePath)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isString(text)</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.block.w</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">iif</span><span class="pln"> text.indexOf('{') &gt; -1</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">then</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> interpolate</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> text</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> this.values</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">else</span><span class="pln"> text</span></li><li class="L8"><span class="pnl">            </span><span class="tag">else</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.block.w('')</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.isEmpty = false</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> write</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.writeFilePath != null</span></li><li class="L4"><span class="pnl">                </span><span class="tag">throw</span><span class="pln"> new Error('Cannot write when a file write has been requested: ' + this.writeFilePath)</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !verify.isString(text)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">return</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.block.write</span></li><li class="L8"><span class="pnl">                </span><span class="tag">iif</span><span class="pln"> text.indexOf('{') &gt; -1</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">then</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> interpolate</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> text</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> this.values</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">else</span><span class="pln"> text</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.isEmpty = false</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> appendFile</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> filePath</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.block.appendFile</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> interpolate</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> filePath</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.values</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.isEmpty = false</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> writeFile</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> filePath</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.isEmpty == false</span></li><li class="L5"><span class="pnl">                </span><span class="tag">throw</span><span class="pln"> new Error('Cannot write a file when text has already been added : ' + this.getContent())</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.writeFilePath = filePath</span></li><li class="L7"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> toStream</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> stream</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.writeFilePath != null</span></li><li class="L0"><span class="pnl">                </span><span class="tag">log</span><span class="pln"> 'this.writeFilePath', this.writeFilePath</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> stream.write</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> file.read</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> this.writeFilePath</span></li><li class="L4"><span class="pnl">            </span><span class="tag">else</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.block.toStream(stream)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getContent</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.writeFilePath != null</span></li><li class="L8"><span class="pnl">                </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> file.read</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> this.writeFilePath</span></li><li class="L1"><span class="pnl">            </span><span class="tag">else</span></li><li class="L2"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> sw = new StringWriter()</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.block.toStream(sw)</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> sw.toString()</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getContentInLine</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> verify.replaceAll</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.getContent()</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> '\n'</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> '__1_2_3__'</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> error</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> message</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> node</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                </span><span class="tag">new</span><span class="pln"> errors.NodeError(message, node)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> artifactGenerationError</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> message</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> location</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> node</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> errors.ArtifactGenerationError(message, location, node)</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> terminate</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> delete this.pman</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> delete this.genconfig.pman</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.block.terminate()</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> hydrate</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> block</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.block = new block(options)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.block.hydrate</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> block.lines</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> toStringFromJSON</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> block</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !block || !block.lines</span></li><li class="L6"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> 'NO TEXT'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> gw</span></li><li class="L8"><span class="pnl">                </span><span class="tag">new</span><span class="pln"> GenContext</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> options options</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> gw.block.hydrate</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> block.lines</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> gw.getContent()</span></li><li class="L5"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports = GenContext</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d13">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/artifact/line.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> file = require('../util/file')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../util/verify')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> Line</span></li><li class="L6"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> textOrPath</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> indentValue</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> isFilePath</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.containsFilePath = isFilePath</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.text = []</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> isFilePath</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.text.push</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> k 0</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> t textOrPath</span></li><li class="L8"><span class="pnl">            </span><span class="tag">else</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.text.push(textOrPath)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.indentValue = indentValue</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.options = options</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> add</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.containsFilePath</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.text.push</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> k 1</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> t text</span></li><li class="L9"><span class="pnl">            </span><span class="tag">else</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.text.push(text)</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addFile</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> filePath</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.containsFilePath</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.text.push</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> k 0</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> t filePath</span></li><li class="L8"><span class="pnl">            </span><span class="tag">else</span></li><li class="L9"><span class="pnl">                </span><span class="tag">for</span><span class="pln"> var i = 0; i &lt; text.length; i++</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> text[i] =</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> k 1</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> t text[i]</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.text.push</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> k 0</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> t filePath</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> toStream</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> stream</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.options.isDebugLine && !ctx.isDebug</span></li><li class="L2"><span class="pnl">                </span><span class="tag">return</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> seen_tokens = false</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.containsFilePath</span></li><li class="L5"><span class="pnl">                </span><span class="tag">var</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">decl</span><span class="pln"> i</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">decl</span><span class="pln"> t</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">decl</span><span class="pln"> len = this.text.length</span></li><li class="L9"><span class="pnl">                </span><span class="tag">for</span><span class="pln"> i = 0; i &lt; len; i++</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> t = this.text[i]</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> t.k === 1</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> stream.write</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> t.t</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> seen_tokens = true</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> this._fileToStream</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> seen_tokens</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> stream</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> t.t</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> ctx</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> i == len - 1</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> stream.write</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> this.options.CRLF</span></li><li class="L4"><span class="pnl">            </span><span class="tag">else</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> stream.write</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> spaces(this.indentValue * this.options.indentSpaces) + this.text.join('') + this.options.CRLF</span></li><li class="L7"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> _fileToStream</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> seen_tokens</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> stream</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> filePath</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> lines = file.readLines(filePath)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> indent = spaces(this.indentValue * this.options.indentSpaces)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span></li><li class="L5"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> i</span></li><li class="L6"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> t</span></li><li class="L7"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> len = lines.length</span></li><li class="L8"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> tabspaces = spaces(this.options.indentSpaces)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> line</span></li><li class="L0"><span class="pnl">            </span><span class="tag">for</span><span class="pln"> i = 0; i &lt; len; i++</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> line = verify.replaceAll(lines[i], '\t', tabspaces)</span></li><li class="L2"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> line.length &gt; 0</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> i &gt; 0 || seen_tokens == false</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> stream.write(indent)</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> stream.write</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> line</span></li><li class="L7"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> i &lt; len - 1</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> stream.write</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> this.options.CRLF</span></li><li class="L0"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> terminate</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> delete (this.options)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> hydrate</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> item</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.text = item.text</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.indentValue = item.indentValue</span></li><li class="L6"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> spaces</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> num</span></li><li class="L8"><span class="pnl">        </span><span class="tag">return</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> Array((num + 1))</span></li><li class="L0"><span class="pnl">                </span><span class="tag">._</span><span class="pln"> join(" ")</span></li><li class="L1"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports = Line</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d14">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/io/t/filesystem/copyFile.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.copyFile</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userId</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> source_projectId</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> source_path_string</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> dest_projectId</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> dest_path_string</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> isMounted == false</span></li><li class="L1"><span class="pnl">                </span><span class="tag">return</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> sourceFsPath</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> normalize</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> fsBaseFolderPath</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> userId</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> source_projectId</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> source_path_string</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> destFsPath</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> normalize</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> fsBaseFolderPath</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> userId</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> dest_projectId</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> dest_path_string</span></li><li class="L0"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.copyFile.sourceFsPath', sourceFsPath, 'destFsPath', destFsPath</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> file.copy</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> sourceFsPath</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> destFsPath</span></li><li class="L4"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.copyFile.sourceFsPath', sourceFsPath, 'destFsPath', destFsPath</span></li><li class="L5"><span class="pnl">            </span><span class="tag">return</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback(null)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d15">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/io/t/filesystem/exists.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.exists</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userId</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> projectId</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> path_string</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> isMounted == false</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> fsPath</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> normalize</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> fsBaseFolderPath</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> userId</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> projectId</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> path_string</span></li><li class="L1"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.exists.fsPath', fsPath</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> exists</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> file.exists</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> fsPath</span></li><li class="L5"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.exists.fsPath', fsPath, 'exists', exists</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback(null, exists)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d16">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/io/t/filesystem/fsstat.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> FsStat</span></li><li class="L3"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> fsitem</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.fsitem = fsitem</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> isDirectory</span></li><li class="L7"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.fsitem.kind == 0</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> isFile</span></li><li class="L9"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.fsitem.kind == 1</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d17">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/io/t/filesystem/glob.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.glob</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userId</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> projectId</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> pattern</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> isMounted == false</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> fsPattern</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> normalize</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> fsBaseFolderPath</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> userId</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> projectId</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> pattern</span></li><li class="L1"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.glob.fsPattern', fsPattern</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> glob</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> fsPattern</span></li><li class="L4"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> this</span></li><li class="L5"><span class="pnl">                </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> fsitems </span><span class="mix">)</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.glob.fsPattern', fsPattern, 'fsitems', fsitems</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> callback(null, fsitems)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d18">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/io/t/filesystem/isFile.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.isFile</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userId</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> projectId</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> path_string</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> isMounted == false</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> fsPath</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> normalize</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> fsBaseFolderPath</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> userId</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> projectId</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> path_string</span></li><li class="L1"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.isFile.fsPath', fsPath</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> exists</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> file.isFile</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> fsPath</span></li><li class="L5"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.isFile.fsPath', fsPath, 'exists', exists</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback(null, exists)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d19">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/io/t/filesystem/isFolder.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.isFolder</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userId</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> projectId</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> path_string</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> isMounted == false</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> fsPath</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> normalize</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> fsBaseFolderPath</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> userId</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> projectId</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> path_string</span></li><li class="L1"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.isFolder.fsPath', fsPath</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> exists</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> file.isDirectory</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> fsPath</span></li><li class="L5"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.isFolder.fsPath', fsPath, 'exists', exists</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback(null, exists)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d20">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/io/t/filesystem/mkdir.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.mkdir</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userId</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> projectId</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> path_string</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> isMounted == false</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> fsPath</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> normalize</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> fsBaseFolderPath</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> userId</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> projectId</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> path_string</span></li><li class="L1"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.mkdir.fsPath', fsPath</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> file.mkdir</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> fsPath</span></li><li class="L4"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.createFolder.fsPath', fsPath</span></li><li class="L5"><span class="pnl">            </span><span class="tag">return</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback(null)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d21">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/io/t/filesystem/readdir.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.readDir</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userId</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> projectId</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> dirPath</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> isMounted == false</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> fsPath</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> fsBaseFolderPath</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> userId</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> projectId != null</span></li><li class="L9"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> fsPath = path.join(fsPath, projectId)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> dirPath != null</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> fsPath = path.join(fsPath, dirPath)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> fsPath = normalize(fsPath)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.readDir.fsPath', fsPath</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> file.getDir</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> fsPath</span></li><li class="L6"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> files </span><span class="mix">)</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> fsitems = filesToFsitems(files)</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.readDir.fsPath', fsPath, 'fsitems', fsitems</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> callback(null, fsitems)</span></li><li class="L1"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md._readDir</span></li><li class="L2"><span class="pnl">        </span><span class="tag">function</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> dirPath</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> isMounted == false</span></li><li class="L6"><span class="pnl">                </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> fsPath</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> normalize</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> dirPath</span></li><li class="L4"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.readDir.fsPath', fsPath</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> file.getDir</span></li><li class="L6"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> fsPath</span></li><li class="L7"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> files </span><span class="mix">)</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> fsitems = filesToFsitems(files)</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.readDir.fsPath', fsPath, 'fsitems', fsitems</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">return</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> callback(null, fsitems)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d22">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/io/t/filesystem/readFile.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.readFile</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userId</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> projectId</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> path_string</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> isMounted == false</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> fsPath</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> normalize</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> fsBaseFolderPath</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> userId</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> projectId</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> path_string</span></li><li class="L1"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.readFile.fsPath', fsPath</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> file.readFile</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> fsPath</span></li><li class="L4"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> content </span><span class="mix">)</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.readFile.fsPath', fsPath, 'content', content</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> callback(null, content)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d23">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/io/t/filesystem/stat.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.stat</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userId</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> projectId</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> filePath</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> isMounted == false</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> fsPath</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> normalize</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> fsBaseFolderPath</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> userId</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> projectId</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> filePath</span></li><li class="L1"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.stat.fsPath', fsPath</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> fsdb.getItemByPath</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> fsPath</span></li><li class="L4"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> fsitem </span><span class="mix">)</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.stat.fsPath', fsPath, 'fsitem', fsitem</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> fsitem == null</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">return</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> er</span></li><li class="L1"><span class="pnl">                                        </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> code 'ENOENT'</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">new</span><span class="pln"> FsStat</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> fsitem</span></li><li class="L9"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md._stat</span></li><li class="L0"><span class="pnl">        </span><span class="tag">function</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> filePath</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> isMounted == false</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> fsPath</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> normalize</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> filePath</span></li><li class="L2"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.stat.fsPath', fsPath</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> file.exists(fsPath) == false</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> err</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> code 'ENOENT'</span></li><li class="L0"><span class="pnl">            </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                </span><span class="tag">return</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">new</span><span class="pln"> FsStat</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> fileToFsItem</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> fsPath</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d24">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/io/t/filesystem/writeFile.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.writeFile</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userId</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> projectId</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> path_string</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> content</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> isMounted == false</span></li><li class="L0"><span class="pnl">                </span><span class="tag">return</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> fsPath</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> normalize</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> fsBaseFolderPath</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> userId</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> projectId</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> path_string</span></li><li class="L2"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.writeFile.fsPath', fsPath</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> file.writeFile</span></li><li class="L4"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> fsPath</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> content</span></li><li class="L6"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> result </span><span class="mix">)</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">log</span><span class="pln"> 'wizzi-io.filesystem.writeFile.fsPath', fsPath, 'result', result</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> callback(null, result)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d25">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/io/errors.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> util</span></li><li class="L4"><span class="pnl">    </span><span class="tag">+</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> md = module.exports = {}</span></li><li class="L6"><span class="pnl">    </span><span class="tag">+</span></li><li class="L7"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d128">error(</span><span class="arg"> NotImplemented</span><span class="pln">,</span><span class="arg">  message </span><span class="mix">)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">log</span><span class="pln"> 'message', message</span></li><li class="L9"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.message = message</span></li><li class="L0"><span class="pnl">    </span><span class="tag">+</span></li><li class="L1"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d128">error(</span><span class="arg"> InvalidRequest</span><span class="pln">,</span><span class="arg">  message</span><span class="pln">,</span><span class="arg">  code </span><span class="mix">)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">log</span><span class="pln"> 'message', message</span></li><li class="L3"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.message = message</span></li><li class="L4"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.code = code</span></li><li class="L5"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d128">error(</span><span class="arg"> FsItemNotFound</span><span class="pln">,</span><span class="arg">  resourceType</span><span class="pln">,</span><span class="arg">  uri </span><span class="mix">)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.message = resourceType + ': ' + uri + ' not found '</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d26">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/io/filesystem.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> util</span></li><li class="L4"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> path</span></li><li class="L5"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> glob</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> file = require('../util/file')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">+</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span></li><li class="L9"><span class="pnl">        </span><span class="tag">decl</span><span class="pln"> isMounted = false</span></li><li class="L0"><span class="pnl">        </span><span class="tag">decl</span><span class="pln"> fsBaseFolderPath = null</span></li><li class="L1"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a"> filesystem/fsstat</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> md</span></li><li class="L3"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> module.exports =</span></li><li class="L4"><span class="pnl">            </span><span class="tag">{</span></li><li class="L5"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.isMounted</span></li><li class="L6"><span class="pnl">        </span><span class="tag">function</span></li><li class="L7"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> isMounted</span></li><li class="L8"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.mount</span></li><li class="L9"><span class="pnl">        </span><span class="tag">function</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> baseFolderPath</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> fsBaseFolderPath = baseFolderPath</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> isMounted = true</span></li><li class="L4"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> log 'wizzi-io.filesystem mounted. BaseFolderPath: ' + baseFolderPath</span></li><li class="L5"><span class="pnl">            </span><span class="tag">return</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback(null)</span></li><li class="L7"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.unmount</span></li><li class="L8"><span class="pnl">        </span><span class="tag">function</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> isMounted = false</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> fsBaseFolderPath = null</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> callback(null)</span></li><li class="L3"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d15"> filesystem/exists</span></li><li class="L4"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d18"> filesystem/isFile</span></li><li class="L5"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d19"> filesystem/isFolder</span></li><li class="L6"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d22"> filesystem/readFile</span></li><li class="L7"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d24"> filesystem/writeFile</span></li><li class="L8"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d20"> filesystem/mkdir</span></li><li class="L9"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d21"> filesystem/readdir</span></li><li class="L0"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d23"> filesystem/stat</span></li><li class="L1"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d17"> filesystem/glob</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d14"> filesystem/copyFile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> normalize</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> path</span></li><li class="L5"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> path.trim().replace(/\\/g,'/').toLowerCase()</span></li><li class="L6"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> filesToFsitems</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> files</span></li><li class="L8"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> ret = []</span></li><li class="L9"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> f in files</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ret.push</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> fileToFsItem</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> f</span></li><li class="L3"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> ret</span></li><li class="L4"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> fileToFsItem</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> filePath</span></li><li class="L6"><span class="pnl">        </span><span class="tag">return</span></li><li class="L7"><span class="pnl">            </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> _id filePath</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> basename path.basename(filePath)</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> parentId path.dirname(filePath)</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> dirname path.dirname(filePath)</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> path filePath</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> kind ( file.isDirectory(filePath) ? 0 : 1 )</span></li><li class="L4"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> fileToDocument</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> filePath</span></li><li class="L6"><span class="pnl">        </span><span class="tag">return</span></li><li class="L7"><span class="pnl">            </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> _id filePath</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> content file.read(filePath)</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> lastModified file.lastModified(filePath)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d27">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/model/t/modelinfo/loading.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getLoadModel</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !this.productionManager()</span></li><li class="L5"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d132">r_cb_error(</span><span class="mix">)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> "Method called without setting the 'productionManager' object"</span></li><li class="L7"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> "getLoadModel"</span></li><li class="L8"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !this.schema</span></li><li class="L9"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d132">r_cb_error(</span><span class="mix">)</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> "Method called without setting the 'schema' name"</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> "getLoadModel"</span></li><li class="L2"><span class="pnl">        </span><span class="mix frag-to-link-a" data-frag-id="d127">checked_call(</span><span class="arg"> wizziModelFactory </span><span class="mix">)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.productionManager().getLoadModel</span></li><li class="L4"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> this.schema</span></li><li class="L5"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> wizziModelFactory == null</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">new</span><span class="pln"> errors.NotFoundError</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'WizziModelFactory'</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> this.schema</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> this</span></li><li class="L2"><span class="pnl">        </span><span class="tag">else</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> callback(null, wizziModelFactory)</span></li><li class="L4"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getModelTransformer</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> trasformerName</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !this.productionManager()</span></li><li class="L8"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d132">r_cb_error(</span><span class="mix">)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> "Method called without setting the 'productionManager' object"</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> "getModelTransformer"</span></li><li class="L1"><span class="pnl">        </span><span class="mix frag-to-link-a" data-frag-id="d127">checked_call(</span><span class="arg"> modelTransformer </span><span class="mix">)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.productionManager().getModelTransformer</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> trasformerName</span></li><li class="L4"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> modelTransformer == null</span></li><li class="L5"><span class="pnl">            </span><span class="tag">return</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">new</span><span class="pln"> errors.NotFoundError</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'modelTransformer'</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> trasformerName</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> this</span></li><li class="L1"><span class="pnl">        </span><span class="tag">else</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> callback(null, modelTransformer)</span></li><li class="L3"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getArtifactGenerator</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> generatorName</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !this.productionManager()</span></li><li class="L7"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d132">r_cb_error(</span><span class="mix">)</span></li><li class="L8"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> "Method called without setting the 'productionManager' object"</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> "getArtifactGenerator"</span></li><li class="L0"><span class="pnl">        </span><span class="mix frag-to-link-a" data-frag-id="d127">checked_call(</span><span class="arg"> generator </span><span class="mix">)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.productionManager().getArtifactGenerator</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> generatorName</span></li><li class="L3"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> generator == null</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">new</span><span class="pln"> errors.NotFoundError</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'generator'</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> generatorName</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> this</span></li><li class="L0"><span class="pnl">        </span><span class="tag">else</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> callback(null, generator)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d28">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/model/t/modelinfo/sources.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getSource</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> assert.equal("function", typeof(callback))</span></li><li class="L5"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> that = this</span></li><li class="L6"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.exists</span></li><li class="L7"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> exists </span><span class="mix">)</span></li><li class="L8"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> !exists</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> that.error</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> "Cannot get source. File not found : " + that.srcFullPath()</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'getSource'</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> that.isFile</span></li><li class="L4"><span class="pnl">                    </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> isFile </span><span class="mix">)</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> !isFile</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> that.error</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> "Cannot get source. Is not a file : " + that.srcFullPath()</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'getSource'</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> ittfs.read</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> that.srcFullPath()</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getSources</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> assert.equal("function", typeof(callback))</span></li><li class="L6"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> that = this</span></li><li class="L7"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.exists</span></li><li class="L8"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> exists </span><span class="mix">)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> !exists</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> that.error</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> "Cannot get sources. Directory not found : " + that.srcFullPath()</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'getSources'</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> that.isDirectory</span></li><li class="L5"><span class="pnl">                    </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> isDirectory </span><span class="mix">)</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> !isDirectory</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> that.error</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> "Cannot get sources. Is not a directory : " + that.srcFullPath()</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'getSources'</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> that.getFiles</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> fileInfos </span><span class="mix">)</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> async.map</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> fileInfos</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">function</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">param</span><span class="pln"> fileInfo</span></li><li class="L8"><span class="pnl">                                        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> ittfs.read</span></li><li class="L0"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> fileInfo.fullpath</span></li><li class="L1"><span class="pnl">                                            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> content </span><span class="mix">)</span></li><li class="L2"><span class="pnl">                                                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L4"><span class="pnl">                                                    </span><span class="tag">{</span></li><li class="L5"><span class="pnl">                                                        </span><span class="tag">@</span><span class="pln"> fullpath fileInfo.fullpath</span></li><li class="L6"><span class="pnl">                                                        </span><span class="tag">@</span><span class="pln"> relpath fileInfo.relpath</span></li><li class="L7"><span class="pnl">                                                        </span><span class="tag">@</span><span class="pln"> content content</span></li><li class="L8"><span class="pnl">                                    </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> fileContents </span><span class="mix">)</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L1"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> fileContents</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getFiles</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> assert.equal("function", typeof(callback))</span></li><li class="L6"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> that = this</span></li><li class="L7"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.exists</span></li><li class="L8"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> exists </span><span class="mix">)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> !exists</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> that.error</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> "Cannot get files. Directory not found : " + that.srcFullPath()</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'getFiles'</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> that.isDirectory</span></li><li class="L5"><span class="pnl">                    </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> isDirectory </span><span class="mix">)</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> !isDirectory</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> that.error</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> "Cannot get files. Is not a directory : " + that.srcFullPath()</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'getFiles'</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">var</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">decl</span><span class="pln"> ret</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">[</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">decl</span><span class="pln"> srcFullPath = that.srcFullPath()</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">decl</span><span class="pln"> srcGlobPath = that.srcGlobPath()</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> ittfs.getGlobbedFiles</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> srcGlobPath</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> that.srcGlobOptions()</span></li><li class="L9"><span class="pnl">                            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> files </span><span class="mix">)</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">for</span><span class="pln"> var i = 0; i &lt; files.length; i++</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">var</span><span class="pln"> fileInfo = files[i]</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">#</span><span class="pln"> skip "_debug" folder</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">if</span><span class="pln"> fileInfo.indexOf('/_debug/') &gt; -1</span></li><li class="L4"><span class="pnl">                                        </span><span class="tag">continue</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">#</span><span class="pln"> skip "__copy" and "t" folders</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">if</span><span class="pln"> !options.final</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">if</span><span class="pln"> fileInfo.indexOf('__copy/') &gt;= 0 || fileInfo.indexOf('/t/') &gt;= 0</span></li><li class="L8"><span class="pnl">                                            </span><span class="tag">continue</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">var</span><span class="pln"> fullpath = fileInfo</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">var</span><span class="pln"> relpath</span></li><li class="L1"><span class="pnl">                                        </span><span class="tag">iif</span><span class="pln"> that.config.cwd</span></li><li class="L2"><span class="pnl">                                            </span><span class="tag">then</span></li><li class="L3"><span class="pnl">                                                </span><span class="tag">_</span><span class="pln"> relPath</span></li><li class="L4"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> fullpath</span></li><li class="L5"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> that.config.cwd</span></li><li class="L6"><span class="pnl">                                            </span><span class="tag">else</span></li><li class="L7"><span class="pnl">                                                </span><span class="tag">set</span><span class="pln"> null</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> ret.push</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> fullpath fullpath</span></li><li class="L1"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> relpath relpath</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> ret</span></li><li class="L5"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> exists</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> assert.equal("function", typeof(callback))</span></li><li class="L8"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> ittfs.exists</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.srcFullPath()</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> isDirectory</span></li><li class="L2"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> assert.equal("function", typeof(callback))</span></li><li class="L4"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> ittfs.isDirectory</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.srcFullPath()</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> isFile</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L9"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> assert.equal("function", typeof(callback))</span></li><li class="L0"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> ittfs.isFile</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.srcFullPath()</span></li><li class="L2"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> callback</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d29">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/model/asyncModelLoader.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> util = require('util')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> async = require('async')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> _ = require('lodash')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../util/verify')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> log</span></li><li class="L9"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> require('../util/log')</span></li><li class="L0"><span class="pnl">            </span><span class="mix frag-to-link-a">(</span><span class="mix">)</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">+</span></li><li class="L3"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> logme</span></li><li class="L4"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> false</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> console.log.apply(console, arguments)</span></li><li class="L6"><span class="pnl">    </span><span class="tag">+</span></li><li class="L7"><span class="pnl">    </span><span class="tag">wz-function</span><span class="pln"> loadMany</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> modelInfos</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> modelInfos.length &gt; 0</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.setLevel</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> modelInfos[0].productionManager().options.verbose</span></li><li class="L3"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> async.map</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> modelInfos</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> _load_item</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">    </span><span class="tag">wz-function</span><span class="pln"> load</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> modelInfo</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> log.setLevel</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> modelInfo.productionManager().options.verbose</span></li><li class="L2"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> log.info</span></li><li class="L3"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'Started.async.load.model'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> modelInfo.srcFullPath()</span></li><li class="L5"><span class="pnl">                </span><span class="tag">._</span><span class="pln"> substr((modelInfo.productionManager().options.basedir.length + 1))</span></li><li class="L6"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> modelInfos</span></li><li class="L7"><span class="pnl">            </span><span class="tag">[</span></li><li class="L8"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> modelInfo</span></li><li class="L9"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> async.map</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> modelInfos</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> _load_item</span></li><li class="L2"><span class="pnl">            </span><span class="tag">function</span></li><li class="L3"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L4"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> wizziModels</span></li><li class="L5"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">return</span><span class="pln"> callback(err, null)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> log.info</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'Ended.async.load.model'</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> modelInfo.srcFullPath()</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">._</span><span class="pln"> substr((modelInfo.productionManager().options.basedir.length + 1))</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> wizziModels[0]</span></li><li class="L4"><span class="pnl">    </span><span class="tag">#</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Load a single WizziModel using ModelInfo data</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> The master ModelInfo may contain one or many context ModelInfos</span></li><li class="L7"><span class="pnl">    </span><span class="tag">wz-function</span><span class="pln"> _load_item</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> masterModelInfo</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'AsyncModelLoader._load_item.masterModelInfo.config'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> util.inspect</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> masterModelInfo.config</span></li><li class="L4"><span class="pnl">                </span><span class="tag">{</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> depth 3</span></li><li class="L6"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> masterModelInfo.contexts && masterModelInfo.contexts.length &gt; 0</span></li><li class="L7"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> The master modelInfo has context ModelInfos, so it is templated.</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> First of all load recursively the context models</span></li><li class="L9"><span class="pnl">            </span><span class="tag">+</span></li><li class="L0"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> step 1 - set the production state on each contextModelInfo</span></li><li class="L1"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> contextModelInfo in masterModelInfo.contexts</span></li><li class="L2"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> set contextModelInfo.___state = masterModelInfo.___state</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'AsyncModelLoader._load_item.context'</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> contextModelInfo.id</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> contextModelInfo.srcFullPath()</span></li><li class="L7"><span class="pnl">            </span><span class="tag">+</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> step 2 - recurse contextModelInfo loading</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> async.map</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> masterModelInfo.contexts</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> _load_item</span></li><li class="L2"><span class="pnl">                </span><span class="tag">function</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> contextWizziModels</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> log.error</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'Error.AsyncModelLoader._load_item'</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> util.inspect</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> err</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> depth null</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">return</span><span class="pln"> callback(err, null)</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">#</span><span class="pln"> step 3 - prepare the loaded context model instances for the master model loading</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">#</span><span class="pln"> if one context is a collection context, prepare the collection context</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">var</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">decl</span><span class="pln"> wizziModelWithCollection = null</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">decl</span><span class="pln"> collectionContextIndex = -1</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">decl</span><span class="pln"> loadingContext</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">for</span><span class="pln"> var i = 0; i &lt; contextWizziModels.length; i++</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> contextWizziModel = contextWizziModels[i]</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> loadingContext[contextWizziModel.___exportName] = contextWizziModel</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> contextWizziModel.___coll</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> wizziModelWithCollection = contextWizziModel</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> collectionContextIndex = i</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> collectionContextIndex &gt; -1</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> Yes one of the loaded context models is a collection context.</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> step 3.b - Prepare the collection context. This is quite complex.</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> . We must have as many context objects as the items in the collection context</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> . Every context object has all the loaded context plus the</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> item of the collection context.</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> So the template of the artifact to be generate will have</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> available as a context its collection item plus all the other context models.</span></li><li class="L4"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d127">checked_call(</span><span class="arg"> collectionItemLoadDatas</span><span class="mix">)</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> prepareCollectionItemLoadDatas</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> masterModelInfo</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> contextWizziModels</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> wizziModelWithCollection</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> loadingContext</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> masterModelInfo.generatorRequireContextOnly</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">#</span><span class="pln"> There is no source document for the artifact to be generated.</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">#</span><span class="pln"> The ArtifactGenerator simply requires a context object.</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">#</span><span class="pln"> So collect the loaded contexts in an array and pass them back.</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">var</span><span class="pln"> collModelInstances</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">[</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">foreach</span><span class="pln"> itemLoadData in collectionItemLoadDatas</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> collModelInstances.push</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> _.assign</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> itemLoadData.context</span></li><li class="L1"><span class="pnl">                                        </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> ___collItem itemLoadData.itemObject</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback(null, collModelInstances)</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">else</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">#</span><span class="pln"> step 4.b - load a context for each item of the collection context</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> async.map</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> collectionItemLoadDatas</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> load_collection</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> step 3.1 - load the context model</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> masterModelInfo.getLoadModel</span></li><li class="L3"><span class="pnl">                            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> wizziModelFactory </span><span class="mix">)</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">var</span><span class="pln"> mTreeLoadContext</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> modelContext</span></li><li class="L7"><span class="pnl">                                            </span><span class="tag">_</span><span class="pln"> _.assign</span></li><li class="L8"><span class="pnl">                                                </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                                                </span><span class="tag">@</span><span class="pln"> masterModelInfo.productionManager().globalContext || {}</span></li><li class="L0"><span class="pnl">                                                </span><span class="tag">@</span><span class="pln"> loadingContext</span></li><li class="L1"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> __productionManager masterModelInfo.productionManager()</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> wizziModelFactory</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> masterModelInfo.srcFullPath()</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> mTreeLoadContext</span></li><li class="L5"><span class="pnl">                                    </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> wizziModel </span><span class="mix">)</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> wizziModel.___exportName = (masterModelInfo.exportName || masterModelInfo.schema)</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">if</span><span class="pln"> masterModelInfo.coll</span></li><li class="L8"><span class="pnl">                                            </span><span class="tag">set</span><span class="pln"> wizziModel.___coll = masterModelInfo.coll</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L0"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> 'AsyncModelLoader._load_item'</span></li><li class="L1"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> 'success with loadingContext no collectionContext, masterModelInfo'</span></li><li class="L2"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> masterModelInfo.id</span></li><li class="L3"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> 'exportName'</span></li><li class="L4"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> wizziModel.___exportName</span></li><li class="L5"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> callback(null, wizziModel)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">else</span></li><li class="L7"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> The master modelInfo has no context ModelInfos</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> simply load it</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> srcFullPath = masterModelInfo.srcFullPath()</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> masterModelInfo.getLoadModel</span></li><li class="L1"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> wizziModelFactory </span><span class="mix">)</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> mTreeLoadContext</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> modelContext</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> _.assign</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                                    </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> (masterModelInfo.productionManager().globalContext || {})</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> __productionManager masterModelInfo.productionManager()</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> wizziModelFactory</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> srcFullPath</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> mTreeLoadContext</span></li><li class="L3"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> wizziModel</span><span class="mix">)</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> masterModelInfo.transformers && masterModelInfo.transformers.length &gt; 0</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> recurseTransform</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> masterModelInfo.transformers</span></li><li class="L7"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 0</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> wizziModel</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> masterModelInfo</span></li><li class="L0"><span class="pnl">                                    </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> transformedWizziModel</span><span class="mix">)</span></li><li class="L1"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> transformedWizziModel.___exportName</span></li><li class="L2"><span class="pnl">                                            </span><span class="tag">\b</span><span class="pln"> = (masterModelInfo.exportName || masterModelInfo.schema)</span></li><li class="L3"><span class="pnl">                                        </span><span class="tag">if</span><span class="pln"> masterModelInfo.coll</span></li><li class="L4"><span class="pnl">                                            </span><span class="tag">#</span><span class="pln"> this wizziModel is a context model from which</span></li><li class="L5"><span class="pnl">                                            </span><span class="tag">#</span><span class="pln"> will be extracted a collection context,</span></li><li class="L6"><span class="pnl">                                            </span><span class="tag">#</span><span class="pln"> when bubbling up from the recursive loading</span></li><li class="L7"><span class="pnl">                                            </span><span class="tag">set</span><span class="pln"> transformedWizziModel.___coll = masterModelInfo.coll</span></li><li class="L8"><span class="pnl">                                        </span><span class="tag">#</span><span class="pln"> cache the loaded model, one day, may be, will be useful</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> masterModelInfo.productionManager().setStateModel(srcFullPath, transformedWizziModel)</span></li><li class="L0"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L1"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> 'AsyncModelLoader._load_item'</span></li><li class="L2"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> 'success after transformation, masterModelInfo'</span></li><li class="L3"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> masterModelInfo.id</span></li><li class="L4"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> 'exportName'</span></li><li class="L5"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> wizziModel.___exportName</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> callback(null, transformedWizziModel)</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">else</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> wizziModel.___exportName</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">\b</span><span class="pln"> = (masterModelInfo.exportName || masterModelInfo.schema)</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> masterModelInfo.coll</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">#</span><span class="pln"> this wizziModel is a context model from which</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">#</span><span class="pln"> will be extracted a collection context,</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">#</span><span class="pln"> when bubbling up from the recursive loading</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> wizziModel.___coll = masterModelInfo.coll</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">#</span><span class="pln"> cache the loaded model, one day, may be, will be useful</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> masterModelInfo.productionManager().setStateModel(srcFullPath, wizziModel)</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'AsyncModelLoader._load_item'</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'success, masterModelInfo'</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> masterModelInfo.id</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'exportName'</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> wizziModel.___exportName</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> callback(null, wizziModel)</span></li><li class="L4"><span class="pnl">    </span><span class="tag">wz-function</span><span class="pln"> recurseTransform</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> modelTransformers</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> index</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> instance</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> modelInfo</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> index &gt;= modelTransformers.length</span></li><li class="L1"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> callback(null, instance)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> transformerConfig = modelTransformers[index]</span></li><li class="L3"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> modelInfo.getModelTransformer</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> transformerConfig.name</span></li><li class="L5"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> modelTransformer </span><span class="mix">)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> modelTransformer.trans</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> instance</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                    </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> transformedWizziModel</span><span class="mix">)</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> transformerConfig.dumpFile</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> transformerConfig.dumpFile</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> transformedWizziModel</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> recurseTransform</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> modelTransformers</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> index + 1</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> transformedWizziModel</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> modelInfo</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L9"><span class="pnl">    </span><span class="tag">wz-function</span><span class="pln"> prepareCollectionItemLoadDatas</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> modelInfo</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> wizziModelContexts</span></li><li class="L2"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> wizziModelWithCollection</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> loadingContext</span></li><li class="L4"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'prepareCollectionItemLoadDatas'</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'modelInfo'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> modelInfo.id</span></li><li class="L8"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> collName = wizziModelWithCollection.___coll.name</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> collItemExportName = wizziModelWithCollection.___coll.itemName</span></li><li class="L0"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'prepareCollectionItemLoadDatas'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'collName, collItemExportName'</span></li><li class="L3"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> collName</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> collItemExportName</span></li><li class="L5"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> collectionArray = wizziModelWithCollection[collName]</span></li><li class="L6"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !verify.isArray(collectionArray)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">return</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'Collection is not an array. Name: ' + collName + ', ' + modelInfo.toString()</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'prepareCollectionItemLoadDatas'</span></li><li class="L1"><span class="pnl">        </span><span class="tag">var</span></li><li class="L2"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> itemLoadDatas</span></li><li class="L3"><span class="pnl">                </span><span class="tag">[</span></li><li class="L4"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> context</span></li><li class="L5"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> itemObject in collectionArray</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> context</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> _.assign</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> loadingContext</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> context[collItemExportName] = itemObject</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> itemLoadDatas.push</span></li><li class="L2"><span class="pnl">                </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> modelInfo modelInfo</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> itemObject itemObject</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> context context</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> itemLoadDatas.length == 1</span></li><li class="L7"><span class="pnl">                </span><span class="tag">for</span><span class="pln"> var k in context</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> logme('prepareCollectionItemLoadDatas', 'context exportName', k)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'prepareCollectionItemLoadDatas'</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'itemObject'</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> itemObject.wzName</span></li><li class="L3"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> itemLoadDatas</span></li><li class="L4"><span class="pnl">    </span><span class="tag">#</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Load a single WizziModel using a single collection item as a context.</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> param collectionLoadData:Object {</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> modelInfo:Object {</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> schema:String,</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> ___state:Object {</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> pman:Object // ProductionManager</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> },</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> srcFullPath:Function {</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> },</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> context: Object { // prepared by prepareCollectionItemLoadDatas</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L7"><span class="pnl">    </span><span class="tag">wz-function</span><span class="pln"> load_collection</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> collectionLoadData</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">        </span><span class="tag">var</span></li><li class="L1"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> modelInfo = collectionLoadData.modelInfo</span></li><li class="L2"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> context = collectionLoadData.context</span></li><li class="L3"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> itemObject = collectionLoadData.itemObject</span></li><li class="L4"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> modelInfo.getLoadModel</span></li><li class="L5"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> wizziModelFactory </span><span class="mix">)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> "AsyncModelLoader.load_collection"</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> "modelInfo"</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> modelInfo.id</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> "schema"</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> modelInfo.schema</span></li><li class="L2"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> mTreeLoadContext</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> modelContext</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> _.assign</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> modelInfo.productionManager().globalContext || {}</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> context</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> __productionManager modelInfo.productionManager()</span></li><li class="L0"><span class="pnl">                </span><span class="tag">log</span><span class="pln"> 'asyncModelLoader.load_collection.mTreeLoadContext', mTreeLoadContext</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> wizziModelFactory</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> modelInfo.srcFullPath()</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> mTreeLoadContext</span></li><li class="L4"><span class="pnl">                    </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> wizziModel </span><span class="mix">)</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> "AsyncCollectionModelLoader.load"</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> "success, root"</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> wizziModel.wzTag</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> wizziModel.wzName</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> wizziModel.___collItem = itemObject</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> callback(null, wizziModel)</span></li><li class="L2"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> error</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> message</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> method</span></li><li class="L5"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> err</span></li><li class="L6"><span class="pnl">            </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L8"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> message message</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> source "wizzi/lib/model/asyncModelLoader/" + method</span></li><li class="L0"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> logme(err)</span></li><li class="L1"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> err</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d30">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/model/modelInfo.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> util = require("util")</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> assert = require("assert")</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require("path")</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> async = require("async")</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> errors = require('../errors')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../util/verify')</span></li><li class="L9"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> ittfs = require('wizzi-repo').Filesystem</span></li><li class="L0"><span class="pnl">    </span><span class="tag">+</span></li><li class="L1"><span class="pnl">    </span><span class="tag">#</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> param config = {</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> cwd:String,</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> src:String,</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> ignore:String,</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> schema:String,</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> contexts:Object, // ModelInfo configs for context objects</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> coll:Object {</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> name:String</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> itemName:String</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> pathTemplateValues:Array of {</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> token:String</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> attribute:String</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> function:Function</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> modelRef:Object {</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> exportName:String</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> };</span></li><li class="L1"><span class="pnl">    </span><span class="tag">+</span></li><li class="L2"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> logme</span></li><li class="L3"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> false</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> console.log.apply(console, arguments)</span></li><li class="L5"><span class="pnl">    </span><span class="tag">+</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> modelInfoCount = 0</span></li><li class="L7"><span class="pnl">    </span><span class="tag">+</span></li><li class="L8"><span class="pnl">    </span><span class="tag">wz-class</span><span class="pln"> ModelInfo</span></li><li class="L9"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> config</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> config.id = ('mi_' + ++modelInfoCount)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.id = config.id</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.config = config</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.schema = config.schema</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.contexts</span></li><li class="L6"><span class="pnl">                </span><span class="tag">[</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isArray(config.contexts)</span></li><li class="L8"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> item in config.contexts</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.contexts.push</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">new</span><span class="pln"> ModelInfo(item)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.transformers = config.transformers</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.coll = config.coll</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.exportName = config.exportName</span></li><li class="L4"><span class="pnl">            </span><span class="tag">+</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isString(config.src) === false</span></li><li class="L6"><span class="pnl">                </span><span class="tag">throw</span><span class="pln"> this.error("config.src must be a string")</span></li><li class="L7"><span class="pnl">            </span><span class="tag">else</span></li><li class="L8"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.generatorRequireContextOnly = false</span></li><li class="L9"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> config.src === 'context'</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> this.generatorRequireContextOnly = true</span></li><li class="L1"><span class="pnl">                </span><span class="tag">else</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> config.src = ittfs.unixifyPath(config.src)</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> verify.isString(config.cwd)</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> config.cwd = ittfs.unixifyPath(config.cwd)</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> ndx = config.src.indexOf('/*')</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> ndx &gt; -1</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> config.srcPattern = config.src.substr(ndx)</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> config.src = config.src.substr(0, ndx)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.generatorRequireContextOnly == false</span></li><li class="L0"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> verify.isAbsolutePath(config.src) === false && verify.isEmpty(config.cwd) === true</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">throw</span><span class="pln"> this.error("when config.src is not an absolute path, config.cwd must be a not empty string")</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> src</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.generatorRequireContextOnly == true</span></li><li class="L5"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> null</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> typeof (value) === 'undefined'</span></li><li class="L7"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> this.config.src</span></li><li class="L8"><span class="pnl">            </span><span class="tag">else</span></li><li class="L9"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.config.src = value</span></li><li class="L0"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> srcFullPath</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.generatorRequireContextOnly == true</span></li><li class="L2"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> null</span></li><li class="L3"><span class="pnl">            </span><span class="tag">return</span></li><li class="L4"><span class="pnl">                </span><span class="tag">iif</span><span class="pln"> verify.isAbsolutePath(this.config.src)</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">then</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> this.config.src</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> this.config.cwd</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> this.config.src</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> ignoreFullPath</span></li><li class="L2"><span class="pnl">            </span><span class="tag">return</span></li><li class="L3"><span class="pnl">                </span><span class="tag">iif</span><span class="pln"> verify.isAbsolutePath(this.config.ignore)</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">then</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> this.config.ignore</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> this.config.cwd</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> this.config.ignore</span></li><li class="L0"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> srcGlobPath</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> globPattern = this.config.srcPattern || '/**/*.*'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> globPattern.substr(0, 1) !== '/'</span></li><li class="L3"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> globPattern = ('/' + globPattern)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.srcFullPath() + globPattern</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> srcGlobOptions</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ret</span></li><li class="L7"><span class="pnl">                </span><span class="tag">{</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.config.ignore</span></li><li class="L9"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> ret.ignore = [this.ignoreFullPath()]</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> ret</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> productionManager</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> typeof (value) === 'undefined'</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> this.productionManagerInstance</span></li><li class="L5"><span class="pnl">            </span><span class="tag">else</span></li><li class="L6"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> verify.isObject(value) === false</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">throw</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">new</span><span class="pln"> Error("value parameter must be an object. Instead is: " + value)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.productionManagerInstance = value</span></li><li class="L0"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> modelInfo in this.contexts</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> modelInfo.productionManager(value)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> hasContext</span></li><li class="L3"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> verify.isArray(this.config.contexts) && this.config.contexts.length &gt; 0</span></li><li class="L4"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getContextCollectionInfo</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.hasContext()</span></li><li class="L6"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> item in this.config.contexts</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> verify.isObject(item.coll)</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">return</span><span class="pln"> item.coll</span></li><li class="L9"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> null</span></li><li class="L0"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getModelInfos</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> that = this</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.isDirectory</span></li><li class="L5"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> isDirectory </span><span class="mix">)</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> isDirectory</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> ret</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">[</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> that.getFiles</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L1"><span class="pnl">                            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> files </span><span class="mix">)</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> files.__is_error</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">return</span></li><li class="L4"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> callback(files)</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">for</span><span class="pln"> var i = 0; i &lt; files.length; i++</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">var</span><span class="pln"> fileInfo = files[i]</span></li><li class="L7"><span class="pnl">                                    </span><span class="tag">var</span><span class="pln"> mi = that.clone()</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> mi.src</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> fileInfo.relpath</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> mi.productionManager</span></li><li class="L1"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> that.productionManagerInstance</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> ret.push(mi)</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">return</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> ret</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">[</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> that</span></li><li class="L3"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> clone</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> newconfig</span></li><li class="L5"><span class="pnl">                </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> cwd this.config.cwd</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> src this.config.src</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> schema this.config.schema</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> contexts this.config.contexts</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> transformers this.config.transformers</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> coll this.config.coll</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ret</span></li><li class="L3"><span class="pnl">                </span><span class="tag">new</span><span class="pln"> ModelInfo(newconfig)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> ret</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> error</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> message</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> method</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> err</span></li><li class="L9"><span class="pnl">                </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> message message</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> source "wizzi/lib/model/modelInfo/" + method</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> logme(err)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> err</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> toString</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> 'modelInfo.config: ' + util.inspect(this.config, {depth: 2})</span></li><li class="L7"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> terminate</span></li><li class="L8"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d28"> modelinfo/sources</span></li><li class="L9"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d27"> modelinfo/loading</span></li><li class="L0"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> relPath</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> fullpath</span></li><li class="L2"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> basedir</span></li><li class="L3"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> fullpath.substr(basedir.length + 1)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d31">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/helpers/sourceTree.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> util = require('util')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../../util/verify')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports =</span></li><li class="L7"><span class="pnl">        </span><span class="tag">function</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> wzmodel</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> filepath</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> wzrepoRootPath</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> filepath_norm</span></li><li class="L2"><span class="pnl">                </span><span class="tag">iif</span><span class="pln"> verify.isString(filepath)</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">then</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> verify.replaceAll</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> path.dirname(filepath)</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> '\\'</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> '/'</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">else</span><span class="pln"> null</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> wzrepoRootPath_norm</span></li><li class="L0"><span class="pnl">                </span><span class="tag">iif</span><span class="pln"> verify.isString(wzrepoRootPath)</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">then</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> verify.replaceAll(wzrepoRootPath, '\\', '/')</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">else</span><span class="pln"> null</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span></li><li class="L5"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> source</span></li><li class="L6"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> fullpath</span></li><li class="L7"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> relpath</span></li><li class="L8"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> wzpath</span></li><li class="L9"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> ret</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> kind '$sourcetree'</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> filepath filepath</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> sources</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">[</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> sources = wzmodel.loadContext.sources</span></li><li class="L6"><span class="pnl">            </span><span class="tag">for</span><span class="pln"> var k in sources</span></li><li class="L7"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> fullpath = sources[k].filepath</span></li><li class="L8"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> filepath_norm</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> fullpath_norm = verify.replaceAll(fullpath, '\\', '/')</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> relpath = fullpath_norm.substr(filepath_norm.length + 1)</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> wzpath = fullpath_norm.substr(wzrepoRootPath_norm.length + 1)</span></li><li class="L2"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> source =</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> kind '$source'</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> key k</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> filepath fullpath</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> relpath relpath</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> wzpath wzpath</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> ret.sources.push(source)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> ret</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d32">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/t/manager/async_initialize_artifactInfos.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> AsyncInitializeArtifactInfo</span></li><li class="L3"><span class="pnl">        </span><span class="tag">{</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> run</span></li><li class="L5"><span class="pnl">                </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> jobConfig</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> pman = jobConfig.__pman</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> wfjobSrc = jobConfig.wfjob.src</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">#</span><span class="pln"> log 'pman.productionName, wfjobSrc', pman.productionName, wfjobSrc</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> pman.productionName += '_' + path.basename(wfjobSrc)</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">#</span><span class="pln"> log 'pman.productionName formatted', pman.productionName</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> job = new WfJob(pman, jobConfig)</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> job.getArtifactInfoConfigs</span></li><li class="L5"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> result </span><span class="mix">)</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">var</span><span class="pln"> requires = result[0]</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">#</span><span class="pln"> log 'requires', requires</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">foreach</span><span class="pln"> r in requires</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">var</span><span class="pln"> factoryPackage = pkgLoader.load(r, path.dirname(wfjobSrc))</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> pman.registerWizziFactoryPackage(factoryPackage)</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">var</span><span class="pln"> artifactInfoConfigs = result[1]</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">foreach</span><span class="pln"> artifactInfoConfig in artifactInfoConfigs</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">#</span><span class="pln"> log 'ProductionManager.initialize.artifactInfoConfig', util.inspect(artifactInfoConfig, { depth: 2 })</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> artifactInfoConfig.wfjob = wfjobSrc</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> pman.options.trace</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">log</span><span class="pln"> 'ProductionManager.initialize.artifactInfoConfig', artifactInfoConfig.toString()</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> artifactInfoConfig.isWfJob</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">log</span><span class="pln"> 'ProductionManager.initialize.artifactInfoConfig', "isWfJob", inspect(artifactInfoConfig, { depth: 2 })</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> pman.addWfJobArtifactInfo(artifactInfoConfig)</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> pman.addArtifactInfo(artifactInfoConfig)</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">foreach</span><span class="pln"> artifactInfo in pman.wfJobArtifactInfos</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> artifactInfo.initialize(pman);</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">foreach</span><span class="pln"> artifactInfo in pman.artifactInfos</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> artifactInfo.initialize(pman);</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback(null, null)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d33">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/t/manager/async_persister.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> async persist one or more artifact productions</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> from an artifactInfo object.</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> uses an ArtifactPersister instance</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> AsyncPersisterToFile</span></li><li class="L6"><span class="pnl">        </span><span class="tag">{</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> run</span></li><li class="L8"><span class="pnl">                </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> artifactInfo</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> !artifactInfo.productionManager</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> log.error('AsyncPersisterToFile. Invalid artifactInfo:', artifactInfo);</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> callback(artifactInfo)</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> log.info('Started async persist to file artifact: ' + artifactInfo.name);</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> persister = new ArtifactPersister(artifactInfo)</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> persister.toFile</span></li><li class="L7"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> operResult </span><span class="mix">)</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">foreach</span><span class="pln"> oper in operResult</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> log.info</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> oper.oper + ', ' +</span></li><li class="L1"><span class="pnl">                                        </span><span class="tag">\b</span><span class="pln"> oper.status + ', ' +</span></li><li class="L2"><span class="pnl">                                        </span><span class="tag">\b</span><span class="pln"> oper.item.filepath</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> log.info</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> 'Ended async persist to file artifact: ' + artifactInfo.name</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback(null, operResult)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d34">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/t/manager/async_runner.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> async run an artifact production</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> from an artifactInfo object</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> AsyncRunner</span></li><li class="L5"><span class="pnl">        </span><span class="tag">{</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> run</span></li><li class="L7"><span class="pnl">                </span><span class="tag">function</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> artifactInfo</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> log.info('Started async run artifact: ' + artifactInfo.name)</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> runner = new Runner(artifactInfo)</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> runner.run</span></li><li class="L3"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> operResult </span><span class="mix">)</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> log.info('Ended async run artifact: ' + artifactInfo.name)</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback(null, operResult)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d35">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/t/manager/generations.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> go_generateArtifact</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> artifactName</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> artifactContext</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> wizziModelInstance</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> self = this</span></li><li class="L8"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> generator = this.getArtifactGenerator(artifactName)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> generator == null</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> msg = 'ProductionManager.go_generateArtifact cannot find generator for artifact: ' + artifactName</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> fail.warn(msg)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">throw</span><span class="pln"> new Error(msg)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> genContext = new GenContext({ options: options(null, { data: artifactContext.__data }) })</span></li><li class="L4"><span class="pnl">        </span><span class="tag">new</span><span class="pln"> generator.gen</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> wizziModelInstance</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> genContext</span></li><li class="L7"><span class="pnl">            </span><span class="tag">function</span></li><li class="L8"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L9"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> msg = util.inspect(err, { depth: null})</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> fail.warn(msg)</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">throw</span><span class="pln"> new Error(msg)</span></li><li class="L3"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> sw = new StringWriter()</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> genContext.toStream(sw)</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback(null, sw.toString())</span></li><li class="L6"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> generateArtifact</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> schemaName</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> artifactName</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ittfDocumentUri</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> modelContext</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> artifactContext</span></li><li class="L2"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> self = this</span></li><li class="L4"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> loadModel = this.getLoadModel(schemaName)</span></li><li class="L5"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> loadModel == null</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> msg = 'ProductionManager.generateArtifact cannot find loadModel for schema: ' + schemaName + ' for artifact ' + ittfDocumentUri</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> fail.warn(msg)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">throw</span><span class="pln"> new Error(msg)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !loadModel</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> msg = 'ProductionManager.generateArtifact. Missing load method in loadModel for schema: ' + schemaName + ' for artifact ' + ittfDocumentUri</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> fail.warn(msg)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">throw</span><span class="pln"> new Error(msg)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">else</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> loadModel</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> ittfDocumentUri</span></li><li class="L6"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> modelContext</span></li><li class="L7"><span class="pnl">                </span><span class="tag">function</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> wizziModelInstance</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">#</span><span class="pln"> log 'ProductionManager.generateArtifact', err</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> msg = 'Error loading IttfDocument: ' + ittfDocumentUri + '\n' + util.inspect(err, { depth: null})</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> fail.warn(msg)</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">throw</span><span class="pln"> new Error(msg)</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> self.go_generateArtifact</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> artifactName</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> artifactContext</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> wizziModelInstance</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> callback</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d36">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/t/manager/state.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> aclStat</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L4"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> typeof(value) === 'undefined'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.aclStatObject</span></li><li class="L6"><span class="pnl">        </span><span class="tag">else</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.aclStatObject = value</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.productionContext.setAclStat(value)</span></li><li class="L9"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> globalContext</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L1"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> typeof(value) === 'undefined'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.globalContextObject || {}</span></li><li class="L3"><span class="pnl">        </span><span class="tag">else</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.globalContextObject = value</span></li><li class="L5"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> setStateModel</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> key</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L8"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.___state.models[key] = value</span></li><li class="L9"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getLogState</span></li><li class="L0"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> logState</span></li><li class="L1"><span class="pnl">            </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> models</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> log 'wizzi-factory/productionManager/state models length', this.___state.models.length</span></li><li class="L5"><span class="pnl">        </span><span class="tag">for</span><span class="pln"> var m in this.___state.models</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> mo = this.___state.models[m]</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> modelState = {}</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> logState[m] = modelState</span></li><li class="L9"><span class="pnl">            </span><span class="tag">for</span><span class="pln"> var k in mo</span></li><li class="L0"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> log 'wizzi-factory/productionManager/state model prop', k</span></li><li class="L1"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> mo.loadContext</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> modelState.ittfSources = mo.loadContext.getIttfDocuments()</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">foreach</span><span class="pln"> idm in mo.loadContext.ittfDocumentDatas</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> idm_o = mo.loadContext.ittfDocumentDatas[idm]</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">+</span><span class="pln"> delete idm_o.mTree</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">for</span><span class="pln"> var idm_k in idm_o</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">#</span><span class="pln"> log 'wizzi-factory/productionManager/state model loadContext ittfDocumentData prop', idm_k</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">#</span><span class="pln"> set modelState.ittfDocumentDatas = mo.loadContext.ittfDocumentDatas</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">for</span><span class="pln"> var z in mo.loadContext</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> log 'wizzi-factory/productionManager/state model loadContext prop', z</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> mo.loadContext.ittfSources</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">for</span><span class="pln"> var z in mo.loadContext.ittfSources</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">#</span><span class="pln"> log 'wizzi-factory/productionManager/state model ittfSources prop', z</span></li><li class="L4"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> logState</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d37">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/asyncWfJobRunner.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> path</span></li><li class="L4"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> util</span></li><li class="L5"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> async</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> thisPackageIndex = require('../../index')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../util/verify')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> log = require('../util/log')(module)</span></li><li class="L9"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> logme</span></li><li class="L0"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> false</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> console.log.apply(console, arguments);</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> AsyncWfJobRunner</span></li><li class="L5"><span class="pnl">        </span><span class="tag">{</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> run_many</span></li><li class="L7"><span class="pnl">                </span><span class="tag">function</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> modelInfos</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> async.map</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> modelInfos</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> AsyncWfJobRunner._run_item</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> _run_item</span></li><li class="L5"><span class="pnl">                </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> modelInfo</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> srcFullPath = modelInfo.srcFullPath();</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">log</span><span class="pln"> "AsyncWfJobRunner._run_item: I should run " + srcFullPath</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> thisPackageIndex.executeJob</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> name 'wizzi-studio dev-dashboard-incubator'</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> path srcFullPath</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> thisPackageIndex.options</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> indentSpaces 4</span></li><li class="L8"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> basedir path.dirname(srcFullPath)</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> verbose 2</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports = AsyncWfJobRunner</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d38">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/context.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> util = require('util')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> file = require('../util/file')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> fail = require('../util/fail')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">#</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> { options</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> { dumps</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> string dumpsBaseFolder</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> { mTreeBuildUpScript</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> boolean dump</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> string dumpsBaseFolder</span></li><li class="L4"><span class="pnl">    </span><span class="tag">wz-class</span><span class="pln"> ProductionContext</span></li><li class="L5"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.dump = false</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.dumps = options.dumps || {}</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.ittfDocuments =</span></li><li class="L0"><span class="pnl">                </span><span class="tag">{</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.ittfEvaluationScripts =</span></li><li class="L2"><span class="pnl">                </span><span class="tag">{</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.mTrees =</span></li><li class="L4"><span class="pnl">                </span><span class="tag">{</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.evaluatedMTrees =</span></li><li class="L6"><span class="pnl">                </span><span class="tag">{</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wizziModels =</span></li><li class="L8"><span class="pnl">                </span><span class="tag">{</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.artifacts = []</span></li><li class="L0"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> setAclStat</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> aclstat</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.aclstat = aclstat</span></li><li class="L3"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addIttfDocument</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> uri</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> content</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.ittfDocuments[uri]</span></li><li class="L7"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.ittfDocuments[uri].cacheCount++</span></li><li class="L8"><span class="pnl">            </span><span class="tag">else</span></li><li class="L9"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.ittfDocuments[uri]</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> uri uri</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> content content</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> cacheCount 0</span></li><li class="L4"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addMTreeBuildUpScript</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> uri</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> ittfEvalScript</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.ittfEvaluationScripts[uri]</span></li><li class="L8"><span class="pnl">                </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> uri uri</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> ittfEvalScript ittfEvalScript</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.dumps && this.dumps.mTreeBuildupJsWizziCode && this.dumps.mTreeBuildupJsWizziCode.dump</span></li><li class="L2"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> dumpsFolder = this.dumps.mTreeBuildupJsWizziCode.dumpsBaseFolder || this.dumps.dumpsBaseFolder</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> file.write</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> dumpsFolder</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> path.basename(uri) + '.js.dump'</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> ittfEvalScript.toCode()</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addMixedMTree</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> uri</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> mTree</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.dumps && this.dumps.mixedMTree && this.dumps.mixedMTree.dump</span></li><li class="L2"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> dumpsFolder = this.dumps.mixedMTree.dumpsBaseFolder || this.dumps.dumpsBaseFolder</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> file.write</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> dumpsFolder</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> (path.basename(uri) + '.mixed.mTree.dump')</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> mTree.dump()</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addEvaluatedMTree</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> uri</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> mTree</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.evaluatedMTrees[uri] = mTree.dump(true)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.dumps && this.dumps.evaluatedMTree && this.dumps.evaluatedMTree.dump</span></li><li class="L3"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> dumpsFolder = this.dumps.evaluatedMTree.dumpsBaseFolder || this.dumps.dumpsBaseFolder</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> file.write</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> dumpsFolder</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> path.basename(uri) + '.evaluated.mTree.dump'</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.evaluatedMTrees[uri]</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addMTree</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> uri</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> loadContext</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.mTrees[uri] =</span></li><li class="L3"><span class="pnl">                </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> uri uri</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> loadContext loadContext</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addWizziModel</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> uri</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> wizziModel</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wizziModels[uri] =</span></li><li class="L0"><span class="pnl">                </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> uri uri</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> wizziModel wizziModel</span></li><li class="L3"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addArtifact</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> artifact</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.artifacts.push(artifact)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> raiseIttfEvaluationScriptError</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> uri</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> exception</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> script = this.ittfEvaluationScripts[uri]</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> script && script.ittfEvalScript && exception && exception.lineNumber</span></li><li class="L1"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> lines</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> script.ittfEvalScript.getErrorLines(exception)</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">._</span><span class="pln"> join('\n')</span></li><li class="L4"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> exception.message = '\nError evaluating ittf in uri: ' + uri + '\n' + lines + '\n'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">else</span></li><li class="L6"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> exception.message = '\nError evaluating ittf in uri: ' + uri + '\n' + exception.message + '\n'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> fail.warn(exception)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">throw</span><span class="pln"> exception</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d39">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/manager.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> util = require('util')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> assert = require('assert')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> async = require('async')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../util/verify')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> file = require('../util/file')</span></li><li class="L9"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> fail = require('../util/fail')</span></li><li class="L0"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> GenContext = require('../artifact/GenContext')</span></li><li class="L1"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> StringWriter = require('../util/stringwriter')</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> log = require('../util/log')(module)</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> options = require('./options')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> ProductionContext = require("./context").ProductionContext</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> ArtifactInfo = require('../artifact/artifactinfo').ArtifactInfo</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> pkgLoader = require('./wfpackageloader')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> Runner = require('./runner').Runner</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> WfJob = require('./wfjob')</span></li><li class="L9"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> ArtifactPersister = require('./persister').ArtifactPersister</span></li><li class="L0"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> thisWizziPackage = require('../../index')</span></li><li class="L1"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> var legacy = require('../../legacy')</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> var Logger = require('../services/logger')</span></li><li class="L3"><span class="pnl">    </span><span class="tag">#</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> registerWizziFactoryPackage(wizziModule)</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> addArtifactInfo(artifactInfo)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> addWfJob(wfJobConfig)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> getLoadModel(schemaName)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> getWizziSchemaObject(schemaName)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> getModelTransformer(transName)</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> getArtifactGenerator(artifactName)</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> run:AsyncMethod</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> persistToFile:AsyncMethod</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> You execute a production</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> first registering wizzi packages</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> then adding wfjobs and/or artifact infos</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> finally executing the run and persistToFile async methods</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span></li><li class="L9"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> ProductionManager</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span></li><li class="L1"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> CTOR_PARAMS</span></li><li class="L2"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> { wizziFactory</span></li><li class="L3"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> { options</span></li><li class="L4"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> boolean verbose</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> boolean trace</span></li><li class="L6"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> string basedir // uri</span></li><li class="L7"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> { dumps</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> string dumpsBaseFolder</span></li><li class="L9"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> { mTreeBuildUpScript</span></li><li class="L0"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> boolean dump</span></li><li class="L1"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> string dumpsBaseFolder</span></li><li class="L2"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> wizziFactory</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> assert.strictEqual(wizziFactory.__type, 'WizziFactory', 'param wizziFactory must be of type WizziFactory')</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> assert.ok(verify.isObject(options), 'param options must be an object')</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wizziFactory = wizziFactory</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.options = options</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.artifactInfos = []</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wfJobArtifactInfos = []</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wfJobConfigs = []</span></li><li class="L2"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> VIA _ this.wizziFactory.registerWizziFactoryPackage(thisWizziPackage)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> VIA _ this.wizziFactory.registerWizziFactoryPackage(legacy)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.productionContext = new ProductionContext(options)</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.setLevel(options.verbose || 0)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.___state</span></li><li class="L7"><span class="pnl">                </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> models</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> pman this</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> pcx this.productionContext</span></li><li class="L2"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> set this.logger = new Logger()</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.productionName = 'production'</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> Add an artifact info declared in a "artifact" element of a "wfjob" WizziModel.</span></li><li class="L6"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> It may also be built programmatically.</span></li><li class="L7"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addArtifactInfo</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> artifactInfoConfig</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> ArtifactInfo.isArtifactConfig(artifactInfoConfig)</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.artifactInfos.push(new ArtifactInfo(artifactInfoConfig))</span></li><li class="L1"><span class="pnl">            </span><span class="tag">elif</span><span class="pln"> ArtifactInfo.isArtifactInstance(artifactInfoConfig)</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.artifactInfos.push(artifactInfoConfig)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">else</span></li><li class="L4"><span class="pnl">                </span><span class="tag">throw</span><span class="pln"> new Error('ProductionManager.addArtifactInfo is not an artifact info: ' + util.inspect(artifactInfoConfig))</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span></li><li class="L6"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> Add a WfJob request declared in an "artifact" element of a "wfjob" WizziModel.</span></li><li class="L7"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addWfJobArtifactInfo</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> wfJobArtifactInfoConfig</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.wfJobArtifactInfos.push(new ArtifactInfo(wfJobArtifactInfoConfig))</span></li><li class="L0"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addWfJob</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> wfJobConfig</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> wfJobConfig.__pman = this</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> wfJobConfig.options = Object.assign({}, this.options, (wfJobConfig.options || {}))</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.wfJobConfigs.push(wfJobConfig)</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> registerWizziFactoryPackage</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> wizziModule</span></li><li class="L7"><span class="pnl">            </span><span class="tag">throw</span><span class="pln"> new Error('ProductionManager.registerWizziFactoryPackage not implemented.')</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> _ this.wizziFactory.registerWizziFactoryPackage(wizziModule)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getLoadModel</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> schemaName</span></li><li class="L1"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'wizzi.wizziManager.getLoadModel.globalContextObject', this.globalContextObject</span></li><li class="L2"><span class="pnl">            </span><span class="tag">return</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.wizziFactory.getLoadModel</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> schemaName</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.globalContextObject</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getSchemaDefinition</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> schemaName</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.wizziFactory.getSchemaDefinition</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> schemaName</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.globalContextObject</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getModelTransformer</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> transName</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.wizziFactory.getModelTransformer</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> transName</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.globalContextObject</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getArtifactGenerator</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> artifactName</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.wizziFactory.getArtifactGenerator</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> artifactName</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.globalContextObject</span></li><li class="L4"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> initialize</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.info('Initialize')</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> async.map</span></li><li class="L8"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> this.wfJobConfigs</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> AsyncInitializeArtifactInfo.run</span></li><li class="L0"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> notUsed </span><span class="mix">)</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback(null, null)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> run</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.info('Start run')</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> self = this</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.initialize</span></li><li class="L7"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> nullResult </span><span class="mix">)</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> async.map</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> self.wfJobArtifactInfos</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> AsyncRunner.run</span></li><li class="L1"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> result </span><span class="mix">)</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> async.map</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> self.artifactInfos</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> AsyncRunner.run</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L7"><span class="pnl">                                    </span><span class="tag">param</span><span class="pln"> result</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">return</span><span class="pln"> callback(err);</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> self.artifactInfos = result</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> self.terminate()</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> log.info('End run')</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> callback(null, result)</span></li><li class="L4"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> terminate</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.info('Terminate')</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> persistToFile</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.info('Start persistToFile')</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> self = this</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> async.map</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> self.artifactInfos</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> AsyncPersisterToFile.run</span></li><li class="L3"><span class="pnl">                </span><span class="tag">function</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> result</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">return</span><span class="pln"> callback(err);</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">#</span><span class="pln"> log 'ProductionManager.persistToFile.persisted artifacts', util.inspect(result, { depth: 1 })</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">foreach</span><span class="pln"> ai in self.artifactInfos</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> ai.terminate()</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> log.info('End persistToFile')</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback(null, result)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> relPath</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> filepath</span></li><li class="L5"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> filepath.substr(this.options.basedir.length + 1)</span></li><li class="L6"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d36"> manager/state</span></li><li class="L7"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d35"> manager/generations</span></li><li class="L8"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d32"> manager/async_initialize_artifactInfos</span></li><li class="L9"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d34"> manager/async_runner</span></li><li class="L0"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d33"> manager/async_persister</span></li><li class="L1"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports = ProductionManager</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d40">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/options.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> _ = require('lodash')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../util/verify')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports =</span></li><li class="L6"><span class="pnl">        </span><span class="tag">function</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userdefaults</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> genoptions</span></li><li class="L9"><span class="pnl">            </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> _.merge</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> isDebug false</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> CRLF '\n'</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> indentSpaces 4</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> dotgExtensionPrefix false</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> dumps {}</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> userdefaults || {}</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> genoptions || {}</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d41">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/persister.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> util = require('util')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> async = require('async')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> file = require('../util/file')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> log</span></li><li class="L8"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> require('../util/log')</span></li><li class="L9"><span class="pnl">            </span><span class="mix frag-to-link-a">(</span><span class="mix">)</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> module</span></li><li class="L1"><span class="pnl">    </span><span class="tag">+</span></li><li class="L2"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> logme</span></li><li class="L3"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> false</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> console.log.apply(console, arguments)</span></li><li class="L5"><span class="pnl">    </span><span class="tag">+</span></li><li class="L6"><span class="pnl">    </span><span class="tag">wz-class</span><span class="pln"> ArtifactPersister</span></li><li class="L7"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> artifactInfo</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.artifactInfo = artifactInfo</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.setLevel</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> artifactInfo.productionManager.options.verbose</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> toFile</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.artifactInfo.getItemsToPersistToFile</span></li><li class="L5"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> items </span><span class="mix">)</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> async.map</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> items</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> AsyncArtifactFilePersister.persist</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> toTest</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ret</span></li><li class="L2"><span class="pnl">                </span><span class="tag">[</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.artifactInfo.getItemsToPersistToFile</span></li><li class="L4"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> items </span><span class="mix">)</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">foreach</span><span class="pln"> item in items</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> ret.push</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> filepath item.filepath</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> content item.genContext.getContent()</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> ret</span></li><li class="L1"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> AsyncArtifactFilePersister</span></li><li class="L2"><span class="pnl">        </span><span class="tag">{</span></li><li class="L3"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> persist</span></li><li class="L4"><span class="pnl">                </span><span class="tag">function</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> genInfo</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'AsyncArtifactFilePersister.persist'</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> genInfo.filepath</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> genInfo.genContext.getContent()</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> file.openWrite</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> genInfo.filepath</span></li><li class="L3"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> stream </span><span class="mix">)</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> genInfo.genContext.toStream(stream)</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> stream.end()</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> log.warn('Written to file: ' + genInfo.filepath)</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> oper 'persist-to-file'</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> item</span></li><li class="L2"><span class="pnl">                                        </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> filepath genInfo.filepath</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> status 'success'</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d42">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/readme.md.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">mdx</span></li><li class="L2"><span class="pnl">    </span><span class="tag">h3</span><span class="pln"> The global context</span></li><li class="L3"><span class="pnl">    </span><span class="tag">p</span><span class="pln"> The default value in options.js is empty ( = {} )</span></li><li class="L4"><span class="pnl">    </span><span class="tag">p</span><span class="pln"> The user can pass a global context to</span></li><li class="L5"><span class="pnl">    </span><span class="tag">ul</span></li><li class="L6"><span class="pnl">        </span><span class="tag">li</span><span class="pln"> A wizzi job execution</span></li><li class="L7"><span class="pnl">        </span><span class="tag">li</span><span class="pln"> An mTree load</span></li><li class="L8"><span class="pnl">        </span><span class="tag">li</span><span class="pln"> A wizzi model load</span></li><li class="L9"><span class="pnl">        </span><span class="tag">li</span><span class="pln"> An artifact generation</span></li><li class="L0"><span class="pnl">    </span><span class="tag">span</span><span class="pln"> using the property globalContext of the options parameter of</span></li><li class="L1"><span class="pnl">    </span><span class="tag">ul</span></li><li class="L2"><span class="pnl">        </span><span class="tag">li</span><span class="pln"> The wizzi.executeInstanceJob method</span></li><li class="L3"><span class="pnl">        </span><span class="tag">li</span><span class="pln"> The wizzi.createFactory method</span></li><li class="L4"><span class="pnl">    </span><span class="tag">p</span><span class="pln"> Creating a wizziFactory instance always is preliminar to</span></li><li class="L5"><span class="pnl">        </span><span class="tag">\b</span><span class="pln"> executing an mTree load, a wizzi model load or an artifact generation.</span></li><li class="L6"><span class="pnl">    </span><span class="tag">p</span><span class="pln"> The wizzi.executeInstanceJob creates its wizziFactory instance from</span></li><li class="L7"><span class="pnl">        </span><span class="tag">\b</span><span class="pln"> the options that receives.</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d43">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/runner.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> assert = require('assert')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> util = require('util')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../util/verify')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> log</span></li><li class="L8"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> require('../util/log')</span></li><li class="L9"><span class="pnl">            </span><span class="mix frag-to-link-a">(</span><span class="mix">)</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> module</span></li><li class="L1"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> GenContext = require('../artifact/GenContext')</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> AsyncModelLoader = require('../model/asyncModelLoader')</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> AsyncArtifactGenerator = require('../artifact/asyncArtifactGenerator').AsyncArtifactGenerator</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> AsyncWfJobRunner = require('./asyncWfJobRunner')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">+</span></li><li class="L6"><span class="pnl">    </span><span class="tag">#</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Async artifact generation runner.</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> A runner instance runs a single artifactInfo.</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Input: an ArtifactInfo (constructor injected).</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Output: the ArtifactInfo enriched with (one or many) writeContext(s),</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> ready to be persisted (callback ok result).</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> A Runner can run</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> a WfJob</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> a ModelArtifact</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> a CollectionArtifact</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> a CodeWriteArtifact</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> a FinalArtifact</span></li><li class="L8"><span class="pnl">    </span><span class="tag">+</span></li><li class="L9"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> logme</span></li><li class="L0"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> false</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> console.log.apply(console, arguments)</span></li><li class="L2"><span class="pnl">    </span><span class="tag">+</span></li><li class="L3"><span class="pnl">    </span><span class="tag">wz-class</span><span class="pln"> Runner</span></li><li class="L4"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> artifactInfo</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.artifactInfo = artifactInfo</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.setLevel((artifactInfo.options.verbose || 0))</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> run</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.artifactInfo.modelInfo</span></li><li class="L1"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> VIA</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> "Runner.run modelInfo"</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'isDirectory'</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> this.artifactInfo.modelInfo.isDirectory()</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'config'</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> util.inspect</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> this.artifactInfo.modelInfo.config</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> depth 3</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this._runOnModelInfo</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.artifactInfo.modelInfo</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">            </span><span class="tag">else</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this._runOnContextInfos</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.artifactInfo.contextInfos</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> _runOnContextInfos</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> contextInfos</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.artifactInfo.isCodeWriteArtifact()</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.runCodeWriteArtifact</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.artifactInfo.modelInfo</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.artifactInfo.gen</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">            </span><span class="tag">else</span></li><li class="L7"><span class="pnl">                </span><span class="tag">return</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> this.error</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'Artifact is in an invalid state: ' + util.inspect(this.artifactInfo, {depth: 2})</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> '_runOnContextInfos'</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> _runOnModelInfo</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> modelInfo</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> gen = this.artifactInfo.gen</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.artifactInfo.isWizziFactoryJob()</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.runWizziFactoryJob</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> modelInfo</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">            </span><span class="tag">elif</span><span class="pln"> this.artifactInfo.isWizziModelArtifact()</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.runWizziModelArtifact</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> modelInfo</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> gen</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">            </span><span class="tag">elif</span><span class="pln"> this.artifactInfo.isWizziCollectionArtifact()</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.runWizziCollectionArtifact</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> modelInfo</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> gen</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">            </span><span class="tag">elif</span><span class="pln"> this.artifactInfo.isFinalArtifact()</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.runFinalArtifact</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> modelInfo</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">            </span><span class="tag">else</span></li><li class="L5"><span class="pnl">                </span><span class="tag">return</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> this.error</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'Artifact is in an invalid state: ' + util.inspect(this.artifactInfo, {depth: 2})</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> '_runOnModelInfo'</span></li><li class="L0"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> runWizziFactoryJob</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> modelInfo</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.warn('runWizziFactoryJob ' + this.artifactInfo.name)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> modelInfo.getModelInfos</span></li><li class="L5"><span class="pnl">                </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> final false</span></li><li class="L7"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> modelInfos </span><span class="mix">)</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> AsyncWfJobRunner.run_many(modelInfos, callback)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> runWizziModelArtifact</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> modelInfo</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> gen</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> that = this</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> modelInfo.getModelInfos</span></li><li class="L5"><span class="pnl">                </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> final false</span></li><li class="L7"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> modelInfos </span><span class="mix">)</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> modelInfo.getArtifactGenerator</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> gen.generator</span></li><li class="L0"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> generator </span><span class="mix">)</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> AsyncModelLoader.loadMany</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> modelInfos</span></li><li class="L3"><span class="pnl">                                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> contextModels </span><span class="mix">)</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> AsyncArtifactGenerator.generate</span></li><li class="L5"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> that.artifactInfo</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> generator</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> modelInfos</span></li><li class="L8"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> contextModels</span></li><li class="L9"><span class="pnl">                                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> notUsed </span><span class="mix">)</span></li><li class="L0"><span class="pnl">                                            </span><span class="tag">_</span><span class="pln"> callback(null, that.artifactInfo)</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> runWizziCollectionArtifact</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> modelInfo</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> gen</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> VIA</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> "runWizziCollectionArtifact"</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'isDirectory'</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> modelInfo.isDirectory()</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'config'</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> util.inspect</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> modelInfo.config</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> depth 3</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> that = this</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> modelInfo.getModelInfos</span></li><li class="L7"><span class="pnl">                </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> final false</span></li><li class="L9"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> modelInfos </span><span class="mix">)</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">foreach</span><span class="pln"> mi in modelInfos</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> "runWizziCollectionArtifact.modelInfo to load"</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> mi.id</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> modelInfo.getArtifactGenerator</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> gen.generator</span></li><li class="L6"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> generator </span><span class="mix">)</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> AsyncModelLoader.loadMany</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> modelInfos</span></li><li class="L9"><span class="pnl">                                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> contextModelsCollection </span><span class="mix">)</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> logme</span></li><li class="L1"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> 'runWizziCollectionArtifact got contextModelsCollection'</span></li><li class="L2"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> contextModelsCollection.length</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> AsyncArtifactGenerator.generateFromCollectionContexts</span></li><li class="L4"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> that.artifactInfo</span></li><li class="L5"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> generator</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> modelInfos</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> contextModelsCollection</span></li><li class="L8"><span class="pnl">                                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> notUsed </span><span class="mix">)</span></li><li class="L9"><span class="pnl">                                            </span><span class="tag">_</span><span class="pln"> callback(null, that.artifactInfo)</span></li><li class="L0"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> runCodeWriteArtifact</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> contextInfos</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> gen</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> that = this</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> modelInfo.getArtifactGenerator</span></li><li class="L6"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> gen.generator</span></li><li class="L7"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> generator </span><span class="mix">)</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> AsyncModelLoader.loadMany</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> contextInfos</span></li><li class="L0"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> contextModels </span><span class="mix">)</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> AsyncArtifactGenerator.generateCodeWrite</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> that.artifactInfo</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> generator</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> contextModels</span></li><li class="L5"><span class="pnl">                                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> notUsed </span><span class="mix">)</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> callback(null, that.artifactInfo)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> TODO execute copy without loading content in genContext</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> runFinalArtifact</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> modelInfo</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> that = this</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> modelInfo.isDirectory</span></li><li class="L3"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> isDirectory </span><span class="mix">)</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> isDirectory</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> modelInfo.getFiles</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> final true</span></li><li class="L8"><span class="pnl">                            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> files </span><span class="mix">)</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">foreach</span><span class="pln"> fileInfo in files</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">var</span><span class="pln"> genContext</span></li><li class="L1"><span class="pnl">                                        </span><span class="tag">new</span><span class="pln"> GenContext</span></li><li class="L2"><span class="pnl">                                            </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                                                </span><span class="tag">@</span><span class="pln"> model null</span></li><li class="L4"><span class="pnl">                                                </span><span class="tag">@</span><span class="pln"> srcPath fileInfo.relpath</span></li><li class="L5"><span class="pnl">                                                </span><span class="tag">@</span><span class="pln"> srcFullPath fileInfo.fullpath</span></li><li class="L6"><span class="pnl">                                                </span><span class="tag">@</span><span class="pln"> options that.artifactInfo.options</span></li><li class="L7"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> genContext.writeFile</span></li><li class="L8"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> fileInfo.fullpath</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> that.artifactInfo.addGenContext(genContext)</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">return</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L3"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> that.artifactInfo</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> genContext</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">new</span><span class="pln"> GenContext</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> model null</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> srcPath modelInfo.src()</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> srcFullPath modelInfo.srcFullPath()</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> options that.artifactInfo.options</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> modelInfo.getSource</span></li><li class="L3"><span class="pnl">                            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> content </span><span class="mix">)</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> genContext.write(content)</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> that.artifactInfo.addGenContext(genContext)</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> that.artifactInfo</span></li><li class="L0"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> error</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> message</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> method</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> err</span></li><li class="L4"><span class="pnl">                </span><span class="tag">{</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> message message</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> source "wizzi/lib/production/artifactinfo.js/" + method</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> modelInfo this.modelInfo</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> logme(err)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> err</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d44">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/service.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../util/verify')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> file = require('../util/file')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> log = require('../util/log')(module)</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> sourcetree = require('./helpers/sourcetree')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> ProductionContext = require('./context')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> ProductionService</span></li><li class="L9"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.options = options</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.schemaModules = []</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.artifactModules = []</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.productionContext = new ProductionContext()</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.setLevel(options.verbose || 0);</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> registerSchemaModule</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> schemaModule</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.schemaModules.push(schemaModule)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getSchemaLoader</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> schemaName</span></li><li class="L1"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> console.log('ProductionService.getSchemaLoader.schemaName: ' + schemaName);</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> result = null</span></li><li class="L3"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> item in this.schemaModules</span></li><li class="L4"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> result == null && verify.isFunction(item[schemaName])</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> result = item[schemaName]</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !result</span></li><li class="L7"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> availables = []</span></li><li class="L8"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> item in this.schemaModules</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">for</span><span class="pln"> key in item</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> verify.isFunction(item[key])</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> availables.push(key)</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> log.error('getSchemaLoader. Cannot find schema loader: ' + schemaName + '\n' + 'availables: ' + availables.join(', '))</span></li><li class="L3"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> result</span></li><li class="L4"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> registerArtifactModule</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> artifactModule</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.artifactModules.push(artifactModule)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getArtifactGenerator</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> artifactName</span></li><li class="L9"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> console.log('ProductionService.getArtifactGenerator.artifactName: ' + artifactName);</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> result = null</span></li><li class="L1"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> item in this.artifactModules</span></li><li class="L2"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> result == null && verify.isFunction(item[artifactName])</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> result = item[artifactName]</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !result</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> log.error('getArtifactGenerator. Cannot find artifact generator: ' + artifactName)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> result</span></li><li class="L7"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> loadWizziModel</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> schemaName</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> ittfSource</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> context</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> schemaNameDef = file.exists(ittfSource) ? schemaName : schemaName + 'FromString';</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> schemaLoader = this.getSchemaLoader(schemaNameDef);</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> schemaLoader == null</span></li><li class="L5"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> callback({ message: 'ProductionService.loadWmtModel error. Cannot find schema loader for schema ' + schemaName })</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> schemaLoader</span></li><li class="L7"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> ittfSource</span></li><li class="L8"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> context</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> loadWizziModelSourceTree</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> schemaName</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> ittfSource</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> context</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> schemaNameDef = file.exists(ittfSource) ? schemaName : schemaName + 'FromString'</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> schemaLoader = this.getSchemaLoader(schemaNameDef)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> schemaLoader == null</span></li><li class="L8"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> callback({ message: 'ProductionService.loadWmtModel error. Cannot find schema loader for schema ' + schemaName })</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> self = this</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> schemaLoader</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> ittfSource</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> context</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> callback(err, sourcetree(result, file.exists(ittfSource) ? ittfSource : null, context.wzrepoRootPath))</span></li><li class="L4"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> generateArtifact</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> artifactName</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> ittfSource</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> context</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isString(artifactName) === false</span></li><li class="L0"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> callback({ message: 'ProductionService.generateArtifact error. Invalid artifact name ' + artifactName })</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ss = artifactName.split('/')</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> ss.length == 2</span></li><li class="L3"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> artifactName = ss[0] + ss[1].substr(0, 1).toUpperCase() + ss[1].substr(1)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> artifactNameDef = file.exists(ittfSource) ? artifactName : artifactName + 'FromString'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> artifactGenerator = this.getArtifactGenerator(artifactNameDef)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> artifactGenerator == null</span></li><li class="L7"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> callback({ message: 'ProductionService.generateArtifact error. Cannot find artifact generator for artifact ' + artifactName });</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> artifactGenerator</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> ittfSource</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> context</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports = ProductionService</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d45">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/wfjob.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> util = require('util')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> async = require('async')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../util/verify')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> errors = require('../errors')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> log = require('../util/log')(module)</span></li><li class="L9"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> wfjob</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span></li><li class="L1"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> param config {</span></li><li class="L2"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> options: {</span></li><li class="L3"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> verbose:Boolean</span></li><li class="L4"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> wfjob: {</span></li><li class="L6"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> src:String</span></li><li class="L7"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L9"><span class="pnl">            </span><span class="tag">#</span></li><li class="L0"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> An instance of wfjob prepares the required wizzi packages</span></li><li class="L1"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> and the artifact infos of a single wfjob WizziModel, whose source IttfDocument</span></li><li class="L2"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> is referenced in config.wfjob.src</span></li><li class="L3"><span class="pnl">            </span><span class="tag">#</span></li><li class="L4"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> methods</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> getArtifactInfoConfigs</span></li><li class="L6"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> productionManager</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> config</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.productionManager = productionManager</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.config = config</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.options = config.options</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wfjobSrc = config.wfjob.src</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.setLevel(this.options.verbose || 0)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.initialized = false</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> initialize</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.initialized</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> return callback(null, this.wfjobModel)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.productionManager.options.trace</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> log.info('Started initialize. wfjob source: ' + this.wfjobSrc)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> wfjobFactory = this.productionManager.getLoadModel('wfjob')</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> wfjobFactory == null</span></li><li class="L3"><span class="pnl">                </span><span class="tag">throw</span><span class="pln"> errors.NodeError('Factory for schema @wfjob@ not found', null)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ittfLoadContext</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> Object.assign</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> __productionManager this.productionManager</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.productionManager.globalContext()</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> self = this</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> wfjobFactory</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> this.wfjobSrc</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> ittfLoadContext</span></li><li class="L4"><span class="pnl">                </span><span class="tag">function</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> wfjobModel</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> self.productionManager.options.trace</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> log.info('Job model loaded. err: ' + err)</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">return</span><span class="pln"> callback(err, null)</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> self.wfjobModel = wfjobModel</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> self.initialized = true</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> self.productionManager.options.trace</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> log.info('Done initialize')</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback(null, wfjobModel)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getRequiredPackages</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> self = this</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.initialize</span></li><li class="L0"><span class="pnl">                </span><span class="tag">function</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> wfjobModel</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">return</span><span class="pln"> callback(err, null)</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> result = []</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">foreach</span><span class="pln"> r in wfjobModel.requires</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> result.push(r.wzName)</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">return</span><span class="pln"> callback(null, result)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getArtifactInfoConfigs</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> log 'wfjob.getArtifactInfoConfigs.start'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span></li><li class="L3"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> self = this</span></li><li class="L4"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> artifactInfoConfig</span></li><li class="L5"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> destPath</span></li><li class="L6"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> destFullPath</span></li><li class="L7"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> resultRequires = []</span></li><li class="L8"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> resultArtifactInfos = []</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.initialize</span></li><li class="L0"><span class="pnl">                </span><span class="tag">function</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> wfjobModel</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">return</span><span class="pln"> callback(err, null)</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">foreach</span><span class="pln"> require in wfjobModel.requires</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> resultRequires.push(require.wzName)</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">#</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> Production structure</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> wfjob</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> production Collection</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> attribute destFolder</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> lines Collection</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> attribute cwdFolder</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> attribute destFolder</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> artifacts Collection</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> attribute src</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> The path to the primary source document of the artifact.</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> If relative, the base path is the "cwdFolder" of the parent line.</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> If the artifact is a code write artifact the "src" attribute must not be declared.</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> attribute destPath</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> The artifact source file path "src" is the default relative destination path</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> of the generated artifact. When set, this attribute overrides the default.</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> It may be an absolute path.</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> If the artifact is a code write generation the "destPath" attribute must be declared.</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">foreach</span><span class="pln"> wfjob_production in wfjobModel.productions</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> log 'WizziJob.getArtifactInfoConfigs.production', wfjob_production.wzName, util.inspect(wfjob_production, { depth: 2 })</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">foreach</span><span class="pln"> wfjob_line in wfjob_production.lines</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">#</span><span class="pln"> log 'WizziJob.getArtifactInfoConfigs.line', wfjob_line.wzName, util.inspect(wfjob_line, { depth: null })</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">foreach</span><span class="pln"> wfjob_artifact in wfjob_line.artifacts</span></li><li class="L0"><span class="pnl">                                </span><span class="kwd">$$</span><span class="pln"> log 'WizziJob.art', util.inspect(wfjob_artifact, { depth: 1 })</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> verify.isEmpty(wfjob_artifact.src)</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">                                        </span><span class="tag">#</span><span class="pln"> THIS IS A CODEWRITE artifact</span></li><li class="L4"><span class="pnl">                                        </span><span class="tag">#</span><span class="pln"> this artifact is generated by a code write generation</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> artifactInfoConfig</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> name wfjob_artifact.wzName</span></li><li class="L8"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L9"><span class="pnl">                                                </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> contexts</span></li><li class="L1"><span class="pnl">                                                </span><span class="tag">[</span></li><li class="L2"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> gen</span></li><li class="L3"><span class="pnl">                                                </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> generator wfjob_artifact.generator</span></li><li class="L5"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> dest</span></li><li class="L6"><span class="pnl">                                                </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> baseFolder wfjobModel.destBaseFolder</span></li><li class="L8"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> folder wfjob_line.destFolder || wfjob_production.destFolder</span></li><li class="L9"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> path wfjob_artifact.destPath</span></li><li class="L0"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> extension wfjob_artifact.extension</span></li><li class="L1"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> toString</span></li><li class="L2"><span class="pnl">                                                </span><span class="tag">function</span></li><li class="L3"><span class="pnl">                                                    </span><span class="tag">return</span><span class="pln"> 'Artifact info config: ' + this.name + '/' + this.gen.generator</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">foreach</span><span class="pln"> modelRef in wfjob_artifact.modelRefs</span></li><li class="L5"><span class="pnl">                                        </span><span class="kwd">$$</span><span class="pln"> log 'WizziJob.getArtifactInfoConfigs.modelRef', modelRef.wzName, modelRef.collName, modelRef.modelCollections.length, util.inspect(modelRef, { depth: 2 })</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">var</span><span class="pln"> modelInfoConfig = self.createContextModelInfoConfig(modelRef)</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> artifactInfoConfig.contexts.push(modelInfoConfig)</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">else</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">#</span><span class="pln"> WIZZIMODEL artifact or WFJOB artifact</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> artifactInfoConfig</span></li><li class="L1"><span class="pnl">                                        </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> name wfjob_artifact.wzName</span></li><li class="L3"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L4"><span class="pnl">                                                </span><span class="tag">{</span></li><li class="L5"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> model</span></li><li class="L6"><span class="pnl">                                                </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> cwd wfjob_line.cwdFolder</span></li><li class="L8"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> src wfjob_artifact.src</span></li><li class="L9"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> ignore wfjob_artifact.ignore</span></li><li class="L0"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> schema wfjob_artifact.schema</span></li><li class="L1"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> contexts</span></li><li class="L2"><span class="pnl">                                                        </span><span class="tag">[</span></li><li class="L3"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> transformers self._getTransformerList(wfjob_artifact.transformers)</span></li><li class="L4"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> isWfJob wfjob_artifact.isWfJob</span></li><li class="L5"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> gen</span></li><li class="L6"><span class="pnl">                                                </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> generator wfjob_artifact.generator</span></li><li class="L8"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> dest</span></li><li class="L9"><span class="pnl">                                                </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> baseFolder wfjobModel.destBaseFolder</span></li><li class="L1"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> folder wfjob_line.destFolder || wfjob_production.destFolder</span></li><li class="L2"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> path wfjob_artifact.destPath</span></li><li class="L3"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> extension wfjob_artifact.extension</span></li><li class="L4"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> toString</span></li><li class="L5"><span class="pnl">                                                </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                                                    </span><span class="tag">return</span><span class="pln"> 'Artifact info config: ' + this.name + '/' + this.model.src + '/' + this.model.schema</span></li><li class="L7"><span class="pnl">                                    </span><span class="tag">#</span><span class="pln"> log 'WizziJob.getArtifactInfoConfigs.art', wfjob_artifact.wzName, wfjob_line.srcFolder, wfjob_artifact.src, wfjob_artifact.schema</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">foreach</span><span class="pln"> modelRef in wfjob_artifact.modelRefs</span></li><li class="L9"><span class="pnl">                                        </span><span class="kwd">$$</span><span class="pln"> log 'WizziJob.getArtifactInfoConfigs.modelRef', modelRef.wzName, modelRef.collName, modelRef.modelCollections.length, util.inspect(modelRef, { depth: 2 })</span></li><li class="L0"><span class="pnl">                                        </span><span class="tag">var</span><span class="pln"> modelInfoConfig = self.createContextModelInfoConfig(modelRef)</span></li><li class="L1"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> artifactInfoConfig.model.contexts.push(modelInfoConfig);</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">#</span><span class="pln"> log 'WizziJob.artifactInfoConfig', util.inspect(artifactInfoConfig, { depth: 1 })</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> resultArtifactInfos.push(artifactInfoConfig)</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback(null, [resultRequires, resultArtifactInfos]);</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span></li><li class="L6"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> param modelRef:Object { wfjob:ModelRef</span></li><li class="L7"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> wzName:String // is the key for the wfjob:Model</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> collName:String</span></li><li class="L9"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> collItemName:String</span></li><li class="L0"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> collPathTemplateValues:Array of {</span></li><li class="L1"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L2"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L3"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> createContextModelInfoConfig</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> wfjob_modelRef</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> model existence in this.wfjobModel has already been verified loading wfjobModel</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> wfjob_model = this.wfjobModel.getModel(wfjob_modelRef.wzName)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> modelInfoConfig</span></li><li class="L8"><span class="pnl">                </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> exportName wfjob_modelRef.exportName</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> src this._getModelSrc(wfjob_model.src, wfjob_model)</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> schema wfjob_model.schema</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> contexts []</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> transformers this._getTransformerList(wfjob_modelRef.transformers)</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> coll null</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> wfjob_modelRef.collName</span></li><li class="L6"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> Single items of a collection contained in a WizziModelInstance may act as data contexts</span></li><li class="L7"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> of artifacts where each collection item generates a separate artifact.</span></li><li class="L8"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> The coll property specifies:</span></li><li class="L9"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> . name                the collection name</span></li><li class="L0"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> . itemName            the export name of the collection item when acting as a data context</span></li><li class="L1"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> . pathTemplateValues  the property names of the collection item that will be used to build</span></li><li class="L2"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> the destination path of the artifact</span></li><li class="L3"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> modelInfoConfig.coll</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> name wfjob_modelRef.collName</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> itemName wfjob_modelRef.collItemName</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> pathTemplateValues wfjob_modelRef.collPathTemplateValues</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> recurse creation of context modelInfos</span></li><li class="L9"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> ctxModelRef in wfjob_model.modelRefs</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> modelInfoConfig.contexts.push(this.createContextModelInfoConfig(ctxModelRef))</span></li><li class="L1"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> modelInfoConfig</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> _getModelSrc</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> src</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> node</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span></li><li class="L6"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> When @src@ is relative, the base path is the @modelsBaseFolder@</span></li><li class="L7"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> declared on the @wfjob@ element.</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isAbsolutePath(src)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> src;</span></li><li class="L0"><span class="pnl">            </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> verify.isString(this.wfjobModel.modelsBaseFolder)</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">return</span><span class="pln"> path.join(this.wfjobModel.modelsBaseFolder, src)</span></li><li class="L3"><span class="pnl">                </span><span class="tag">else</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">log</span><span class="pln"> 'wizzi.wfjob.node', node</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">throw</span><span class="pln"> new errors.NodeError("The src attribute of the model element: " + src + ' is a relative path. A models-base-folder attribute is required on the wfjob element.', node)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> _getTransformerList</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> transformers</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ret = []</span></li><li class="L9"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> item in transformers</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> ret.push</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> name item.wzName</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> dumpFile item.dumpFile</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> ret</span></li><li class="L5"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> getPath</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> base</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> src</span></li><li class="L8"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> verify.isAbsolutePath(src) ? src : path.join(base, src)</span></li><li class="L9"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports = wfjob;</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d46">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/production/wfpackageloader.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">#</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> This is duplicated</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> use the packageFinder in wizzi-core/services</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> util = require('util')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L9"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../util/verify')</span></li><li class="L0"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> file = require('../util/file')</span></li><li class="L1"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> log = require('../util/log')(module)</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> md = module.exports = {}</span></li><li class="L3"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.load</span></li><li class="L4"><span class="pnl">        </span><span class="tag">function</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> pkgName</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> cwd</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> pkgName == 'wizzi'</span></li><li class="L8"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> require('../../index')</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> result</span></li><li class="L0"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> try fullpath</span></li><li class="L1"><span class="pnl">            </span><span class="tag">try</span></li><li class="L2"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> log 'try fullpath ', pkgName</span></li><li class="L3"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> result = require(pkgName)</span></li><li class="L4"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> log 'found fullpath ', pkgName</span></li><li class="L5"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> result</span></li><li class="L6"><span class="pnl">            </span><span class="tag">catch</span><span class="pln"> ex</span></li><li class="L7"><span class="pnl">                </span><span class="tag">log</span><span class="pln"> ex</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> log 'Is not a full path'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> localNodeModule = findUpFolder(cwd, 'node_modules')</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> localNodeModule</span></li><li class="L1"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> log 'try in ', localNodeModule</span></li><li class="L2"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> pkgLocalPath = path.join(localNodeModule, pkgName)</span></li><li class="L3"><span class="pnl">                </span><span class="tag">try</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> result = require(pkgLocalPath)</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">return</span><span class="pln"> result</span></li><li class="L6"><span class="pnl">                </span><span class="tag">catch</span><span class="pln"> ex</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">log</span><span class="pln"> ex</span></li><li class="L8"><span class="pnl">            </span><span class="tag">else</span></li><li class="L9"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> log 'node_modules not found in cwd', cwd</span></li><li class="L0"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> findUpFolder</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> basePath</span></li><li class="L2"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> folderName</span></li><li class="L3"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> test = path.join(basePath, folderName)</span></li><li class="L4"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> file.isDirectory(test)</span></li><li class="L5"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> test</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> basePath = path.dirname(basePath)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> basePath.length &gt; 3</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> findUpFolder(basePath, folderName)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">else</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> null</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d47">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/pluginsManager/architect.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> (typeof (module) !== "undefined") && function (m){ module.exports = m(require('events'));  })) || (((typeof (define) === "function") && function (m){ define(["events"], m);  }</span></li><li class="L4"><span class="pnl">        </span><span class="tag">function</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> events</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> "use strict"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> EventEmitter = events.EventEmitter</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> exports</span></li><li class="L9"><span class="pnl">                </span><span class="tag">{</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> DEBUG = ((typeof (location) != "undefined") && location.href.match(/debug=[123]/)) ? true : false</span></li><li class="L1"><span class="pnl">            </span><span class="tag">iife</span><span class="pln"> ()</span></li><li class="L2"><span class="pnl">                </span><span class="tag">function</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> dirname</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> require('path')</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">.</span><span class="pln"> dirname</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> resolve</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> require('path')</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">.</span><span class="pln"> resolve</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> existsSync = (require('fs').existsSync || require('path').existsSync)</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> realpathSync</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> require('fs')</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">.</span><span class="pln"> realpathSync</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> exists = (require('fs').exists || require('path').exists)</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> realpath</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> require('fs')</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">.</span><span class="pln"> realpath</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> packagePathCache</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> basePath</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> exports.loadConfig = loadConfig</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> exports.resolveConfig = resolveConfig</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">function</span><span class="pln"> loadConfig</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> configPath</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> config = require(configPath)</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> base = dirname(configPath)</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">return</span><span class="pln"> resolveConfig(config, base, callback)</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">function</span><span class="pln"> resolveConfig</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> config</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> base</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> typeof (base) === 'function'</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> callback = base</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> base = basePath</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">else</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> basePath = base</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> ! (callback)</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> resolveConfigSync(config, base)</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">else</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> resolveConfigAsync(config, base, callback)</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">function</span><span class="pln"> resolveConfigSync</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> config</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> base</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> config.forEach</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> plugin</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> index</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> typeof (plugin) === "string"</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> plugin = config[index] = {packagePath: plugin}</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> plugin.hasOwnProperty("packagePath") && ! (plugin.hasOwnProperty("setup"))</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">var</span><span class="pln"> defaults</span></li><li class="L2"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> resolveModuleSync</span></li><li class="L3"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> base</span></li><li class="L4"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> plugin.packagePath</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> Object.keys(defaults)</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">._</span><span class="pln"> forEach</span></li><li class="L7"><span class="pnl">                                            </span><span class="tag">function</span></li><li class="L8"><span class="pnl">                                                </span><span class="tag">param</span><span class="pln"> key</span></li><li class="L9"><span class="pnl">                                                </span><span class="tag">if</span><span class="pln"> ! (plugin.hasOwnProperty(key))</span></li><li class="L0"><span class="pnl">                                                    </span><span class="tag">set</span><span class="pln"> plugin[key] = defaults[key]</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> plugin.packagePath = defaults.packagePath</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> plugin.setup = require(plugin.packagePath)</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">return</span><span class="pln"> config</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">function</span><span class="pln"> resolveConfigAsync</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> config</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> base</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">function</span><span class="pln"> resolveNext</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> i</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> i &gt;= config.length</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">return</span><span class="pln"> callback(null, config)</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">var</span><span class="pln"> plugin = config[i]</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> typeof (plugin) === "string"</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> plugin = config[i] = {packagePath: plugin}</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> plugin.hasOwnProperty("packagePath") && ! (plugin.hasOwnProperty("setup"))</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> resolveModule</span></li><li class="L7"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> base</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> plugin.packagePath</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">function</span></li><li class="L0"><span class="pnl">                                        </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L1"><span class="pnl">                                        </span><span class="tag">param</span><span class="pln"> defaults</span></li><li class="L2"><span class="pnl">                                        </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L3"><span class="pnl">                                            </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L4"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> Object.keys(defaults)</span></li><li class="L5"><span class="pnl">                                            </span><span class="tag">._</span><span class="pln"> forEach</span></li><li class="L6"><span class="pnl">                                                </span><span class="tag">function</span></li><li class="L7"><span class="pnl">                                                    </span><span class="tag">param</span><span class="pln"> key</span></li><li class="L8"><span class="pnl">                                                    </span><span class="tag">if</span><span class="pln"> ! (plugin.hasOwnProperty(key))</span></li><li class="L9"><span class="pnl">                                                        </span><span class="tag">set</span><span class="pln"> plugin[key] = defaults[key]</span></li><li class="L0"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> plugin.packagePath = defaults.packagePath</span></li><li class="L1"><span class="pnl">                                        </span><span class="tag">try</span></li><li class="L2"><span class="pnl">                                            </span><span class="tag">set</span><span class="pln"> plugin.setup = require(plugin.packagePath)</span></li><li class="L3"><span class="pnl">                                        </span><span class="tag">catch</span><span class="pln"> e</span></li><li class="L4"><span class="pnl">                                            </span><span class="tag">return</span><span class="pln"> callback(e)</span></li><li class="L5"><span class="pnl">                                        </span><span class="tag">return</span><span class="pln"> resolveNext(++i)</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> resolveNext(++i)</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> resolveNext(0)</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">function</span><span class="pln"> resolveModuleSync</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> base</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> modulePath</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> packagePath</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">try</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> packagePath = resolvePackageSync(base, (modulePath + "/package.json"))</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">catch</span><span class="pln"> err</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> err.code !== "ENOENT"</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">throw</span><span class="pln"> err</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> metadata = ((packagePath && require(packagePath).plugin) || {})</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> packagePath</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> modulePath = dirname(packagePath)</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">else</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> modulePath = resolvePackageSync(base, modulePath)</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> module = require(modulePath)</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> metadata.provides = (((metadata.provides || module.provides)) || [])</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> metadata.consumes = (((metadata.consumes || module.consumes)) || [])</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> metadata.packagePath = modulePath</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">return</span><span class="pln"> metadata</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">function</span><span class="pln"> resolveModule</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> base</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> modulePath</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> resolvePackage</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> base</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> (modulePath + "/package.json")</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> packagePath</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">var</span><span class="pln"> metadata</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> ! (err)</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">try</span></li><li class="L2"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> metadata = ((packagePath && require(packagePath).plugin) || {})</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">catch</span><span class="pln"> e</span></li><li class="L4"><span class="pnl">                                        </span><span class="tag">return</span><span class="pln"> callback(e)</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">iife</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">function</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">param</span><span class="pln"> next</span></li><li class="L8"><span class="pnl">                                        </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L9"><span class="pnl">                                            </span><span class="tag">_</span><span class="pln"> resolvePackage(base, (modulePath + ".js"), next)</span></li><li class="L0"><span class="pnl">                                        </span><span class="tag">elif</span><span class="pln"> packagePath</span></li><li class="L1"><span class="pnl">                                            </span><span class="tag">_</span><span class="pln"> next</span></li><li class="L2"><span class="pnl">                                                </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L3"><span class="pnl">                                                </span><span class="tag">_</span><span class="pln"> dirname(packagePath)</span></li><li class="L4"><span class="pnl">                                        </span><span class="tag">else</span></li><li class="L5"><span class="pnl">                                            </span><span class="tag">_</span><span class="pln"> resolvePackage(base, modulePath, next)</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">function</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L8"><span class="pnl">                                        </span><span class="tag">param</span><span class="pln"> modulePath</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L0"><span class="pnl">                                            </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L1"><span class="pnl">                                        </span><span class="tag">var</span><span class="pln"> module</span></li><li class="L2"><span class="pnl">                                        </span><span class="tag">try</span></li><li class="L3"><span class="pnl">                                            </span><span class="tag">set</span><span class="pln"> module = require(modulePath)</span></li><li class="L4"><span class="pnl">                                        </span><span class="tag">catch</span><span class="pln"> e</span></li><li class="L5"><span class="pnl">                                            </span><span class="tag">return</span><span class="pln"> callback(e)</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> metadata.provides = (((metadata.provides || module.provides)) || [])</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> metadata.consumes = (((metadata.consumes || module.consumes)) || [])</span></li><li class="L8"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> metadata.packagePath = modulePath</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> callback(null, metadata)</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">function</span><span class="pln"> resolvePackageSync</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> base</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> packagePath</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> originalBase = base</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> ! (base in packagePathCache)</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> packagePathCache[base] =</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> cache = packagePathCache[base]</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> packagePath in cache</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> cache[packagePath]</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> newPath</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> ((packagePath[0] === ".") || (packagePath[0] === "/"))</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> newPath = resolve(base, packagePath)</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> ! (existsSync(newPath))</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> newPath = (newPath + ".js")</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> existsSync(newPath)</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> newPath = realpathSync(newPath)</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> cache[packagePath] = newPath</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">return</span><span class="pln"> newPath</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">else</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">while</span><span class="pln"> base</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> newPath = resolve(base, "node_modules", packagePath)</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> existsSync(newPath)</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> newPath = realpathSync(newPath)</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> cache[packagePath] = newPath</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">return</span><span class="pln"> newPath</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> base = resolve(base, '..')</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> err</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">new</span><span class="pln"> Error</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> "Can't find '" + packagePath + "' relative to '" + originalBase + "'"</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> err.code = "ENOENT"</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">throw</span><span class="pln"> err</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">function</span><span class="pln"> resolvePackage</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> base</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> packagePath</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> originalBase = base</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> ! (packagePathCache.hasOwnProperty(base))</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> packagePathCache[base] =</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> cache = packagePathCache[base]</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> cache.hasOwnProperty(packagePath)</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">return</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> cache[packagePath]</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> ((packagePath[0] === ".") || (packagePath[0] === "/"))</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">var</span><span class="pln"> newPath = resolve(base, packagePath)</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> exists</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> newPath</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">function</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">param</span><span class="pln"> exists</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">if</span><span class="pln"> exists</span></li><li class="L3"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> realpath</span></li><li class="L4"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> newPath</span></li><li class="L5"><span class="pnl">                                            </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                                                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L7"><span class="pnl">                                                </span><span class="tag">param</span><span class="pln"> newPath</span></li><li class="L8"><span class="pnl">                                                </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L9"><span class="pnl">                                                    </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L0"><span class="pnl">                                                </span><span class="tag">set</span><span class="pln"> cache[packagePath] = newPath</span></li><li class="L1"><span class="pnl">                                                </span><span class="tag">return</span><span class="pln"> callback(null, newPath)</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">else</span></li><li class="L3"><span class="pnl">                                        </span><span class="tag">var</span><span class="pln"> err</span></li><li class="L4"><span class="pnl">                                            </span><span class="tag">new</span><span class="pln"> Error</span></li><li class="L5"><span class="pnl">                                                </span><span class="tag">@</span><span class="pln"> "Can't find '" + packagePath + "' relative to '" + originalBase + "'"</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> err.code = "ENOENT"</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">else</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> tryNext(base)</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">function</span><span class="pln"> tryNext</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> base</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> base == "/"</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">var</span><span class="pln"> err</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">new</span><span class="pln"> Error(((((((("Can't find '" + packagePath)) + "' relative to '")) + originalBase)) + "'"))</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> err.code = "ENOENT"</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">var</span><span class="pln"> newPath = resolve(base, "node_modules", packagePath)</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> exists</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> newPath</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">function</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">param</span><span class="pln"> exists</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">if</span><span class="pln"> exists</span></li><li class="L3"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> realpath</span></li><li class="L4"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> newPath</span></li><li class="L5"><span class="pnl">                                            </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                                                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L7"><span class="pnl">                                                </span><span class="tag">param</span><span class="pln"> newPath</span></li><li class="L8"><span class="pnl">                                                </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L9"><span class="pnl">                                                    </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L0"><span class="pnl">                                                </span><span class="tag">set</span><span class="pln"> cache[packagePath] = newPath</span></li><li class="L1"><span class="pnl">                                                </span><span class="tag">return</span><span class="pln"> callback(null, newPath)</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">else</span></li><li class="L3"><span class="pnl">                                        </span><span class="tag">var</span><span class="pln"> nextBase = resolve(base, '..')</span></li><li class="L4"><span class="pnl">                                        </span><span class="tag">if</span><span class="pln"> nextBase === base</span></li><li class="L5"><span class="pnl">                                            </span><span class="tag">_</span><span class="pln"> tryNext("/")</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">else</span></li><li class="L7"><span class="pnl">                                            </span><span class="tag">_</span><span class="pln"> tryNext(nextBase)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">iife</span><span class="pln"> ()</span></li><li class="L9"><span class="pnl">                </span><span class="tag">function</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> exports.loadConfig = loadConfig</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> exports.resolveConfig = resolveConfig</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">function</span><span class="pln"> loadConfig</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> path</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> require</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">[</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> path</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> config</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> resolveConfig(config, callback)</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">function</span><span class="pln"> resolveConfig</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> config</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> base</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> errback</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> typeof (base) == "function"</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">return</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> resolveConfig</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> config</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> ""</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> arguments[1]</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> arguments[2]</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">var</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">decl</span><span class="pln"> paths</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">[</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">decl</span><span class="pln"> pluginIndexes</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> config.forEach</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> plugin</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> index</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> typeof (plugin) === "string"</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> plugin = config[index] = {packagePath: plugin}</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> plugin.hasOwnProperty("packagePath") && ! (plugin.hasOwnProperty("setup"))</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> paths.push((((base || "")) + plugin.packagePath))</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> pluginIndexes[plugin.packagePath] = index</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> require</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> paths</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">var</span><span class="pln"> args = arguments</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> paths.forEach</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">function</span></li><li class="L3"><span class="pnl">                                        </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L4"><span class="pnl">                                        </span><span class="tag">param</span><span class="pln"> i</span></li><li class="L5"><span class="pnl">                                        </span><span class="tag">var</span><span class="pln"> module = args[i]</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">var</span><span class="pln"> plugin = config[pluginIndexes[name]]</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> plugin.setup = module</span></li><li class="L8"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> plugin.provides = (((module.provides || plugin.provides)) || [])</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> plugin.consumes = (((module.consumes || plugin.consumes)) || [])</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> callback(null, config)</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> errback</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> exports.createApp = createApp</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> exports.Architect = Architect</span></li><li class="L4"><span class="pnl">            </span><span class="tag">function</span><span class="pln"> checkConfig</span></li><li class="L5"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> config</span></li><li class="L6"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> lookup</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> config.forEach</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> plugin</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> plugin.checked</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">return</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> ! (plugin.hasOwnProperty("setup"))</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">throw</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">new</span><span class="pln"> Error(("Plugin is missing the setup function " + JSON.stringify(plugin)))</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> ! (plugin.hasOwnProperty("provides"))</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">throw</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">new</span><span class="pln"> Error(("Plugin is missing the provides array " + JSON.stringify(plugin)))</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> ! (plugin.hasOwnProperty("consumes"))</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">throw</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">new</span><span class="pln"> Error(("Plugin is missing the consumes array " + JSON.stringify(plugin)))</span></li><li class="L1"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> checkCycles(config, lookup)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">function</span><span class="pln"> checkCycles</span></li><li class="L3"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> config</span></li><li class="L4"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> lookup</span></li><li class="L5"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> plugins</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">[</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> config.forEach</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> pluginConfig</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> index</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> plugins.push</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> packagePath pluginConfig.packagePath</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> provides pluginConfig.provides.concat()</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> consumes pluginConfig.consumes.concat()</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> i index</span></li><li class="L7"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> resolved</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> hub true</span></li><li class="L0"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> changed = true</span></li><li class="L1"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> sorted</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">[</span></li><li class="L3"><span class="pnl">                </span><span class="tag">while</span><span class="pln"> plugins.length && changed</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> changed = false</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> plugins.concat()</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">._</span><span class="pln"> forEach</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> plugin</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">var</span><span class="pln"> consumes = plugin.consumes.concat()</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">var</span><span class="pln"> resolvedAll = true</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">for</span><span class="pln"> var i = 0; i &lt; consumes.length; i++</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">var</span><span class="pln"> service = consumes[i]</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">if</span><span class="pln"> (! (resolved[service]) && ((! (lookup) || ! (lookup(service)))))</span></li><li class="L4"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> resolvedAll = false</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">else</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> plugin.consumes.splice</span></li><li class="L7"><span class="pnl">                                            </span><span class="tag">_</span><span class="pln"> plugin.consumes.indexOf(service)</span></li><li class="L8"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> 1</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> ! (resolvedAll)</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">return</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> plugins.splice</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> plugins.indexOf(plugin)</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 1</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> plugin.provides.forEach</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">param</span><span class="pln"> service</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> resolved[service] = true</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> sorted.push</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> config[plugin.i]</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> changed = true</span></li><li class="L1"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> plugins.length</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> unresolved</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> plugins.forEach</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> plugin</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> delete (plugin.config)</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> plugin.consumes.forEach</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">function</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">if</span><span class="pln"> unresolved[name] === false</span></li><li class="L2"><span class="pnl">                                        </span><span class="tag">return</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">if</span><span class="pln"> ! (unresolved[name])</span></li><li class="L4"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> unresolved[name] = []</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> unresolved[name].push</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> plugin.packagePath</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> plugin.provides.forEach</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> unresolved[name] = false</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> Object.keys(unresolved)</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">._</span><span class="pln"> forEach</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> unresolved[name] === false</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> delete (unresolved[name])</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> unresolvedList = Object.keys(unresolved)</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> resolvedList = Object.keys(resolved)</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> err</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">new</span><span class="pln"> Error(("Could not resolve dependencies\n" + (unresolvedList.length ? ("Missing services: " + unresolvedList) : "Config contains cyclic dependencies")))</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> err.unresolved = unresolvedList</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> err.resolved = resolvedList</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">throw</span><span class="pln"> err</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> sorted</span></li><li class="L5"><span class="pnl">            </span><span class="tag">function</span><span class="pln"> Architect</span></li><li class="L6"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> config</span></li><li class="L7"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> app = this</span></li><li class="L8"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> app.config = config</span></li><li class="L9"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> app.packages =</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> app.pluginToPackage =</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> isAdditionalMode</span></li><li class="L4"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> services</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> app.services =</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> hub</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> on</span></li><li class="L0"><span class="pnl">                                        </span><span class="tag">function</span></li><li class="L1"><span class="pnl">                                            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L2"><span class="pnl">                                            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">                                            </span><span class="tag">_</span><span class="pln"> app.on(name, callback)</span></li><li class="L4"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> sortedPlugins = checkConfig(config)</span></li><li class="L5"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> destructors</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">[</span></li><li class="L7"><span class="pnl">                </span><span class="tag">var</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">decl</span><span class="pln"> recur = 0</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">decl</span><span class="pln"> callnext</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">decl</span><span class="pln"> ready</span></li><li class="L1"><span class="pnl">                </span><span class="tag">function</span><span class="pln"> startPlugins</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> additional</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> plugin = sortedPlugins.shift()</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> ! (plugin)</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> ready = true</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">return</span><span class="pln"> app.emit(additional ? "ready-additional" : "ready", app)</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> imports</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> plugin.consumes</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> plugin.consumes.forEach</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> imports[name] = services[name]</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> m</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> /^plugins\/([^\/]+)|\/plugins\/[^\/]+\/([^\/]+)/.exec</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> plugin.packagePath</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> packageName = (m && ((m[1] || m[2])))</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> ! (app.packages[packageName])</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> app.packages[packageName] = []</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> DEBUG</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> recur++</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> plugin.setup(plugin, imports, register)</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">while</span><span class="pln"> (callnext && (recur &lt;= 1))</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> callnext = false</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> startPlugins(additional)</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> recur--</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">try</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> recur++</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> plugin.setup(plugin, imports, register)</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">catch</span><span class="pln"> e</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> e.plugin = plugin</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> app.emit("error", e)</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">throw</span><span class="pln"> e</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">finally</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">while</span><span class="pln"> (callnext && (recur &lt;= 1))</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> callnext = false</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> startPlugins(additional)</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> recur--</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">function</span><span class="pln"> register</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> provided</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> app.emit("error", err)</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> plugin.provides.forEach</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> ! (provided.hasOwnProperty(name))</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">var</span><span class="pln"> err</span></li><li class="L0"><span class="pnl">                                        </span><span class="tag">new</span><span class="pln"> Error(((((("Plugin failed to provide " + name)) + " service. ")) + JSON.stringify(plugin)))</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> err.plugin = plugin</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">return</span><span class="pln"> app.emit("error", err)</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> services[name] = provided[name]</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> app.pluginToPackage[name] =</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> path plugin.packagePath</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> package packageName</span></li><li class="L8"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> version plugin.version</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> isAdditionalMode isAdditionalMode</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> app.packages[packageName].push(name)</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> app.emit</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> "service"</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> name</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> services[name]</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> plugin</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> provided && provided.hasOwnProperty("onDestroy")</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> destructors.push</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> provided.onDestroy</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> app.emit("plugin", plugin)</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> recur</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> callnext = true</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> startPlugins(additional)</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> (typeof (process) === "object" ? process.nextTick : setTimeout)(startPlugins)</span></li><li class="L4"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.loadAdditionalPlugins =</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> additionalConfig</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> isAdditionalMode = true</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> exports.resolveConfig</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> additionalConfig</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> additionalConfig</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> app.once</span></li><li class="L7"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> ready ? "ready-additional" : "ready"</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">param</span><span class="pln"> app</span></li><li class="L0"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> callback(null, app)</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">var</span><span class="pln"> _sortedPlugins</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> checkConfig</span></li><li class="L3"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> additionalConfig</span></li><li class="L4"><span class="pnl">                                        </span><span class="tag">function</span></li><li class="L5"><span class="pnl">                                            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L6"><span class="pnl">                                            </span><span class="tag">return</span><span class="pln"> services[name]</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> ready</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> sortedPlugins = _sortedPlugins</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> startPlugins(true)</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> _sortedPlugins.forEach</span></li><li class="L2"><span class="pnl">                                        </span><span class="tag">function</span></li><li class="L3"><span class="pnl">                                            </span><span class="tag">param</span><span class="pln"> item</span></li><li class="L4"><span class="pnl">                                            </span><span class="tag">_</span><span class="pln"> sortedPlugins.push(item)</span></li><li class="L5"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.destroy =</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">function</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> destructors.forEach</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> destroy</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> destroy()</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> destructors = []</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> Architect.prototype = Object.create(EventEmitter.prototype, {constructor: {value: Architect}})</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> Architect.prototype.getService =</span></li><li class="L4"><span class="pnl">                </span><span class="tag">function</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> ! (this.services[name])</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">throw</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">new</span><span class="pln"> Error(((("Service '" + name)) + "' not found in architect app!"))</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">return</span><span class="pln"> this.services[name]</span></li><li class="L0"><span class="pnl">            </span><span class="tag">function</span><span class="pln"> createApp</span></li><li class="L1"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> config</span></li><li class="L2"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> app</span></li><li class="L4"><span class="pnl">                </span><span class="tag">try</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> app = new Architect(config)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">catch</span><span class="pln"> err</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> !(callback)</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">throw</span><span class="pln"> err</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">return</span><span class="pln"> callback(err, app)</span></li><li class="L0"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> app.on("error", done)</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> app.on("ready", onReady)</span></li><li class="L3"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> app</span></li><li class="L4"><span class="pnl">                </span><span class="tag">function</span><span class="pln"> onReady</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> app</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> done()</span></li><li class="L7"><span class="pnl">                </span><span class="tag">function</span><span class="pln"> done</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> app.destroy()</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> app.removeListener("error", done)</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> app.removeListener("ready", onReady)</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback(err, app)</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> app</span></li><li class="L5"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> exports</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d48">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/pluginsManager/artifact-generator.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> retrieve an artifact generator searching the factoryPlugins</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> registered to this plugins manager</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {String} artifactName</span></li><li class="L6"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getArtifactGenerator</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> artifactName</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> log 'PluginsManager.getArtifactGenerator.artifactName: ' + artifactName</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span></li><li class="L0"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> found = null</span></li><li class="L1"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> foundInPlugin = null</span></li><li class="L2"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> result = null</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> all factoryPlugins are searched, last matching encountered wins.</span></li><li class="L4"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> item in this.factoryPlugins</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> log 'searching artifact ', artifactName, ' in module', item.getName()</span></li><li class="L6"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d125">checked_call_return_set(</span><span class="arg"> found </span><span class="mix">)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> item.getArtifactGenerator(artifactName)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> log 'found', found, found && verify.isFunction(found.gen)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> found && verify.isFunction(found.gen)</span></li><li class="L0"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> result = found</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> foundInPlugin = item.getFilename()</span></li><li class="L2"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !result</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.error('getArtifactGenerator. Cannot find artifact generator: ' + artifactName + ', available generators: ' + this.availableArtifactGenerators().join(', '))</span></li><li class="L4"><span class="pnl">        </span><span class="tag">else</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.success('getArtifactGenerator. Found artifact generator: ' + artifactName + ' in plugin ' + foundInPlugin)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> result</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d49">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/pluginsManager/initialize.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> { options</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> [ items</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> string pluginName</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L7"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> initialize</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> log 'options', options</span></li><li class="L1"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> itemsOptions = options.items</span></li><li class="L2"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> verify.isArray(itemsOptions) == false</span></li><li class="L3"><span class="pnl">            </span><span class="tag">return</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'MissingOption'</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'Initialize plugins manager: missing "items" option property'</span></li><li class="L8"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> that = this</span></li><li class="L9"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.loadPlugins</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L1"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> plugins </span><span class="mix">)</span></li><li class="L2"><span class="pnl">                </span><span class="tag">function</span><span class="pln"> register</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> i</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> i &gt;= plugins.length</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">return</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> that</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> plugin = plugins[i]</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> that.registerFactoryPlugin</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> plugin</span></li><li class="L2"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> notUsed </span><span class="mix">)</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> register(++i)</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> register(0)</span></li><li class="L5"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> loadPlugins</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">        </span><span class="tag">+</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> itemsOptions = options.items</span></li><li class="L0"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> baseConfigFolder = options.baseConfigFolder || process.cwd()</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> log 'baseConfigFolder', baseConfigFolder</span></li><li class="L2"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> packagePathCache = this.packagePathCache</span></li><li class="L3"><span class="pnl">        </span><span class="tag">+</span></li><li class="L4"><span class="pnl">        </span><span class="tag">function</span><span class="pln"> resolveNext</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> i</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> i &gt;= itemsOptions.length</span></li><li class="L7"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> log 'itemsOptions', itemsOptions</span></li><li class="L8"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> callback(null, itemsOptions)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> plugin = itemsOptions[i]</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> typeof (plugin) === "string"</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> plugin = itemsOptions[i] = {packagePath: plugin}</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> plugin.hasOwnProperty("packagePath") && !(plugin.hasOwnProperty("setup"))</span></li><li class="L3"><span class="pnl">                </span><span class="tag">return</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> resolveModule</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> baseConfigFolder</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> plugin.packagePath</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> moduleObject</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> Object.keys(moduleObject)</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">._</span><span class="pln"> forEach</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">function</span></li><li class="L5"><span class="pnl">                                        </span><span class="tag">param</span><span class="pln"> key</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">if</span><span class="pln"> !plugin.hasOwnProperty(key)</span></li><li class="L7"><span class="pnl">                                            </span><span class="tag">set</span><span class="pln"> plugin[key] = moduleObject[key]</span></li><li class="L8"><span class="pnl">                                            </span><span class="tag">#</span><span class="pln"> log 'plugin key', key</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> plugin.packagePath = moduleObject.packagePath</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> resolveNext(++i)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">else</span></li><li class="L2"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> resolveNext(++i)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> resolveNext(0)</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d53"> ./resolve-module</span></li><li class="L5"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d54"> ./resolve-package</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d50">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/pluginsManager/model-factory.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Retrieve a model factory searching the factoryPlugins</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> registered to this repository</span></li><li class="L5"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getModelFactory</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> schemaName</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> log 'PluginsManager.getModelFactory.schemaName: ' + schemaName</span></li><li class="L8"><span class="pnl">        </span><span class="tag">var</span></li><li class="L9"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> found = null</span></li><li class="L0"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> foundInPlugin = null</span></li><li class="L1"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> result = null</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> all factoryPlugins are searched, last matching encountered wins.</span></li><li class="L3"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> item in this.factoryPlugins</span></li><li class="L4"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> log 'searching model loader', schemaName, ' in plugin ', item.getName()</span></li><li class="L5"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d125">checked_call_return_set(</span><span class="arg"> found </span><span class="mix">)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> item.getModelFactory(schemaName)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> log 'found', found, found && verify.isFunction(found.createLoadModel)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> found && verify.isFunction(found.createLoadModel)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> result = found</span></li><li class="L0"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> foundInPlugin = item.getFilename()</span></li><li class="L1"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !result</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.error('getModelFactory. Cannot find model loader: ' + schemaName + '\n' + 'availables schemas: ' + this.availableSchemas().join(', '))</span></li><li class="L3"><span class="pnl">        </span><span class="tag">else</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.success('getModelFactory. Found model loader: ' + schemaName + ' in plugin ' + foundInPlugin)</span></li><li class="L5"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> result</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d51">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/pluginsManager/model-transformer.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Retrieve a model transformer searching the factoryPlugins</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> registered to this plugins manager</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {String} transformerName</span></li><li class="L6"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getModelTransformer</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> transformerName</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> log 'PluginsManager.getModelTransformer.transformerName: ' + transformerName</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span></li><li class="L0"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> found = null</span></li><li class="L1"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> foundInPlugin = null</span></li><li class="L2"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> result = null</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> all factoryPlugins are searched, last matching encountered wins.</span></li><li class="L4"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> item in this.factoryPlugins</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> log 'searching transformer ', transformerName, ' in plugin', item.getName()</span></li><li class="L6"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d125">checked_call_return_set(</span><span class="arg"> found </span><span class="mix">)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> item.getModelTransformer(transformerName)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> log 'found', found, found && verify.isFunction(found.trans)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> found && verify.isFunction(found.trans)</span></li><li class="L0"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> result = found</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> foundInPlugin = item.getFilename()</span></li><li class="L2"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !result</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.error('getModelTransformer. Cannot find transformer: ' + transformerName + ', available transformers: ' + this.availableModelTransformers().join(', '))</span></li><li class="L4"><span class="pnl">        </span><span class="tag">else</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.success('getModelTransformer. Found transformer: ' + transformerName + ' in plugin ' + foundInPlugin)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> result</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d52">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/pluginsManager/register.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Register a factoryPlugin to this plugins manager</span></li><li class="L4"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> registerFactoryPlugin</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> pluginModule</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> that = this</span></li><li class="L8"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> pluginModule.createFactoryPlugin</span></li><li class="L9"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> this.createWizziForPlugin()</span></li><li class="L0"><span class="pnl">            </span><span class="tag">{</span></li><li class="L1"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> factoryPlugin </span><span class="mix">)</span></li><li class="L2"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> vld = that.validateFactoryPlugin(factoryPlugin)</span></li><li class="L3"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> vld.__is_error</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> vld</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> that.factoryPlugins.push(factoryPlugin)</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> that.addPluginProvides(factoryPlugin)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback(null)</span></li><li class="L1"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> createWizziForPlugin</span></li><li class="L2"><span class="pnl">        </span><span class="tag">return</span></li><li class="L3"><span class="pnl">            </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> file file</span></li><li class="L5"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> validateFactoryPlugin</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> factoryPlugin</span></li><li class="L7"><span class="pnl">        </span><span class="tag">for</span><span class="pln"> var k in factoryPlugin</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> log 'factoryPlugin.key', k</span></li><li class="L9"><span class="pnl">        </span><span class="tag">+</span></li><li class="L0"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> methodNames</span></li><li class="L1"><span class="pnl">            </span><span class="tag">[</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'getName'</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'getFilename'</span></li><li class="L4"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'getProvides'</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'getModelFactory'</span></li><li class="L6"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'getModelTransformer'</span></li><li class="L7"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'getArtifactGenerator'</span></li><li class="L8"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'getSchemaDefinition'</span></li><li class="L9"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> methodName in methodNames</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isFunction(factoryPlugin[methodName]) == false</span></li><li class="L1"><span class="pnl">                </span><span class="tag">return</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'InvalidFactoryPlugin'</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'Missing method: ' + methodName</span></li><li class="L5"><span class="pnl">            </span><span class="tag">try</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> factoryPlugin[methodName]('dummy')</span></li><li class="L7"><span class="pnl">            </span><span class="tag">catch</span><span class="pln"> ex</span></li><li class="L8"><span class="pnl">                </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'InvalidFactoryPlugin'</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'Error executing method: ' + methodName + ', message: ' + ex.message</span></li><li class="L2"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> providesProperties</span></li><li class="L3"><span class="pnl">            </span><span class="tag">[</span></li><li class="L4"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'schemas'</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'modelTransformers'</span></li><li class="L6"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'artifactGenerators'</span></li><li class="L7"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> provides = factoryPlugin.getProvides()</span></li><li class="L8"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> propName in providesProperties</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isArray(provides[propName]) == false</span></li><li class="L0"><span class="pnl">                </span><span class="tag">return</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'InvalidFactoryPlugin'</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'Missing property: ' + propName + ' in provides object'</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> log 'validateFactoryPlugin', factoryPlugin.getName(), true</span></li><li class="L5"><span class="pnl">        </span><span class="tag">return</span></li><li class="L6"><span class="pnl">            </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> __is_error false</span></li><li class="L8"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> addPluginProvides</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> factoryPlugin</span></li><li class="L0"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> found</span></li><li class="L1"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> item in factoryPlugin.provides.schemas</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> found</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> _.find</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.providedSchemas</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> name item</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> found</span></li><li class="L8"><span class="pnl">                </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'DuplicatedPluginResource'</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'Schema ' + item + ' already provided'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">else</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.providedSchemas.push</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> name item</span></li><li class="L6"><span class="pnl">        </span><span class="tag">+</span></li><li class="L7"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> item in factoryPlugin.provides.modelTransformers</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> found</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> _.find</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.providedModelTransformers</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> name item</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> found</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'DuplicatedPluginResource'</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'Model transformer ' + item + ' already provided'</span></li><li class="L8"><span class="pnl">            </span><span class="tag">else</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.providedModelTransformers.push</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> name item</span></li><li class="L2"><span class="pnl">        </span><span class="tag">+</span></li><li class="L3"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> item in factoryPlugin.provides.artifactGenerators</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> found</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> _.find</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.providedArtifactGenerators</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> name item</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> found</span></li><li class="L0"><span class="pnl">                </span><span class="tag">return</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'DuplicatedPluginResource'</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'Artifact generator ' + item + ' already provided'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">else</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.providedArtifactGenerators.push</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> name item</span></li><li class="L8"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> availableSchemas</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> ret = []</span></li><li class="L0"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> item in this.providedSchemas</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ret.push(item.name)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> ret</span></li><li class="L3"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> availableModelTransformers</span></li><li class="L4"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> ret = []</span></li><li class="L5"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> item in this.providedModelTransformers</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ret.push(item.name)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> ret</span></li><li class="L8"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> availableArtifactGenerators</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> ret = []</span></li><li class="L0"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> item in this.providedArtifactGenerators</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ret.push(item.name)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> ret</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d53">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/pluginsManager/resolve-module.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> resolveModule</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> baseConfigFolder</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> modulePath</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">        </span><span class="tag">+</span></li><li class="L7"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> resolvePackage</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> baseConfigFolder</span></li><li class="L9"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> (modulePath + "/package.json")</span></li><li class="L0"><span class="pnl">            </span><span class="tag">function</span></li><li class="L1"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L2"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> packagePath</span></li><li class="L3"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> metadata</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L5"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> packageMetadata</span></li><li class="L6"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> !err</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">try</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> packageMetadata = (packagePath && require(packagePath).plugin) || {}</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">catch</span><span class="pln"> ex</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">return</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'PackageError'</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'Error loading plugin package.json ' + packagePath + ', message: ' + ex.message</span></li><li class="L5"><span class="pnl">                </span><span class="tag">iife</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">function</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> next</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> resolvePackage(baseConfigFolder, (modulePath + ".js"), next)</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">elif</span><span class="pln"> packagePath</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> next</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> dirname(packagePath)</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">else</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> resolvePackage(baseConfigFolder, modulePath, next)</span></li><li class="L6"><span class="pnl">                    </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> modulePath </span><span class="mix">)</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> moduleObject</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">try</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">#</span><span class="pln"> load the module now</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> moduleObject = require(modulePath)</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">#</span><span class="pln"> log 'module', modulePath, moduleObject</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">catch</span><span class="pln"> ex</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">return</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> 'ModuleError'</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> 'Error loading plugin module ' + modulePath + ', message: ' + ex.message + '\n' + ex.stack</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> moduleObject.provides = packageMetadata.provides || moduleObject.provides || []</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> moduleObject.consumes = packageMetadata.consumes || moduleObject.consumes || []</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> moduleObject.packagePath = modulePath</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> callback(null, moduleObject)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d54">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/pluginsManager/resolve-package.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> resolvePackage</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> baseConfigFolder</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> packagePath</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">        </span><span class="tag">+</span></li><li class="L7"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> originalBase = baseConfigFolder</span></li><li class="L8"><span class="pnl">        </span><span class="tag">+</span></li><li class="L9"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !packagePathCache.hasOwnProperty(baseConfigFolder)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> packagePathCache[baseConfigFolder] =</span></li><li class="L1"><span class="pnl">                </span><span class="tag">{</span></li><li class="L2"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> cache = packagePathCache[baseConfigFolder]</span></li><li class="L3"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> cache.hasOwnProperty(packagePath)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> cache[packagePath]</span></li><li class="L8"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> packagePath[0] === "." || packagePath[0] === "/"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> local folder plugin module</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> newPath = resolve(baseConfigFolder, packagePath)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> exists</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> newPath</span></li><li class="L3"><span class="pnl">                </span><span class="tag">function</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> exists</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> exists</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> realpath</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> newPath</span></li><li class="L8"><span class="pnl">                            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> newPath </span><span class="mix">)</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> cache[packagePath] = newPath</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">return</span><span class="pln"> callback(null, newPath)</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">return</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> "ENOENT"</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> "Can't find '" + packagePath + "' relative to '" + originalBase + "'"</span></li><li class="L7"><span class="pnl">        </span><span class="tag">else</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> npm (node_modules folder) plugin module</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> tryNext(baseConfigFolder)</span></li><li class="L0"><span class="pnl">        </span><span class="tag">function</span><span class="pln"> tryNext</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> base</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> base == "/"</span></li><li class="L3"><span class="pnl">                </span><span class="tag">return</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> "ENOENT"</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> "Can't find '" + packagePath + "' relative to '" + originalBase + "'"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> newPath = resolve(base, "node_modules", packagePath)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> exists</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> newPath</span></li><li class="L1"><span class="pnl">                </span><span class="tag">function</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> exists</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> exists</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> realpath</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> newPath</span></li><li class="L6"><span class="pnl">                            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> newPath </span><span class="mix">)</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> cache[packagePath] = newPath</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">return</span><span class="pln"> callback(null, newPath)</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> nextBase = resolve(base, '..')</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> nextBase === base</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> tryNext("/")</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">else</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> tryNext(nextBase)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d55">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/pluginsManager/schema-definition.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Retrieve a schema definition searching the factoryPlugins</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> registered to this plugins manager</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {String} schemaName</span></li><li class="L6"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getSchemaDefinition</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> schemaName</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> log 'PluginsManager.getSchemaObject.schemaName: ' + schemaName</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span></li><li class="L0"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> found = null</span></li><li class="L1"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> foundInPlugin = null</span></li><li class="L2"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> result = null</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> all factoryPlugins are searched, last encountered results override the previous.</span></li><li class="L4"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> item in this.factoryPlugins</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> log 'searching wizzi schema definition', schemaName, ' in plugin ', item.getName()</span></li><li class="L6"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d125">checked_call_return_set(</span><span class="arg"> found </span><span class="mix">)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> item.getSchemaDefinition(schemaName)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> log 'found', found</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> found && verify.isObject(found)</span></li><li class="L0"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> result = found</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> foundInPlugin = item.getFilename()</span></li><li class="L2"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !result</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.error('getSchemaDefinition. Cannot find schema definition: ' + schemaName + '\n' + 'availables schemas: ' + this.availableSchemas().join(', '))</span></li><li class="L4"><span class="pnl">        </span><span class="tag">else</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> log.success('getSchemaDefinition. Found schema object: ' + schemaName + ' in plugin ' + foundInPlugin)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> result</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d56">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/runnerServer/apiServer.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> registerApi</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> apiName</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> apiFunction</span></li><li class="L5"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> _.isFunction(apiFunction)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.apis[apiName] = apiFunction</span></li><li class="L7"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> chalk.yellow('WIZZI RunnerServer. Registered Api: ' + apiName)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">else</span></li><li class="L9"><span class="pnl">            </span><span class="tag">throw</span></li><li class="L0"><span class="pnl">                </span><span class="tag">new</span><span class="pln"> errors.RunnerServerError</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'Error registering api "' + apiName + '", the parameter "apiFunction" is not a function'</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> callApi</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> apiName</span></li><li class="L4"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> apiFunction = this.apis[apiName]</span></li><li class="L5"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> _.isFunction(apiFunction) == false</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.error</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'apiName: "' + apiName + '" is not a function'</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'callApi'</span></li><li class="L0"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> args = Array.prototype.slice.call(arguments, 1)</span></li><li class="L1"><span class="pnl">        </span><span class="tag">try</span></li><li class="L2"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> apiFunction.apply(this, args)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">catch</span><span class="pln"> ex</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.error</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'apiName "' + apiName + '" exception: ' + ex.message + ', stack: ' + ex.stack</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'callApi'</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d57">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/runnerServer/factoryServer.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> loadModel</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> schemaName</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ittfDocumentUri</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> context</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.wizziFactory.loadModel</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> schemaName</span></li><li class="L9"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> ittfDocumentUri</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> context</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> transformModel</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> transformerName</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> model</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> context</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.wizziFactory.transformModel</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> transformerName</span></li><li class="L9"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> model</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> context</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> callback</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d58">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/wizziFactory/artifact-generation.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Retrieve an artifact generator</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Artifact generators are searched in the PluginsManager</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> They are cached</span></li><li class="L6"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getArtifactGenerator</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> artifactName</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> globalContext</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> generator = this.artifactGenerators[artifactName] || null</span></li><li class="L0"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> generator == null</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> generator = this.pluginsManager.getArtifactGenerator(artifactName)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> generator != null</span></li><li class="L3"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> generator.setGlobalContext</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> generator.setGlobalContext</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> globalContext</span></li><li class="L6"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.artifactGenerators[artifactName] = generator</span></li><li class="L7"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> generator</span></li><li class="L8"><span class="pnl">    </span><span class="tag">#</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Async generate an artifact</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {String} ittfDocumentUri</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> For trace and documentation purposes.</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {Object} model</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> A WizziModel or any other value of type Object which contains the data context of the generation.</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {String} artifactName</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> The name for retrieving the ArtifactGeneration module.</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {Object} artifactContext</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Context data for the artifact generator</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {Function} callback</span></li><li class="L0"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> generateArtifact</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> model</span></li><li class="L2"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ittfDocumentUri</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> artifactName</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> artifactContext</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">        </span><span class="tag">+</span></li><li class="L7"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !callback</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> callback = artifactContext</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> artifactContext = {}</span></li><li class="L0"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !artifactContext</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> artifactContext = {}</span></li><li class="L2"><span class="pnl">        </span><span class="tag">+</span></li><li class="L3"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> artifactName = getStringParam('artifactName', artifactName)</span></li><li class="L4"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> artifactName.__is_error</span></li><li class="L5"><span class="pnl">            </span><span class="tag">return</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback(artifactName)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">+</span></li><li class="L8"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> generator = this.getArtifactGenerator(artifactName)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> generator == null</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'NotFoundError'</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'Artifact generator "' + artifactName + '" not found. For model: ' + ittfDocumentUri</span></li><li class="L5"><span class="pnl">        </span><span class="tag">+</span></li><li class="L6"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> generator.__is_error</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> generator.ittfDocumentUri = ittfDocumentUri</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> callback(generator)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">+</span></li><li class="L0"><span class="pnl">        </span><span class="tag">##</span><span class="pln"> TODO productionOptions should come from production manager</span></li><li class="L1"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> genContext = new GenContext({ options: productionOptions(null, { data: artifactContext }) })</span></li><li class="L2"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> generator.gen</span></li><li class="L3"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> model</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> genContext</span></li><li class="L5"><span class="pnl">            </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L7"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> 'ArtifactGenerationError'</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> 'Error in generation: ' + artifactName + '. For model: ' + ittfDocumentUri +</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">\b</span><span class="pln"> '. Err: ' + util.inspect(err, { depth: null})</span></li><li class="L4"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> sw = new StringWriter()</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> genContext.toStream(sw)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback(null, sw.toString())</span></li><li class="L7"><span class="pnl">    </span><span class="tag">#</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Loads a wizzi model from an IttfDocument and use it as</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> a context model for the artifact generation.</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> param ittfDocumentUri:String // the uri of the IttfDocument</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> param requestContext:Object {</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> modelContext:Object,  // Context data for the wizzi model loading</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> artifactContext:Object,  // Context data for the artifact generation</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> param artifactName:String // the name of the artifact</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> param callback:Function</span></li><li class="L7"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> loadModelAndGenerateArtifact</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ittfDocumentUri</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> requestContext</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> artifactName</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> that = this</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> load the wizzi model from an ittfDocument</span></li><li class="L4"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.loadModel</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> ittfDocumentUri</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> requestContext.modelContext</span></li><li class="L7"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> model </span><span class="mix">)</span></li><li class="L8"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> the loaded wizzi model becomes the model of the artifact generation</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> that.generateArtifact</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> model</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> ittfDocumentUri</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> artifactName</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> requestContext.artifactContext</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> callback</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d59">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/wizziFactory/getParams.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> getStringParam</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> paramName</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> paramValue</span></li><li class="L5"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> paramValue == null || typeof(paramValue) == 'undefined'</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'InvalidStringParam'</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'Parameter ' + paramName + ' must resolve to a string. Received: ' + paramValue</span></li><li class="L0"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> verify.isString(paramValue)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> paramValue</span></li><li class="L2"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> verify.isFunction(paramValue)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> paramValue()</span></li><li class="L4"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> paramValue.toString()</span></li><li class="L5"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> detectSchema</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ittfDocumentUri</span></li><li class="L7"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> uri = getStringParam('ittfDocumentUri', ittfDocumentUri)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> uri.__is_error</span></li><li class="L9"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> uri</span></li><li class="L0"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> parts = uri.split('.')</span></li><li class="L1"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> parts.length &lt; 3</span></li><li class="L2"><span class="pnl">            </span><span class="tag">return</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'InvalidIttfDocumentUri'</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'IttfDocumentUri must contain at least 3 segments. Received: ' + uri</span></li><li class="L6"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> ittf = parts[parts.length-1]</span></li><li class="L7"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> ittf.toLowerCase() != 'ittf'</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'InvalidIttfDocumentUri'</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'IttfDocumentUri extension must be ".ittf". Received: ' + ittf</span></li><li class="L2"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> parts[parts.length-2]</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d60">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/wizziFactory/initialize.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> param options:Object {</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> repo:Object {</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> storeKind:String    // oneOf 'filesystem', 'mongodb', 'localstorage'</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> storeUri:String     // when storeKind == mongodb</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> plugins:Object {</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> items:Array of String  // plugin name</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> initialize</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> repoOptions = options.repo</span></li><li class="L6"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> verify.isObject(repoOptions) == false</span></li><li class="L7"><span class="pnl">            </span><span class="tag">return</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'MissingOption'</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'Initialize IttfDocuments repository: missing "repo" option property'</span></li><li class="L2"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> pluginsOptions = options.plugins</span></li><li class="L3"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> verify.isObject(pluginsOptions) == false</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'MissingOption'</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'Initialize factory plugins: missing "plugins" option property'</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> that = this</span></li><li class="L0"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> repo.createStoreFactory</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> repoOptions</span></li><li class="L2"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> createStore </span><span class="mix">)</span></li><li class="L3"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> log 'createStore', createStore</span></li><li class="L4"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> that.createStore = createStore</span></li><li class="L5"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> that.__loadMTree</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> mtree.createLoadMTree</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> createStore</span></li><li class="L8"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> log '__loadMTree', that.__loadMTree</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> PluginsManager.createManager</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> that.__loadMTree</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> pluginsOptions</span></li><li class="L2"><span class="pnl">                    </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> pluginsManager </span><span class="mix">)</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> that.pluginsManager = pluginsManager</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">#</span><span class="pln"> log 'pluginsManager', pluginsManager</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">return</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> callback(null, that)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d61">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/wizziFactory/model-loading.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Retrieve a modelLoad function by the model schema name</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Model factories are searched in the PluginsManager</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> They are cached</span></li><li class="L6"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getLoadModel</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> schemaName</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> globalContext</span></li><li class="L9"><span class="pnl">        </span><span class="tag">log</span><span class="pln"> 'wizzi.wizziFactory.getLoadModel.globalContext', globalContext</span></li><li class="L0"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> loadModel = this.modelLoaders[schemaName] || null</span></li><li class="L1"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> loadModel == null</span></li><li class="L2"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d126">checked_call_return(</span><span class="arg"> factory </span><span class="mix">)</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.pluginsManager.getModelFactory(schemaName)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> log 'getLoadModel.factory', factory</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> factory != null</span></li><li class="L6"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> loadModel</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> factory.createLoadModel</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> loadMTree this.__loadMTree</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> file file</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> verify verify</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> errors errors</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> globalContext</span></li><li class="L4"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> log 'getLoadModel.loadModel', loadModel</span></li><li class="L5"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.modelLoaders[schemaName] = loadModel</span></li><li class="L6"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> loadModel</span></li><li class="L7"><span class="pnl">    </span><span class="tag">#</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Async load a wizzi model</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {String} schemaName</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {String} ittfDocumentUri</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {Object} context</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {Function} callback</span></li><li class="L4"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> loadModel</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> schemaName</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ittfDocumentUri</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> context</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L9"><span class="pnl">        </span><span class="tag">+</span></li><li class="L0"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> typeof(callback) == 'undefined'</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> callback = context</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> context = ittfDocumentUri</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> ittfDocumentUri = schemaName</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> schemaName = null</span></li><li class="L5"><span class="pnl">        </span><span class="tag">+</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> context = context || {}</span></li><li class="L7"><span class="pnl">        </span><span class="tag">+</span></li><li class="L8"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> ittfDocumentUri = getStringParam('ittfDocumentUri', ittfDocumentUri)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> ittfDocumentUri.__is_error</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback(ittfDocumentUri)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">+</span></li><li class="L3"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> schemaName == null</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> schemaName = detectSchema(ittfDocumentUri)</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> schemaName.__is_error</span></li><li class="L6"><span class="pnl">                </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback(schemaName)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">+</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> loadModel = this.getLoadModel(schemaName)</span></li><li class="L0"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> loadModel == null</span></li><li class="L1"><span class="pnl">            </span><span class="tag">return</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'NotFoundError'</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'Model factory for schema "' + schemaName + '" not found.'</span></li><li class="L6"><span class="pnl">        </span><span class="tag">+</span></li><li class="L7"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> loadModel.__is_error</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> loadModel.ittfDocumentUri = ittfDocumentUri</span></li><li class="L9"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> callback(loadModel)</span></li><li class="L0"><span class="pnl">        </span><span class="tag">+</span></li><li class="L1"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> requestContext</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.createRequestContext</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> context</span></li><li class="L4"><span class="pnl">        </span><span class="tag">+</span></li><li class="L5"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> that = this</span></li><li class="L6"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> loadModel</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> ittfDocumentUri</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> requestContext</span></li><li class="L9"><span class="pnl">            </span><span class="tag">function</span></li><li class="L0"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L1"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> wizziModel</span></li><li class="L2"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> that.formatWizziModel</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> wizziModel</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> context.__formatOptions</span></li><li class="L0"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> formatWizziModel</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> model</span></li><li class="L2"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> formatOptions</span></li><li class="L3"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !formatOptions</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> model</span></li><li class="L5"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> partial = false</span></li><li class="L6"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> ret = {}</span></li><li class="L7"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> formatOptions.ittfSources</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> partial = true</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> ret.loadContext = {}</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> ret.loadContext.ittfSources = model.loadContext.ittfSources</span></li><li class="L1"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> partial</span></li><li class="L2"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> ret</span></li><li class="L3"><span class="pnl">        </span><span class="tag">else</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> model</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d62">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/wizziFactory/model-transformation.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Retrieve a model transformer</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Model transformation are searched in the PluginsManager</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> They are cached</span></li><li class="L6"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getModelTransformer</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> transformerName</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> globalContext</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> transformer = this.modelTransformers[transformerName] || null</span></li><li class="L0"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> transformer == null</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> transformer = this.pluginsManager.getModelTransformer(transformerName)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> transformer != null</span></li><li class="L3"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> transformer.setGlobalContext</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> transformer.setGlobalContext</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> globalContext</span></li><li class="L6"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.modelTransformers[transformerName] = transformer</span></li><li class="L7"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> transformer</span></li><li class="L8"><span class="pnl">    </span><span class="tag">#</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Async execute a model transformation</span></li><li class="L0"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> transformModel</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> transformerName</span></li><li class="L2"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> model</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> context</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">        </span><span class="tag">+</span></li><li class="L6"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> transformerName = getStringParam('transformerName', transformerName)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> transformerName.__is_error</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback(transformerName)</span></li><li class="L0"><span class="pnl">        </span><span class="tag">+</span></li><li class="L1"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> transformer = this.getModelTransformer(transformerName)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> transformer == null</span></li><li class="L3"><span class="pnl">            </span><span class="tag">return</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'NotFoundError'</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'Model transformer "' + transformerName + '" not found.'</span></li><li class="L8"><span class="pnl">        </span><span class="tag">+</span></li><li class="L9"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> transformer.__is_error</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> transformer.ittfDocumentUri = ittfDocumentUri</span></li><li class="L1"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> callback(transformer)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">+</span></li><li class="L3"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> transformer.trans</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> model</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> context</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> callback</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d63">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/wizziFactory/modelTypes-generation.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> From an IttfDocument of schema "wfschema"</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> async generate:</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> - a WizziModelType</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> - a WizziModelFactory</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> - a WizziModelType test module</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> - a WizziModelType json documentation</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> - a WizziModelType html documentation</span></li><li class="L0"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> generateModelTypes</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> wfschemaIttfDocumentUri</span></li><li class="L2"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> outputPackagePath</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> wfschemaName</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> evaluationContext</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">        </span><span class="tag">+</span></li><li class="L7"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> wizziSchemaLabFolder = path.join(outputPackagePath, 'lib', 'wizzi', 'schemas', 'lab')</span></li><li class="L8"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> wizziModelFolder = path.join(outputPackagePath, 'lib', 'wizzi', 'models')</span></li><li class="L9"><span class="pnl">        </span><span class="tag">+</span></li><li class="L0"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> paths</span></li><li class="L1"><span class="pnl">            </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> model path.join(wizziModelFolder, wfschemaName + '-model.g.js')</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> factory path.join(wizziModelFolder, wfschemaName + '-factory.g.js')</span></li><li class="L4"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> lab path.join(wizziSchemaLabFolder, wfschemaName + '-test.g.js')</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> jsondocs path.join(wizziModelFolder, wfschemaName + '-schema.g.json')</span></li><li class="L6"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> htmldocs path.join(wizziModelFolder, wfschemaName + '-schema.g.html')</span></li><li class="L7"><span class="pnl">        </span><span class="tag">+</span></li><li class="L8"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> requestContext</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.createRequestContext</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> evaluationContext</span></li><li class="L1"><span class="pnl">        </span><span class="tag">+</span></li><li class="L2"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.generateModelTypesArtifacts</span></li><li class="L3"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> wfschemaIttfDocumentUri</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> evaluationContext</span></li><li class="L5"><span class="pnl">            </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L7"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> generatedArtifacts</span></li><li class="L8"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> 'ModelTypesGenerationError'</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> util.inspect(err, { depth: null })</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> file.write</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> paths.model</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> generatedArtifacts.model</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> log.success('Generated WizziModel: ' + paths.model)</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> file.write</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> paths.factory</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> generatedArtifacts.factory</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> log.success('Generated WizziModelFactory: ' + paths.factory)</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> file.write</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> paths.lab</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> generatedArtifacts.lab</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> log.success('Generated WizziModel test: ' + paths.lab)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> file.write</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> paths.jsondocs</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> generatedArtifacts.jsondocs</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> log.success('Generated WizziModel json docs: ' + paths.jsondocs)</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> file.write</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> paths.htmldocs</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> generatedArtifacts.htmldocs</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> log.success('Generated WizziModel html docs: ' + paths.htmldocs)</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback(null, null)</span></li><li class="L5"><span class="pnl">    </span><span class="tag">#</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> generate the wizzi model type artifacts</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> from an IttfDocument of schema "wfschema"</span></li><li class="L8"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> generateModelTypesArtifacts</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> wfschemaIttfDocumentUri</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> evaluationContext</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">        </span><span class="tag">+</span></li><li class="L3"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> that = this</span></li><li class="L4"><span class="pnl">        </span><span class="tag">+</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> load the WizziModel from wfschemaIttfDocumentUri</span></li><li class="L6"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> log.info('starting async load of WizziModel from wfschemaIttfDocumentUri')</span></li><li class="L7"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.loadModel</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'wfschema'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> wfschemaIttfDocumentUri</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> evaluationContext</span></li><li class="L1"><span class="pnl">            </span><span class="tag">function</span></li><li class="L2"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L3"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> schemaWizziModel</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> log.info('create the boot WizziModel. err', err)</span></li><li class="L5"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> load the schemaWizziModel instance into the bootstrap wizzimodel.</span></li><li class="L8"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> This is required until the generation of the WizziModel of type 'wfschema'</span></li><li class="L9"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> is not completely automated.</span></li><li class="L0"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> BootWizziSchema == null</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> BootWizziSchema = require(bootModelUri).WizziSchema</span></li><li class="L2"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> bootWizziModel = new BootWizziSchema(schemaWizziModel.wzName)</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> bootWizziModel.loadFromWizziModel(schemaWizziModel)</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> log.info('starting the artifact generator wfschema/model')</span></li><li class="L5"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> execute the artifact generator 'wfschema/model'</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> that.generateArtifact</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> bootWizziModel</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> bootModelDefUri</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'wfschema/model'</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> evaluationContext</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">function</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> wizziModelArtifact</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> log.info('starting the artifact generator wfschema/factory')</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> that.generateArtifact</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> bootWizziModel</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> bootModelDefUri</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'wfschema/factory'</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> evaluationContext</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> wizziFactoryArtifact</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> log.info('starting the artifact generator wfschema/test')</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> that.generateArtifact</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> bootWizziModel</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> bootModelDefUri</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'wfschema/test'</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> evaluationContext</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">function</span></li><li class="L4"><span class="pnl">                                        </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L5"><span class="pnl">                                        </span><span class="tag">param</span><span class="pln"> wizziTestArtifact</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L7"><span class="pnl">                                            </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L8"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> that.transformModel</span></li><li class="L9"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> 'wfschema/json_docs'</span></li><li class="L0"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> bootWizziModel</span></li><li class="L1"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> evaluationContext</span></li><li class="L2"><span class="pnl">                                            </span><span class="tag">function</span></li><li class="L3"><span class="pnl">                                                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L4"><span class="pnl">                                                </span><span class="tag">param</span><span class="pln"> wizziDocsObject</span></li><li class="L5"><span class="pnl">                                                </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L6"><span class="pnl">                                                    </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L7"><span class="pnl">                                                </span><span class="tag">var</span><span class="pln"> jsondocsJson = stringify(wizziDocsObject, null, 2)</span></li><li class="L8"><span class="pnl">                                                </span><span class="tag">_</span><span class="pln"> log.info('starting the artifact generator wfschema/html_docs')</span></li><li class="L9"><span class="pnl">                                                </span><span class="tag">_</span><span class="pln"> that.generateArtifact</span></li><li class="L0"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> wizziDocsObject</span></li><li class="L1"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> bootModelDefUri</span></li><li class="L2"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> 'wfschema/html_docs'</span></li><li class="L3"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> evaluationContext</span></li><li class="L4"><span class="pnl">                                                    </span><span class="tag">function</span></li><li class="L5"><span class="pnl">                                                        </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L6"><span class="pnl">                                                        </span><span class="tag">param</span><span class="pln"> wizziHtmlDocsArtifact</span></li><li class="L7"><span class="pnl">                                                        </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L8"><span class="pnl">                                                            </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L9"><span class="pnl">                                                        </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">                                                            </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L1"><span class="pnl">                                                            </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                                                                </span><span class="tag">@</span><span class="pln"> model wizziModelArtifact</span></li><li class="L3"><span class="pnl">                                                                </span><span class="tag">@</span><span class="pln"> factory wizziFactoryArtifact</span></li><li class="L4"><span class="pnl">                                                                </span><span class="tag">@</span><span class="pln"> test wizziTestArtifact</span></li><li class="L5"><span class="pnl">                                                                </span><span class="tag">@</span><span class="pln"> jsondocs jsondocsJson</span></li><li class="L6"><span class="pnl">                                                                </span><span class="tag">@</span><span class="pln"> htmldocs wizziHtmlDocsArtifact</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d64">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/wizziFactory/mtree-loading.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Async load a wizzi magical tree</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {String} ittfDocumentUri</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {Object} modelContext</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {Function} callback</span></li><li class="L8"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> loadMTree</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ittfDocumentUri</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> modelContext</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">        </span><span class="tag">+</span></li><li class="L3"><span class="pnl">        </span><span class="mix frag-to-link-a" data-frag-id="d127">checked_call(</span><span class="arg"> ittfDocumentUri </span><span class="mix">)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> getStringParam('ittfDocumentUri', ittfDocumentUri)</span></li><li class="L5"><span class="pnl">        </span><span class="tag">+</span></li><li class="L6"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.__loadMTree</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> ittfDocumentUri</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.createRequestContext</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> modelContext</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> callback</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d65">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/wizziFactory/request-context.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> createRequestContext</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> modelContext</span></li><li class="L4"><span class="pnl">        </span><span class="tag">+</span></li><li class="L5"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> pman</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.createProductionManager</span></li><li class="L7"><span class="pnl">        </span><span class="tag">return</span></li><li class="L8"><span class="pnl">            </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> __productionManager pman</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> modelContext modelContext</span></li><li class="L1"><span class="pnl">    </span><span class="tag">#</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> params</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> { userProductionOptions</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> integer indentSpaces</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> default 4</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> string basedir</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> integer verbose</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> default 2</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> { dumps</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> ...</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> { globalContext</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> createProductionManager</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> userProductionOptions</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> globalContext</span></li><li class="L5"><span class="pnl">        </span><span class="tag">+</span></li><li class="L6"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> options</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> productionOptions</span></li><li class="L8"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> userProductionOptions || {}</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> pman</span></li><li class="L0"><span class="pnl">            </span><span class="tag">new</span><span class="pln"> ProductionManager</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> this</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L3"><span class="pnl">        </span><span class="tag">+</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> create and set aclStat</span></li><li class="L5"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> aclStat</span></li><li class="L6"><span class="pnl">            </span><span class="tag">new</span><span class="pln"> acl.AclStat</span></li><li class="L7"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> this.user</span></li><li class="L8"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> this.role</span></li><li class="L9"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> pman.aclStat(aclStat)</span></li><li class="L0"><span class="pnl">        </span><span class="tag">+</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> create and set the global context</span></li><li class="L2"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> globalContext</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> Object.assign</span></li><li class="L4"><span class="pnl">                </span><span class="tag">{</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> this.globalContext</span></li><li class="L6"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> globalContext || {}</span></li><li class="L7"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> pman.globalContext(globalContext)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> pman</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d66">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/t/wizziFactory/schema-definition.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Retrieve a schema definition in json format</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Schema definitions are searched in the PluginsManager</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> They are cached</span></li><li class="L6"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getSchemaDefinition</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> schemaName</span></li><li class="L8"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> schema = this.schemaDefinitions[schemaName] || null</span></li><li class="L9"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> schema == null</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> schema = md.pluginsManager.getWizziSchemaObject(schemaName)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> schema != null</span></li><li class="L2"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.schemaDefinitions[schemaName] = schema</span></li><li class="L3"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> schema</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d67">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/pluginsManager.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> fs = require('fs')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> _ = require('lodash')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> log = require('../util/log')(module)</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../util/verify')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> file = require('../util/file')</span></li><li class="L9"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> fail = require('../util/fail')</span></li><li class="L0"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> errors = require('../errors')</span></li><li class="L1"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> dirname = path.dirname</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> resolve = path.resolve</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> existsSync = fs.existsSync || path.existsSync</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> realpathSync = fs.realpathSync</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> exists = fs.exists || path.exists</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> realpath = fs.realpath</span></li><li class="L7"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> TODO</span></li><li class="L8"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Implement available DarvinFactories</span></li><li class="L9"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> availableFactories = []</span></li><li class="L0"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> PluginsManager</span></li><li class="L1"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> mtreeLoad</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.mtreeLoad = mtreeLoad</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.packagePathCache = {}</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.factoryPlugins = []</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.providedSchemas = []</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.providedModelTransformers = []</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.providedArtifactGenerators = []</span></li><li class="L9"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d49"> pluginsManager/initialize</span></li><li class="L0"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d52"> pluginsManager/register</span></li><li class="L1"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d53"> pluginsManager/resolve-module</span></li><li class="L2"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d54"> pluginsManager/resolve-package</span></li><li class="L3"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d50"> pluginsManager/model-factory</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d51"> pluginsManager/model-transformer</span></li><li class="L5"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d48"> pluginsManager/artifact-generator</span></li><li class="L6"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d55"> pluginsManager/schema-definition</span></li><li class="L7"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> error</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> code</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> message</span></li><li class="L0"><span class="pnl">        </span><span class="tag">return</span></li><li class="L1"><span class="pnl">            </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> module 'PluginsManager'</span></li><li class="L4"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> code code</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> message message</span></li><li class="L6"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports</span></li><li class="L7"><span class="pnl">        </span><span class="tag">{</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> createManager</span></li><li class="L9"><span class="pnl">                </span><span class="tag">function</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> mtreeLoad</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> pm</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">new</span><span class="pln"> PluginsManager</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> mtreeLoad</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> pm.initialize</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> callback</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d68">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/runnerServer.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> _ = require('lodash')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> chalk = require('chalk')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> errors = require('../errors')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> wizziFactory = require('./wizziFactory')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> RunnerServer</span></li><li class="L8"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> cwd</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.cwd = cwd</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wizziFactory = null</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.registeredPlugins = []</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.globalContext = {}</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.apis = {}</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.registerPlugin</span></li><li class="L6"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'wizzi-core'</span></li><li class="L7"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> registerPlugin</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> pluginName</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.wizziFactory != null</span></li><li class="L0"><span class="pnl">                </span><span class="tag">throw</span><span class="pln"> new Error('wizzi/runnerServer/registerPlugin error: Cannot register a plugin. The WizziFactory has been already initialized.')</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.registeredPlugins.push</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> pluginName</span></li><li class="L3"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> registerGlobalContext</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> context</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.wizziFactory != null</span></li><li class="L6"><span class="pnl">                </span><span class="tag">throw</span><span class="pln"> new Error('wizzi/runnerServer/registerPlugin error: Cannot register a global context. The WizziFactory has been already initialized.')</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.globalContext</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> _.merge</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.globalContext</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> context</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> initializeFactory</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userid</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> role</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> storeKind</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> typeof(callback) == 'undefined'</span></li><li class="L7"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> callback = storeKind</span></li><li class="L8"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> storeKind = null</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> storeKind = storeKind || 'filesystem'</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> that = this</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> wizziFactory.createFactory</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> userid</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> role</span></li><li class="L4"><span class="pnl">                </span><span class="tag">{</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> repo</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> storeKind storeKind</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> plugins</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> items this.registeredPlugins</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> globalContext this.globalContext</span></li><li class="L2"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> wf </span><span class="mix">)</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> that.wizziFactory = wf</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">log</span><span class="pln"> chalk.yellow('WIZZI FACTORY CREATED on store ' + storeKind)</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">return</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> wf</span></li><li class="L9"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d57"> runnerServer/factoryServer</span></li><li class="L0"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d56"> runnerServer/apiServer</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> error</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> message</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> method</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> message 'RunnerServer error: ' + message</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> method 'runtime/runnerServer/' + method</span></li><li class="L9"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports</span></li><li class="L0"><span class="pnl">        </span><span class="tag">{</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> instance null</span></li><li class="L2"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> init</span></li><li class="L3"><span class="pnl">                </span><span class="tag">function</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> cwd</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> this.instance</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">new</span><span class="pln"> RunnerServer</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> cwd</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d69">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/services/wizziFactory.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">+</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> util = require('util')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> stringify = require('json-stringify-safe')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">+</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> repo = require('wizzi-repo')</span></li><li class="L9"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> mtree = require('wizzi-mtree')</span></li><li class="L0"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> acl = require('../acl')</span></li><li class="L1"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> productionOptions = require('../production/options')</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> ProductionManager = require('../production/manager')</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> GenContext = require('../artifact/genContext')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('../util/verify')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> file = require('../util/file')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> StringWriter = require('../util/stringWriter')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> errors = require('../errors')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> log = require('../util/log')(module)</span></li><li class="L9"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> PluginsManager = require('./pluginsManager')</span></li><li class="L0"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> bootModelUri = "../wizzi/models/bootstrap/wfschema-boot-model"</span></li><li class="L1"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> bootModelDefUri = "../wizzi/models/bootstrap/wfschema-boot-modelDef"</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> BootWizziSchema = null</span></li><li class="L3"><span class="pnl">    </span><span class="tag">+</span></li><li class="L4"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> WizziFactory</span></li><li class="L5"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> user</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> role</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.__type = 'WizziFactory'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.user = user</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.role = role</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.storeInstance = null</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.__loadMTree = null</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.pluginsManagerInstance = null</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.modelLoaders = {}</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.modelTransformers = {}</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.artifactGenerators = {}</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.schemaDefinitions = {}</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.globalContext = {}</span></li><li class="L9"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d60"> wizziFactory/initialize</span></li><li class="L0"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d65"> wizziFactory/request-context</span></li><li class="L1"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d64"> wizziFactory/mtree-loading</span></li><li class="L2"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d61"> wizziFactory/model-loading</span></li><li class="L3"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d62"> wizziFactory/model-transformation</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d58"> wizziFactory/artifact-generation</span></li><li class="L5"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d66"> wizziFactory/schema-definition</span></li><li class="L6"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d63"> wizziFactory/modelTypes-generation</span></li><li class="L7"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d59"> wizziFactory/getParams</span></li><li class="L8"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> error</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> code</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> message</span></li><li class="L1"><span class="pnl">        </span><span class="tag">return</span></li><li class="L2"><span class="pnl">            </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L4"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> module 'WizziFactory'</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> sourcePath __filename</span></li><li class="L6"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> code code</span></li><li class="L7"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> message message</span></li><li class="L8"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports</span></li><li class="L9"><span class="pnl">        </span><span class="tag">{</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> createFactory</span></li><li class="L1"><span class="pnl">                </span><span class="tag">function</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> user</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> role</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> wf</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">new</span><span class="pln"> WizziFactory</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> user</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> role</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> wf.initialize</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> callback</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d70">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/util/t/lineparser/parse.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.parse</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> node</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !verify.isString(text)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">return</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> tokens</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">[</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> join</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">return</span><span class="pln"> ''</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span></li><li class="L5"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> ch</span></li><li class="L6"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> l = text.length</span></li><li class="L7"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> tokens</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">[</span></li><li class="L9"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> token</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> quote null</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> text ''</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> raw ''</span></li><li class="L4"><span class="pnl">            </span><span class="tag">for</span><span class="pln"> var i = 0; i &lt; l; i++</span></li><li class="L5"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> ch = text[i]</span></li><li class="L6"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> token.quote != null</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> ch == token.quote</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> tokens.push(token)</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token =</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> quote null</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> text ''</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> raw ''</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token.text += ch</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token.raw += ch</span></li><li class="L7"><span class="pnl">                </span><span class="tag">elif</span><span class="pln"> ch == '"' || ch == '\''</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> token.text.length &gt; 0</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> errors.NodeError("Invalid use of quote inside text", node)</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> token.quote = ch</span></li><li class="L1"><span class="pnl">                </span><span class="tag">elif</span><span class="pln"> ['(', ')', '[', ']', '{', '}'].indexOf(ch) &gt; - (1)</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> token.text.length &gt; 0</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> tokens.push(token)</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> tokens.push</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> quote null</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> text ch</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> raw ch</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> token =</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> quote null</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> text ''</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> raw ''</span></li><li class="L4"><span class="pnl">                </span><span class="tag">elif</span><span class="pln"> ch == ' ' || ch == '\t'</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> token.text.length &gt; 0</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token.raw += ch</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> tokens.push(token)</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> quote null</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> text ''</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> raw ''</span></li><li class="L3"><span class="pnl">                </span><span class="tag">else</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> token.text += ch</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> token.raw += ch</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> token.text.length &gt; 0</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> tokens.push(token)</span></li><li class="L8"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> token =</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> quote null</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> text ''</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> raw ''</span></li><li class="L3"><span class="pnl">            </span><span class="tag">return</span></li><li class="L4"><span class="pnl">                </span><span class="tag">{</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> tokens tokens</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> length tokens.length</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> join</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> sep</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> start</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">var</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">decl</span><span class="pln"> t</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">[</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">decl</span><span class="pln"> startIndex = (start || 0)</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">for</span><span class="pln"> var i = startIndex; i &lt; this.tokens.length; i++</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> sep === 'forValue'</span></li><li class="L7"><span class="pnl">                                    </span><span class="tag">var</span><span class="pln"> s = this.tokens[i].text</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">if</span><span class="pln"> ['(', ')', '[', ']', '{', '}'].indexOf(s) &gt; - (1)</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> t.push</span></li><li class="L0"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> this.tokens[i].text</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">else</span></li><li class="L2"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> t.push((this.tokens[i].text + ' '))</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">else</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> t.push</span></li><li class="L5"><span class="pnl">                                        </span><span class="tag">@</span><span class="pln"> this.tokens[i].text</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> sep === 'forValue'</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">return</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> t.join('')</span></li><li class="L9"><span class="pnl">                                        </span><span class="tag">._</span><span class="pln"> trim()</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">return</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> t.join(sep)</span></li><li class="L3"><span class="pnl">                                        </span><span class="tag">._</span><span class="pln"> trim()</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> getByPos</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> pos</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">return</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">iif</span><span class="pln"> pos &gt; this.length</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">then</span><span class="pln"> null</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> this.tokens[(pos - 1)]</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> matchByPos</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> pos</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> test</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> pos &gt; this.length ? false : this.tokens[(pos - 1)].text === test</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> name</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">iif</span><span class="pln"> this.length &gt; 0</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">then</span></li><li class="L2"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> this.tokens[0].text</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">else</span><span class="pln"> null</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> value</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> this.join('forValue', 1)</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> nameValue</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">var</span><span class="pln"> ret</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> name ''</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> value ''</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> this.tokens.length &gt;= 2</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> tk = this.tokens[0]</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> ret.name = tk.text</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">for</span><span class="pln"> var i = 1; i &lt; this.tokens.length; i++</span></li><li class="L7"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> tk = this.tokens[i]</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> ret.value += (tk.quote || '')</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> ret.value += tk.raw</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">set</span><span class="pln"> ret.value += (tk.quote || '')</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> ret</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d71">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/util/t/lineparser/parseInterpolation.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.parseInterpolation</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> node</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> handlebar</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> ng</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> ! (verify.isString(text))</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> tokens</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">[</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> join</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">return</span><span class="pln"> ''</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> openMacro = ng ? '[' : '{'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> closeMacro = ng ? ']' : '}'</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span></li><li class="L9"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> ch</span></li><li class="L0"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> l = text.length</span></li><li class="L1"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> state = 0</span></li><li class="L2"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> tokens</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">[</span></li><li class="L4"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> token</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> kind 0</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> text ''</span></li><li class="L8"><span class="pnl">            </span><span class="tag">for</span><span class="pln"> var i = 0; i &lt; l; i++</span></li><li class="L9"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> ch = text[i]</span></li><li class="L0"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> ch == openMacro</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> state === 0</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> state = 1</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">elif</span><span class="pln"> state === 1</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> token.text.length &gt; 0</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> tokens.push(token)</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token =</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> kind 1</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> text ''</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> state = 2</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">elif</span><span class="pln"> state === 2</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token.text += ch</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">elif</span><span class="pln"> state === 11</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token.text += closeMacro</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> state = 2</span></li><li class="L6"><span class="pnl">                </span><span class="tag">elif</span><span class="pln"> ch == closeMacro</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> state === 0</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token.text += ch</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">elif</span><span class="pln"> state === 1</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token.text += openMacro</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> state = 0</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">elif</span><span class="pln"> state === 2</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> state = 11</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">elif</span><span class="pln"> state === 11</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> token.text.length &gt; 0</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> tokens.push(token)</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token =</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> kind 0</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> text ''</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> state = 0</span></li><li class="L2"><span class="pnl">                </span><span class="tag">else</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> state === 1</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token.text += openMacro</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> state = 0</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">elif</span><span class="pln"> state === 11</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token.text += closeMacro</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> state = 2</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> token.text += ch</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> state === 1</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> token.text += openMacro</span></li><li class="L2"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> state = 0</span></li><li class="L3"><span class="pnl">            </span><span class="tag">elif</span><span class="pln"> state === 11</span></li><li class="L4"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> token.text += closeMacro</span></li><li class="L5"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> state = 2</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> token.text.length &gt; 0</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> tokens.push(token)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> tokens tokens</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> length tokens.length</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> join</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">var</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">decl</span><span class="pln"> token</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">decl</span><span class="pln"> t</span></li><li class="L7"><span class="pnl">                                    </span><span class="tag">[</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">for</span><span class="pln"> var i = 0; i &lt; this.tokens.length; i++</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> token = this.tokens[i]</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> t.length &gt; 0</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> t.push(' + ')</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> token.kind === 0</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> t.push('"' + escapename(token.text) + '"')</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">else</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">if</span><span class="pln"> handlebar</span></li><li class="L6"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> t.push('"{{ ' + escapename(token.text) + '}}"')</span></li><li class="L7"><span class="pnl">                                    </span><span class="tag">else</span></li><li class="L8"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> t.push</span></li><li class="L9"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> token.text</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> t.join('')</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d72">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/util/t/lineparser/parseNameValue.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.parseNameValue</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> node</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !verify.isString(text)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">return</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> tokens</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">[</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> join</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">return</span><span class="pln"> ''</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span></li><li class="L5"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> ch</span></li><li class="L6"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> l = text.length</span></li><li class="L7"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> tokens</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">[</span></li><li class="L9"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> token</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> quote null</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> text ''</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> raw ''</span></li><li class="L4"><span class="pnl">            </span><span class="tag">for</span><span class="pln"> var i = 0; i &lt; l; i++</span></li><li class="L5"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> ch = text[i]</span></li><li class="L6"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> token.quote != null</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> ch == token.quote</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> tokens.push(token)</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token =</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> quote null</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> text ''</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> raw ''</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token.text += ch</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token.raw += ch</span></li><li class="L7"><span class="pnl">                </span><span class="tag">elif</span><span class="pln"> ch == '"' || ch == '\''</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> token.text.length &gt; 0</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> errors.NodeError("Invalid use of quote inside text", node)</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> token.quote = ch</span></li><li class="L1"><span class="pnl">                </span><span class="tag">elif</span><span class="pln"> ch == ' ' || ch == '\t'</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> token.text.length &gt; 0</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token.raw += ch</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> tokens.push(token)</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> token =</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> quote null</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> text ''</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> raw ''</span></li><li class="L0"><span class="pnl">                </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> token.text += ch</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> token.raw += ch</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> token.text.length &gt; 0</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> tokens.push(token)</span></li><li class="L5"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> token</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> quote null</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> text ''</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> raw ''</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span></li><li class="L1"><span class="pnl">                </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> tokens tokens</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> length tokens.length</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> join</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> sep</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> start</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">var</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">decl</span><span class="pln"> t</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">[</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">decl</span><span class="pln"> startIndex = (start || 0)</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">for</span><span class="pln"> var i = startIndex; i &lt; this.tokens.length; i++</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> t.push((this.tokens[i].text + ' '))</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> t.join(sep)</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">._</span><span class="pln"> trim()</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> name</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">iif</span><span class="pln"> this.length &gt; 0</span></li><li class="L1"><span class="pnl">                                    </span><span class="tag">then</span></li><li class="L2"><span class="pnl">                                        </span><span class="tag">set</span><span class="pln"> this.tokens[0].text</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">else</span><span class="pln"> null</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> value</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> this.join('', 1)</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> hasValue</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> this.length &gt; 1</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d73">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/util/t/log/log.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> Log</span></li><li class="L3"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> id</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> logger</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.id = id</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.logger = logger</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.level = 2</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> setLevel</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> level</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.level = level</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> info</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.level &gt; 1</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.logger.info</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.id</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> "INFO"</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> buildMessage</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> chalk.white</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> arguments</span></li><li class="L0"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> warn</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.level &gt; 0</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.logger.info</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.id</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> "WARNING"</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> buildMessage</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> chalk.yellow</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> arguments</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> error</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.logger.info</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> this.id</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> "ERROR"</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> buildMessage</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> chalk.red</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> arguments</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> success</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.level &gt; 1</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.logger.info</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> this.id</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> "SUCCESS"</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> buildMessage</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> chalk.green</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> arguments</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d74">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/util/t/log/myLogger.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> MyLogger</span></li><li class="L3"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> level</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> stream</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.level = level</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.stream = (stream || process.stdout)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> info</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> id</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> level</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> date = new Date()</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> seconds = date.getSeconds()</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> minutes = date.getMinutes()</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> hour = date.getHours()</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.stream.write</span></li><li class="L7"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> hour + ':' + minutes + ':' + seconds + ' ' + id + ' ' + level + ' ' + text + '\n'</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d75">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/util/fail.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> option = require('../option')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> chalk = require('chalk')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> md</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> module.exports =</span></li><li class="L7"><span class="pnl">            </span><span class="tag">{</span></li><li class="L8"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.code</span></li><li class="L9"><span class="pnl">        </span><span class="tag">{</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> FATAL_ERROR 1</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> MISSING_WFJOBFILE 2</span></li><li class="L2"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> MISSING_ITTFDOCUMENT 3</span></li><li class="L3"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> MISSING_MIXIN 4</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> MISSING_INCLUDE 5</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> ITTF_LOADING_FAILURE 6</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> MODEL_LOADING_FAILURE 7</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> MISSING_MODELTRANSFORMER 8</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> MISSING_ARTIFACTGENERATOR 9</span></li><li class="L9"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> WARNING 10</span></li><li class="L0"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> dumpStack</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> e</span></li><li class="L2"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> option('stack')</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> e.origError && e.origError.stack</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> loginfo</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> e.origError.stack</span></li><li class="L6"><span class="pnl">            </span><span class="tag">elif</span><span class="pln"> e.stack</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> loginfo</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> e.stack</span></li><li class="L9"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.fatal</span></li><li class="L0"><span class="pnl">        </span><span class="tag">function</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> e</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> errcode</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> msg = "Fatal error: " + String(e.message || e)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> logerror(msg)</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> dumpStack(e)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> code</span></li><li class="L7"><span class="pnl">                </span><span class="tag">iif</span><span class="pln"> typeof(errcode) === 'number'</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">then</span><span class="pln"> errcode</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> md.code.FATAL_ERROR</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> process.exit</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> code</span></li><li class="L3"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.errorcount = 0</span></li><li class="L4"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.warncount = 0</span></li><li class="L5"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.warn =</span></li><li class="L6"><span class="pnl">        </span><span class="tag">function</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> e</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> errcode</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> msg = 'Warning: ' + (typeof(e) === 'string' ? e : e.message)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> msg += option('force') ? '\nUsed --force, continuing.' : '\nUse --force to continue.'</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> md.warncount++</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> logwarn(msg)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !(option('force'))</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> dumpStack(e)</span></li><li class="L5"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> false</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> logerror('Aborted due to warnings.')</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> code</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">iif</span><span class="pln"> typeof (errcode) === 'number'</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">then</span><span class="pln"> errcode</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> md.code.WARNING</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> process.exit</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> code</span></li><li class="L4"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.report =</span></li><li class="L5"><span class="pnl">        </span><span class="tag">function</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> md.warncount &gt; 0</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> logerror('Done, but with warnings.')</span></li><li class="L8"><span class="pnl">            </span><span class="tag">else</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> logsuccess('Done, without errors.')</span></li><li class="L0"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> loginfo</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> msg</span></li><li class="L2"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> console.log(msg)</span></li><li class="L3"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> logsuccess</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> msg</span></li><li class="L5"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> console.log</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> chalk.green(msg)</span></li><li class="L7"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> logwarn</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> msg</span></li><li class="L9"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> console.log</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> chalk.yellow(msg)</span></li><li class="L1"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> logerror</span></li><li class="L2"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> msg</span></li><li class="L3"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> console.log</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> chalk.red(msg)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d76">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/util/file.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="mix frag-to-link-a" data-frag-id="unknown">js/v3/tests/util/file(</span><span class="mix">)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d77">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/util/htmlbuilder.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> md = module.exports = {}</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> WAIT_ATTR = 1</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> WAIT_TEXT = 2</span></li><li class="L6"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> HtmlBuilder</span></li><li class="L7"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.stm = []</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.indentValue = 0</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.length = 0</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.line = ''</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.state = WAIT_TEXT</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.lfPending = false</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.noLF = false</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> setNoLF</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.noLF = value</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> openTag</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> tag</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> options = options || {}</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.state === WAIT_ATTR</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.write('&gt;')</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> options.inline</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.write('&lt;' + tag)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">else</span></li><li class="L7"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> this.lfPending</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.w()</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.write('&lt;' + tag)</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.indent()</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.state = WAIT_ATTR</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> writeAttribute</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> value === null || typeof value === 'undefined'</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.write(' ' + name)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">else</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.write(' ' + name + '="' + value + '"')</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> writeText</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> (text || '').length &gt; 0</span></li><li class="L2"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> this.state === WAIT_ATTR</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.write('&gt;')</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> this.state = WAIT_TEXT</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.write(text)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> writePrettySpaces</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> num</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.openTag('span', { inline: true })</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.writeAttribute('class', 'pnl')</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.writeSpaces(num)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.closeTag('span', { inline: true })</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> writePrettySpan</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> clazz</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.openTag('span', { inline: true })</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.writeAttribute('class', clazz)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.writeText(text)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.closeTag('span', { inline: true })</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> writeSpaces</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> num</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.writeText(spaces(num))</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> closeTag</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> tag</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> options = options || {}</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> options.inline</span></li><li class="L7"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> this.state === WAIT_ATTR</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.write(' /&gt;')</span></li><li class="L9"><span class="pnl">                </span><span class="tag">else</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.write('&lt;/' + tag + '&gt;')</span></li><li class="L1"><span class="pnl">            </span><span class="tag">else</span></li><li class="L2"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> this.state === WAIT_ATTR</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.write(' /&gt;')</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> this.lfPending = true</span></li><li class="L5"><span class="pnl">                </span><span class="tag">else</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.w()</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.deindent()</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.w('&lt;/' + tag + '&gt;')</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.state = WAIT_TEXT</span></li><li class="L0"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> w</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.noLF</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.write(text)</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ind = spaces(this.indentValue * 4)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.stm.push(ind + this.line + (text || ''))</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.line = ''</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.length++;</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> write</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.line += text || ''</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> indent</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.indentValue++</span></li><li class="L4"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> deindent</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.indentValue = Math.max(0, this.indentValue -1)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> toLines</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.line.length &gt; 0</span></li><li class="L8"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> save = this.noLF</span></li><li class="L9"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.noLF = false</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.w()</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.noLF = save</span></li><li class="L2"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.stm</span></li><li class="L3"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> toText</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.line.length &gt; 0</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.w()</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.stm.join('\n');</span></li><li class="L7"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> spaces</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> num</span></li><li class="L9"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> Array(num + 1).join(" ")</span></li><li class="L0"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.HtmlBuilder = HtmlBuilder</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d78">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/util/interpolate.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">#</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> port of http://www.bbc.co.uk/glow/docs/1.7/api/glow.lang.shtml#interpolate</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Modified to be stand-alone and offer support for delimters of random length</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @description Replaces placeholders in a string with data from an object</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {String} template The string containing {placeholders}</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {Object} data Object containing the data to be merged in to the template</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> The object can contain nested data objects and arrays, with nested object properties and array elements are accessed using dot notation. eg foo.bar or foo.0.</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> The data labels in the object cannot contain characters used in the template delimiters, so if the data must be allowed to contain the default { and } delimiters, the delimters must be changed using the option below.</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {Object} opts Options object {</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> # @param {String} [opts.delimiter="{}"] Alternative label delimiter(s) for the template.</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Needs to be symmetric, i.e. '{{}}', '&lt;%%&gt;'</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @returns {String}</span></li><li class="L6"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> interpolate</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> template</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> data</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> opts</span></li><li class="L0"><span class="pnl">        </span><span class="tag">var</span></li><li class="L1"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> regex</span></li><li class="L2"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> lDel</span></li><li class="L3"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> rDel</span></li><li class="L4"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> delLen</span></li><li class="L5"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> lDelLen</span></li><li class="L6"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> rDelLen</span></li><li class="L7"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> delimiter</span></li><li class="L8"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> regexEscape = /([$\^\\\/()|?+*\[\]{}.\-])/g</span></li><li class="L9"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> opts = (opts || {})</span></li><li class="L0"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> delimiter = (opts.delimiter || '{}')</span></li><li class="L1"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> delLen = delimiter.length</span></li><li class="L2"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> lDelLen = Math.ceil(delLen / 2)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> rDelLen = delLen - lDelLen</span></li><li class="L4"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> lDel = delimiter.substr(0, lDelLen).replace(regexEscape, "\\$1")</span></li><li class="L5"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> rDel = delimiter.substr(lDelLen, delLen).replace(regexEscape, "\\$1") || lDel</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> regex = new RegExp(lDel + "[^" + lDel + rDel + "]+" + rDel, "g")</span></li><li class="L7"><span class="pnl">        </span><span class="tag">return</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> template.replace</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> regex</span></li><li class="L0"><span class="pnl">                </span><span class="tag">function</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> placeholder</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">var</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">decl</span><span class="pln"> key = placeholder.slice(lDelLen, -rDelLen)</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">decl</span><span class="pln"> keyParts = key.split(".")</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">decl</span><span class="pln"> val</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">decl</span><span class="pln"> i = 0</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">decl</span><span class="pln"> len = keyParts.length</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> key in data</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> val = data[key]</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> val = data</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">for</span><span class="pln"> ; i&lt;len; i++</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> keyParts[i] in val</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">set</span><span class="pln"> val = val[keyParts[i]]</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">else</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">return</span><span class="pln"> placeholder</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">return</span><span class="pln"> val</span></li><li class="L8"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports = interpolate</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d79">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/util/lineparser.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> errors = require('../errors')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('./verify')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> md</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> module.exports =</span></li><li class="L7"><span class="pnl">            </span><span class="tag">{</span></li><li class="L8"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d70"> lineparser/parse</span></li><li class="L9"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d71"> lineparser/parseInterpolation</span></li><li class="L0"><span class="pnl">    </span><span class="kwd">$$</span><span class="pln"> $include lineparser/parseNameValue</span></li><li class="L1"><span class="pnl">    </span><span class="tag">#</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> ignore quotes</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> name = first not (blank or tab) char sequence</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> value = all remaining chars after name + (blank or tab)</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> example</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> "trip to the london bridge"</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> name() = "trip"</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> value() = "to the london bridge"</span></li><li class="L9"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.parseNameValueRaw</span></li><li class="L0"><span class="pnl">        </span><span class="tag">function</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> node</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span></li><li class="L4"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> name = ''</span></li><li class="L5"><span class="pnl">                </span><span class="tag">decl</span><span class="pln"> value = ''</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isNotEmpty(text)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">var</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">decl</span><span class="pln"> ch</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">decl</span><span class="pln"> state = 0</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">decl</span><span class="pln"> l = text.length</span></li><li class="L1"><span class="pnl">                </span><span class="tag">for</span><span class="pln"> var i = 0; i &lt; l; i++</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> ch = text[i]</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> ch == ' ' || ch == '\t'</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> state == 0</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">+</span><span class="pln"> ;</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">elif</span><span class="pln"> state == 1</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> state = 2</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">elif</span><span class="pln"> state == 2</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> value += ch</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> state == 0</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> name = ch</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> state = 1</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">elif</span><span class="pln"> state == 1</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> name += ch</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">elif</span><span class="pln"> state == 2</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> value += ch</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> name</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> name</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> value</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> value</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> hasValue</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> value.length &gt; 0</span></li><li class="L9"><span class="pnl">    </span><span class="tag">#</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> ignore quotes</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> category = first not (blank or tab) char sequence</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> name = second not (blank or tab) char sequence after category + (blank or tab)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> value = all remaining chars after category + (blank or tab) + name + (blank or tab)</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> example</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> "leisure trip to the london bridge"</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> category() = "leisure"</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> name() = "trip"</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> value() = "to the london bridge"</span></li><li class="L9"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.parseCategoryNameValue</span></li><li class="L0"><span class="pnl">        </span><span class="tag">function</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> node</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> nv1 = md.parseNameValueRaw(text, node)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> console.log</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'parseCategoryNameValue 1v'</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> nv1.value()</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> nv2</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> md.parseNameValueRaw</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> nv1.value()</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> node</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> console.log</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'parseCategoryNameValue 2n'</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> nv2.name()</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> category</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> nv1.name()</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> name</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> nv2.name()</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> value</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> nv2.value()</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> hasValue</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">return</span><span class="pln"> value.length &gt; 0</span></li><li class="L8"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> escapename</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L0"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> verify.isNotEmpty(value)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">return</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> verify.replaceAll</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> verify.replaceAll(value, "\\", "\\\\")</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> '"'</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> '\\"'</span></li><li class="L6"><span class="pnl">        </span><span class="tag">else</span></li><li class="L7"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> value</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d80">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/util/log.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> util = require('util')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> fs = require('fs')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> chalk = require('chalk')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> fileLoggingEnabled = false</span></li><li class="L8"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> buildMessage</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> color</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> args</span></li><li class="L1"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> typeof (args) !== 'object'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> ''</span></li><li class="L3"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> msg = ''</span></li><li class="L4"><span class="pnl">        </span><span class="tag">for</span><span class="pln"> var i = 0; i &lt; args.length; i++</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> args[i]</span></li><li class="L6"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> msg += (' ' + util.inspect(args[i]))</span></li><li class="L7"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> color(msg)</span></li><li class="L8"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d74"> log/myLogger</span></li><li class="L9"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d73"> log/log</span></li><li class="L0"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> consoleLogger</span></li><li class="L1"><span class="pnl">        </span><span class="tag">new</span><span class="pln"> MyLogger('debug')</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> fileLoggers</span></li><li class="L3"><span class="pnl">        </span><span class="tag">{</span></li><li class="L4"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> getFileLogger</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> filename</span></li><li class="L6"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> dirname = path.dirname(filename)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> fileLoggers[dirname]</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> fileLoggers[dirname].logger</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> logfile = path.join(dirname, 'debug.log')</span></li><li class="L0"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> console.log</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'creating debug.log for: '</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> filename.substr((filename.length - 50))</span></li><li class="L3"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> stream = fs.createWriteStream(logfile)</span></li><li class="L4"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> logger</span></li><li class="L5"><span class="pnl">            </span><span class="tag">new</span><span class="pln"> MyLogger('debug', stream)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> fileLoggers[dirname]</span></li><li class="L7"><span class="pnl">            </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> logger logger</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> stream stream</span></li><li class="L0"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> logFlushSetup()</span></li><li class="L1"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> logger</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> logFlush_setup = false</span></li><li class="L3"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> logFlushSetup</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> stream</span></li><li class="L5"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> logFlush_setup</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span></li><li class="L7"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> logFlush_setup = true</span></li><li class="L8"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> logFlush_flushed = false</span></li><li class="L9"><span class="pnl">        </span><span class="tag">function</span><span class="pln"> exitHandler</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !logFlush_flushed</span></li><li class="L1"><span class="pnl">                </span><span class="tag">for</span><span class="pln"> var k in fileLoggers</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> fileLoggers[k].stream.end()</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> console.log("log. flushed : " + k.substr(k.length - 50))</span></li><li class="L4"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> logFlush_flushed = true</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> process.exit()</span></li><li class="L6"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> process.on</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'exit'</span></li><li class="L8"><span class="pnl">            </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> console.log('util.log. Process.exit', err)</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> exitHandler()</span></li><li class="L2"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> process.on</span></li><li class="L3"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'SIGINT'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">function</span></li><li class="L5"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> console.log('util.log. Received Signal', err)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> exitHandler()</span></li><li class="L8"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> process.on</span></li><li class="L9"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'uncaughtException'</span></li><li class="L0"><span class="pnl">            </span><span class="tag">function</span></li><li class="L1"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> console.error</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> "util.log. " + new Date().toUTCString() + ' uncaughtException:'</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> err.message</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> console.error</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> err.stack</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> exitHandler()</span></li><li class="L8"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports</span></li><li class="L9"><span class="pnl">        </span><span class="tag">function</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> module</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> options = (options || {})</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> logger</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> fileLoggingEnabled && options.tofile</span></li><li class="L5"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> logger = getFileLogger(module.filename)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">else</span></li><li class="L7"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> logger = consoleLogger</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                </span><span class="tag">new</span><span class="pln"> Log</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> path.basename</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> module.filename</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> logger</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d81">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/util/stringWriter.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">class</span><span class="pln"> StringWriter</span></li><li class="L4"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.buffer = []</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> text</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.buffer.push(text)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> write</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.buffer.push(text)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> toString</span></li><li class="L3"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.buffer.join('')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> module.exports = StringWriter</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d82">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/util/verify.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> path = require('path')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> md</span></li><li class="L5"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> module.exports =</span></li><li class="L6"><span class="pnl">            </span><span class="tag">{</span></li><li class="L7"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.isDefined</span></li><li class="L8"><span class="pnl">        </span><span class="tag">function</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> test</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> !(typeof(test) === 'undefined')</span></li><li class="L1"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.isObject</span></li><li class="L2"><span class="pnl">        </span><span class="tag">function</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> test</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> test === null || typeof(test) === 'undefined'</span></li><li class="L5"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> {}.toString.call(test) === '[object Object]'</span></li><li class="L7"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.isArray</span></li><li class="L8"><span class="pnl">        </span><span class="tag">function</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> test</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> test === null || typeof(test) === 'undefined'</span></li><li class="L1"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L2"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> {}.toString.call(test) === '[object Array]'</span></li><li class="L3"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.isString</span></li><li class="L4"><span class="pnl">        </span><span class="tag">function</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> test</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> test !== null && typeof(test) === 'string'</span></li><li class="L7"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.isEmpty</span></li><li class="L8"><span class="pnl">        </span><span class="tag">function</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> test</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> test == null || typeof(test) !== 'string' || test.length == 0</span></li><li class="L1"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.isNotEmpty</span></li><li class="L2"><span class="pnl">        </span><span class="tag">function</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> test</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> test != null && typeof(test) === 'string' && test.length &gt; 0</span></li><li class="L5"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.isNumber</span></li><li class="L6"><span class="pnl">        </span><span class="tag">function</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> test</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> !md.isArray(test) && (test - parseFloat(test) + 1) &gt;= 0</span></li><li class="L9"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.isFunction</span></li><li class="L0"><span class="pnl">        </span><span class="tag">function</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> functionToCheck</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> functionToCheck === null || typeof(functionToCheck) === 'undefined'</span></li><li class="L3"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> {}.toString.call(functionToCheck) === '[object Function]'</span></li><li class="L5"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.isAbsolutePath</span></li><li class="L6"><span class="pnl">        </span><span class="tag">function</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> test</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> path.resolve(test) == path.normalize(test)</span></li><li class="L9"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.isArtifact</span></li><li class="L0"><span class="pnl">        </span><span class="tag">function</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> test</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !md.isDefined(test) || test === null</span></li><li class="L3"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !md.isFunction(test.generate)</span></li><li class="L5"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !md.isFunction(test.toFile)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !md.isFunction(test.generateToFile)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> true</span></li><li class="L1"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.getInterfaceMessage</span></li><li class="L2"><span class="pnl">        </span><span class="tag">function</span></li><li class="L3"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> "generate(...), toFile(...), generateToFile(...)"</span></li><li class="L4"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.startsWith</span></li><li class="L5"><span class="pnl">        </span><span class="tag">function</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> prefix</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> md.isEmpty(str) || md.isEmpty(prefix)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L0"><span class="pnl">            </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> str.indexOf(prefix) === 0</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.endsWith</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> suffix</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> md.isEmpty(str) || md.isEmpty(suffix)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L8"><span class="pnl">            </span><span class="tag">else</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> str.indexOf(suffix, str.length - suffix.length) !== -1</span></li><li class="L0"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.unquote</span></li><li class="L1"><span class="pnl">        </span><span class="tag">function</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> md.isString(str) === false</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> str</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> str.length &lt; 2</span></li><li class="L6"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> str</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> (str.substr(0, 1) === "'" && str.substr(-1, 1) === "'") ||</span></li><li class="L8"><span class="pnl">                </span><span class="tag">\b</span><span class="pln"> (str.substr(0, 1) === "\"" && str.substr(-1, 1) === "\"")</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> str.substr(1, str.length -2)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> str</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.capitalize</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> md.isEmpty(str)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> str</span></li><li class="L7"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> str.substr(0, 1).toUpperCase() + str.substr(1)</span></li><li class="L8"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.replaceAll =</span></li><li class="L9"><span class="pnl">        </span><span class="tag">function</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> find</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> replace</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> md.isEmpty(text)</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> text</span></li><li class="L5"><span class="pnl">            </span><span class="tag">return</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> text.replace</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">new</span><span class="pln"> RegExp</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> escapeRegExp(find)</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'g'</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> replace</span></li><li class="L1"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> escapeRegExp</span></li><li class="L2"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> text</span></li><li class="L3"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> text.replace(/([.*+?^=!:</span><span class="kwd">${</span><span class="expr"></span><span class="kwd">}</span><span class="pln">()|\[\]\/\\])/g, "\\$1")</span></li><li class="L4"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.htmlEscape</span></li><li class="L5"><span class="pnl">        </span><span class="tag">function</span><span class="pln"> escape</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> md.isEmpty(value)</span></li><li class="L8"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> value</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> value = md.replaceAll(value, '&lt;', '&lt;')</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> value = md.replaceAll(value, '&gt;', '&gt;')</span></li><li class="L1"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> value</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d83">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/t/element_derived.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> setupDerived</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L4"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> typeof this.derived === 'undefined'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.derived = []</span></li><li class="L6"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> element in this.schema.elements</span></li><li class="L7"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> element.superId === this.wzId</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.derived.push(element)</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">foreach</span><span class="pln"> d in element.setupDerived(ctx)</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> this.superId === element.wzId</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> ctx.error('Element ' + element.wzId + ' cannot be both super element and derived element of element ' + this.wzId, this)</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> this.derived.push(d)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> this.derived</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d84">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/t/element_flat_attributes.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getFlatAttributes</span></li><li class="L3"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> typeof this.flatAttributes === 'undefined'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> flatAttributes = []</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.flatAttributesFill(flatAttributes, false)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.flatAttributes = flatAttributes</span></li><li class="L7"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> this.flatAttributes</span></li><li class="L8"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> flatAttributesFill</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> flatAttributes</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> inherited</span></li><li class="L1"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> attribute in this.attributes</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> flags = ''</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> flags += attribute.isRequired ? 'required ' : ''</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> flags += attribute.isDataType ? 'is-datatype ' : ''</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> cloned</span></li><li class="L6"><span class="pnl">                </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> name attribute.wzId</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> type attribute.type</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> tags attribute.tagName.split('|')</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> xmlTag attribute.xmlTagInternal</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> default attribute.default</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> defaultWhenDeclared attribute.defaultWhenDeclared</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> flags flags</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> inheritedFrom (inherited ? this.wzId : null)</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> restricts</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">[</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> comments</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">[</span></li><li class="L9"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> restrict in attribute.restricts</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> cloned.restricts.push(this.getRestrictFill(restrict))</span></li><li class="L1"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> comment in attribute.comments</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> cloned.comments.push(comment.wzName)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> flatAttributes.push(cloned)</span></li><li class="L4"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> schemautil.isNotEmpty(this.superId)</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.superElement</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.superElement.flatAttributesFill(flatAttributes, true)</span></li><li class="L7"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getRestrictFill</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> model</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> restrictCloned</span></li><li class="L0"><span class="pnl">            </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> facets</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">[</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> comments</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">[</span></li><li class="L5"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> facet in model.facets</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> facetCloned</span></li><li class="L7"><span class="pnl">                </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> type facet.wzElement</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> value facet.wzName</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> comments</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">[</span></li><li class="L2"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> comment in facet.comments</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> facetCloned.comments.push(comment.wzName)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> restrictCloned.facets.push(facetCloned)</span></li><li class="L5"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> comment in model.comments</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> restrictCloned.comments.push(comment.wzName)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> restrictCloned</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d85">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/t/element_flat_relations.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getFlatRelations</span></li><li class="L3"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> typeof this.flatRelations === 'undefined'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> flatRelations = []</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.flatRelationsFill(flatRelations, false)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.flatRelations = flatRelations</span></li><li class="L7"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> this.flatRelations</span></li><li class="L8"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> flatRelationsFill</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> flatRelations</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> inherited</span></li><li class="L1"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> relation in this.relations</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> flags = ''</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> flags += relation.isOneToOne ? 'is-one-to-one ' : ''</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> flags += relation.noGetMethod ? 'no-get-method ' : ''</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> flags += relation.hasAddOnce ? 'has-add-once ' : ''</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> cloned</span></li><li class="L7"><span class="pnl">                </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> name relation.wzName</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> role relation.wzNamePlural</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> tags relation.rightElement.tagName.split('|')</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> cardinality (relation.isOneToOne ? 'one-to-one' : 'one-to-many')</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> flags flags</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> inheritedFrom (inherited ? this.wzId : null)</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> comments</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">[</span></li><li class="L6"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> comment in relation.comments</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> cloned.comments.push(comment.wzName)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> flatRelations.push(cloned)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> schemautil.isNotEmpty(this.superId)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.superElement</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.superElement.flatRelationsFill(flatRelations, true)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d86">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/t/element_gettags.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getTags</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$$</span><span class="pln"> log 'element.getTags', this.tagName, ctx.tagElementMapping</span></li><li class="L5"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> d = ctx.tagElementMapping</span></li><li class="L6"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> d == null</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> ctx.tagElementMapping = d = {}</span></li><li class="L8"><span class="pnl">        </span><span class="tag">var</span></li><li class="L9"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> retval = []</span></li><li class="L0"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> right</span></li><li class="L1"><span class="pnl">            </span><span class="tag">decl</span><span class="pln"> elId = this.wzId</span></li><li class="L2"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> schemautil.isEmpty(this.tagName)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">throw</span><span class="pln"> new Error('Empty tag name for element ' + this.wzId)</span></li><li class="L4"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> schemautil.startsWith(this.tagName, "|") || schemautil.endsWith(this.tagName, "|")</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> right = this.tagName</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> right != elId && typeof d[right] === 'undefined'</span></li><li class="L7"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> d[right] = elId;</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> retval.push(right)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">else</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ss = this.tagName.split('|')</span></li><li class="L1"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> s in ss</span></li><li class="L2"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> right = schemautil.replaceAll(s, "\"", "\\\"")</span></li><li class="L3"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> right != elId && typeof d[right] === 'undefined'</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> d[right] = elId;</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> retval.push(right)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> s.indexOf("-") &gt; 0</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> right = schemautil.replaceAll(s, '-', '')</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> right = schemautil.replaceAll(right, "\"", "\\\"")</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> right != elId && typeof d[right] === 'undefined'</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> d[right] = elId;</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> retval.push(right)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> retval;</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d87">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/t/element_load.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> initializeLoad</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L4"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> choiceSet = new ChoiceSet()</span></li><li class="L5"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.initializeLoad_attributes(ctx, choiceSet)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.initializeLoad_relations(ctx, choiceSet)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.choiceOrdered = choiceSet.createOrdered()</span></li><li class="L8"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> initializeLoad_attributes</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> choiceSet</span></li><li class="L1"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> attribute in this.attributes</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> attribute.isReadOnly</span></li><li class="L3"><span class="pnl">                </span><span class="tag">continue</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> DEFAULT;</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> schemautil.isEmpty(attribute.defaultWhenDeclared)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> DEFAULT = "null"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">elif</span><span class="pln"> attribute.jsType == "string"</span></li><li class="L8"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> DEFAULT = "\"" + attribute.defaultWhenDeclared + "\""</span></li><li class="L9"><span class="pnl">            </span><span class="tag">else</span></li><li class="L0"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> DEFAULT = attribute.defaultWhenDeclared;</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> schemautil.endsWith(attribute.tagName, "*") && this.schema.preserveTags</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.wildTags.push(attribute.tagName);</span></li><li class="L3"><span class="pnl">            </span><span class="tag">else</span></li><li class="L4"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> test in attribute.getTags(ctx)</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> choiceSet.addChoice</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> test</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> codelines</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> attribute.jsType === 'string'</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> codelines.push("this." + attribute.wzId + " = child.v; return true;")</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">else</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> codelines.push("this." + attribute.wzId + " = parse" + attribute.jsType + "(child.v, " + DEFAULT + ", child); return true;");</span></li><li class="L3"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> initializeLoad_relations</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> choiceSet</span></li><li class="L6"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> first = true</span></li><li class="L7"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> relation in this.relations</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> relation.isOneToOne</span></li><li class="L9"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> RELATION = relation.wzName</span></li><li class="L0"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> !relation.rightElement.isAbstract</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> CHILD_ENTITY = relation.rightElement.wzId</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">foreach</span><span class="pln"> test in relation.rightElement.getTags(ctx)</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> choiceSet.addChoice</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> test</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> codelines</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> codelines.push("return this.wzLoadOneToOne(child, md." + CHILD_ENTITY + ", '" + RELATION + "');")</span></li><li class="L8"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> d in relation.rightElement.derived</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> d.isAbstract</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">continue</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> CHILD_ENTITY</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> d.superElement != null && d.superElement.SuppressCollectionEmit_Flat</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> CHILD_ENTITY = d.superElement.wzId</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> CHILD_ENTITY = d.wzId</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">foreach</span><span class="pln"> test in d.getTags(ctx)</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> choiceSet.addChoice</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> test</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> codelines</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> codelines.push("return this.wzLoadOneToOne(child, md." + CHILD_ENTITY + ", '" + RELATION + "')")</span></li><li class="L2"><span class="pnl">            </span><span class="tag">else</span></li><li class="L3"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> RELATION = relation.wzIdPlural</span></li><li class="L4"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> !relation.rightElement.isAbstract</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> CHILD_ENTITY = relation.rightElement.wzId</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">foreach</span><span class="pln"> test in relation.rightElement.getTags(ctx)</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> choiceSet.addChoice</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> test</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">function</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">param</span><span class="pln"> codelines</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">if</span><span class="pln"> relation.rightElement.addToChildren</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> codelines.push("return this.wzLoadToChildren(child, md." + CHILD_ENTITY + ");")</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">else</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> codelines.push("return this.wzLoadToChildColl(child, md." + CHILD_ENTITY + ", this." + RELATION + ");")</span></li><li class="L5"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> relation.rightElement.addToChildren</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">foreach</span><span class="pln"> deriv in relation.rightElement.derived</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> deriv.isAbstract</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">continue</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> CHILD_ENTITY = deriv.wzId</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">foreach</span><span class="pln"> test in deriv.getTags(ctx)</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> choiceSet.addChoice</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> test</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">function</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">param</span><span class="pln"> codelines</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> codelines.push("item = new " + CHILD_ENTITY + "(child.v, new wzSourceLineInfo(child.r, child.c, child.u))")</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> codelines.push("item.wzTag = name;")</span></li><li class="L7"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> codelines.push("this.AddChild(item);")</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> codelines.push("item.LoadFromNode(child);")</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> codelines.push("return true;")</span></li><li class="L0"><span class="pnl">                </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">foreach</span><span class="pln"> d in relation.rightElement.derived</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> d.isAbstract</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">continue</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> CHILD_ENTITY</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> d.superElement != null && d.superElement.SuppressCollectionEmit_Flat</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> CHILD_ENTITY = d.superElement.wzId</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">else</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> CHILD_ENTITY = d.wzId</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> RELATION = relation.wzIdPlural</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">foreach</span><span class="pln"> test in d.getTags(ctx)</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> choiceSet.addChoice</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> test</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">function</span></li><li class="L4"><span class="pnl">                                    </span><span class="tag">param</span><span class="pln"> codelines</span></li><li class="L5"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> codelines.push("return this.wzLoadToChildColl(child, md." + CHILD_ENTITY + ", this." + RELATION + ")")</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d88">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/attribute.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d102">clazz(</span><span class="arg"> Attribute</span><span class="pln">,</span><span class="arg">  Node </span><span class="mix">)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L5"><span class="pnl">            </span><span class="tag">base</span><span class="pln"> name</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzElement = 'attribute'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.restricts = []</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.type = 'string'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.isReadOnly = false</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.isCalculated = false; $$ TODO</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.calculated = 'null'; $$ TODO</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.default = null</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.defaultWhenDeclared = null</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.tagInternal = null</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> wzVerify</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzId = schemautil.getIdentifier(this.wzName, false)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzIdPlural = schemautil.pluralize(this.wzId)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.tagName = this.tagInternal || this.wzName</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.jsType = this.type</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> wzInitialize</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L3"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> allowedDeclaration</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> enums = this.getEnumFacets()</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> enums.length &gt; 0</span></li><li class="L6"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> sb = []</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> sb.push("this.allowed" + this.wzIdPlural.toUpperCase() + " = [ ");</span></li><li class="L8"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> first = true</span></li><li class="L9"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> facet in enums</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> !first</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> sb.push(", ")</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> sb.push('"' + schemautil.replaceAll(facet.wzName, "\"", "\\\"") + '"')</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> first = false</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> sb.push('];')</span></li><li class="L5"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> sb.join('')</span></li><li class="L6"><span class="pnl">            </span><span class="tag">else</span></li><li class="L7"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> null;</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getEnumFacets</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ret = []</span></li><li class="L0"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> restrict in this.restricts</span></li><li class="L1"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> facet in restrict.facets</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> facet.wzElement === 'enumFacet'</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">if</span><span class="pln"> _.find(ret, function(item) { return item.wzName === facet.wzName; }) == null</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">set</span><span class="pln"> facet.wzName = facet.wzName.trim();</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> ret.push(facet);</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> ret</span></li><li class="L7"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getTags</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ret = []</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ss = this.tagName.split('|')</span></li><li class="L0"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> s in ss</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> ret.push(schemautil.replaceAll(s, "\"", "\\\""))</span></li><li class="L2"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> s.indexOf("-") &gt;= 0</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> s = schemautil.replaceAll(s, "-", "_")</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> ret.push(schemautil.replaceAll(s, "\"", "\\\""))</span></li><li class="L5"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> ret</span></li><li class="L6"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getTagMatch</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> left</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> sb = []</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ss = this.tagName.split('|')</span></li><li class="L0"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> s in ss</span></li><li class="L1"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> sb.length &gt; 0</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> sb.push(" || ")</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> sb.push(left + " == \"" + schemautil.replaceAll(s, "\"", "\\\"") + "\"")</span></li><li class="L4"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> s.indexOf("-") &gt;= 0</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> s = schemautil.replaceAll(s, "-", "_")</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> sb.push(left + " == \"" + schemautil.replaceAll(s, "\"", "\\\"") + "\"")</span></li><li class="L7"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> sb.join('')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.Attribute.STRING = "string"</span></li><li class="L9"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.Attribute.BOOLEAN = "boolean"</span></li><li class="L0"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.Attribute.INTEGER = "integer"</span></li><li class="L1"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.Attribute.FLOAT = "float"</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.Attribute.DATE = "date"</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d89">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/choice.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d102">clazz(</span><span class="arg"> Choice </span><span class="mix">)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> test</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> Make test case insensitive</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.test = test.toLowerCase()</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.length = test.length</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.char = test[0]</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.codelines = []</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d90">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/choiceOrdered.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d102">clazz(</span><span class="arg"> ChoiceOrdered </span><span class="mix">)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> char</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> length</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.char = char</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.length = length</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.choices = []</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d91">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/choiceSet.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d102">clazz(</span><span class="arg"> ChoiceSet </span><span class="mix">)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.choices = []</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addChoice</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> test</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> choice = new Choice(test)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> callback(choice.codelines)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.choices.push(choice)</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> createOrdered</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> retval = []</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> done</span></li><li class="L4"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> choice in this.choices</span></li><li class="L5"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> done = false</span></li><li class="L6"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> ordered in retval</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> ordered.char == choice.char && ordered.length == choice.length</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> ordered.choices.push(choice);</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> done = true</span></li><li class="L0"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> !done</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> ordered = new ChoiceOrdered(choice.char, choice.length);</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> ordered.choices.push(choice);</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> retval.push(ordered);</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> retval.sort(ChoiceSetCompare)</span></li><li class="L5"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> retval</span></li><li class="L6"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> ChoiceSetCompare</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> a</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> b</span></li><li class="L9"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> a.length &gt; b.length</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> 1</span></li><li class="L1"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> a.length &lt; b.length</span></li><li class="L2"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> -1</span></li><li class="L3"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> a.char &gt; b.char</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> 1</span></li><li class="L5"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> a.char &lt; b.char</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> -1</span></li><li class="L7"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> 0</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d92">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/comment.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a">clazz(</span><span class="arg"> Comment</span><span class="pln">,</span><span class="arg">  Node </span><span class="mix">)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L5"><span class="pnl">            </span><span class="tag">base</span><span class="pln"> name</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzElement = 'comment'</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d93">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/element.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="mix frag-to-link-a" data-frag-id="d102">clazz(</span><span class="arg"> Element</span><span class="pln">,</span><span class="arg">  Node </span><span class="mix">)</span></li><li class="L2"><span class="pnl">    </span><span class="tag">ctor</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L4"><span class="pnl">        </span><span class="tag">base</span><span class="pln"> name</span></li><li class="L5"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.wzElement = 'element'</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.attributes = []</span></li><li class="L7"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.elements = []</span></li><li class="L8"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.includes = []</span></li><li class="L9"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.relations = []</span></li><li class="L0"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.methods = []</span></li><li class="L1"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.restricts = []</span></li><li class="L2"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.wildTags = []</span></li><li class="L3"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.choiceOrdered = []</span></li><li class="L4"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.super = null</span></li><li class="L5"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.superId = null</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.superType = null</span></li><li class="L7"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.addToChildren = false</span></li><li class="L8"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.isAbstract = false</span></li><li class="L9"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.isRoot = false</span></li><li class="L0"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.acceptAnyTag = null</span></li><li class="L1"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.acceptAnyTagCollection = null</span></li><li class="L2"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.suppressCollectionEmit_Flat = false</span></li><li class="L3"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.nameIsRequired = false</span></li><li class="L4"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.xmlTagInternal = null</span></li><li class="L5"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.tagInternal = null</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.defaultWhenDeclared = null</span></li><li class="L7"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> allowedNameDeclaration</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> key</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> enums = this.getEnumFacets()</span></li><li class="L0"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> enums.length &gt; 0</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> sb = []</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> sb.push("this.allowedNames = [ ");</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> first = true</span></li><li class="L4"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> facet in enums</span></li><li class="L5"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> !first</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> sb.push(", ")</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> sb.push('"' + schemautil.replaceAll(facet.wzName, "\"", "\\\"") + '"')</span></li><li class="L8"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> first = false</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> sb.push('];')</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> sb.join('')</span></li><li class="L1"><span class="pnl">        </span><span class="tag">else</span></li><li class="L2"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> null</span></li><li class="L3"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getEnumFacets</span></li><li class="L4"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> ret = []</span></li><li class="L5"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> restrict in this.restricts</span></li><li class="L6"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> facet in restrict.facets</span></li><li class="L7"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> facet.wzElement === 'enumFacet'</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> _.find(ret, function(item) { return item.wzName === facet.wzName; }) == null</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> facet.wzName = facet.wzName.trim();</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> ret.push(facet);</span></li><li class="L1"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> ret</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> needsVerify</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> emitKey</span></li><li class="L4"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> this.relations.length &gt; 0</span></li><li class="L5"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> true</span></li><li class="L6"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> this.restricts.length &gt; 0</span></li><li class="L7"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> true;</span></li><li class="L8"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> attribute in this.attributes</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> attribute.restricts.length &gt; 0</span></li><li class="L0"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> true</span></li><li class="L1"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> method in this.methods</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> (emitKey == null || method.emitKey == emitKey) && method.wzName.toLowerCase() === "wzverify"</span></li><li class="L3"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> true</span></li><li class="L4"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L5"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> hasAttributesOrChildsToLoad</span></li><li class="L6"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> this.attributes.length &gt; 0</span></li><li class="L7"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> true;</span></li><li class="L8"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> this.relations.length &gt; 0</span></li><li class="L9"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> true;</span></li><li class="L0"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> this.setupDerived().length &gt; 0</span></li><li class="L1"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> true;</span></li><li class="L2"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L3"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> needsInitialize</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> emitKey</span></li><li class="L5"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> attribute in this.attributes</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> attribute.IsDataType</span></li><li class="L7"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> true</span></li><li class="L8"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> this.relations.length &gt; 0</span></li><li class="L9"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> true</span></li><li class="L0"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> method in this.methods</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> (emitKey == null || method.emitKey == emitKey) && method.wzName.toLowerCase() === "wzinitialize"</span></li><li class="L2"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> true</span></li><li class="L3"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> false</span></li><li class="L4"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> setupNames</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L6"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> ss = this.wzName.split('/')</span></li><li class="L7"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> ss.length == 2</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> zz = ss[0].split('-')</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> zz.length == 2</span></li><li class="L0"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.wzName = zz[0] + zz[1]</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.wzNamePlural = zz[0] + ss[1]</span></li><li class="L2"><span class="pnl">            </span><span class="tag">else</span></li><li class="L3"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.wzName = ss[0]</span></li><li class="L4"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.wzNamePlural = ss[0] + ss[1]</span></li><li class="L5"><span class="pnl">        </span><span class="tag">else</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzNamePlural + 's'</span></li><li class="L7"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.wzId = schemautil.getIdentifier(this.wzName, true)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.wzIdPlural = schemautil.getIdentifier(this.wzNamePlural, true)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.wzIdCapital = schemautil.capitalize(this.wzId)</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> 30/10/2015 set this.tagName = this.tagInternal || this.wzId</span></li><li class="L1"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.tagName = this.tagInternal || this.wzName</span></li><li class="L2"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.tagSafe = this.tagName.replace("\"", "\\\"")</span></li><li class="L3"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.xmlTag = this.xmlTagInternal || this.wzId</span></li><li class="L4"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> schemautil.isNotEmpty(this.acceptAnyTag)</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.acceptAnyTagId = schemautil.getIdentifier(this.acceptAnyTag, true)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> schemautil.isNotEmpty(this.acceptAnyTagCollection)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.acceptAnyTagCollectionId = schemautil.getIdentifier(this.acceptAnyTagCollection, true)</span></li><li class="L8"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> wzSetup</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L0"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> ss = this.wzName.split(':')</span></li><li class="L1"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> ss.length &gt; 1</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzName = ss[0].trim()</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.super = ss[1].trim()</span></li><li class="L4"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.schema = this.wzParent</span></li><li class="L5"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> schemautil.isNotEmpty(this.super)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.superId = schemautil.getIdentifier(this.super, true)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.wzId === this.superId</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> ctx.error('An element cannot be super of itself.', this)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.superType = this.superId === null ? this.schema.wzId + 'Base' : this.superId</span></li><li class="L0"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.setupNames(ctx)</span></li><li class="L1"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> wzInitialize</span></li><li class="L2"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L3"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> item in this.attributes</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> item.wzInitialize(ctx)</span></li><li class="L5"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> item in this.relations</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> item.wzInitialize(ctx)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> item in this.methods</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> item.wzInitialize(ctx)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.initializeLoad(ctx)</span></li><li class="L0"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> wzVerify</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L2"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> this.ensureName(1) == false</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.error('Element name is required', this)</span></li><li class="L4"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.wzVerifySuper(ctx);</span></li><li class="L5"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> item in this.attributes</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> item.wzVerify(ctx)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> item in this.relations</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> item.wzVerify(ctx)</span></li><li class="L9"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> wzVerifySuper</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L1"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> schemautil.isNotEmpty(this.superId)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.superElement = null</span></li><li class="L3"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> element in this.schema.elements</span></li><li class="L4"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> element.wzId === this.superId</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> this.superElement = element</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">break</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.superElement === null</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> ctx.error('Super element not found : ' + this.superId, this)</span></li><li class="L9"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> addAttribute</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L1"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> item = new Attribute(name)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> item.wzParent = this;</span></li><li class="L3"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.attributes.push(item)</span></li><li class="L4"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> item</span></li><li class="L5"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> addRelation</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L7"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> item = new Relation(name)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> item.wzParent = this;</span></li><li class="L9"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.relations.push(item)</span></li><li class="L0"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> item</span></li><li class="L1"><span class="pnl">    </span><span class="mix frag-to-link-a">element_derived(</span><span class="mix">)</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d86">element_gettags(</span><span class="mix">)</span></li><li class="L3"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d87">element_load(</span><span class="mix">)</span></li><li class="L4"><span class="pnl">    </span><span class="mix frag-to-link-a">element_flat_attributes(</span><span class="mix">)</span></li><li class="L5"><span class="pnl">    </span><span class="mix frag-to-link-a">element_flat_relations(</span><span class="mix">)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d94">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/exportTo.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a">clazz(</span><span class="arg"> ExportTo</span><span class="pln">,</span><span class="arg">  Node </span><span class="mix">)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L5"><span class="pnl">            </span><span class="tag">base</span><span class="pln"> name</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzElement = 'exportTo'</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d95">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/facet.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d102">clazz(</span><span class="arg"> Facet</span><span class="pln">,</span><span class="arg">  Node </span><span class="mix">)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L5"><span class="pnl">            </span><span class="tag">base</span><span class="pln"> name</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzId = schemautil.getIdentifier(this.wzName, true)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzNameEscaped = schemautil.escapeString(this.wzName)</span></li><li class="L8"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.Facet.ENUMERATION = "enum"</span></li><li class="L9"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.Facet.LENGTH = "length"</span></li><li class="L0"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.Facet.MAX_LENGTH = "max-length"</span></li><li class="L1"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.Facet.MIN_LENGTH = "min-length"</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.Facet.MAX_EXCLUSIVE = "&gt;"</span></li><li class="L3"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.Facet.MIN_EXCLUSIVE = "&lt;"</span></li><li class="L4"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.Facet.MAX_INCLUSIVE = "&gt;="</span></li><li class="L5"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.Facet.MIN_INCLUSIVE = "&lt;="</span></li><li class="L6"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d102">clazz(</span><span class="arg"> EnumFacet</span><span class="pln">,</span><span class="arg">  Facet </span><span class="mix">)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L9"><span class="pnl">            </span><span class="tag">base</span><span class="pln"> name</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzElement = 'enumFacet'</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d96">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/include.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="mix frag-to-link-a" data-frag-id="d102">clazz(</span><span class="arg"> Include</span><span class="pln">,</span><span class="arg">  Node </span><span class="mix">)</span></li><li class="L2"><span class="pnl">    </span><span class="tag">ctor</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L4"><span class="pnl">        </span><span class="tag">base</span><span class="pln"> name</span></li><li class="L5"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.wzElement = 'include'</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.actualNameLower = false</span></li><li class="L7"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.isCalculated = false; $$ TODO</span></li><li class="L8"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.calculated = 'null'; $$ TODO</span></li><li class="L9"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> wzInitialize</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L1"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> ss = this.wzName.split('/')</span></li><li class="L2"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> ss.length == 2</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.actualName = ss[0]</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.rootEntityName = ss[1]</span></li><li class="L5"><span class="pnl">        </span><span class="tag">else</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.actualName = this.rootEntityName = this.wzName</span></li><li class="L7"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.actualNameLower = this.actualName.toLowerCase()</span></li><li class="L8"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.actualNameId = schemautil.getIdentifier(this.actualName, true)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.rootEntityNameId = schemautil.getIdentifier(this.rootEntityName, true)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d97">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/method.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d102">clazz(</span><span class="arg"> Param</span><span class="pln">,</span><span class="arg">  Node </span><span class="mix">)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L5"><span class="pnl">            </span><span class="tag">base</span><span class="pln"> name</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzElement = 'param'</span></li><li class="L7"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d102">clazz(</span><span class="arg"> Statement</span><span class="pln">,</span><span class="arg">  Node </span><span class="mix">)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L0"><span class="pnl">            </span><span class="tag">base</span><span class="pln"> name</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzElement = 'statement'</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d102">clazz(</span><span class="arg"> Method</span><span class="pln">,</span><span class="arg">  Node </span><span class="mix">)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L5"><span class="pnl">            </span><span class="tag">base</span><span class="pln"> name</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzElement = 'method'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.emitKey = null</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.isStatic = false</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.isKnownMethod = false</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.params = []</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.requires = []</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.statements = []</span></li><li class="L3"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addParam</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> item = new Param(name)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> item.wzParent = this;</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.params.push(item)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> item</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addRequire</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> item = new Require(name)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> item.wzParent = this;</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.requires.push(item)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> item</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addStatement</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> statement</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> item = new Statement(statement.wzElement + ' ' + statement.wzName)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> item.wzParent = this;</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.statements.push(item)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> item</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> importStatement</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> statement</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> json = this.stringifyWizziStatement(statement, null)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> item = new Statement(stringify(json))</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> item.wzParent = this;</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.statements.push(item)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> item</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> stringifyWizziStatement</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> wizziNode</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> parent</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> json</span></li><li class="L2"><span class="pnl">                </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> n wizziNode.wzTag</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> v wizziNode.wzName</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> childs []</span></li><li class="L6"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> s in wizziNode.statements</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.stringifyWizziStatement(s, json)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> parent</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> parent.childs.push(json)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> json;</span></li><li class="L2"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> wzInitialize</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.wzName.indexOf("-static") &gt;= 0</span></li><li class="L4"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.isStatic = true;</span></li><li class="L5"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.wzName = schemautil.replaceAll(this.wzName, "-static", "").trim()</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ss = this.wzName.trim().split(' ')</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> ss.length &gt; 1</span></li><li class="L8"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.wzName = ss[0]</span></li><li class="L9"><span class="pnl">                </span><span class="tag">for</span><span class="pln"> var i=1; i &lt; ss.length; i++</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.params.push(ss[i])</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.wzName.toLowerCase() === "wzinitialize"</span></li><li class="L2"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.isKnownMethod = true</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.wzName.toLowerCase() === "wzverify"</span></li><li class="L4"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.isKnownMethod = true</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d98">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/node.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="mix frag-to-link-a" data-frag-id="d102">clazz(</span><span class="arg"> Node </span><span class="mix">)</span></li><li class="L2"><span class="pnl">    </span><span class="tag">ctor</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> wzName</span></li><li class="L4"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.wzName = wzName</span></li><li class="L5"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.wzId = schemautil.getIdentifier(wzName, true)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.comments = []</span></li><li class="L7"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> ensureName</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> minLength</span></li><li class="L9"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> ml = typeof minLength === 'undefined' ? 1 : minLength</span></li><li class="L0"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> empty = !schemautil.isNotEmpty(this.wzName)</span></li><li class="L1"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> !empty && this.wzName.length &gt;= ml</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> wzInitialize</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L4"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> wzVerify</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L6"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> importComments</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> other</span></li><li class="L8"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> comment in other.comments</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.addComment(comment.wzName)</span></li><li class="L0"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> addComment</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L2"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> item = new Comment(name)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> item.wzParent = this;</span></li><li class="L4"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.comments.push(item)</span></li><li class="L5"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> item</span></li><li class="L6"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> importRestricts</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> other</span></li><li class="L8"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> restrictFrom in other.restricts</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> restrict = this.addRestrict(restrictFrom.wzName)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> restrict.importComments(restrictFrom)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> facetFrom in restrictFrom.facets</span></li><li class="L2"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> facetFrom.wzElement === 'enumFacet'</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> enumFacet = restrict.addEnumFacet(facetFrom.wzName)</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> enumFacet.importComments(facetFrom)</span></li><li class="L5"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> addRestrict</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L7"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> item = new Restrict(name)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> item.wzParent = this;</span></li><li class="L9"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.restricts.push(item)</span></li><li class="L0"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> item</span></li><li class="L1"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> importMethods</span></li><li class="L2"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> other</span></li><li class="L3"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> methodFrom in other.methods</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> method = this.addMethod(methodFrom.wzName)</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> method.emitKey = methodFrom.emitKey</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> method.importComments(methodFrom)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> paramFrom in methodFrom.params</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> method.addParam(paramFrom.wzName)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> requireFrom in methodFrom.requires</span></li><li class="L0"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> require = method.addRequire(requireFrom.wzName)</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> require.declareVar = requireFrom.declareVar</span></li><li class="L2"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> require.invoke = requireFrom.invoke</span></li><li class="L3"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> require.kind = requireFrom.kind</span></li><li class="L4"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> statementFrom in methodFrom.statements</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> method.importStatement(statementFrom)</span></li><li class="L6"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> addMethod</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L8"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> item = new Method(name)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> item.wzParent = this;</span></li><li class="L0"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.methods.push(item)</span></li><li class="L1"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> item</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d99">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/relation.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="mix frag-to-link-a" data-frag-id="d102">clazz(</span><span class="arg"> Relation</span><span class="pln">,</span><span class="arg">  Node </span><span class="mix">)</span></li><li class="L2"><span class="pnl">    </span><span class="tag">ctor</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L4"><span class="pnl">        </span><span class="tag">base</span><span class="pln"> name</span></li><li class="L5"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.wzElement = 'relation'</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.wzNamePlural = null</span></li><li class="L7"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.wzIdPlural = null</span></li><li class="L8"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.childRole = null</span></li><li class="L9"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.rightElement = null</span></li><li class="L0"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.noGetMethod = false</span></li><li class="L1"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.hasAddOnce = false</span></li><li class="L2"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.isOneToOne = false</span></li><li class="L3"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> wzInitializeNames</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L5"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> this.isOneToOne == false</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.childRole == null</span></li><li class="L7"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> hyphen = this.wzName.indexOf("[-]");</span></li><li class="L8"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> name = hyphen &gt;= 0 ? schemautil.replaceAll(this.wzName, '[-]', 'Â§Â§Â§') : this.wzName</span></li><li class="L9"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> ss = name.split('/')</span></li><li class="L0"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> ss.length == 2</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> zz = ss[0].split('-')</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> zz.length == 2</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> this.wzName = zz[0] + zz[1]</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> this.wzNamePlural = zz[0] + ss[1]</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> this.wzName = ss[0]</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> this.wzNamePlural = ss[0] + ss[1]</span></li><li class="L8"><span class="pnl">                </span><span class="tag">else</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> this.wzNamePlural = this.wzName + 's'</span></li><li class="L0"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> hyphen &gt;= 0</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> this.wzName = schemautil.replaceAll(this.wzName, 'Â§Â§Â§', '-')</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> this.wzNamePlural = schemautil.replaceAll(this.wzNamePlural, 'Â§Â§Â§', '-')</span></li><li class="L3"><span class="pnl">            </span><span class="tag">else</span></li><li class="L4"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.wzNamePlural = this.childRole</span></li><li class="L5"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> wzInitialize</span></li><li class="L6"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L7"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.wzInitializeNames(ctx)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.wzId = schemautil.getIdentifier(this.wzName, true)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> this.isOneToOne == false</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzIdPlural = schemautil.getIdentifier(this.wzNamePlural, true)</span></li><li class="L1"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.leftElement = this.wzParent</span></li><li class="L2"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> this.rightElement === null</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.rightElement = this.wzParent.schema.getElement(this.wzName)</span></li><li class="L4"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> this.rightElement === null</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.error('Related element ' + this.wzName + ' not found', this)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.childEntityId = this.rightElement.wzId</span></li><li class="L7"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.childEntityIdCapital = this.rightElement.wzIdCapital</span></li><li class="L8"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> wzVerify</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> ctx</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d100">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/require.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a">clazz(</span><span class="arg"> Require</span><span class="pln">,</span><span class="arg">  Node </span><span class="mix">)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L5"><span class="pnl">            </span><span class="tag">base</span><span class="pln"> name</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzElement = 'require'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.declareVar = name</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.invoke = ''</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.kind = 'module'</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d101">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/wizzischema/restrict.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a">clazz(</span><span class="arg"> Restrict</span><span class="pln">,</span><span class="arg">  Node </span><span class="mix">)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L5"><span class="pnl">            </span><span class="tag">base</span><span class="pln"> name</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzElement = 'restrict'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.facets = []</span></li><li class="L8"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addEnumFacet</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> facet = new EnumFacet(name)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> facet.wzParent = this</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.facets.push(facet)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> facet</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d102">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/clazz.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> name, supeR|@@null</span></li><li class="L3"><span class="pnl">    </span><span class="tag">class</span><span class="kwd"> ${</span><span class="expr">name</span><span class="kwd">}</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$if</span><span class="expr"> supeR != null</span></li><li class="L5"><span class="pnl">            </span><span class="tag">super</span><span class="kwd"> ${</span><span class="expr">supeR</span><span class="kwd">}</span></li><li class="L6"><span class="pnl">        </span><span class="kwd">$hook</span></li><li class="L7"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln"> = </span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">;</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d103">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/schema_analizer.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> addRequire</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> kind</span></li><li class="L5"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> r = _.find(this.requires, function(item) { return item.wzName === name && item.kind === kind })</span></li><li class="L6"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !r</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r = new Require(name)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r.kind = kind</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.requires.push(r)</span></li><li class="L0"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> r</span></li><li class="L1"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> analize</span></li><li class="L2"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> element in this.elements</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> element.nameIsRequired</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.addRequire("verifyRequired", "context-method")</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> element.allowedNameDeclaration("js") != null</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.addRequire("verifyEnum", "context-method")</span></li><li class="L7"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> attribute in element.attributes</span></li><li class="L8"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> attribute.isRequired</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.addRequire("verifyRequired", "context-method")</span></li><li class="L0"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> attribute.isDataType</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.addRequire("getTypesystem", "context-method")</span></li><li class="L2"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> attribute.allowedDeclaration("js") != null</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.addRequire("verifyEnum", "context-method")</span></li><li class="L4"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> attribute.type == md.Attribute.STRING</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.addRequire("parsestring", 'function')</span></li><li class="L6"><span class="pnl">                </span><span class="tag">elif</span><span class="pln"> (attribute.type == md.Attribute.BOOLEAN)</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.addRequire("parseboolean", 'function')</span></li><li class="L8"><span class="pnl">                </span><span class="tag">elif</span><span class="pln"> attribute.type == md.Attribute.INTEGER</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.addRequire("parseint", 'function')</span></li><li class="L0"><span class="pnl">                </span><span class="tag">elif</span><span class="pln"> attribute.type == md.Attribute.FLOAT</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.addRequire("parsefloat", 'function')</span></li><li class="L2"><span class="pnl">                </span><span class="tag">elif</span><span class="pln"> attribute.type == md.Attribute.DATE</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.addRequire("parsedate", 'function')</span></li><li class="L4"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> method in element.methods</span></li><li class="L5"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> require in method.requires</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> this.addRequire(require.wzName, require.kind)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> method in this.methods</span></li><li class="L8"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> require in method.requires</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.addRequire(require.wzName, require.kind)</span></li><li class="L0"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.addRequiredFunctionsDependencies()</span></li><li class="L1"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> exportToJson</span></li><li class="L2"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> typeof _.find(this.exportTos, function(item) { return item.wzName && item.wzName.toLowerCase() === 'json' }) !== 'undefined'</span></li><li class="L3"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> exportToXml</span></li><li class="L4"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> typeof _.find(this.exportTos, function(item) { return item.wzName && item.wzName.toLowerCase() === 'xml' }) !== 'undefined'</span></li><li class="L5"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> exportToPrettify</span></li><li class="L6"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> typeof _.find(this.exportTos, function(item) { return item.wzName && item.wzName.toLowerCase() === 'prettify' }) !== 'undefined'</span></li><li class="L7"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getRequiredFunctions</span></li><li class="L8"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> _.filter(this.requires, function(item) { return item.kind === 'function' })</span></li><li class="L9"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getRequiredModules</span></li><li class="L0"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> _.filter(this.requires, function(item) { return item.kind === 'module' })</span></li><li class="L1"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getRequiredContextMethods</span></li><li class="L2"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> _.filter(this.requires, function(item) { return item.kind === 'context-method' })</span></li><li class="L3"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> addRequiredFunctionsDependencies</span></li><li class="L4"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> deps = []</span></li><li class="L5"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> require in this.requires</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> require.kind === 'function'</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> this.getRequiredFunctionsByItem(require.wzName, deps)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> dep in deps</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.addRequire(dep, 'function')</span></li><li class="L0"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> getRequiredFunctionsByItem</span></li><li class="L1"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L2"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> deps</span></li><li class="L3"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> name == "isEmpty"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isString")</span></li><li class="L5"><span class="pnl">        </span><span class="tag">elif</span><span class="pln"> name == "isNumber"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isArray")</span></li><li class="L7"><span class="pnl">        </span><span class="tag">elif</span><span class="pln"> name == "replaceAll"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("escapeRegExp")</span></li><li class="L9"><span class="pnl">        </span><span class="tag">elif</span><span class="pln"> name == "isInt"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isNumber")</span></li><li class="L1"><span class="pnl">        </span><span class="tag">elif</span><span class="pln"> name == "isFloat"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isNumber")</span></li><li class="L3"><span class="pnl">        </span><span class="tag">elif</span><span class="pln"> name == "isDate"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isString")</span></li><li class="L5"><span class="pnl">        </span><span class="tag">elif</span><span class="pln"> name == "parsestring"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isString")</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isEmpty")</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isBoolean")</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("nodeException")</span></li><li class="L0"><span class="pnl">        </span><span class="tag">elif</span><span class="pln"> name == "parseboolean"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isString")</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isEmpty")</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isBoolean")</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("nodeException")</span></li><li class="L5"><span class="pnl">        </span><span class="tag">elif</span><span class="pln"> name == "parseint"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isString")</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isEmpty")</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("nodeException")</span></li><li class="L9"><span class="pnl">        </span><span class="tag">elif</span><span class="pln"> name == "parsefloat"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isString")</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isEmpty")</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("nodeException")</span></li><li class="L3"><span class="pnl">        </span><span class="tag">elif</span><span class="pln"> name == "parsedate"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isString")</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("isEmpty")</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> deps.push("nodeException")</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d104">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/t/schema_loader.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">m</span><span class="pln"> loadFromWizziModel</span></li><li class="L3"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> wizziModel</span></li><li class="L4"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.wzName = wizziModel.wzName</span></li><li class="L5"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.importComments(wizziModel)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> requireFrom in wizziModel.requires</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> require = this.addRequire(requireFrom.wzName)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> requireFrom.declareVar && requireFrom.declareVar.length &gt; 0</span></li><li class="L9"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> require.declareVar = requireFrom.declareVar</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> requireFrom.invoke && requireFrom.invoke.length &gt; 0</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> require.invoke = requireFrom.invoke</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> require.kind = requireFrom.kind</span></li><li class="L3"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.importMethods(wizziModel)</span></li><li class="L4"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> eFrom in wizziModel.elements</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> element = this.addElement(eFrom.wzName)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> element.importComments(eFrom)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> element.importRestricts(eFrom)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> element.tagInternal = eFrom.tagInternal</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> element.super = eFrom.super</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> element.isAbstract = eFrom.isAbstract</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> element.isRoot = eFrom.isRoot</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> element.xmlTagInternal = eFrom.xmlTagInternal</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> element.acceptAnyTag = eFrom.acceptAnyTag</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> element.nameIsRequired = eFrom.nameIsRequired</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> element.addToChildren = eFrom.addToChildren</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> element.suppressCollectionEmit = eFrom.suppressCollectionEmit</span></li><li class="L7"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> aFrom in eFrom.attributes</span></li><li class="L8"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> attribute = element.addAttribute(aFrom.wzName)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> attribute.importComments(aFrom)</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> attribute.importRestricts(aFrom)</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> attribute.tagInternal = aFrom.tagInternal</span></li><li class="L2"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> attribute.xmlTagInternal = aFrom.xmlTagInternal</span></li><li class="L3"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> attribute.type = aFrom.type</span></li><li class="L4"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> attribute.default = aFrom.default</span></li><li class="L5"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> attribute.isRequired = aFrom.isRequired</span></li><li class="L6"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> attribute.isDataType = aFrom.isDataType</span></li><li class="L7"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> attribute.defaultWhenDeclared = aFrom.defaultWhenDeclared</span></li><li class="L8"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> rFrom in eFrom.relations</span></li><li class="L9"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> relation = element.addRelation(rFrom.wzName)</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> relation.importComments(rFrom)</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> relation.noGetMethod = rFrom.noGetMethod</span></li><li class="L2"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> relation.hasAddOnce = rFrom.hasAddOnce</span></li><li class="L3"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> relation.isOneToOne = rFrom.isOneToOne</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> element.importMethods(eFrom)</span></li><li class="L5"><span class="pnl">        </span><span class="tag">foreach</span><span class="pln"> exportTo in wizziModel.exportTos</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.addExportTo(exportTo.wzName)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> ctx</span></li><li class="L8"><span class="pnl">            </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> error</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">function</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> msg</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">param</span><span class="pln"> node</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">throw</span><span class="pln"> new Error(msg + '\n' + util.inspect(node, { depth: 2}))</span></li><li class="L4"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.wzSetup(ctx);</span></li><li class="L5"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.wzVerify(ctx);</span></li><li class="L6"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> this.wzInitialize(ctx);</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d105">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/util.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> inflect = require('i')()</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> md = module.exports = {}</span></li><li class="L5"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.getIdentifier</span></li><li class="L6"><span class="pnl">        </span><span class="tag">function</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> checkKeyword</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> md.isNotEmpty(str) === false</span></li><li class="L0"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> str</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> str = str.trim()</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ch, sb = []</span></li><li class="L3"><span class="pnl">            </span><span class="tag">for</span><span class="pln"> var i=0; i&lt;str.length; i++</span></li><li class="L4"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> ch = str[i]</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> sb.push( isIdentifierChar(ch) ? ch : '_')</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ret = sb.join('')</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> checkKeyword</span></li><li class="L8"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> keywords.indexOf(ret) &gt;= 0 ? 'x' + ret : ret</span></li><li class="L9"><span class="pnl">            </span><span class="tag">else</span></li><li class="L0"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> ret</span></li><li class="L1"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.isNotEmpty</span></li><li class="L2"><span class="pnl">        </span><span class="tag">function</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L4"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> typeof str === 'string' && str.trim().length &gt; 0</span></li><li class="L5"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.isEmpty</span></li><li class="L6"><span class="pnl">        </span><span class="tag">function</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> typeof str === 'undefined' || str == null || ( typeof str === 'string' && str.trim().length === 0 )</span></li><li class="L9"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.endsWith</span></li><li class="L0"><span class="pnl">        </span><span class="tag">function</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> suffix</span></li><li class="L3"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> str.indexOf(suffix, str.length - suffix.length) !== -1;</span></li><li class="L4"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.startsWith</span></li><li class="L5"><span class="pnl">        </span><span class="tag">function</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> prefix</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> str.indexOf(prefix) === 0;</span></li><li class="L9"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.replaceAll</span></li><li class="L0"><span class="pnl">        </span><span class="tag">function</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> find</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> replace</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> typeof str === 'undefined' || str == null</span></li><li class="L5"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> str</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> str.replace(new RegExp(escapeRegExp(find), 'g'), replace)</span></li><li class="L7"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.pluralize</span></li><li class="L8"><span class="pnl">        </span><span class="tag">function</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> inflect.pluralize(str)</span></li><li class="L1"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.capitalize</span></li><li class="L2"><span class="pnl">        </span><span class="tag">function</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L4"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> do not use inflect ( in inflect titleName becames Titlename non TitleName )</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> str && str.length &gt; 0</span></li><li class="L6"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> str.charAt(0).toUpperCase() + str.slice(1);</span></li><li class="L7"><span class="pnl">            </span><span class="tag">else</span></li><li class="L8"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> str</span></li><li class="L9"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> escapeRegExp</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L1"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> str.replace(/([.*+?^=!:</span><span class="kwd">${</span><span class="expr"></span><span class="kwd">}</span><span class="pln">()|\[\]\/\\])/g, "\\$1")</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.escapeString</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L5"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> (str + '').replace(/[\\"']/g, '\\$&').replace(/\u0000/g, '\\0');</span></li><li class="L6"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> isIdentifierChar</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L8"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> isAlphaNumeric(str) || str === '_'</span></li><li class="L9"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> isAlphaNumeric</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> str</span></li><li class="L1"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> letterNumber = /^[0-9a-zA-Z]+$/</span></li><li class="L2"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> str.match(letterNumber)</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> keywords</span></li><li class="L4"><span class="pnl">        </span><span class="tag">[</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'abstract'</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'arguments'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'boolean'</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'break'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'byte'</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'case'</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'catch'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'char'</span></li><li class="L3"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'class'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'const'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'continue'</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'debugger'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'default'</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'delete'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'do'</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'double'</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'else'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'enum'</span></li><li class="L3"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'eval'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'export'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'extends'</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'false'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'final'</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'finally'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'float'</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'for'</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'function'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'goto'</span></li><li class="L3"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'if'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'implements'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'import'</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'in'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'instanceof'</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'int'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'interface'</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'let'</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'long'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'native'</span></li><li class="L3"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'new'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'null'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'package'</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'private'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'protected'</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'public'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'return'</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'short'</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'static'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'super'</span></li><li class="L3"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'switch'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'synchronized'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'this'</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'throw'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'throws'</span></li><li class="L8"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'transient'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'true'</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'try'</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'typeof'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'var'</span></li><li class="L3"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'void'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'volatile'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'while'</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'with'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'yield'</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d106">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/wfschema-boot-model.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> util = require('util')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> _ = require('lodash')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> stringify = require('json-stringify-safe')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> schemautil = require('./util')</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> md = module.exports = {}</span></li><li class="L8"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d98">wizzischema/node(</span><span class="mix">)</span></li><li class="L9"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d88">wizzischema/attribute(</span><span class="mix">)</span></li><li class="L0"><span class="pnl">    </span><span class="mix frag-to-link-a">wizzischema/restrict(</span><span class="mix">)</span></li><li class="L1"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d95">wizzischema/facet(</span><span class="mix">)</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d96">wizzischema/include(</span><span class="mix">)</span></li><li class="L3"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d93">wizzischema/element(</span><span class="mix">)</span></li><li class="L4"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d99">wizzischema/relation(</span><span class="mix">)</span></li><li class="L5"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d89">wizzischema/choice(</span><span class="mix">)</span></li><li class="L6"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d91">wizzischema/choiceSet(</span><span class="mix">)</span></li><li class="L7"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d90">wizzischema/choiceOrdered(</span><span class="mix">)</span></li><li class="L8"><span class="pnl">    </span><span class="mix frag-to-link-a">wizzischema/require(</span><span class="mix">)</span></li><li class="L9"><span class="pnl">    </span><span class="mix frag-to-link-a">wizzischema/exportTo(</span><span class="mix">)</span></li><li class="L0"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d97">wizzischema/method(</span><span class="mix">)</span></li><li class="L1"><span class="pnl">    </span><span class="mix frag-to-link-a">wizzischema/comment(</span><span class="mix">)</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d102">clazz(</span><span class="arg"> WizziSchema</span><span class="pln">,</span><span class="arg">  Node </span><span class="mix">)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">ctor</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L5"><span class="pnl">            </span><span class="tag">base</span><span class="pln"> name</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.wzElement = 'wizzischema'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.elements = []</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.methods = []</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.requires = []</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.requiredModules = []</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.requiredFunctions = []</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.exportTos = []</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.preserveTags = true</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.rootElement = null</span></li><li class="L5"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addElement</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> item = new Element(name)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> item.wzParent = this;</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.elements.push(item)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> item</span></li><li class="L1"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> getElement</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L3"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> element in this.elements</span></li><li class="L4"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> element.wzName === name</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">return</span><span class="pln"> element</span></li><li class="L6"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> null</span></li><li class="L7"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> addExportTo</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> name</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> item = new ExportTo(name)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> item.wzParent = this;</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.exportTos.push(item)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> item</span></li><li class="L3"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> wzSetup</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L5"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> item in this.elements</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> item.wzSetup(ctx)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> item in this.elements</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> item.setupDerived(ctx)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> wzVerify</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L1"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> item in this.elements</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> item.wzVerify(ctx)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">m</span><span class="pln"> wzInitialize</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L5"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> item in this.elements</span></li><li class="L6"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> item.isRoot</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> this.rootElement = item</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> this.rootElement == null && this.elements.length &gt; 0</span></li><li class="L9"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.elements[0].isRoot = true;</span></li><li class="L0"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.rootElement = this.elements[0]</span></li><li class="L1"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> item in this.elements</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> item.wzInitialize(ctx)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.analize()</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> d = ctx.tagElementMapping</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> typeof d === 'object'</span></li><li class="L6"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> str = []</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> str.push("{ ")</span></li><li class="L8"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> first = true</span></li><li class="L9"><span class="pnl">                </span><span class="tag">for</span><span class="pln"> var k in d</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> !first</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> str.push(", ")</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> first = false</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> key = schemautil.escapeString(k)</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> str.push("'" + key + "': '" + d[key] + "'")</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> str.push(" }")</span></li><li class="L6"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.tagElementMapping = str.join('')</span></li><li class="L7"><span class="pnl">            </span><span class="tag">else</span></li><li class="L8"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> this.tagElementMapping = '{}'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.requiredModules = this.getRequiredModules()</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.requiredFunctions = this.getRequiredFunctions()</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.requiredContextMethods = this.getRequiredContextMethods()</span></li><li class="L2"><span class="pnl">        </span><span class="mix frag-to-link-a" data-frag-id="d103">schema_analizer(</span><span class="mix">)</span></li><li class="L3"><span class="pnl">        </span><span class="mix frag-to-link-a">schema_loader(</span><span class="mix">)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d107">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/wizzi/models/bootstrap/wfschema-boot-modelDef.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> util = require('util')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> BootWizziSchema = require('./wfschema-boot-model').WizziSchema</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> md = module.exports = {}</span></li><li class="L6"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.createInstance</span></li><li class="L7"><span class="pnl">        </span><span class="tag">function</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> wfschema = new BootWizziSchema('wfschema')</span></li><li class="L9"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> wfschema</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_wfschema = wfschema.addElement("wfschema", {})</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_wfschema.xmlTagInternal = "wfschema"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_wfschema_preserveTags = e_wfschema.addAttribute("preserveTags", {})</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_wfschema_preserveTags.type = "boolean"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_wfschema_preserveTags.default = "false"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_wfschema_preserveTags.tagInternal = "preserve-tags"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_wfschema_preserveTags.defaultWhenDeclared = "true"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> element</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_element = wfschema.addElement("element", {})</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element.tagInternal = "e"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element.xmlTagInternal = "element"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_element_super = e_element.addAttribute("super", {})</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_element_isAbstract = e_element.addAttribute("isAbstract", {})</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_isAbstract.type = "boolean"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_isAbstract.default = "false"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_isAbstract.tagInternal = "is-abstract"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_isAbstract.defaultWhenDeclared = "true"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_element_isRoot = e_element.addAttribute("isRoot", {})</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_isRoot.type = "boolean"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_isRoot.default = "false"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_isRoot.tagInternal = "is-root"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_isRoot.defaultWhenDeclared = "true"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_element_tagInternal = e_element.addAttribute("tagInternal", {})</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_tagInternal.tagInternal = "tag"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_element_xmlTagInternal = e_element.addAttribute("xmlTagInternal", {})</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_xmlTagInternal.tagInternal = "xml-tag"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_element_acceptAnyTag = e_element.addAttribute("acceptAnyTag", {})</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_acceptAnyTag.tagInternal = "any"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_element_nameIsRequired = e_element.addAttribute("nameIsRequired", {})</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_nameIsRequired.type = "boolean"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_nameIsRequired.default = "false"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_nameIsRequired.tagInternal = "name-is-required"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_nameIsRequired.defaultWhenDeclared = "true"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_element_addToChildren = e_element.addAttribute("addToChildren", {})</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_addToChildren.type = "boolean"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_addToChildren.default = "false"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_addToChildren.tagInternal = "add-to-children"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_addToChildren.defaultWhenDeclared = "true"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_element_suppressCollectionEmit = e_element.addAttribute("suppressCollectionEmit", {})</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_suppressCollectionEmit.type = "boolean"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_suppressCollectionEmit.default = "false"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_suppressCollectionEmit.tagInternal = "suppress-collection-emit"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_element_suppressCollectionEmit.defaultWhenDeclared = "true"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> attribute</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_attribute = wfschema.addElement("attribute", {})</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_attribute.tagInternal = "a"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_attribute.xmlTagInternal = "attribute"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_attribute_tagInternal = e_attribute.addAttribute("tagInternal", {})</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_attribute_tagInternal.tagInternal = "tag"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_attribute_type = e_attribute.addAttribute("type", {})</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_attribute_type.default = "string"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_attribute_default = e_attribute.addAttribute("default", {})</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_attribute_default.tagInternal = "default"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_attribute_calculated = e_attribute.addAttribute("calculated ", {})</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_attribute_isRequired = e_attribute.addAttribute("isRequired", {})</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_attribute_isRequired.type = "boolean"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_attribute_isRequired.default = "false"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_attribute_isRequired.tagInternal = "is-required"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_attribute_isRequired.defaultWhenDeclared = "true"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_attribute_isDataType = e_attribute.addAttribute("isDataType", {})</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_attribute_isDataType.type = "boolean"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_attribute_isDataType.default = "false"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_attribute_isDataType.tagInternal = "is-datatype"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_attribute_isDataType.defaultWhenDeclared = "true"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_attribute_defaultWhenDeclared = e_attribute.addAttribute("defaultWhenDeclared", {})</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_attribute_defaultWhenDeclared.tagInternal = "default-when-declared"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> restrict</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_restrict = wfschema.addElement("restrict", {})</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_restrict.xmlTagInternal = "restrict"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_restrict_nameIsRequired = e_restrict.addAttribute("nameIsRequired", {})</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_restrict_nameIsRequired.type = "boolean"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_restrict_nameIsRequired.default = "false"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_restrict_nameIsRequired.tagInternal = "name-is-required"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_restrict_nameIsRequired.defaultWhenDeclared = "true"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> facet</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_facet = wfschema.addElement("facet", {})</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_facet.IsAbstract = "true"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_facet.xmlTagInternal = "facet"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> enumFacet</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_enumFacet = wfschema.addElement("enumFacet", {})</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_enumFacet.tagInternal = "enum"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_enumFacet.super = "facet"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_enumFacet.xmlTagInternal = "enumFacet"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> maxLengthFacet</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_maxLengthFacet = wfschema.addElement("maxLengthFacet", {})</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_maxLengthFacet.tagInternal = "max-length"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_maxLengthFacet.super = "facet"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_maxLengthFacet.xmlTagInternal = "maxLengthFacet"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> minLengthFacet</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_minLengthFacet = wfschema.addElement("minLengthFacet", {})</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_minLengthFacet.tagInternal = "min-length"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_minLengthFacet.super = "facet"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_minLengthFacet.xmlTagInternal = "minLengthFacet"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> relation</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_relation = wfschema.addElement("relation", {})</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_relation.tagInternal = "r"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_relation.xmlTagInternal = "relation"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_relation_noGetMethod = e_relation.addAttribute("noGetMethod", {})</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_relation_noGetMethod.type = "boolean"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_relation_noGetMethod.default = "false"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_relation_noGetMethod.tagInternal = "no-get"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_relation_noGetMethod.defaultWhenDeclared = "true"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_relation_hasAddOnce = e_relation.addAttribute("hasAddOnce", {})</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_relation_hasAddOnce.type = "boolean"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_relation_hasAddOnce.default = "false"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_relation_hasAddOnce.tagInternal = "add-once"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_relation_hasAddOnce.defaultWhenDeclared = "true"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_relation_isOneToOne = e_relation.addAttribute("isOneToOne", {})</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_relation_isOneToOne.type = "boolean"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_relation_isOneToOne.default = "false"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_relation_isOneToOne.tagInternal = "one-to-one"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_relation_isOneToOne.defaultWhenDeclared = "true"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> property</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_property = wfschema.addElement("property", {})</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_property.tagInternal = "p"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_property.xmlTagInternal = "property"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_property_emitkey = e_property.addAttribute("emitkey", {})</span></li><li class="L7"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> method</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_method = wfschema.addElement("method", {})</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_method.tagInternal = "m"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_method.xmlTagInternal = "method"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_method_emitkey = e_method.addAttribute("emitKey", {})</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_method_emitkey.tagInternal = "emit-key"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> param</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_param = wfschema.addElement("param", {})</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_param.xmlTagInternal = "param"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_param_type = e_param.addAttribute("type", {})</span></li><li class="L7"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> exportTo</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_exportTo = wfschema.addElement("exportTo", {})</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_exportTo.tagInternal = "export-to"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_exportTo.xmlTagInternal = "exportTo"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> require</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_require = wfschema.addElement("require", {})</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_require.xmlTagInternal = "require"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_require_kind = e_require.addAttribute("kind", {})</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_require_invoke = e_require.addAttribute("invoke", {})</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_require_declareVar = e_require.addAttribute("declareVar", {})</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_require_declareVar.tagInternal = "declare-var"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> include</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_include = wfschema.addElement("include", {})</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_include.xmlTagInternal = "include"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> comment</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_comment = wfschema.addElement("comment", {})</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_comment.tagInternal = "#"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_comment.xmlTagInternal = "comment"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> statement</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_statement = wfschema.addElement("statement", {})</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_statement.xmlTagInternal = "statement"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> codeline</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_codeline = wfschema.addElement("codeline", {})</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_codeline.tagInternal = "+"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_codeline.super = "statement"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> var</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_var = wfschema.addElement("var", {})</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_var.tagInternal = "var"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_var.super = "statement"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_var.xmlTagInternal = "var"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> decl</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_decl = wfschema.addElement("decl", {})</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_decl.tagInternal = "decl"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_decl.super = "statement"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_decl.xmlTagInternal = "decl"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> set</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_set = wfschema.addElement("set", {})</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_set.super = "statement"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> call</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_call = wfschema.addElement("call", {})</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_call.tagInternal = "_"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_call.super = "statement"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> function</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_function = wfschema.addElement("function", {})</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_function.tagInternal = "function"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_function.super = "statement"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> return</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_return = wfschema.addElement("return", {})</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_return.tagInternal = "return"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_return.super = "statement"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> new</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_new = wfschema.addElement("new", {})</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_new.tagInternal = "new"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_new.super = "statement"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> if</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_if = wfschema.addElement("if", {})</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_if.tagInternal = "if"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_if.super = "statement"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> elif</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_elif = wfschema.addElement("elif", {})</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_elif.super = "statement"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> else</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_else = wfschema.addElement("else", {})</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_else.tagInternal = "else"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_else.super = "statement"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> for</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_for = wfschema.addElement("for", {})</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_for.tagInternal = "for"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_for.super = "statement"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> break</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_break = wfschema.addElement("break", {})</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_break.tagInternal = "break"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_break.super = "statement"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> continue</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_continue = wfschema.addElement("continue", {})</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_continue.tagInternal = "continue"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_continue.super = "statement"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> foreach</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_foreach = wfschema.addElement("foreach", {})</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_foreach.super = "statement"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> while</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_while = wfschema.addElement("while", {})</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_while.tagInternal = "while"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_while.super = "statement"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> do</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_dowhile = wfschema.addElement("do", {})</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_dowhile.tagInternal = "do"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_dowhile.super = "statement"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> switch</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_switch = wfschema.addElement("switch", {})</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_switch.tagInternal = "switch"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_switch.super = "statement"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> case</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_case = wfschema.addElement("case", {})</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_case.tagInternal = "case"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_case.super = "statement"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> default</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_default = wfschema.addElement("default", {})</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_default.tagInternal = "default"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_default.super = "statement"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> try</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_try = wfschema.addElement("try", {})</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_try.tagInternal = "try"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_try.super = "statement"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> catch</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_catch = wfschema.addElement("catch", {})</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_catch.tagInternal = "catch"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_catch.super = "statement"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> finally</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_finally = wfschema.addElement("finally", {})</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_finally.tagInternal = "finally"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_finally.super = "statement"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> throw</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_throw = wfschema.addElement("throw", {})</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_throw.tagInternal = "throw"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_throw.super = "statement"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> log</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_log = wfschema.addElement("log", {})</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_log.super = "statement"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> jsArray</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_jsArray = wfschema.addElement("jsArray", {})</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_jsArray.tagInternal = "["</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_jsArray.super = "statement"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> jsObject</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_jsObject = wfschema.addElement("jsObject", {})</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_jsObject.tagInternal = "{"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_jsObject.super = "statement"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> jsPropertyOrValue</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> e_jsPropertyOrValue = wfschema.addElement("jsPropertyOrValue", {})</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_jsPropertyOrValue.tagInternal = "@"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> e_jsPropertyOrValue.super = "statement"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_wfschema_require = e_wfschema.addRelation("require", {})</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_wfschema_require.childRole = "requires"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_wfschema_require.rightElement = e_require</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_wfschema_element = e_wfschema.addRelation("element", {})</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_wfschema_element.childRole = "elements"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_wfschema_element.rightElement = e_element</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_wfschema_method = e_wfschema.addRelation("method", {})</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_wfschema_method.childRole = "methods"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_wfschema_method.rightElement = e_method</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_wfschema_exportTo = e_wfschema.addRelation("exportTo", {})</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_wfschema_exportTo.childRole = "exportTos"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_wfschema_exportTo.rightElement = e_exportTo</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_wfschema_comment = e_wfschema.addRelation("comment", {})</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_wfschema_comment.childRole = "comments"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_wfschema_comment.rightElement = e_comment</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_element_attribute = e_element.addRelation("attribute", {})</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_element_attribute.childRole = "attributes"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_element_attribute.rightElement = e_attribute</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_element_relation = e_element.addRelation("relation", {})</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_element_relation.childRole = "relations"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_element_relation.rightElement = e_relation</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_element_restrict = e_element.addRelation("restrict", {})</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_element_restrict.childRole = "restricts"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_element_restrict.rightElement = e_restrict</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_element_property = e_element.addRelation("property", {})</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_element_property.childRole = "properties"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_element_property.rightElement = e_property</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_element_method = e_element.addRelation("method", {})</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_element_method.childRole = "methods"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_element_method.rightElement = e_method</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_element_include = e_element.addRelation("include", {})</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_element_include.childRole = "includes"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_element_include.rightElement = e_include</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_element_comment = e_element.addRelation("comment", {})</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_element_comment.childRole = "comments"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_element_comment.rightElement = e_comment</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_attribute_restrict = e_attribute.addRelation("restrict", {})</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_attribute_restrict.childRole = "restricts"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_attribute_restrict.rightElement = e_restrict</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_attribute_comment = e_attribute.addRelation("comment", {})</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_attribute_comment.childRole = "comments"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_attribute_comment.rightElement = e_comment</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_restrict_facet = e_restrict.addRelation("facet", {})</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_restrict_facet.childRole = "facets"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_restrict_facet.rightElement = e_facet</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_restrict_comment = e_restrict.addRelation("comment", {})</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_restrict_comment.childRole = "comments"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_restrict_comment.rightElement = e_comment</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_enumFacet_comment = e_enumFacet.addRelation("comment", {})</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_enumFacet_comment.childRole = "comments"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_enumFacet_comment.rightElement = e_comment</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_maxLengthFacet_comment = e_maxLengthFacet.addRelation("comment", {})</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_maxLengthFacet_comment.childRole = "comments"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_maxLengthFacet_comment.rightElement = e_comment</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_minLengthFacet_comment = e_minLengthFacet.addRelation("comment", {})</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_minLengthFacet_comment.childRole = "comments"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_minLengthFacet_comment.rightElement = e_comment</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_relation_comment = e_relation.addRelation("comment", {})</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_relation_comment.childRole = "comments"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_relation_comment.rightElement = e_comment</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_property_statement = e_property.addRelation("statement", {})</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_property_statement.childRole = "statements"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_property_statement.rightElement = e_statement</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_property_comment = e_property.addRelation("comment", {})</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_property_comment.childRole = "comments"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_property_comment.rightElement = e_comment</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_method_param = e_method.addRelation("param", {})</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_method_param.childRole = "params"</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_method_param.rightElement = e_param</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_method_require = e_method.addRelation("require", {})</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_method_require.childRole = "requires"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_method_require.rightElement = e_require</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_method_statement = e_method.addRelation("statement", {})</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_method_statement.childRole = "statements"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_method_statement.rightElement = e_statement</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_method_comment = e_method.addRelation("comment", {})</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_method_comment.childRole = "comments"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_method_comment.rightElement = e_comment</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_param_comment = e_param.addRelation("comment", {})</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_param_comment.childRole = "comments"</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_param_comment.rightElement = e_comment</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_require_comment = e_require.addRelation("comment", {})</span></li><li class="L0"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_require_comment.childRole = "comments"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_require_comment.rightElement = e_comment</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_statement_statement = e_statement.addRelation("statement", {})</span></li><li class="L3"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_statement_statement.childRole = "statements"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_statement_statement.rightElement = e_statement</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> r_function_param = e_function.addRelation("param", {})</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_function_param.childRole = "params"</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> r_function_param.rightElement = e_param</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ctx</span></li><li class="L9"><span class="pnl">                </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> error</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> msg</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> node</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">throw</span><span class="pln"> new Error(msg + '\n' + util.inspect(node, { depth: 2}))</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> wfschema.wzSetup(ctx);</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> wfschema.wzVerify(ctx);</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> wfschema.wzInitialize(ctx);</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> wfschema</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d108">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/config.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> path</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> md</span></li><li class="L5"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> module.exports =</span></li><li class="L6"><span class="pnl">            </span><span class="tag">{</span></li><li class="L7"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.wfBaseFolder = 'c:/my/wizzi/v3'</span></li><li class="L8"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.wfJobsFolder</span></li><li class="L9"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> md.wfBaseFolder</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'wfjobs'</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.get</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> key</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> defaultValue</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> typeof(md[key]) === 'undefined' && typeof(defaultValue) !== 'undefined'</span></li><li class="L7"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> defaultValue</span></li><li class="L8"><span class="pnl">            </span><span class="tag">else</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> md[key]</span></li><li class="L0"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.set</span></li><li class="L1"><span class="pnl">        </span><span class="tag">function</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> key</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> md[key] = value</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> onChange</span></li><li class="L6"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> onChange</span></li><li class="L7"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> md.wfJobsFolder</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> md.wfBaseFolder</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'wfjobs'</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d109">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/errors.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> util</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> fail = require('./util/fail')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">+</span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> md = module.exports = {}</span></li><li class="L7"><span class="pnl">    </span><span class="tag">+</span></li><li class="L8"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d128">error(</span><span class="arg"> NotImplemented</span><span class="pln">,</span><span class="arg">  message </span><span class="mix">)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">log</span><span class="pln"> 'message', message</span></li><li class="L0"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.message = message</span></li><li class="L1"><span class="pnl">    </span><span class="tag">+</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d128">error(</span><span class="arg"> InvalidRequest</span><span class="pln">,</span><span class="arg">  message</span><span class="pln">,</span><span class="arg">  code </span><span class="mix">)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">log</span><span class="pln"> 'message', message</span></li><li class="L4"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.message = message</span></li><li class="L5"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.code = code</span></li><li class="L6"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d128">error(</span><span class="arg"> Node</span><span class="pln">,</span><span class="arg">  message</span><span class="pln">,</span><span class="arg">  node </span><span class="mix">)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> msg</span></li><li class="L8"><span class="pnl">            </span><span class="tag">[</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> message</span></li><li class="L0"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> node</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> node.wzSourceLineInfo</span></li><li class="L2"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> info = node.wzSourceLineInfo</span></li><li class="L3"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> filePath = 'TODO'</span></li><li class="L4"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> node.wzSourceFilepath</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> filePath = node.wzSourceFilepath(info.sourceKey)</span></li><li class="L6"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> msg.push((' at row: ' + info.row))</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> msg.push((', col: ' + info.col))</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> msg.push((', source: ' + info.sourceKey))</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> msg.push((', in file: ' + filePath))</span></li><li class="L0"><span class="pnl">            </span><span class="tag">elif</span><span class="pln"> node.row</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> msg.push((' at row: ' + node.row))</span></li><li class="L2"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> msg.push((', col: ' + node.col))</span></li><li class="L3"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.message = msg.join('')</span></li><li class="L4"><span class="pnl">        </span><span class="tag">log</span><span class="pln"> 'NodeError', this.message</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> set this.node = node</span></li><li class="L6"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d128">error(</span><span class="arg"> NotFound</span><span class="pln">,</span><span class="arg">  resourceType</span><span class="pln">,</span><span class="arg">  name</span><span class="pln">,</span><span class="arg">  message </span><span class="mix">)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.message = resourceType + ': ' + name +</span></li><li class="L8"><span class="pnl">            </span><span class="tag">\</span><span class="pln"> ' not found, message ' + message</span></li><li class="L9"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d128">error(</span><span class="arg"> IttfNotFound</span><span class="pln">,</span><span class="arg">  resourceType</span><span class="pln">,</span><span class="arg">  name</span><span class="pln">,</span><span class="arg">  sourceUri </span><span class="mix">)</span></li><li class="L0"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.message = resourceType + ': ' + name +</span></li><li class="L1"><span class="pnl">            </span><span class="tag">\</span><span class="pln"> ' not found, processing document ' + md.getSrcPathInfo(sourceUri)</span></li><li class="L2"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d128">error(</span><span class="arg"> IttfLoad</span><span class="pln">,</span><span class="arg">  message</span><span class="pln">,</span><span class="arg">  srcPath</span><span class="pln">,</span><span class="arg">  node</span><span class="pln">,</span><span class="arg">  ex </span><span class="mix">)</span></li><li class="L3"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> !(ex)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> ex = node</span></li><li class="L5"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> node = null</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.message = 'Error: ' + message + '\nLoading ittf document ' + md.getSrcPathInfo(srcPath)</span></li><li class="L7"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> node</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> this.message += ('\n' + new NodeError('', node).message)</span></li><li class="L9"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d128">error(</span><span class="arg"> WizziModelLoad</span><span class="pln">,</span><span class="arg">  message</span><span class="pln">,</span><span class="arg">  srcPath</span><span class="pln">,</span><span class="arg">  ex </span><span class="mix">)</span></li><li class="L0"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.message = 'Error: ' + message + '\nLoading ittf document ' + md.getSrcPathInfo(srcPath)</span></li><li class="L1"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d128">error(</span><span class="arg"> ModelTransformation</span><span class="pln">,</span><span class="arg">  message</span><span class="pln">,</span><span class="arg">  generation</span><span class="pln">,</span><span class="arg">  srcPath</span><span class="pln">,</span><span class="arg">  ex </span><span class="mix">)</span></li><li class="L2"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.message = 'Error: ' + message + '\nDuring generation:' + generation + ', processing document ' + md.getSrcPathInfo(srcPath)</span></li><li class="L3"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d128">error(</span><span class="arg"> ArtifactGeneration</span><span class="pln">,</span><span class="arg">  message</span><span class="pln">,</span><span class="arg">  generation</span><span class="pln">,</span><span class="arg">  srcPath</span><span class="pln">,</span><span class="arg">  ex </span><span class="mix">)</span></li><li class="L4"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.message = 'Error: ' + message +</span></li><li class="L5"><span class="pnl">            </span><span class="tag">\</span><span class="pln"> '\nDuring generation:' + generation +</span></li><li class="L6"><span class="pnl">            </span><span class="tag">\</span><span class="pln"> ', processing document ' + md.getSrcPathInfo(srcPath)</span></li><li class="L7"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d128">error(</span><span class="arg"> WizziInvalidRequest</span><span class="pln">,</span><span class="arg">  message</span><span class="pln">,</span><span class="arg">  srcPath</span><span class="pln">,</span><span class="arg">  ex </span><span class="mix">)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.message = message</span></li><li class="L9"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d128">error(</span><span class="arg"> RunnerServer</span><span class="pln">,</span><span class="arg">  message </span><span class="mix">)</span></li><li class="L0"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.message = message</span></li><li class="L1"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.artifactGenerationError</span></li><li class="L2"><span class="pnl">        </span><span class="tag">function</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> message</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> generation</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> node</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> error</span></li><li class="L7"><span class="pnl">                </span><span class="tag">new</span><span class="pln"> md.ArtifactGenerationError(message, generation, node)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> fail.warn(error)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">throw</span><span class="pln"> error</span></li><li class="L0"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.getSrcPathInfo</span></li><li class="L1"><span class="pnl">        </span><span class="tag">function</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> srcPath</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> typeof (srcPath) === 'string'</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> srcPath</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> (srcPath && (typeof (srcPath) === 'object'))</span></li><li class="L6"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> msg = md.getSrcPathInfoFromNode(srcPath)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">return</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">iif</span><span class="pln"> msg</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">then</span><span class="pln"> msg</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">else</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> srcPath.toString()</span></li><li class="L2"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> 'unavailable'</span></li><li class="L3"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.getSrcPathInfoFromNode</span></li><li class="L4"><span class="pnl">        </span><span class="tag">function</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> node</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> msg</span></li><li class="L7"><span class="pnl">                </span><span class="tag">[</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> node</span></li><li class="L9"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> node.wzSourceLineInfo</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> info = node.wzSourceLineInfo</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> filePath = 'TODO'</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> node.wzSourceFilepath</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> filePath = node.wzSourceFilepath(info.sourceKey)</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> msg.push((' at row: ' + info.row))</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> msg.push((', col: ' + info.col))</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> msg.push((', source: ' + info.sourceKey))</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> msg.push((', in file: ' + filePath))</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                </span><span class="tag">iif</span><span class="pln"> msg.length == 0</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">then</span><span class="pln"> null</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> msg.join('')</span></li><li class="L3"><span class="pnl">    </span><span class="mix frag-to-link-a" data-frag-id="d128">error(</span><span class="arg"> File</span><span class="pln">,</span><span class="arg">  message</span><span class="pln">,</span><span class="arg">  ex </span><span class="mix">)</span></li><li class="L4"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.message = message</span></li><li class="L5"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.inner = ex</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d110">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/lib/option.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> data</span></li><li class="L4"><span class="pnl">        </span><span class="tag">{</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> option</span></li><li class="L6"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> module.exports =</span></li><li class="L7"><span class="pnl">            </span><span class="tag">function</span></li><li class="L8"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> key</span></li><li class="L9"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> value</span></li><li class="L0"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> no = key.match(/^no-(.+)$/)</span></li><li class="L1"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> arguments.length === 2</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">return</span><span class="pln"> data[key] = value</span></li><li class="L3"><span class="pnl">                </span><span class="tag">elif</span><span class="pln"> no</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">return</span><span class="pln"> data[no[1]] === false</span></li><li class="L5"><span class="pnl">                </span><span class="tag">else</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">return</span><span class="pln"> data[key]</span></li><li class="L7"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> option.init</span></li><li class="L8"><span class="pnl">        </span><span class="tag">function</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> obj</span></li><li class="L0"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> data = (obj || {})</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d111">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/root/t/index/autostart.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> 'autostart' is executed at the end</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> of the loading of the Darvin module</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> only if a darvinfile.js is found in the</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> working directory.</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> For a manual start see the 'start' function.</span></li><li class="L8"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.autostart</span></li><li class="L9"><span class="pnl">        </span><span class="tag">function</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> darvinCWD = process.cwd()</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> darvinFilePath = path.join(runnerServerCWD, 'darvinfile.js')</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> md.file.isFile(darvinFilePath)</span></li><li class="L3"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> md.darvinfile = require(darvinFilePath)</span></li><li class="L4"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> console.log</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> md.chalk.yellow(('DARVIN FILE ' + darvinFilePath))</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d112">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/root/t/index/f-artifact-generation.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> artifactGenerators = {}</span></li><li class="L3"><span class="pnl">    </span><span class="tag">#</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Async generate an artifact</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Generators are searched in the PluginsManager</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {Object} modelContext</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> A WizziModel or any other value of type Object used to drive the artifact generation.</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> The object may a contain options parameter and or a structure</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> of other objects or WizziModels.</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {String} sourceIttfDocumentInfo</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> For trace and documentation purposes.</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {String} generationName</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> The name for retrieving the ArtifactGeneration module.</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {Object} emitContext</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> The emitContext</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> . collects the generated elements of an artifact generation</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> . may be used as a service container during generation.</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> For now the wizzi/artifact/genContext is used as emitContext.</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> TODO revise and rename the wizzi/artifact/genContext module</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> The emitContext parameter may be used to pass context data to the artifact generator;</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> It may contain a "__data" property that will be set on the genContext "data" property.</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> @param {Function} callback</span></li><li class="L4"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.doArtifactGeneration</span></li><li class="L5"><span class="pnl">        </span><span class="tag">function</span><span class="pln"> doArtifactGeneration</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> modelContext</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> sourceIttfDocumentInfo</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> generationName</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> emitContext</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">            </span><span class="tag">+</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !callback</span></li><li class="L3"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> callback = emitContext</span></li><li class="L4"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> emitContext = {}</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !emitContext</span></li><li class="L6"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> emitContext = {}</span></li><li class="L7"><span class="pnl">            </span><span class="tag">+</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> generator = artifactGenerators[generationName]</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !generator</span></li><li class="L0"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> generator = md.pluginsManager.getArtifactGenerator(generationName)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> generator == null</span></li><li class="L2"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> error = new errors.NotFoundError('ArtifactGenerator', generationName, sourceIttfDocumentInfo)</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> fail.warn(error.message)</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> callback(error)</span></li><li class="L5"><span class="pnl">            </span><span class="tag">+</span></li><li class="L6"><span class="pnl">            </span><span class="tag">artifactGenerators[generationName]</span><span class="pln"> = generator</span></li><li class="L7"><span class="pnl">            </span><span class="tag">+</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> genContext = new GenContext({ options: options(null, { data: emitContext.__data }) })</span></li><li class="L9"><span class="pnl">            </span><span class="tag">new</span><span class="pln"> generator.gen</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> modelContext</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> genContext</span></li><li class="L2"><span class="pnl">                </span><span class="tag">function</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> err.srcPath = sourceIttfDocumentInfo</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> fail.warn(util.inspect(err, { depth: null}))</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> sw = new StringWriter()</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> genContext.toStream(sw)</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback(null, sw.toString())</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d113">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/root/t/index/f-ittf-loading.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Simply load an MTree from an IttfDocument</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> param ittfDocumentUri      - the uri of the primary IttfDocument that declares the model</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> param evaluationContext    - the MTree evaluation context</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> param callback</span></li><li class="L7"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.ittf</span></li><li class="L8"><span class="pnl">        </span><span class="tag">function</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> ittfDocumentUri</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> evaluationContext</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ittf.loadModel</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> ittfDocumentUri</span></li><li class="L4"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> evaluationContext</span></li><li class="L5"><span class="pnl">                </span><span class="tag">function</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> mTree</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">set</span><span class="pln"> err.srcPath = ittfDocumentUri</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> fail.warn(util.inspect(err, { depth: null}))</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">return</span><span class="pln"> callback(err)</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> ittfmodel = mTree.nodes[0]</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">#</span><span class="pln"> log 'md.ittf.ittfDocumentUri', ittfDocumentUri, ittfmodel</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback(null, ittfmodel)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d114">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/root/t/index/f-model-factory.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> modelFactories = {}</span></li><li class="L3"><span class="pnl">    </span><span class="tag">#</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Retrieve a WizziModelFactory by its wizzischema name</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Model factories are searched in the PluginsManager</span></li><li class="L6"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.getLoadModel</span></li><li class="L7"><span class="pnl">        </span><span class="tag">function</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> schemaName</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> factory = modelFactories[schemaName]</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !factory</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> factory = md.pluginsManager.getLoadModel(schemaName)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> factory != null</span></li><li class="L3"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> modelFactories[schemaName] = factory</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> factory</span></li><li class="L5"><span class="pnl">            </span><span class="tag">else</span></li><li class="L6"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> null</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d115">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/root/t/index/f-model-transformation.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> modelTransformers = {}</span></li><li class="L3"><span class="pnl">    </span><span class="tag">#</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Async execute a model transformation</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Transformers are searched in the PluginsManager</span></li><li class="L6"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.doModelTransformation</span></li><li class="L7"><span class="pnl">        </span><span class="tag">function</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> model</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> transformerName</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> context</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> transformer = modelTransformers[transformerName]</span></li><li class="L3"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !transformer</span></li><li class="L4"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> transformer = md.pluginsManager.getModelTransformer(transformerName)</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> transformer == null</span></li><li class="L6"><span class="pnl">                </span><span class="tag">var</span><span class="pln"> error = new errors.NotFoundError('doModelTransformation', transformerName, model.uri)</span></li><li class="L7"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> wizzi.fail.warn(error.message)</span></li><li class="L8"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> callback(error)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">else</span></li><li class="L0"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> modelTransformers[transformerName] = transformer</span></li><li class="L1"><span class="pnl">                </span><span class="tag">new</span><span class="pln"> transformer.trans</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> model</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> context</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> callback</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d116">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/root/t/index/f-schema-object.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> schemaDefinitions = {}</span></li><li class="L3"><span class="pnl">    </span><span class="tag">#</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Retrieve a WizziSchema definition in JSON format</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> schemaDefinitions are searched in the pluginsManager</span></li><li class="L6"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.getWizziSchemaDefinition</span></li><li class="L7"><span class="pnl">        </span><span class="tag">function</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> schemaName</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> definition = schemaDefinitions[schemaName]</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> !definition</span></li><li class="L1"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> definition = md.pluginsManager.getWizziSchemaDefinition(schemaName)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> definition != null</span></li><li class="L3"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> schemaDefinitions[schemaName] = definition</span></li><li class="L4"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> definition</span></li><li class="L5"><span class="pnl">            </span><span class="tag">else</span></li><li class="L6"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> null</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d117">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/root/t/index/pluginsManager.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.loadPlugins</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d118">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/root/t/index/start_runnerServer.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> startRunnerServer is async.</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Can be used at startup to load WizziModels, that is an async process,</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> implementing the onStart and onPrepare callbacks in the wizzifile.</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> During an mTree evaluation the calls to runnerServer</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> must be sync. Both $.api(name, query) and $.model(name, query)</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> are sync methods that operate on WizziModels or POJO</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> previously prepared.</span></li><li class="L0"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.startRunnerServer</span></li><li class="L1"><span class="pnl">        </span><span class="tag">function</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> options = (options || {})</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> runnerServerCWD = (options.cwd || process.cwd())</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> wizziFilePath = path.join(runnerServerCWD, 'wizzifile.js')</span></li><li class="L7"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> file.isFile(wizziFilePath)</span></li><li class="L8"><span class="pnl">                </span><span class="tag">set</span><span class="pln"> md.wizzifile = require(wizziFilePath)</span></li><li class="L9"><span class="pnl">                </span><span class="tag">log</span><span class="pln"> chalk.yellow(('WIZZI FILE ' + wizziFilePath))</span></li><li class="L0"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> md.wizzifile.onConfig</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> md.wizzifile.onConfig</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> config</span></li><li class="L3"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> result</span><span class="mix">)</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">var</span><span class="pln"> RunnerServer = require('./lib/services/runnerServer')</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> RunnerServer.init(runnerServerCWD, md)</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">var</span><span class="pln"> runnerServer = RunnerServer.instance</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> md.wizzifile.onStart</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> md.wizzifile.onStart</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> runnerServer</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> config</span></li><li class="L1"><span class="pnl">                                    </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> result </span><span class="mix">)</span></li><li class="L2"><span class="pnl">                                        </span><span class="tag">var</span><span class="pln"> check = checkRunnerServerOptions(options)</span></li><li class="L3"><span class="pnl">                                        </span><span class="tag">if</span><span class="pln"> check.__is_error</span></li><li class="L4"><span class="pnl">                                            </span><span class="tag">return</span></li><li class="L5"><span class="pnl">                                                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">                                                    </span><span class="tag">@</span><span class="pln"> check</span></li><li class="L7"><span class="pnl">                                        </span><span class="tag">_</span><span class="pln"> runnerServer.initializeFactory</span></li><li class="L8"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> options.userid</span></li><li class="L9"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> options.role</span></li><li class="L0"><span class="pnl">                                            </span><span class="tag">@</span><span class="pln"> options.storeKind</span></li><li class="L1"><span class="pnl">                                            </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> notUsed </span><span class="mix">)</span></li><li class="L2"><span class="pnl">                                                </span><span class="tag">if</span><span class="pln"> md.wizzifile.onPrepare</span></li><li class="L3"><span class="pnl">                                                    </span><span class="tag">_</span><span class="pln"> md.wizzifile.onPrepare</span></li><li class="L4"><span class="pnl">                                                        </span><span class="tag">@</span><span class="pln"> runnerServer</span></li><li class="L5"><span class="pnl">                                                        </span><span class="tag">@</span><span class="pln"> config</span></li><li class="L6"><span class="pnl">                                                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> result </span><span class="mix">)</span></li><li class="L7"><span class="pnl">                                                            </span><span class="tag">log</span><span class="pln"> chalk.yellow('WIZZI STARTED ON FOLDER ' + runnerServerCWD)</span></li><li class="L8"><span class="pnl">                                                            </span><span class="tag">return</span><span class="pln"> callback(null)</span></li><li class="L9"><span class="pnl">                                                </span><span class="tag">else</span></li><li class="L0"><span class="pnl">                                                    </span><span class="tag">log</span><span class="pln"> chalk.yellow('WIZZI STARTED ON FOLDER ' + runnerServerCWD)</span></li><li class="L1"><span class="pnl">                                                    </span><span class="tag">return</span><span class="pln"> callback(null)</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">else</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">log</span><span class="pln"> chalk.yellow('WIZZI STARTED ON FOLDER ' + runnerServerCWD)</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">return</span><span class="pln"> callback(null)</span></li><li class="L5"><span class="pnl">                </span><span class="tag">else</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">return</span><span class="pln"> callback(null)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">else</span></li><li class="L8"><span class="pnl">                </span><span class="tag">return</span><span class="pln"> callback(null)</span></li><li class="L9"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> checkRunnerServerOptions</span></li><li class="L0"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L1"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> verify.isString(options.userid) == false</span></li><li class="L2"><span class="pnl">            </span><span class="tag">return</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'INVALID_OPTIONS'</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'wizzi/startRunnerServer/checkRunnerServerOptions'</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'Missing userid option'</span></li><li class="L7"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> verify.isString(options.role) == false</span></li><li class="L8"><span class="pnl">            </span><span class="tag">return</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'INVALID_OPTIONS'</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'wizzi/startRunnerServer/checkRunnerServerOptions'</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'Missing role option'</span></li><li class="L3"><span class="pnl">        </span><span class="tag">return</span></li><li class="L4"><span class="pnl">            </span><span class="tag">{</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> __is_error false</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d119">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/root/t/index/start.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.createWizziFactory</span></li><li class="L4"><span class="pnl">        </span><span class="tag">function</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> store = options.store</span></li><li class="L8"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> create store</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> storeOptions = options.plugins</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> PluginsManager = require('./services/pluginsManager')</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> pluginsManager</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d120">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/root/t/index/wizzi_instance_job.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.executeInstanceJob</span></li><li class="L3"><span class="pnl">        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> request</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isFunction(callback) != true</span></li><li class="L7"><span class="pnl">                </span><span class="tag">throw</span><span class="pln"> new Error('wizzi.executeInstanceJob requires a callback function')</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isObject(request) != true</span></li><li class="L9"><span class="pnl">                </span><span class="tag">return</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 999</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'wizzi/index/executeInstanceJob'</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'The request parameter is required'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isObject(request.config) != true</span></li><li class="L6"><span class="pnl">                </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 999</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'wizzi/index/executeInstanceJob'</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'The request.configOptions property is required'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isObject(request.job) != true</span></li><li class="L3"><span class="pnl">                </span><span class="tag">return</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 999</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'wizzi/index/executeInstanceJob'</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'The request.wfschema property is required'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> user = request.user || 'stefi'</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> role = request.role || 'admin'</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> storeKind = request.storeKind || 'filesystem'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">#</span><span class="pln"> VIA set request.globalContext = Object.assign({}, request.globalContext)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'executeInstanceJob.user', user</span></li><li class="L4"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'executeInstanceJob.role', role</span></li><li class="L5"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'executeInstanceJob.storeKind', storeKind</span></li><li class="L6"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'executeInstanceJob.config', request.config</span></li><li class="L7"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'executeInstanceJob.job', request.job</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> md.startJobWizziFactoryInstance</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> user</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> role</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> storeKind</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> request.config</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> request.job</span></li><li class="L4"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> notUsed </span><span class="mix">)</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> md.executeJob</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> request.job</span></li><li class="L7"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> notUsed </span><span class="mix">)</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> md.terminateJobWizziFactoryInstance</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.executeJob</span></li><li class="L1"><span class="pnl">        </span><span class="tag">function</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> jobRequest</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'executeJob.jobRequest', jobRequest</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> jobName = jobRequest.name</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> path = jobRequest.path</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> productionOptions = jobRequest.productionOptions</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> globalContext = jobRequest.globalContext</span></li><li class="L9"><span class="pnl">            </span><span class="tag">+</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> pman</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> job_wizziFactory.createProductionManager</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> productionOptions</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> globalContext</span></li><li class="L4"><span class="pnl">            </span><span class="tag">+</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> pman.addWfJob</span></li><li class="L6"><span class="pnl">                </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> wfjob</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> src path</span></li><li class="L2"><span class="pnl">            </span><span class="tag">+</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> pman.run</span></li><li class="L4"><span class="pnl">                </span><span class="tag">function</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> result</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">var</span><span class="pln"> msg = 'WizziFactoryJob ' + jobName + '\nError running production: ' + path + '\n' + util.inspect(err, {depth: null})</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">throw</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">new</span><span class="pln"> Error(msg)</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> log.success('run completed')</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> pman.persistToFile</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> result</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">var</span><span class="pln"> msg = 'WizziFactoryJob ' + jobName + '\nError persisting production to file: ' + path + '\n' + util.inspect(err, {depth: null})</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">throw</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">new</span><span class="pln"> Error(msg)</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> log.success('persistToFile completed')</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">_</span><span class="pln"> callback(null, result)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d121">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/root/t/index/wizzi_instance.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> TODO</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> Why we cannot pass the wizziFactory instance created</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> for a job to the ProductionManager</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> avoiding a static object that must be guarded ???</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> job_wizziFactory = null</span></li><li class="L8"><span class="pnl">    </span><span class="tag">+</span></li><li class="L9"><span class="pnl">    </span><span class="tag">#</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> start a wizzi factory instance for a job execution</span></li><li class="L1"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.startJobWizziFactoryInstance</span></li><li class="L2"><span class="pnl">        </span><span class="tag">function</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> user</span></li><li class="L4"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> role</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> storeKind</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> configOptions</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> configJob</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> job_wizziFactory != null</span></li><li class="L0"><span class="pnl">                </span><span class="tag">#</span><span class="pln"> TODO enque wizzi job requests</span></li><li class="L1"><span class="pnl">                </span><span class="tag">throw</span><span class="pln"> new Error('A wizzi job already is running. Only one at a time is allowed.')</span></li><li class="L2"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'startJobWizziFactoryInstance.user', user</span></li><li class="L3"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'startJobWizziFactoryInstance.role', role</span></li><li class="L4"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'startJobWizziFactoryInstance.storeKind', storeKind</span></li><li class="L5"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'startJobWizziFactoryInstance.configOptions', configOptions</span></li><li class="L6"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'startJobWizziFactoryInstance.configJob', configJob</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> configOptions = Object.assign({}, configOptions)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> wfBaseFolder = configOptions.wfBaseFolder</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> wfBaseFolder && wfBaseFolder.length &gt; 0</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> md.config.set('wfBaseFolder', wfBaseFolder)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> repoUri = configOptions.repoUri</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> repoBaseFolderUri = configOptions.repoBaseFolderUri</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> plugins</span></li><li class="L4"><span class="pnl">                </span><span class="tag">[</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'wizzi-core'</span></li><li class="L6"><span class="pnl">            </span><span class="tag">foreach</span><span class="pln"> item in configOptions.plugins</span></li><li class="L7"><span class="pnl">                </span><span class="tag">if</span><span class="pln"> plugins.indexOf(item) &lt; 0</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> plugins.push(item)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'startJobWizziFactoryInstance.plugins', plugins</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> wizziFactory.createFactory</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> user</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> role</span></li><li class="L3"><span class="pnl">                </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> repo</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> storeKind storeKind</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> plugins</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> items plugins</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> globalContext configJob.globalContext || {}</span></li><li class="L1"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> wizziFactory </span><span class="mix">)</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">set</span><span class="pln"> job_wizziFactory = wizziFactory</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">log</span><span class="pln"> '*'</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">log</span><span class="pln"> '* module ' + __filename</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">log</span><span class="pln"> '*'</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">log</span><span class="pln"> chalk.yellow('WIZZI PRODUCTION INSTANCE STARTED')</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">return</span><span class="pln"> callback(null)</span></li><li class="L8"><span class="pnl">    </span><span class="tag">+</span></li><li class="L9"><span class="pnl">    </span><span class="tag">#</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> terminate a wizzi instance</span></li><li class="L1"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.terminateJobWizziFactoryInstance</span></li><li class="L2"><span class="pnl">        </span><span class="tag">function</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> job_wizziFactory = null</span></li><li class="L5"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> chalk.yellow('WIZZI PRODUCTION INSTANCE TERMINATED')</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> callback(null)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d122">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/root/t/index/wizzi_modelTypes.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> PARAMS</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> { request</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> string user</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> default stefi</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> string role</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> default admin</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> string storeKind</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> default filesystem</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> { configOptions</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> { wfschema</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> string name</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> string ittfDocumentUri</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> string outputPackageFolder</span></li><li class="L6"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.generateWizziModelTypes</span></li><li class="L7"><span class="pnl">        </span><span class="tag">function</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> request</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isFunction(callback) != true</span></li><li class="L1"><span class="pnl">                </span><span class="tag">throw</span><span class="pln"> new Error('wizzi.generateWizziModelTypes requires a callback function')</span></li><li class="L2"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isObject(request) != true</span></li><li class="L3"><span class="pnl">                </span><span class="tag">return</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 999</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'wizzi/index/generateWizziModelTypes'</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'The request parameter is required'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isObject(request.configOptions) != true</span></li><li class="L0"><span class="pnl">                </span><span class="tag">return</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 999</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'wizzi/index/generateWizziModelTypes'</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'The request.configOptions property is required'</span></li><li class="L6"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isObject(request.wfschema) != true</span></li><li class="L7"><span class="pnl">                </span><span class="tag">return</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 999</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'wizzi/index/generateWizziModelTypes'</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'The request.wfschema property is required'</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> user = request.user || 'stefi'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> role = request.role || 'admin'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> storeKind = request.storeKind || 'filesystem'</span></li><li class="L6"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> request.globalContext = Object.assign({}, request.globalContext)</span></li><li class="L7"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'generateWizziModelTypes.user', user</span></li><li class="L8"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'generateWizziModelTypes.role', role</span></li><li class="L9"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'generateWizziModelTypes.storeKind', storeKind</span></li><li class="L0"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'generateWizziModelTypes.configOptions', request.configOptions</span></li><li class="L1"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'generateWizziModelTypes.wfschema.name', request.wfschema.name</span></li><li class="L2"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'generateWizziModelTypes.wfschema.ittfDocumentUri', request.wfschema.ittfDocumentUri</span></li><li class="L3"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'generateWizziModelTypes.wfschema.outputPackageFolder', request.wfschema.outputPackageFolder</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> repoUri = request.configOptions.repoUri</span></li><li class="L5"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> repoBaseFolderUri = request.configOptions.repoBaseFolderUri</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> plugins</span></li><li class="L7"><span class="pnl">                </span><span class="tag">[</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'wizzi-core'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> request.configOptions.plugins</span></li><li class="L0"><span class="pnl">                </span><span class="tag">foreach</span><span class="pln"> item in request.configOptions.plugins</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> plugins.indexOf(item) &lt; 0</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> plugins.push(item)</span></li><li class="L3"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'generateWizziModelTypes.plugins', plugins</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> wizziFactory.createFactory</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> user</span></li><li class="L6"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> role</span></li><li class="L7"><span class="pnl">                </span><span class="tag">{</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> repo</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> storeKind storeKind</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> plugins</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> items plugins</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> globalContext request.globalContext</span></li><li class="L5"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> wizziFactory </span><span class="mix">)</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">#</span><span class="pln"> Now we can generate the wizzi model types</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">#</span><span class="pln"> They will be written in the folder passed as second parameter.</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">log</span><span class="pln"> chalk.yellow('STARTING WIZZI MODEL TYPES GENERATION FOR SCHEMA ' + request.wfschema.name)</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> wizziFactory.generateModelTypes</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> request.wfschema.ittfDocumentUri</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> request.wfschema.outputPackageFolder</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> request.wfschema.name</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d131">f_cb(</span><span class="arg"> result </span><span class="mix">)</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">log</span><span class="pln"> chalk.green('WIZZI MODEL TYPES GENERATED FOR SCHEMA ' + request.wfschema.name)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d123">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/root/index.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> util</span></li><li class="L4"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> path</span></li><li class="L5"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> chalk</span></li><li class="L6"><span class="pnl">    </span><span class="tag">+</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> file = require('./lib/util/file')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('./lib/util/verify')</span></li><li class="L9"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> config = require('./lib/config')</span></li><li class="L0"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> log = require('./lib/util/log')(module)</span></li><li class="L1"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> acl = require('./lib/acl')</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> productionOptions = require('./lib/production/options')</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> ProductionManager = require('./lib/production/manager')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> Filesystem = require('./lib/io/filesystem')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> wizziFactory = require('./lib/services/wizziFactory')</span></li><li class="L6"><span class="pnl">    </span><span class="tag">+</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> md = module.exports = {}</span></li><li class="L8"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.file = file</span></li><li class="L9"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.verify = verify</span></li><li class="L0"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.config = config</span></li><li class="L1"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.acl = acl</span></li><li class="L2"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.productionOptions = productionOptions</span></li><li class="L3"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.Filesystem = Filesystem</span></li><li class="L4"><span class="pnl">    </span><span class="tag">+</span></li><li class="L5"><span class="pnl">    </span><span class="tag">#</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> param options:Object {</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> repo:Object {</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> storeKind:String oneOf (filesystem, mongodb, localstorage)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L0"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> plugins:Object {</span></li><li class="L1"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> items:Array [</span></li><li class="L2"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> 'plugin-name',</span></li><li class="L3"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> ...</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> ]</span></li><li class="L5"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> globalContext:Object</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> }</span></li><li class="L8"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.createFactory</span></li><li class="L9"><span class="pnl">        </span><span class="tag">function</span></li><li class="L0"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> userid</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> role</span></li><li class="L2"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L3"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isFunction(callback) == false</span></li><li class="L5"><span class="pnl">                </span><span class="tag">throw</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">new</span><span class="pln"> Error</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 999</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'wizzi/index/createFactory(options, callback)'</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'The callback function parameter is required'</span></li><li class="L1"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isObject(options) == false</span></li><li class="L2"><span class="pnl">                </span><span class="tag">return</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 999</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'wizzi/index/createFactory(options, callback)'</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'The options object paramater is required'</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> wizziFactory.createFactory</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> userid</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> role</span></li><li class="L1"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L3"><span class="pnl">    </span><span class="tag">+</span></li><li class="L4"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.fsnoaclFactory</span></li><li class="L5"><span class="pnl">        </span><span class="tag">function</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> options</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isFunction(callback) == false</span></li><li class="L9"><span class="pnl">                </span><span class="tag">throw</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">new</span><span class="pln"> Error</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L2"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 999</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'wizzi/index/fsnoaclFactory(options, callback)'</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'The callback function parameter is required'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> verify.isObject(options) == false</span></li><li class="L6"><span class="pnl">                </span><span class="tag">return</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">_</span><span class="pln"> error</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 999</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'wizzi/index/fsnoaclFactory(options, callback)'</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'The options object paramater is required'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> options.repo</span></li><li class="L3"><span class="pnl">                </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> storeKind 'filesystem'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> md.createFactory</span></li><li class="L6"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'stefi'</span></li><li class="L7"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'admin'</span></li><li class="L8"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> callback</span></li><li class="L0"><span class="pnl">    </span><span class="tag">+</span></li><li class="L1"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d118"> index/start_runnerServer</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d121"> index/wizzi_instance</span></li><li class="L3"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d120"> index/wizzi_instance_job</span></li><li class="L4"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d122"> index/wizzi_modelTypes</span></li><li class="L5"><span class="pnl">    </span><span class="tag">+</span></li><li class="L6"><span class="pnl">    </span><span class="tag">function</span><span class="pln"> error</span></li><li class="L7"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> code</span></li><li class="L8"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> source</span></li><li class="L9"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> message</span></li><li class="L0"><span class="pnl">        </span><span class="tag">return</span></li><li class="L1"><span class="pnl">            </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> __is_error true</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> code code</span></li><li class="L4"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> source source</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> message message</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d124">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/root/package.json.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">{</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$</span></li><li class="L3"><span class="pnl">        </span><span class="expr">var</span><span class="expr"> pkgName = 'wizzi';</span></li><li class="L4"><span class="pnl">        </span><span class="expr">var</span><span class="expr"> app = {</span></li><li class="L5"><span class="pnl">            </span><span class="expr">name:</span><span class="expr"> pkgName,</span></li><li class="L6"><span class="pnl">            </span><span class="expr">version:</span><span class="expr"> '0.3.1',</span></li><li class="L7"><span class="pnl">            </span><span class="expr">description:</span><span class="expr"> 'The wizzi factory main package.',</span></li><li class="L8"><span class="pnl">            </span><span class="expr">private:</span><span class="expr"> false,</span></li><li class="L9"><span class="pnl">            </span><span class="expr">license:</span><span class="expr"> { type: 'MIT', url: 'https://github.com/wizzifactory/' + pkgName + '/blob/master/license.txt' },</span></li><li class="L0"><span class="pnl">            </span><span class="expr">repository:</span><span class="expr"> { url: 'https://github.com/wizzifactory/' + pkgName + '.git' },</span></li><li class="L1"><span class="pnl">            </span><span class="expr">author:</span><span class="expr"> { name: 'Stefano Bassoli', email: 'sbassoli.dev@gmail.com' }</span></li><li class="L2"><span class="pnl">        </span><span class="expr">};</span></li><li class="L3"><span class="pnl">    </span><span class="tag">name</span><span class="pln"> "</span><span class="kwd">${</span><span class="expr">app.name</span><span class="kwd">}</span><span class="pln">"</span></li><li class="L4"><span class="pnl">    </span><span class="tag">version</span><span class="pln"> "</span><span class="kwd">${</span><span class="expr">app.version</span><span class="kwd">}</span><span class="pln">"</span></li><li class="L5"><span class="pnl">    </span><span class="tag">description</span><span class="pln"> "</span><span class="kwd">${</span><span class="expr">app.description</span><span class="kwd">}</span><span class="pln">"</span></li><li class="L6"><span class="pnl">    </span><span class="tag">author</span></li><li class="L7"><span class="pnl">        </span><span class="tag">{</span></li><li class="L8"><span class="pnl">            </span><span class="tag">name</span><span class="pln"> "</span><span class="kwd">${</span><span class="expr">app.author.name</span><span class="kwd">}</span><span class="pln">"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">email</span><span class="pln"> "</span><span class="kwd">${</span><span class="expr">app.author.email</span><span class="kwd">}</span><span class="pln">"</span></li><li class="L0"><span class="pnl">    </span><span class="tag">private</span><span class="kwd"> ${</span><span class="expr">app.private</span><span class="kwd">}</span></li><li class="L1"><span class="pnl">    </span><span class="tag">licenses</span></li><li class="L2"><span class="pnl">        </span><span class="tag">[</span></li><li class="L3"><span class="pnl">            </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                </span><span class="tag">type</span><span class="pln"> "</span><span class="kwd">${</span><span class="expr">app.license.type</span><span class="kwd">}</span><span class="pln">"</span></li><li class="L5"><span class="pnl">                </span><span class="tag">url</span><span class="pln"> "</span><span class="kwd">${</span><span class="expr">app.license.url</span><span class="kwd">}</span><span class="pln">"</span></li><li class="L6"><span class="pnl">    </span><span class="tag">repository</span></li><li class="L7"><span class="pnl">        </span><span class="tag">{</span></li><li class="L8"><span class="pnl">            </span><span class="tag">type</span><span class="pln"> "git"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">url</span><span class="pln"> "</span><span class="kwd">${</span><span class="expr">app.repository.url</span><span class="kwd">}</span><span class="pln">"</span></li><li class="L0"><span class="pnl">    </span><span class="tag">engines</span></li><li class="L1"><span class="pnl">        </span><span class="tag">{</span></li><li class="L2"><span class="pnl">            </span><span class="tag">node</span><span class="pln"> "&gt;=0.10.28"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">npm</span><span class="pln"> "&gt;=1.4.28"</span></li><li class="L4"><span class="pnl">    </span><span class="tag">scripts</span></li><li class="L5"><span class="pnl">        </span><span class="tag">{</span></li><li class="L6"><span class="pnl">            </span><span class="tag">test</span><span class="pln"> "mocha tests/**/*.js --full-trace"</span></li><li class="L7"><span class="pnl">    </span><span class="tag">dependencies</span></li><li class="L8"><span class="pnl">        </span><span class="tag">{</span></li><li class="L9"><span class="pnl">            </span><span class="tag">async</span><span class="pln"> "^2.1.5"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">chalk</span><span class="pln"> "^1.1.3"</span></li><li class="L1"><span class="pnl">            </span><span class="tag">iconv-lite</span><span class="pln"> "^0.4.15"</span></li><li class="L2"><span class="pnl">            </span><span class="tag">json-stringify-safe</span><span class="pln"> "^5.0.1"</span></li><li class="L3"><span class="pnl">            </span><span class="tag">lodash</span><span class="pln"> "^4.17.4"</span></li><li class="L4"><span class="pnl">            </span><span class="tag">wizzi-mtree</span><span class="pln"> "wizzifactory/wizzi-mtree"</span></li><li class="L5"><span class="pnl">            </span><span class="tag">wizzi-repo</span><span class="pln"> "wizzifactory/wizzi-repo"</span></li><li class="L6"><span class="pnl">    </span><span class="tag">devDependencies</span></li><li class="L7"><span class="pnl">        </span><span class="tag">{</span></li><li class="L8"><span class="pnl">            </span><span class="tag">del</span><span class="pln"> "^2.2.2"</span></li><li class="L9"><span class="pnl">            </span><span class="tag">expect.js</span><span class="pln"> "^0.3.1"</span></li><li class="L0"><span class="pnl">            </span><span class="tag">mocha</span><span class="pln"> "^1.20.1"</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d125">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/t/checked_call_return_set.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> varName</span></li><li class="L3"><span class="pnl">    </span><span class="tag">set</span><span class="kwd"> ${</span><span class="expr">varName</span><span class="kwd">}</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$hook</span></li><li class="L5"><span class="pnl">    </span><span class="tag">if</span><span class="kwd"> ${</span><span class="expr">varName</span><span class="kwd">}</span><span class="pln"> && </span><span class="kwd">${</span><span class="expr">varName</span><span class="kwd">}</span><span class="pln">.__is_error</span></li><li class="L6"><span class="pnl">        </span><span class="tag">return</span><span class="kwd"> ${</span><span class="expr">varName</span><span class="kwd">}</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d126">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/t/checked_call_return.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> varName</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="kwd"> ${</span><span class="expr">varName</span><span class="kwd">}</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$hook</span></li><li class="L5"><span class="pnl">    </span><span class="tag">if</span><span class="kwd"> ${</span><span class="expr">varName</span><span class="kwd">}</span><span class="pln"> && </span><span class="kwd">${</span><span class="expr">varName</span><span class="kwd">}</span><span class="pln">.__is_error</span></li><li class="L6"><span class="pnl">        </span><span class="tag">return</span><span class="kwd"> ${</span><span class="expr">varName</span><span class="kwd">}</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d127">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/t/checked_call.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> varName, message|@@null</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="kwd"> ${</span><span class="expr">varName</span><span class="kwd">}</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$hook</span></li><li class="L5"><span class="pnl">    </span><span class="tag">if</span><span class="kwd"> ${</span><span class="expr">varName</span><span class="kwd">}</span><span class="pln"> && </span><span class="kwd">${</span><span class="expr">varName</span><span class="kwd">}</span><span class="pln">.__is_error</span></li><li class="L6"><span class="pnl">        </span><span class="tag">log</span><span class="pln"> '__is_error </span><span class="kwd">${</span><span class="expr">message</span><span class="kwd">}</span><span class="pln">', </span><span class="kwd">${</span><span class="expr">varName</span><span class="kwd">}</span></li><li class="L7"><span class="pnl">        </span><span class="tag">return</span><span class="pln"> callback(</span><span class="kwd">${</span><span class="expr">varName</span><span class="kwd">}</span><span class="pln">)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d128">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/t/error.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> name, arg1|@@null, arg2|@@null, arg3|@@null, arg4|@@null</span></li><li class="L3"><span class="pnl">    </span><span class="tag">function</span><span class="kwd"> ${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">Error</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$if</span><span class="expr"> arg1 != null</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="kwd"> ${</span><span class="expr">arg1</span><span class="kwd">}</span></li><li class="L6"><span class="pnl">        </span><span class="kwd">$if</span><span class="expr"> arg2 != null</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="kwd"> ${</span><span class="expr">arg2</span><span class="kwd">}</span></li><li class="L8"><span class="pnl">        </span><span class="kwd">$if</span><span class="expr"> arg3 != null</span></li><li class="L9"><span class="pnl">            </span><span class="tag">param</span><span class="kwd"> ${</span><span class="expr">arg3</span><span class="kwd">}</span></li><li class="L0"><span class="pnl">        </span><span class="kwd">$if</span><span class="expr"> arg4 != null</span></li><li class="L1"><span class="pnl">            </span><span class="tag">param</span><span class="kwd"> ${</span><span class="expr">arg4</span><span class="kwd">}</span></li><li class="L2"><span class="pnl">        </span><span class="tag">set</span><span class="pln"> this.name = '</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">Error'</span></li><li class="L3"><span class="pnl">        </span><span class="kwd">$hook</span></li><li class="L4"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> 5/10/17 set this.stack = (new Error()).stack</span></li><li class="L5"><span class="pnl">    </span><span class="tag">set</span><span class="kwd"> ${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">Error.prototype.toString</span></li><li class="L6"><span class="pnl">        </span><span class="tag">function</span></li><li class="L7"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> this.message</span></li><li class="L8"><span class="pnl">    </span><span class="tag">set</span><span class="kwd"> ${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">Error.prototype = Object.create(Error.prototype)</span></li><li class="L9"><span class="pnl">    </span><span class="tag">set</span><span class="kwd"> ${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">Error.prototype.constructor = </span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">Error</span></li><li class="L0"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">Error = </span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">Error</span></li><li class="L1"><span class="pnl">    </span><span class="tag">+</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d129">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/t/f_cb_no_err.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> result</span></li><li class="L3"><span class="pnl">    </span><span class="tag">function</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="kwd"> ${</span><span class="expr">result</span><span class="kwd">}</span></li><li class="L6"><span class="pnl">        </span><span class="kwd">$hook</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d130">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/t/f_cb_test.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> result|notUsed</span></li><li class="L3"><span class="pnl">    </span><span class="tag">function</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="kwd"> ${</span><span class="expr">result</span><span class="kwd">}</span></li><li class="L6"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L7"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'err', err</span></li><li class="L8"><span class="pnl">            </span><span class="tag">throw</span><span class="pln"> new Error(err.message)</span></li><li class="L9"><span class="pnl">        </span><span class="kwd">$hook</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d131">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/t/f_cb.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> result</span></li><li class="L3"><span class="pnl">    </span><span class="tag">function</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="kwd"> ${</span><span class="expr">result</span><span class="kwd">}</span></li><li class="L6"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L7"><span class="pnl">            </span><span class="tag">return</span></li><li class="L8"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> err</span></li><li class="L0"><span class="pnl">        </span><span class="kwd">$hook</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d132">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/t/r_cb_error.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">return</span></li><li class="L3"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> callback</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> this.error</span></li><li class="L5"><span class="pnl">                </span><span class="kwd">$hook</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d133">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/artifact/ittf__copy/gc_one.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">first</span><span class="pln"> one</span></li><li class="L2"><span class="pnl">    </span><span class="tag">second</span><span class="pln"> one</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d134">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/artifact/genContext.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">+</span></li><li class="L4"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> path</span></li><li class="L5"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> del</span></li><li class="L6"><span class="pnl">    </span><span class="tag">+</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> expect = require('expect.js')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> genContext = require('../../lib/artifact/genContext')</span></li><li class="L9"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> StringWriter = require('../../lib/util/stringwriter')</span></li><li class="L0"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> mocks = require('../mocks/misc')</span></li><li class="L1"><span class="pnl">    </span><span class="tag">+</span></li><li class="L2"><span class="pnl">    </span><span class="tag">describe</span><span class="pln"> genContext</span></li><li class="L3"><span class="pnl">        </span><span class="tag">it</span><span class="pln"> should write a simple interpolated text</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ctx</span></li><li class="L5"><span class="pnl">                </span><span class="tag">new</span><span class="pln"> genContext</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> data</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> indentSpaces 4</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> CRLF '\n'</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> isDebugLine false</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> indent 0</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> model null</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> srcPath null</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> pman null</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.write('alfa')</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.w(' beta')</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.a('x', 'gamma')</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.w('{x}')</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.a('YYY', 'tau')</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.w('{YYY}')</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> result = ctx.getContent()</span></li><li class="L5"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d158">tobe_string(</span><span class="arg"> result</span><span class="pln">,</span><span class="arg">  alfa beta\ngamma\ntau\n </span><span class="mix">)</span></li><li class="L6"><span class="pnl">        </span><span class="tag">it</span><span class="pln"> should write an indented interpolated text</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ctx</span></li><li class="L8"><span class="pnl">                </span><span class="tag">new</span><span class="pln"> genContext</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> data</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> indentSpaces 4</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> CRLF '\n'</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> isDebugLine false</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> indent 0</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> model null</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> srcPath null</span></li><li class="L0"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> pman null</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.write('alfa')</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.w(' beta')</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.a('x', 'gamma')</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.indent()</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.w('{x}')</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.a('YYY', 'tau')</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.deindent()</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.w('{YYY}')</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.indent(2)</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.w('sigma')</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.deindent(2)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.w('lambda')</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> result = ctx.getContent()</span></li><li class="L4"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d158">tobe_string(</span><span class="arg"> result</span><span class="pln">,</span><span class="arg">  alfa beta\n    gamma\ntau\n        sigma\nlambda\n </span><span class="mix">)</span></li><li class="L5"><span class="pnl">        </span><span class="tag">it</span><span class="pln"> should write an indented interpolated text with a file append</span></li><li class="L6"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ctx</span></li><li class="L7"><span class="pnl">                </span><span class="tag">new</span><span class="pln"> genContext</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> data</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> indentSpaces 4</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> CRLF '\n'</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> isDebugLine false</span></li><li class="L6"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> indent 0</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> model null</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> srcPath null</span></li><li class="L9"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> pman null</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.write('alfa')</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.w(' beta')</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.a('x', 'gamma')</span></li><li class="L3"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.indent()</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.w('{x}')</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.a('YYY', 'tau')</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.deindent()</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.w('{YYY}')</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.indent(2)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.w('sigma')</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.appendFile</span></li><li class="L1"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> __dirname</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'ittf'</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'gc_one.ittf'</span></li><li class="L5"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.deindent(2)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.w('lambda')</span></li><li class="L7"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> result = ctx.getContent()</span></li><li class="L8"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d158">tobe_string(</span><span class="arg"> result</span><span class="pln">,</span><span class="arg">  alfa beta\n    gamma\ntau\n        sigma\n        first one\n\n            second one\nlambda\n </span><span class="mix">)</span></li><li class="L9"><span class="pnl">        </span><span class="tag">it</span><span class="pln"> should write a file</span></li><li class="L0"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> ctx</span></li><li class="L1"><span class="pnl">                </span><span class="tag">new</span><span class="pln"> genContext</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> options</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">{</span></li><li class="L5"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> data</span></li><li class="L6"><span class="pnl">                                    </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> indentSpaces 4</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> CRLF '\n'</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> isDebugLine false</span></li><li class="L0"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> indent 0</span></li><li class="L1"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> model null</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> srcPath null</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> pman null</span></li><li class="L4"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.writeFile</span></li><li class="L5"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L6"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> __dirname</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'ittf'</span></li><li class="L8"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'gc_one.ittf'</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> sw = new StringWriter()</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> ctx.toStream(sw)</span></li><li class="L1"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> result = sw.toString()</span></li><li class="L2"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d158">tobe_string(</span><span class="arg"> result</span><span class="pln">,</span><span class="arg">  first one\n\n\tsecond one\n </span><span class="mix">)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d135">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/mocks/misc.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> ProductionManager = require('../../lib/production/manager')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> acl = require('../../lib/acl')</span></li><li class="L5"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> md = module.exports = {}</span></li><li class="L6"><span class="pnl">    </span><span class="tag">set</span><span class="pln"> md.getProductionManager</span></li><li class="L7"><span class="pnl">        </span><span class="tag">function</span></li><li class="L8"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> aclStat = new acl.AclStat('stefi', 'admin')</span></li><li class="L9"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> pman = new ProductionManager({})</span></li><li class="L0"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> pman.aclStat(aclStat);</span></li><li class="L1"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> pman.globalContext</span></li><li class="L2"><span class="pnl">                </span><span class="tag">{</span></li><li class="L3"><span class="pnl">            </span><span class="tag">return</span><span class="pln"> pman</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d136">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/services/ittf__copy/css/simple.css.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">css</span></li><li class="L2"><span class="pnl">    </span><span class="tag">.</span><span class="pln"> home</span></li><li class="L3"><span class="pnl">        </span><span class="tag">color</span><span class="pln"> blue</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d137">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/services/ittf__copy/html/simple.html.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">html</span></li><li class="L2"><span class="pnl">    </span><span class="tag">head</span></li><li class="L3"><span class="pnl">        </span><span class="tag">body</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d138">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/services/ittf__copy/wfschema/simple.wfschema.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">wfschema</span><span class="pln"> rdbms</span></li><li class="L2"><span class="pnl">    </span><span class="tag">e</span><span class="pln"> rdbms</span></li><li class="L3"><span class="pnl">        </span><span class="tag">r</span><span class="pln"> table/s</span></li><li class="L4"><span class="pnl">    </span><span class="tag">e</span><span class="pln"> table</span></li><li class="L5"><span class="pnl">        </span><span class="tag">r</span><span class="pln"> column/s</span></li><li class="L6"><span class="pnl">    </span><span class="tag">e</span><span class="pln"> column</span></li><li class="L7"><span class="pnl">        </span><span class="tag">a</span><span class="pln"> type</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d139">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/services/t/wizzifactory/modelTypes.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="tag">+</span></li><li class="L3"><span class="pnl">    </span><span class="tag">describe</span><span class="pln"> wizzi factory</span></li><li class="L4"><span class="pnl">        </span><span class="tag">+</span></li><li class="L5"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> simpleWfSchemaUri</span></li><li class="L6"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L7"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> __dirname</span></li><li class="L8"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'ittf'</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'wfschema'</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'simple.wfschema.ittf'</span></li><li class="L1"><span class="pnl">        </span><span class="tag">var</span><span class="pln"> simpleWfSchemaPackagePath</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> __dirname</span></li><li class="L4"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'outputs'</span></li><li class="L5"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'packages'</span></li><li class="L6"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'wizzi-test-lab'</span></li><li class="L7"><span class="pnl">        </span><span class="tag">it-async</span><span class="pln"> should generate model types for a simple wfschema</span></li><li class="L8"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> wizziFactory.createWizziFactory</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'stefi'</span></li><li class="L0"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'admin'</span></li><li class="L1"><span class="pnl">                </span><span class="tag">{</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> repo</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> storeKind 'filesystem'</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> plugins</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> items</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">[</span></li><li class="L9"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'wizzi-core'</span></li><li class="L0"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d148">f_cb_test(</span><span class="arg"> wf </span><span class="mix">)</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> wf.generateModelTypes</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> simpleWfSchemaUri</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> simpleWfSchemaPackagePath</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'rdbms'</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d148">f_cb_test(</span><span class="arg"> notUsed </span><span class="mix">)</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">log</span><span class="pln"> 'generateModelTypes done'</span></li><li class="L8"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> done</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d140">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/services/pluginsManager.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">+</span></li><li class="L4"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> path</span></li><li class="L5"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> del</span></li><li class="L6"><span class="pnl">    </span><span class="tag">+</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> expect = require('expect.js')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> pluginsManager = require('../../lib/services/pluginsManager')</span></li><li class="L9"><span class="pnl">    </span><span class="tag">+</span></li><li class="L0"><span class="pnl">    </span><span class="tag">describe</span><span class="pln"> plugins manager</span></li><li class="L1"><span class="pnl">        </span><span class="tag">it-async</span><span class="pln"> should create form options config</span></li><li class="L2"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> pluginsManager.createManager</span></li><li class="L3"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> null</span></li><li class="L4"><span class="pnl">                </span><span class="tag">{</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> items</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">[</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> 'wizzi-html'</span></li><li class="L8"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d148">f_cb_test(</span><span class="arg"> pm </span><span class="mix">)</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> done</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d141">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/services/wizziFactory.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">+</span></li><li class="L4"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> path</span></li><li class="L5"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> del</span></li><li class="L6"><span class="pnl">    </span><span class="tag">+</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> expect = require('expect.js')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> wizziFactory = require('../../lib/services/wizziFactory')</span></li><li class="L9"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> mocks = require('../mocks/misc')</span></li><li class="L0"><span class="pnl">    </span><span class="tag">+</span></li><li class="L1"><span class="pnl">    </span><span class="tag">+</span></li><li class="L2"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> simpleCssIttf</span></li><li class="L3"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L4"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> __dirname</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'ittf'</span></li><li class="L6"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'css'</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'simple.css.ittf'</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> simpleHtmlIttf</span></li><li class="L9"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L0"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> __dirname</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'ittf'</span></li><li class="L2"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'html'</span></li><li class="L3"><span class="pnl">            </span><span class="tag">@</span><span class="pln"> 'simple.html.ittf'</span></li><li class="L4"><span class="pnl">    </span><span class="tag">+</span></li><li class="L5"><span class="pnl">    </span><span class="tag">describe</span><span class="pln"> wizzi factory</span></li><li class="L6"><span class="pnl">        </span><span class="tag">it-async</span><span class="pln"> should create form options config</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> wizziFactory.createFactory</span></li><li class="L8"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'stefi'</span></li><li class="L9"><span class="pnl">                </span><span class="tag">@</span><span class="pln"> 'admin'</span></li><li class="L0"><span class="pnl">                </span><span class="tag">{</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> repo</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> storeKind 'filesystem'</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> plugins</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> items</span></li><li class="L7"><span class="pnl">                                </span><span class="tag">[</span></li><li class="L8"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> 'wizzi-html'</span></li><li class="L9"><span class="pnl">                </span><span class="mix frag-to-link-a" data-frag-id="d148">f_cb_test(</span><span class="arg"> wf </span><span class="mix">)</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">var</span><span class="pln"> pman = wf.createProductionManager()</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> wf.loadModel</span></li><li class="L2"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> simpleCssIttf</span></li><li class="L3"><span class="pnl">                        </span><span class="tag">{</span></li><li class="L4"><span class="pnl">                            </span><span class="tag">@</span><span class="pln"> __productionManager pman</span></li><li class="L5"><span class="pnl">                        </span><span class="mix frag-to-link-a" data-frag-id="d148">f_cb_test(</span><span class="arg"> wizziModel </span><span class="mix">)</span></li><li class="L6"><span class="pnl">                            </span><span class="tag">log</span><span class="pln"> 'wizziModel', wizziModel</span></li><li class="L7"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> wf.loadModel</span></li><li class="L8"><span class="pnl">                                </span><span class="tag">@</span><span class="pln"> simpleHtmlIttf</span></li><li class="L9"><span class="pnl">                                </span><span class="tag">{</span></li><li class="L0"><span class="pnl">                                    </span><span class="tag">@</span><span class="pln"> __productionManager pman</span></li><li class="L1"><span class="pnl">                                </span><span class="mix frag-to-link-a" data-frag-id="d148">f_cb_test(</span><span class="arg"> wizziModel </span><span class="mix">)</span></li><li class="L2"><span class="pnl">                                    </span><span class="tag">log</span><span class="pln"> 'wizziModel', wizziModel</span></li><li class="L3"><span class="pnl">                                    </span><span class="tag">_</span><span class="pln"> done</span></li><li class="L4"><span class="pnl">    </span><span class="tag">+</span></li><li class="L5"><span class="pnl">    </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="d139"> wizzifactory/modelTypes</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d142">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/async.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> call, arg1|@@null, arg2|@@null, arg3|@@null, arg4|@@null, arg5|@@null, arg6|@@null</span></li><li class="L3"><span class="pnl">    </span><span class="tag">_</span><span class="kwd"> ${</span><span class="expr">call</span><span class="kwd">}</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$if</span><span class="expr"> arg1 != null</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="kwd"> ${</span><span class="expr">arg1</span><span class="kwd">}</span></li><li class="L6"><span class="pnl">        </span><span class="kwd">$if</span><span class="expr"> arg2 != null</span></li><li class="L7"><span class="pnl">            </span><span class="tag">@</span><span class="kwd"> ${</span><span class="expr">arg2</span><span class="kwd">}</span></li><li class="L8"><span class="pnl">        </span><span class="kwd">$if</span><span class="expr"> arg3 != null</span></li><li class="L9"><span class="pnl">            </span><span class="tag">@</span><span class="kwd"> ${</span><span class="expr">arg3</span><span class="kwd">}</span></li><li class="L0"><span class="pnl">        </span><span class="kwd">$if</span><span class="expr"> arg4 != null</span></li><li class="L1"><span class="pnl">            </span><span class="tag">@</span><span class="kwd"> ${</span><span class="expr">arg4</span><span class="kwd">}</span></li><li class="L2"><span class="pnl">        </span><span class="kwd">$if</span><span class="expr"> arg5 != null</span></li><li class="L3"><span class="pnl">            </span><span class="tag">@</span><span class="kwd"> ${</span><span class="expr">arg5</span><span class="kwd">}</span></li><li class="L4"><span class="pnl">        </span><span class="kwd">$if</span><span class="expr"> arg6 != null</span></li><li class="L5"><span class="pnl">            </span><span class="tag">@</span><span class="kwd"> ${</span><span class="expr">arg6</span><span class="kwd">}</span></li><li class="L6"><span class="pnl">        </span><span class="tag">function</span></li><li class="L7"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L8"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> result</span></li><li class="L9"><span class="pnl">            </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L0"><span class="pnl">                </span><span class="tag">throw</span><span class="pln"> new Error()</span></li><li class="L1"><span class="pnl">            </span><span class="kwd">$hook</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d143">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/co_run_test.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> method</span></li><li class="L3"><span class="pnl">    </span><span class="tag">it-async</span><span class="kwd"> ${</span><span class="expr">method</span><span class="kwd">}</span></li><li class="L4"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> co</span></li><li class="L5"><span class="pnl">            </span><span class="tag">function*</span></li><li class="L6"><span class="pnl">                </span><span class="kwd">$hook</span></li><li class="L7"><span class="pnl">            </span><span class="tag">._</span><span class="pln"> then</span></li><li class="L8"><span class="pnl">                </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> done()</span></li><li class="L0"><span class="pnl">            </span><span class="tag">._</span><span class="pln"> catch</span></li><li class="L1"><span class="pnl">                </span><span class="tag">function</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> done()</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> console.log</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'catched in </span><span class="kwd">${</span><span class="expr">method</span><span class="kwd">}</span><span class="pln">.co'</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> err.message</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">throw</span><span class="pln"> err</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d144">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/co_run.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> method</span></li><li class="L3"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> co</span></li><li class="L4"><span class="pnl">        </span><span class="tag">function*</span></li><li class="L5"><span class="pnl">            </span><span class="kwd">$hook</span></li><li class="L6"><span class="pnl">        </span><span class="tag">._</span><span class="pln"> catch</span></li><li class="L7"><span class="pnl">            </span><span class="tag">function</span></li><li class="L8"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L9"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> console.log</span></li><li class="L0"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> 'catched in </span><span class="kwd">${</span><span class="expr">method</span><span class="kwd">}</span><span class="pln">.co'</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> err.message</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">@</span><span class="pln"> err.stack</span></li><li class="L3"><span class="pnl">                </span><span class="kwd">$hook</span><span class="pln"> oncatch</span></li><li class="L4"><span class="pnl">                </span><span class="tag">throw</span><span class="pln"> err</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d145">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/expect_throw_error.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> error</span></li><li class="L3"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> expect</span></li><li class="L4"><span class="pnl">        </span><span class="tag">function</span><span class="pln"> fn</span></li><li class="L5"><span class="pnl">            </span><span class="kwd">$hook</span></li><li class="L6"><span class="pnl">        </span><span class="tag">.</span><span class="pln"> to</span></li><li class="L7"><span class="pnl">        </span><span class="tag">._</span><span class="pln"> throwException</span></li><li class="L8"><span class="pnl">            </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                </span><span class="tag">param</span><span class="pln"> e</span></li><li class="L0"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> expect(e).to.be.a(errors.</span><span class="kwd">${</span><span class="expr">error</span><span class="kwd">}</span><span class="pln">)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d146">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/f_cb_done.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> result|notUsed</span></li><li class="L3"><span class="pnl">    </span><span class="tag">function</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="kwd"> ${</span><span class="expr">result</span><span class="kwd">}</span></li><li class="L6"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L7"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'err', err</span></li><li class="L8"><span class="pnl">            </span><span class="tag">throw</span><span class="pln"> new Error(err.message)</span></li><li class="L9"><span class="pnl">        </span><span class="kwd">$hook</span></li><li class="L0"><span class="pnl">        </span><span class="tag">_</span><span class="pln"> done</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d147">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/f_cb_no_err.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> result|notUsed</span></li><li class="L3"><span class="pnl">    </span><span class="tag">function</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="kwd"> ${</span><span class="expr">result</span><span class="kwd">}</span></li><li class="L6"><span class="pnl">        </span><span class="kwd">$hook</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d148">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/f_cb_test.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> result|notUsed</span></li><li class="L3"><span class="pnl">    </span><span class="tag">function</span></li><li class="L4"><span class="pnl">        </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L5"><span class="pnl">        </span><span class="tag">param</span><span class="kwd"> ${</span><span class="expr">result</span><span class="kwd">}</span></li><li class="L6"><span class="pnl">        </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L7"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'err', err</span></li><li class="L8"><span class="pnl">            </span><span class="tag">throw</span><span class="pln"> new Error(err.message)</span></li><li class="L9"><span class="pnl">        </span><span class="kwd">$hook</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d149">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/itasync.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> title, call, arg1|@@null, arg2|@@null, arg3|@@null, arg4|@@null, arg5|@@null, arg6|@@null</span></li><li class="L3"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> it</span></li><li class="L4"><span class="pnl">        </span><span class="tag">@</span><span class="pln"> "</span><span class="kwd">${</span><span class="expr">title</span><span class="kwd">}</span><span class="pln">"</span></li><li class="L5"><span class="pnl">        </span><span class="tag">function</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> done</span></li><li class="L7"><span class="pnl">            </span><span class="tag">_</span><span class="kwd"> ${</span><span class="expr">call</span><span class="kwd">}</span></li><li class="L8"><span class="pnl">                </span><span class="kwd">$if</span><span class="expr"> arg1 != null</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="kwd"> ${</span><span class="expr">arg1</span><span class="kwd">}</span></li><li class="L0"><span class="pnl">                </span><span class="kwd">$if</span><span class="expr"> arg2 != null</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">@</span><span class="kwd"> ${</span><span class="expr">arg2</span><span class="kwd">}</span></li><li class="L2"><span class="pnl">                </span><span class="kwd">$if</span><span class="expr"> arg3 != null</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">@</span><span class="kwd"> ${</span><span class="expr">arg3</span><span class="kwd">}</span></li><li class="L4"><span class="pnl">                </span><span class="kwd">$if</span><span class="expr"> arg4 != null</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">@</span><span class="kwd"> ${</span><span class="expr">arg4</span><span class="kwd">}</span></li><li class="L6"><span class="pnl">                </span><span class="kwd">$if</span><span class="expr"> arg5 != null</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">@</span><span class="kwd"> ${</span><span class="expr">arg5</span><span class="kwd">}</span></li><li class="L8"><span class="pnl">                </span><span class="kwd">$if</span><span class="expr"> arg6 != null</span></li><li class="L9"><span class="pnl">                    </span><span class="tag">@</span><span class="kwd"> ${</span><span class="expr">arg6</span><span class="kwd">}</span></li><li class="L0"><span class="pnl">                </span><span class="tag">function</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> result</span></li><li class="L3"><span class="pnl">                    </span><span class="kwd">$hook</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d150">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/mongo_before_async.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">before-async</span></li><li class="L2"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> MongoClient.connect</span></li><li class="L3"><span class="pnl">        </span><span class="tag">@</span><span class="pln"> 'mongodb://localhost:27017/test'</span></li><li class="L4"><span class="pnl">        </span><span class="tag">function</span></li><li class="L5"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L6"><span class="pnl">            </span><span class="tag">param</span><span class="pln"> db</span></li><li class="L7"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> fsdb = new FsDb(db)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">set</span><span class="pln"> doc = new Document(fsdb)</span></li><li class="L9"><span class="pnl">            </span><span class="tag">_</span><span class="pln"> db.collection(FSITEMS).drop</span></li><li class="L0"><span class="pnl">                </span><span class="tag">function</span></li><li class="L1"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L2"><span class="pnl">                    </span><span class="tag">param</span><span class="pln"> result</span></li><li class="L3"><span class="pnl">                    </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L4"><span class="pnl">                        </span><span class="tag">log</span><span class="pln"> 'FSITEMS.drop failed'</span></li><li class="L5"><span class="pnl">                    </span><span class="tag">else</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">log</span><span class="pln"> 'FSITEMS.drop result', result</span></li><li class="L7"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> db.collection(DOCUMENTS).drop</span></li><li class="L8"><span class="pnl">                        </span><span class="tag">function</span></li><li class="L9"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> err</span></li><li class="L0"><span class="pnl">                            </span><span class="tag">param</span><span class="pln"> result</span></li><li class="L1"><span class="pnl">                            </span><span class="tag">if</span><span class="pln"> err</span></li><li class="L2"><span class="pnl">                                </span><span class="tag">log</span><span class="pln"> 'DOCUMENTS.drop failed'</span></li><li class="L3"><span class="pnl">                            </span><span class="tag">else</span></li><li class="L4"><span class="pnl">                                </span><span class="tag">log</span><span class="pln"> 'DOCUMENTS.drop result', result</span></li><li class="L5"><span class="pnl">                            </span><span class="tag">_</span><span class="pln"> done()</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d151">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/tobe_array.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> name, length</span></li><li class="L3"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> expect(</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">).to.be.an('array')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> expect(</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">.length).to.be(</span><span class="kwd">${</span><span class="expr">length</span><span class="kwd">}</span><span class="pln">)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d152">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/tobe_equal.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> a, b</span></li><li class="L3"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> expect(</span><span class="kwd">${</span><span class="expr">a</span><span class="kwd">}</span><span class="pln">).to.be.equal(</span><span class="kwd">${</span><span class="expr">b</span><span class="kwd">}</span><span class="pln">)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d153">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/tobe_false.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> name</span></li><li class="L3"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> expect(</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">).to.be(false)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d154">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/tobe_null.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> name</span></li><li class="L3"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> expect(</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">).to.be(null)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d155">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/tobe_number.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> name, value</span></li><li class="L3"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> expect(</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">).to.be.a('number')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> expect(</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">).to.be(</span><span class="kwd">${</span><span class="expr">value</span><span class="kwd">}</span><span class="pln">)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d156">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/tobe_object.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> name</span></li><li class="L3"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> expect(</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">).to.be.an('object')</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d157">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/tobe_string_value.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> name, value</span></li><li class="L3"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> expect(</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">).to.be.a('string')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> expect(</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">).to.be(</span><span class="kwd">${</span><span class="expr">value</span><span class="kwd">}</span><span class="pln">)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d158">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/tobe_string.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> name, value</span></li><li class="L3"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> expect(</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">).to.be.a('string')</span></li><li class="L4"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> expect(</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">).to.be('</span><span class="kwd">${</span><span class="expr">value</span><span class="kwd">}</span><span class="pln">')</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d159">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/tobe_true.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> name</span></li><li class="L3"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> expect(</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">).to.be(true)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d160">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/t/tobe_undefined.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="kwd">$group</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$params</span><span class="pln"> name</span></li><li class="L3"><span class="pnl">    </span><span class="tag">_</span><span class="pln"> expect(</span><span class="kwd">${</span><span class="expr">name</span><span class="kwd">}</span><span class="pln">).to.be(undefined)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d161">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/util/ittf__copy/gc_one.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">Cannot load this ittf document: Malformed tree, only one root note allowed.Node second one row: 3 col: 1. Filepath: c:\my\wizzi\v3\sources\v3-kernel\v3-wizzi\ittf\tests\util\ittf__copy\gc_one.ittf</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d162">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/ittf/tests/util/file.js.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">module</span></li><li class="L2"><span class="pnl">    </span><span class="tag">kind</span><span class="pln"> jsfile</span></li><li class="L3"><span class="pnl">    </span><span class="tag">+</span></li><li class="L4"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> path</span></li><li class="L5"><span class="pnl">    </span><span class="tag">import</span><span class="pln"> del</span></li><li class="L6"><span class="pnl">    </span><span class="tag">+</span></li><li class="L7"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> expect = require('expect.js')</span></li><li class="L8"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> file = require('../../lib/util/file')</span></li><li class="L9"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> mocks = require('../mocks/misc')</span></li><li class="L0"><span class="pnl">    </span><span class="tag">+</span></li><li class="L1"><span class="pnl">    </span><span class="tag">describe</span><span class="pln"> splitlines</span></li><li class="L2"><span class="pnl">        </span><span class="tag">it</span><span class="pln"> should split a text into lines</span></li><li class="L3"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> text = 'alfa\nbeta\n\ngamma\n\rtheta\r\nyota\r\rsigma'</span></li><li class="L4"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> lines = file.splitLines(text)</span></li><li class="L5"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d158">tobe_string(</span><span class="arg"> lines[0]</span><span class="pln">,</span><span class="arg">  alfa </span><span class="mix">)</span></li><li class="L6"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d158">tobe_string(</span><span class="arg"> lines[1]</span><span class="pln">,</span><span class="arg">  beta </span><span class="mix">)</span></li><li class="L7"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d158">tobe_string(</span><span class="arg"> lines[3]</span><span class="pln">,</span><span class="arg">  gamma </span><span class="mix">)</span></li><li class="L8"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d158">tobe_string(</span><span class="arg"> lines[4]</span><span class="pln">,</span><span class="arg">  theta </span><span class="mix">)</span></li><li class="L9"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d158">tobe_string(</span><span class="arg"> lines[5]</span><span class="pln">,</span><span class="arg">  yota </span><span class="mix">)</span></li><li class="L0"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d158">tobe_string(</span><span class="arg"> lines[7]</span><span class="pln">,</span><span class="arg">  sigma </span><span class="mix">)</span></li><li class="L1"><span class="pnl">        </span><span class="tag">it</span><span class="pln"> should split a text into lines</span></li><li class="L2"><span class="pnl">            </span><span class="tag">var</span><span class="pln"> lines</span></li><li class="L3"><span class="pnl">                </span><span class="tag">_</span><span class="pln"> file.readLines</span></li><li class="L4"><span class="pnl">                    </span><span class="tag">_</span><span class="pln"> path.join</span></li><li class="L5"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> __dirname</span></li><li class="L6"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'ittf'</span></li><li class="L7"><span class="pnl">                        </span><span class="tag">@</span><span class="pln"> 'gc_one.ittf'</span></li><li class="L8"><span class="pnl">            </span><span class="tag">log</span><span class="pln"> 'file lines', lines</span></li><li class="L9"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d158">tobe_string(</span><span class="arg"> lines[0]</span><span class="pln">,</span><span class="arg">  first one </span><span class="mix">)</span></li><li class="L0"><span class="pnl">            </span><span class="mix frag-to-link-a" data-frag-id="d158">tobe_string(</span><span class="arg"> lines[2]</span><span class="pln">,</span><span class="arg">  second one </span><span class="mix">)</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div style="margin-bottom: 70px;" id="d163">&nbsp;
                    <div>
                        <h2 class="d-h2">/v3-wizzi/generate.wfjob.ittf</h2>
                        <pre class="prettyprint">
    <ol class="linenums">
        
<li class="L1"><span class="pnl"></span><span class="tag">wfjob</span><span class="pln"> wizzi</span></li><li class="L2"><span class="pnl">    </span><span class="kwd">$</span></li><li class="L3"><span class="pnl">        </span><span class="expr">var</span><span class="expr"> ittf_lib_folder       = path.join(__dirname, 'ittf', 'lib');</span></li><li class="L4"><span class="pnl">        </span><span class="expr">var</span><span class="expr"> ittf_root_folder      = path.join(__dirname, 'ittf', 'root');</span></li><li class="L5"><span class="pnl">        </span><span class="expr">var</span><span class="expr"> ittf_tests_folder     = path.join(__dirname, 'ittf', 'tests');</span></li><li class="L6"><span class="pnl">        </span><span class="expr">var</span><span class="expr"> ittf_examples_folder  = path.join(__dirname, 'ittf', 'examples');</span></li><li class="L7"><span class="pnl">        </span><span class="expr">//</span><span class="expr"> var dest_folder           = "C:/My/wizzi/v3/packages/wizzi";</span></li><li class="L8"><span class="pnl">        </span><span class="expr">//</span><span class="expr"> var dest_folder           = "c:/my/wizzi/v3/apps/demo/node_modules/wizzi";</span></li><li class="L9"><span class="pnl">        </span><span class="expr">//</span><span class="expr"> var dest_folder           = "c:/my/wizzi/v3/apps/docs/node_modules/wizzi";</span></li><li class="L0"><span class="pnl">        </span><span class="expr">var</span><span class="expr"> dest_folder           = "c:/my/wizzi/v3/v3-next/node_modules/wizzi";</span></li><li class="L1"><span class="pnl">        </span><span class="expr">//</span><span class="expr"> var dest_folder           = "c:/my/wizzi/github/wizzi";</span></li><li class="L2"><span class="pnl">    </span><span class="tag">line</span><span class="pln"> ittf-lib</span></li><li class="L3"><span class="pnl">        </span><span class="tag">cwd-folder</span><span class="kwd"> ${</span><span class="expr">ittf_lib_folder</span><span class="kwd">}</span></li><li class="L4"><span class="pnl">        </span><span class="tag">dest-folder</span><span class="kwd"> ${</span><span class="expr">dest_folder</span><span class="kwd">}</span><span class="pln">/lib</span></li><li class="L5"><span class="pnl">        </span><span class="mix frag-to-link-a" data-frag-id="unknown">wfjob/any_js(</span><span class="mix">)</span></li><li class="L6"><span class="pnl">            </span><span class="tag">ignore</span><span class="kwd"> ${</span><span class="expr">ittf_lib_folder</span><span class="kwd">}</span><span class="pln">/**/*__copy/**/*.js.ittf</span></li><li class="L7"><span class="pnl">        </span><span class="tag">artifact</span><span class="pln"> any_ittf_inside___copy</span></li><li class="L8"><span class="pnl">            </span><span class="tag">src</span><span class="kwd"> ${</span><span class="expr">ittf_lib_folder</span><span class="kwd">}</span><span class="pln">/**/*__copy/**/*.ittf</span></li><li class="L9"><span class="pnl">            </span><span class="tag">extension</span><span class="pln"> ittf</span></li><li class="L0"><span class="pnl">    </span><span class="tag">line</span><span class="pln"> ittf-examples</span></li><li class="L1"><span class="pnl">        </span><span class="tag">cwd-folder</span><span class="kwd"> ${</span><span class="expr">ittf_examples_folder</span><span class="kwd">}</span></li><li class="L2"><span class="pnl">        </span><span class="tag">dest-folder</span><span class="kwd"> ${</span><span class="expr">dest_folder</span><span class="kwd">}</span><span class="pln">/examples</span></li><li class="L3"><span class="pnl">        </span><span class="mix frag-to-link-a" data-frag-id="unknown">wfjob/any_js(</span><span class="mix">)</span></li><li class="L4"><span class="pnl">            </span><span class="tag">ignore</span><span class="kwd"> ${</span><span class="expr">ittf_examples_folder</span><span class="kwd">}</span><span class="pln">/**/*__copy/**/*.js.ittf</span></li><li class="L5"><span class="pnl">        </span><span class="tag">artifact</span><span class="pln"> any_ittf_inside___copy</span></li><li class="L6"><span class="pnl">            </span><span class="tag">src</span><span class="kwd"> ${</span><span class="expr">ittf_examples_folder</span><span class="kwd">}</span><span class="pln">/**/*__copy/**/*.ittf</span></li><li class="L7"><span class="pnl">            </span><span class="tag">extension</span><span class="pln"> ittf</span></li><li class="L8"><span class="pnl">    </span><span class="tag">line</span><span class="pln"> ittf-root</span></li><li class="L9"><span class="pnl">        </span><span class="tag">cwd-folder</span><span class="kwd"> ${</span><span class="expr">ittf_root_folder</span><span class="kwd">}</span></li><li class="L0"><span class="pnl">        </span><span class="tag">dest-folder</span><span class="kwd"> ${</span><span class="expr">dest_folder</span><span class="kwd">}</span></li><li class="L1"><span class="pnl">        </span><span class="mix frag-to-link-a" data-frag-id="unknown">wfjob/any_js(</span><span class="mix">)</span></li><li class="L2"><span class="pnl">            </span><span class="tag">ignore</span><span class="kwd"> ${</span><span class="expr">ittf_root_folder</span><span class="kwd">}</span><span class="pln">/**/*__copy.*/**/*.js.ittf</span></li><li class="L3"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="unknown"> wfjob/any_json</span></li><li class="L4"><span class="pnl">    </span><span class="tag">line</span><span class="pln"> ittf-tests</span></li><li class="L5"><span class="pnl">        </span><span class="tag">cwd-folder</span><span class="kwd"> ${</span><span class="expr">ittf_tests_folder</span><span class="kwd">}</span></li><li class="L6"><span class="pnl">        </span><span class="tag">dest-folder</span><span class="kwd"> ${</span><span class="expr">dest_folder</span><span class="kwd">}</span><span class="pln">/tests</span></li><li class="L7"><span class="pnl">        </span><span class="mix frag-to-link-a" data-frag-id="unknown">wfjob/any_js(</span><span class="mix">)</span></li><li class="L8"><span class="pnl">            </span><span class="tag">ignore</span><span class="kwd"> ${</span><span class="expr">ittf_tests_folder</span><span class="kwd">}</span><span class="pln">/**/*__copy/**/*.js.ittf</span></li><li class="L9"><span class="pnl">        </span><span class="tag">artifact</span><span class="pln"> any_ittf_inside___copy</span></li><li class="L0"><span class="pnl">            </span><span class="tag">src</span><span class="kwd"> ${</span><span class="expr">ittf_tests_folder</span><span class="kwd">}</span><span class="pln">/**/*__copy/**/*.ittf</span></li><li class="L1"><span class="pnl">            </span><span class="tag">extension</span><span class="pln"> ittf</span></li><li class="L2"><span class="pnl">        </span><span class="kwd">$include</span><span class="mix frag-to-link-a" data-frag-id="unknown"> wfjob/any_tests_ittf</span></li><li class="L3"><span class="pnl">    </span><span class="tag">production</span></li><li class="L4"><span class="pnl">        </span><span class="tag">dest-folder</span><span class="kwd"> ${</span><span class="expr">dest_folder</span><span class="kwd">}</span></li><li class="L5"><span class="pnl">        </span><span class="tag">line-ref</span><span class="pln"> ittf-lib</span></li><li class="L6"><span class="pnl">        </span><span class="tag">line-ref</span><span class="pln"> ittf-examples</span></li><li class="L7"><span class="pnl">        </span><span class="tag">line-ref</span><span class="pln"> ittf-root</span></li><li class="L8"><span class="pnl">        </span><span class="tag">line-ref</span><span class="pln"> ittf-tests</span></li></ol>
                        </pre>
                    </div>
                </div>
                <div id="frag-modal" class="modal">
                    <div id="frag-modal-content" class="modal-content">
                        <span class="modal-close">&times;</span>
                    </div>
                </div>
            </div>
        </main>
        <script src="jquery-3.2.1.js"></script>
        <script src="wizzifactory.js"></script>
    </body>

</html>
