<!doctype html>
<html VERSION-5="5" VERSION-4="4" version="5">
<head>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" />
    <link href="sanitize.css" rel="stylesheet" />
    <link href="../styles/main.css" rel="stylesheet" />
    <link href="../styles/code-wizzi.css" rel="stylesheet" />
    <link href="styles.css" rel="stylesheet" />
</head>
<body class="Code-wizzi">
    <!-- top navigation markup -->
    <input type="checkbox" id="tn-input-toggle" />
    <nav class="tn-bar">
        <nav class="tn-main">
            <a href="index.html.ittf"><div class="logo">
                <img src="../images/logo.svg" />
            </div>
            </a>
            <label for="tn-input-toggle" class="tn-label-toggle"></label>
            <label for="tn-input-toggle" class="tn-label-toggle-close">&times;</label>
            <ul>
                <li><a href="../concepts.html" title="Concepts">Concepts</a>
                </li>
                <li><a href="../docs/intro.html" title="Documentation">Documentation</a>
                </li>
                <li><a href="../api.html" title="Api">Api</a>
                </li>
                <li class="tn-pageSelected"><a href="../code/intro.html" title="Code">Code</a>
                <nav class="tn-subPages_mobile">
                    <ul>
                        <li><a href="../code/intro.html" title="intro">intro</a>
                        </li>
                        <li><a href="../code/wizzi.html" title="wizzi">wizzi</a>
                        </li>
                        <li><a href="../code/wizzi-mtree.html" title="wizzi-mtree">mtree</a>
                        </li>
                        <li><a href="../code/wizzi-repo.html" title="wizzi-repo">repo</a>
                        </li>
                        <li><a href="../code/wizzi-utils.html" title="wizzi-utils">utils</a>
                        </li>
                        <li><a href="../code/wizzi-core.html" title="wizzi-core">core</a>
                        </li>
                        <li><a href="../code/wizzi-js.html" title="wizzi-js">js</a>
                        </li>
                        <li><a href="../code/wizzi-web.html" title="wizzi-web">web</a>
                        </li>
                        <li><a href="../code/wizzi-demo.html" title="wizzi-demo">demo</a>
                        </li>
                    </ul>
                </nav>
                </li>
                <li><a href="../starters.html" title="Starters">Starters</a>
                </li>
                <li><a href="../project.html" title="Project">Project</a>
                </li>
            </ul>
        </nav>
        <nav class="tn-subPages">
            <ul>
                <li><a href="../code/intro.html" title="intro">intro</a>
                </li>
                <li class="tn-subPageSelected"><a href="../code/wizzi.html" title="wizzi">wizzi</a>
                </li>
                <li><a href="../code/wizzi-mtree.html" title="wizzi-mtree">mtree</a>
                </li>
                <li><a href="../code/wizzi-repo.html" title="wizzi-repo">repo</a>
                </li>
                <li><a href="../code/wizzi-utils.html" title="wizzi-utils">utils</a>
                </li>
                <li><a href="../code/wizzi-core.html" title="wizzi-core">core</a>
                </li>
                <li><a href="../code/wizzi-js.html" title="wizzi-js">js</a>
                </li>
                <li><a href="../code/wizzi-web.html" title="wizzi-web">web</a>
                </li>
                <li><a href="../code/wizzi-demo.html" title="wizzi-demo">demo</a>
                </li>
            </ul>
        </nav>
    </nav>
    <!-- main content markup -->
    <main id="mc-wrapper" class="mc-wrapper-layout-sub">
        <input type="checkbox" id="mc-toggle-toc" />
        <input type="checkbox" id="mc-toggle-toc-close" onchange="mc_toggle_toc_Close()" />
        <div class="mc-frame">
            <div class="mc-frame-bar">
                <h1 class="mc-sidebar-left-title">Code</h1>
                <h1>
                    <label for="mc-toggle-toc-close" class="mc-label-toggle-close">&times;</label>
                </h1>
            </div>
            <nav class="mc-sidebar-left">
                <h2>wizzi</h2>
                <div class="treeview">
                    <ul>
                        <li><input type="checkbox" checked id="f_1" />
                        <span></span>
                        <label for="f_1">ittf</label>
                        <ul>
                            <li><input type="checkbox" checked id="f_2" />
                            <span></span>
                            <label for="f_2">examples</label>
                            <ul>
                                <li><input type="checkbox" id="f_3" />
                                <span></span>
                                <label for="f_3">html</label>
                                <ul>
                                    <li><input type="checkbox" id="f_4" />
                                    <span></span>
                                    <label for="f_4">ittf__copy</label>
                                    <ul>
                                        <li><a href="#d_1">basic.html.ittf</a>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><a href="#d_2">index.js.ittf</a>
                                    </li>
                                </ul>
                                </li>
                                <li><input type="checkbox" id="f_5" />
                                <span></span>
                                <label for="f_5">io</label>
                                <ul>
                                    <li><a href="#d_3">index.js.ittf</a>
                                    </li>
                                </ul>
                                </li>
                                <li><input type="checkbox" id="f_6" />
                                <span></span>
                                <label for="f_6">js</label>
                                <ul>
                                    <li><input type="checkbox" id="f_7" />
                                    <span></span>
                                    <label for="f_7">ittf__copy</label>
                                    <ul>
                                        <li><a href="#d_4">basic.js.ittf</a>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><a href="#d_5">index.js.ittf</a>
                                    </li>
                                </ul>
                                </li>
                                <li><input type="checkbox" id="f_8" />
                                <span></span>
                                <label for="f_8">light</label>
                                <ul>
                                    <li><input type="checkbox" id="f_9" />
                                    <span></span>
                                    <label for="f_9">ittf__copy</label>
                                    <ul>
                                        <li><input type="checkbox" id="f_10" />
                                        <span></span>
                                        <label for="f_10">genfolder</label>
                                        <ul>
                                            <li><input type="checkbox" id="f_11" />
                                            <span></span>
                                            <label for="f_11">html</label>
                                            <ul>
                                                <li><a href="#d_6">friends.html.ittf</a>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><a href="#d_7">alpha.js.ittf</a>
                                            </li>
                                            <li><a href="#d_8">basic.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f_12" />
                                        <span></span>
                                        <label for="f_12">jobs</label>
                                        <ul>
                                            <li><input type="checkbox" id="f_13" />
                                            <span></span>
                                            <label for="f_13">ittf</label>
                                            <ul>
                                                <li><input type="checkbox" id="f_14" />
                                                <span></span>
                                                <label for="f_14">lib</label>
                                                <ul>
                                                    <li><a href="#d_9">step_1.js.ittf</a>
                                                    </li>
                                                </ul>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><a href="#d_10">step_1.wfjob.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f_15" />
                                        <span></span>
                                        <label for="f_15">models</label>
                                        <ul>
                                            <li><input type="checkbox" id="f_16" />
                                            <span></span>
                                            <label for="f_16">complex</label>
                                            <ul>
                                                <li><a href="#d_11">forms.html.ittf</a>
                                                </li>
                                                <li><a href="#d_12">formsData.json.ittf</a>
                                                </li>
                                            </ul>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f_17" />
                                        <span></span>
                                        <label for="f_17">mtree</label>
                                        <ul>
                                            <li><a href="#d_13">friends.html.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f_18" />
                                        <span></span>
                                        <label for="f_18">schemas</label>
                                        <ul>
                                            <li><a href="#d_14">friends.wfschema.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><a href="#d_15">index.js.ittf</a>
                                    </li>
                                </ul>
                                </li>
                            </ul>
                            </li>
                            <li><input type="checkbox" checked id="f_19" />
                            <span></span>
                            <label for="f_19">lib</label>
                            <ul>
                                <li><input type="checkbox" id="f_20" />
                                <span></span>
                                <label for="f_20">acl</label>
                                <ul>
                                    <li><a href="#d_16">acl.js.ittf</a>
                                    </li>
                                    <li><a href="#d_17">aclstat.js.ittf</a>
                                    </li>
                                    <li><a href="#d_18">index.js.ittf</a>
                                    </li>
                                    <li><a href="#d_19">statistics.js.ittf</a>
                                    </li>
                                </ul>
                                </li>
                                <li><input type="checkbox" id="f_21" />
                                <span></span>
                                <label for="f_21">artifact</label>
                                <ul>
                                    <li><a href="#d_20">artifactInfo.js.ittf</a>
                                    </li>
                                    <li><a href="#d_21">asyncArtifactGenerator.js.ittf</a>
                                    </li>
                                    <li><a href="#d_22">block.js.ittf</a>
                                    </li>
                                    <li><a href="#d_23">genContext.js.ittf</a>
                                    </li>
                                    <li><a href="#d_24">line.js.ittf</a>
                                    </li>
                                    <li><a href="#d_25">readme.md.ittf</a>
                                    </li>
                                </ul>
                                </li>
                                <li><input type="checkbox" id="f_22" />
                                <span></span>
                                <label for="f_22">io</label>
                                <ul>
                                    <li><input type="checkbox" id="f_23" />
                                    <span></span>
                                    <label for="f_23">t</label>
                                    <ul>
                                        <li><input type="checkbox" id="f_24" />
                                        <span></span>
                                        <label for="f_24">filesystem</label>
                                        <ul>
                                            <li><input type="checkbox" id="f_25" />
                                            <span></span>
                                            <label for="f_25">t</label>
                                            <ul>
                                                <li><a href="#d_26">check_mounted.js.ittf</a>
                                                </li>
                                                <li><a href="#d_27">r_cb_fs_err.js.ittf</a>
                                                </li>
                                                <li><a href="#d_28">r_cb_fs.js.ittf</a>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><a href="#d_29">batch.js.ittf</a>
                                            </li>
                                            <li><a href="#d_30">delete_copy_moveFile.js.ittf</a>
                                            </li>
                                            <li><a href="#d_31">delete_copy_moveFolder.js.ittf</a>
                                            </li>
                                            <li><a href="#d_32">duplicate_renameFile.js.ittf</a>
                                            </li>
                                            <li><a href="#d_33">duplicate_renameFolder.js.ittf</a>
                                            </li>
                                            <li><a href="#d_34">exists.js.ittf</a>
                                            </li>
                                            <li><a href="#d_35">fsItem.js.ittf</a>
                                            </li>
                                            <li><a href="#d_36">fsstat.ittf</a>
                                            </li>
                                            <li><a href="#d_37">glob.js.ittf</a>
                                            </li>
                                            <li><a href="#d_38">isFile.js.ittf</a>
                                            </li>
                                            <li><a href="#d_39">isFolder.js.ittf</a>
                                            </li>
                                            <li><a href="#d_40">mkdir.js.ittf</a>
                                            </li>
                                            <li><a href="#d_41">readdir.js.ittf</a>
                                            </li>
                                            <li><a href="#d_42">readFile.js.ittf</a>
                                            </li>
                                            <li><a href="#d_43">stat.js.ittf</a>
                                            </li>
                                            <li><a href="#d_44">writeFile.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><a href="#d_45">errors.js.ittf</a>
                                    </li>
                                    <li><a href="#d_46">filesystem.js.ittf</a>
                                    </li>
                                </ul>
                                </li>
                                <li><input type="checkbox" id="f_26" />
                                <span></span>
                                <label for="f_26">model</label>
                                <ul>
                                    <li><input type="checkbox" id="f_27" />
                                    <span></span>
                                    <label for="f_27">t</label>
                                    <ul>
                                        <li><input type="checkbox" id="f_28" />
                                        <span></span>
                                        <label for="f_28">modelinfo</label>
                                        <ul>
                                            <li><a href="#d_47">loading.js.ittf</a>
                                            </li>
                                            <li><a href="#d_48">sources.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><a href="#d_49">asyncModelLoader.js.ittf</a>
                                    </li>
                                    <li><a href="#d_50">modelInfo.js.ittf</a>
                                    </li>
                                    <li><a href="#d_51">readme.md.ittf</a>
                                    </li>
                                </ul>
                                </li>
                                <li><input type="checkbox" id="f_29" />
                                <span></span>
                                <label for="f_29">production</label>
                                <ul>
                                    <li><input type="checkbox" id="f_30" />
                                    <span></span>
                                    <label for="f_30">helpers</label>
                                    <ul>
                                        <li><a href="#d_52">sourceTree.js.ittf</a>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><input type="checkbox" id="f_31" />
                                    <span></span>
                                    <label for="f_31">t</label>
                                    <ul>
                                        <li><input type="checkbox" id="f_32" />
                                        <span></span>
                                        <label for="f_32">manager</label>
                                        <ul>
                                            <li><a href="#d_53">async_initialize_jobRequests.js.ittf</a>
                                            </li>
                                            <li><a href="#d_54">async_persister.js.ittf</a>
                                            </li>
                                            <li><a href="#d_55">async_runner.js.ittf</a>
                                            </li>
                                            <li><a href="#d_56">factoryServices.js.ittf</a>
                                            </li>
                                            <li><a href="#d_57">generations.js.ittf</a>
                                            </li>
                                            <li><a href="#d_58">state.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f_33" />
                                        <span></span>
                                        <label for="f_33">wfjobLoader</label>
                                        <ul>
                                            <li><a href="#d_59">asyncRecurseWfjobLoad.js.ittf</a>
                                            </li>
                                            <li><a href="#d_60">processModel.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><a href="#d_61">_old_via_asyncWfJobRunner.js.ittf</a>
                                    </li>
                                    <li><a href="#d_62">_old_via_service.js.ittf</a>
                                    </li>
                                    <li><a href="#d_63">_old_wfjob.js.ittf</a>
                                    </li>
                                    <li><a href="#d_64">_old_wfpackageloader.js.ittf</a>
                                    </li>
                                    <li><a href="#d_65">asyncWizziModelTypesRunner.js.ittf</a>
                                    </li>
                                    <li><a href="#d_66">context.js.ittf</a>
                                    </li>
                                    <li><a href="#d_67">manager.js.ittf</a>
                                    </li>
                                    <li><a href="#d_68">options.js.ittf</a>
                                    </li>
                                    <li><a href="#d_69">persister.js.ittf</a>
                                    </li>
                                    <li><a href="#d_70">readme.md.ittf</a>
                                    </li>
                                    <li><a href="#d_71">runner.js.ittf</a>
                                    </li>
                                    <li><a href="#d_72">wfjobLoader.js.ittf</a>
                                    </li>
                                </ul>
                                </li>
                                <li><input type="checkbox" id="f_34" />
                                <span></span>
                                <label for="f_34">services</label>
                                <ul>
                                    <li><input type="checkbox" id="f_35" />
                                    <span></span>
                                    <label for="f_35">t</label>
                                    <ul>
                                        <li><input type="checkbox" id="f_36" />
                                        <span></span>
                                        <label for="f_36">pluginsManager</label>
                                        <ul>
                                            <li><a href="#d_73">artifact-generator.js.ittf</a>
                                            </li>
                                            <li><a href="#d_74">getInfo.js.ittf</a>
                                            </li>
                                            <li><a href="#d_75">initialize.js.ittf</a>
                                            </li>
                                            <li><a href="#d_76">model-factory.js.ittf</a>
                                            </li>
                                            <li><a href="#d_77">model-transformer.js.ittf</a>
                                            </li>
                                            <li><a href="#d_78">register.js.ittf</a>
                                            </li>
                                            <li><a href="#d_79">resolve-module.js.ittf</a>
                                            </li>
                                            <li><a href="#d_80">resolve-package.js.ittf</a>
                                            </li>
                                            <li><a href="#d_81">schema-definition.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f_37" />
                                        <span></span>
                                        <label for="f_37">runnerServer</label>
                                        <ul>
                                            <li><a href="#d_82">apiServer.js.ittf</a>
                                            </li>
                                            <li><a href="#d_83">factoryServer.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f_38" />
                                        <span></span>
                                        <label for="f_38">wizziFactory</label>
                                        <ul>
                                            <li><a href="#d_84">artifact-generation.js.ittf</a>
                                            </li>
                                            <li><a href="#d_85">detectSchema.js.ittf</a>
                                            </li>
                                            <li><a href="#d_86">getInfo.js.ittf</a>
                                            </li>
                                            <li><a href="#d_87">initialize.js.ittf</a>
                                            </li>
                                            <li><a href="#d_88">model-loading.js.ittf</a>
                                            </li>
                                            <li><a href="#d_89">model-transformation.js.ittf</a>
                                            </li>
                                            <li><a href="#d_90">modelTypes-generation.js.ittf</a>
                                            </li>
                                            <li><a href="#d_91">mtree-loading.js.ittf</a>
                                            </li>
                                            <li><a href="#d_92">request-context.js.ittf</a>
                                            </li>
                                            <li><a href="#d_93">schema-definition.js.ittf</a>
                                            </li>
                                            <li><a href="#d_94">terminate.js.ittf</a>
                                            </li>
                                            <li><a href="#d_95">wizzi-job-execution.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><a href="#d_96">pluginsManager.js.ittf</a>
                                    </li>
                                    <li><a href="#d_97">runnerServer.js.ittf</a>
                                    </li>
                                    <li><a href="#d_98">storePool.js.ittf</a>
                                    </li>
                                    <li><a href="#d_99">wizziFactory.js.ittf</a>
                                    </li>
                                    <li><a href="#d_100">wizziFactory.md.ittf</a>
                                    </li>
                                </ul>
                                </li>
                                <li><input type="checkbox" id="f_39" />
                                <span></span>
                                <label for="f_39">util</label>
                                <ul>
                                    <li><input type="checkbox" id="f_40" />
                                    <span></span>
                                    <label for="f_40">t</label>
                                    <ul>
                                        <li><input type="checkbox" id="f_41" />
                                        <span></span>
                                        <label for="f_41">lineparser</label>
                                        <ul>
                                            <li><a href="#d_101">parse.js.ittf</a>
                                            </li>
                                            <li><a href="#d_102">parseInterpolation.js.ittf</a>
                                            </li>
                                            <li><a href="#d_103">parseNameValue.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f_42" />
                                        <span></span>
                                        <label for="f_42">log</label>
                                        <ul>
                                            <li><a href="#d_104">log.js.ittf</a>
                                            </li>
                                            <li><a href="#d_105">myLogger.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><a href="#d_106">htmlbuilder.js.ittf</a>
                                    </li>
                                    <li><a href="#d_107">interpolate.js.ittf</a>
                                    </li>
                                    <li><a href="#d_108">lineparser.js.ittf</a>
                                    </li>
                                    <li><a href="#d_109">log.js.ittf</a>
                                    </li>
                                    <li><a href="#d_110">stringWriter.js.ittf</a>
                                    </li>
                                </ul>
                                </li>
                                <li><input type="checkbox" id="f_43" />
                                <span></span>
                                <label for="f_43">wizzi</label>
                                <ul>
                                    <li><input type="checkbox" id="f_44" />
                                    <span></span>
                                    <label for="f_44">models</label>
                                    <ul>
                                        <li><input type="checkbox" id="f_45" />
                                        <span></span>
                                        <label for="f_45">bootstrap</label>
                                        <ul>
                                            <li><input type="checkbox" id="f_46" />
                                            <span></span>
                                            <label for="f_46">t</label>
                                            <ul>
                                                <li><input type="checkbox" id="f_47" />
                                                <span></span>
                                                <label for="f_47">wfschema</label>
                                                <ul>
                                                    <li><input type="checkbox" id="f_48" />
                                                    <span></span>
                                                    <label for="f_48">t</label>
                                                    <ul>
                                                        <li><a href="#d_111">element_derived.ittf</a>
                                                        </li>
                                                        <li><a href="#d_112">element_flat_attributes.ittf</a>
                                                        </li>
                                                        <li><a href="#d_113">element_flat_relations.ittf</a>
                                                        </li>
                                                        <li><a href="#d_114">element_gettags.js.ittf</a>
                                                        </li>
                                                        <li><a href="#d_115">element_load.js.ittf</a>
                                                        </li>
                                                    </ul>
                                                    </li>
                                                    <li><a href="#d_116">attribute.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d_117">choice.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d_118">choiceOrdered.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d_119">choiceSet.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d_120">comment.ittf</a>
                                                    </li>
                                                    <li><a href="#d_121">declare.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d_122">element.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d_123">exportTo.ittf</a>
                                                    </li>
                                                    <li><a href="#d_124">facet.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d_125">include.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d_126">method.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d_127">node.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d_128">relation.js.ittf</a>
                                                    </li>
                                                    <li><a href="#d_129">require.ittf</a>
                                                    </li>
                                                    <li><a href="#d_130">restrict.ittf</a>
                                                    </li>
                                                    <li><a href="#d_131">typeTagSet.js.ittf</a>
                                                    </li>
                                                </ul>
                                                </li>
                                                <li><a href="#d_132">clazz.js.ittf</a>
                                                </li>
                                                <li><a href="#d_133">schema_analizer.js.ittf</a>
                                                </li>
                                                <li><a href="#d_134">schema_loader.ittf</a>
                                                </li>
                                            </ul>
                                            </li>
                                            <li><a href="#d_135">util.js.ittf</a>
                                            </li>
                                            <li><a href="#d_136">wfschema-boot-model.js.ittf</a>
                                            </li>
                                            <li><a href="#d_137">wfschema-boot-modelDef.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                    </ul>
                                    </li>
                                </ul>
                                </li>
                                <li><a href="#d_138">errors.js.ittf</a>
                                </li>
                            </ul>
                            </li>
                            <li><input type="checkbox" checked id="f_49" />
                            <span></span>
                            <label for="f_49">meta</label>
                            <ul>
                                <li><a href="#d_139">index.json.ittf</a>
                                </li>
                            </ul>
                            </li>
                            <li><input type="checkbox" checked id="f_50" />
                            <span></span>
                            <label for="f_50">root</label>
                            <ul>
                                <li><input type="checkbox" id="f_51" />
                                <span></span>
                                <label for="f_51">t</label>
                                <ul>
                                    <li><input type="checkbox" id="f_52" />
                                    <span></span>
                                    <label for="f_52">index</label>
                                    <ul>
                                        <li><input type="checkbox" id="f_53" />
                                        <span></span>
                                        <label for="f_53">t</label>
                                        <ul>
                                            <li><a href="#d_140">lightFunction.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><a href="#d_141">_old_via_wizzi_instance_job.js.ittf</a>
                                        </li>
                                        <li><a href="#d_142">_old_via_wizzi_instance.js.ittf</a>
                                        </li>
                                        <li><a href="#d_143">autostart.js.ittf</a>
                                        </li>
                                        <li><a href="#d_144">defaultFactory.js.ittf</a>
                                        </li>
                                        <li><a href="#d_145">f-artifact-generation.js.ittf</a>
                                        </li>
                                        <li><a href="#d_146">f-ittf-loading.js.ittf</a>
                                        </li>
                                        <li><a href="#d_147">f-model-factory.js.ittf</a>
                                        </li>
                                        <li><a href="#d_148">f-model-transformation.js.ittf</a>
                                        </li>
                                        <li><a href="#d_149">f-schema-object.js.ittf</a>
                                        </li>
                                        <li><a href="#d_150">pluginsManager.js.ittf</a>
                                        </li>
                                        <li><a href="#d_151">start_runnerServer.js.ittf</a>
                                        </li>
                                        <li><a href="#d_152">start.js.ittf</a>
                                        </li>
                                        <li><a href="#d_153">wizzi_job.js.ittf</a>
                                        </li>
                                        <li><a href="#d_154">wizzi_modelTypes.js.ittf</a>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><a href="#d_155">readme_content.md.ittf</a>
                                    </li>
                                </ul>
                                </li>
                                <li><a href="#d_156">.gitignore.text.ittf</a>
                                </li>
                                <li><a href="#d_157">index.js.ittf</a>
                                </li>
                                <li><a href="#d_158">license.text.ittf</a>
                                </li>
                                <li><a href="#d_159">package.json.ittf</a>
                                </li>
                                <li><a href="#d_160">readme.md.ittf</a>
                                </li>
                            </ul>
                            </li>
                            <li><input type="checkbox" id="f_54" />
                            <span></span>
                            <label for="f_54">t</label>
                            <ul>
                                <li><a href="#d_161">check_cb_function.js.ittf</a>
                                </li>
                                <li><a href="#d_162">check_cb_not_empty.js.ittf</a>
                                </li>
                                <li><a href="#d_163">check_cb_object.js.ittf</a>
                                </li>
                                <li><a href="#d_164">check_cb.js.ittf</a>
                                </li>
                                <li><a href="#d_165">check_r_not_empty.js.ittf</a>
                                </li>
                                <li><a href="#d_166">check_wz_callback.js.ittf</a>
                                </li>
                                <li><a href="#d_167">check_wz_not_empty.js.ittf</a>
                                </li>
                                <li><a href="#d_168">checked_call_r_set.js.ittf</a>
                                </li>
                                <li><a href="#d_169">checked_call_r.js.ittf</a>
                                </li>
                                <li><a href="#d_170">checked_call_set.js.ittf</a>
                                </li>
                                <li><a href="#d_171">checked_call.js.ittf</a>
                                </li>
                                <li><a href="#d_172">error.js.ittf</a>
                                </li>
                                <li><a href="#d_173">f_cb_no_err.js.ittf</a>
                                </li>
                                <li><a href="#d_174">f_cb_test.js.ittf</a>
                                </li>
                                <li><a href="#d_175">f_cb.js.ittf</a>
                                </li>
                                <li><a href="#d_176">f_error.js.ittf</a>
                                </li>
                                <li><a href="#d_177">r_cb_err.js.ittf</a>
                                </li>
                                <li><a href="#d_178">r_cb_error.js.ittf</a>
                                </li>
                                <li><a href="#d_179">r_cb_wz_err.js.ittf</a>
                                </li>
                                <li><a href="#d_180">r_cb.js.ittf</a>
                                </li>
                                <li><a href="#d_181">r_error.js.ittf</a>
                                </li>
                                <li><a href="#d_182">r_wz_err.js.ittf</a>
                                </li>
                                <li><a href="#d_183">readme.md.ittf</a>
                                </li>
                                <li><a href="#d_184">var_cb_error.js.ittf</a>
                                </li>
                                <li><a href="#d_185">var_error.js.ittf</a>
                                </li>
                            </ul>
                            </li>
                            <li><input type="checkbox" checked id="f_55" />
                            <span></span>
                            <label for="f_55">tests_stop</label>
                            <ul>
                                <li><input type="checkbox" id="f_56" />
                                <span></span>
                                <label for="f_56">artifact</label>
                                <ul>
                                    <li><input type="checkbox" id="f_57" />
                                    <span></span>
                                    <label for="f_57">ittf__copy</label>
                                    <ul>
                                        <li><a href="#d_186">gc_one.ittf</a>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><a href="#d_187">artifactInfo.js.ittf</a>
                                    </li>
                                    <li><a href="#d_188">asyncArtifactGenerator.js.ittf</a>
                                    </li>
                                    <li><a href="#d_189">genContext.js.ittf</a>
                                    </li>
                                </ul>
                                </li>
                                <li><input type="checkbox" id="f_58" />
                                <span></span>
                                <label for="f_58">production</label>
                                <ul>
                                    <li><a href="#d_190">asyncRecurseWfjobLoad.js.ittf</a>
                                    </li>
                                    <li><a href="#d_191">productionManager.js.ittf</a>
                                    </li>
                                    <li><a href="#d_192">wfjobLoader.js.ittf</a>
                                    </li>
                                </ul>
                                </li>
                                <li><input type="checkbox" id="f_59" />
                                <span></span>
                                <label for="f_59">services</label>
                                <ul>
                                    <li><input type="checkbox" id="f_60" />
                                    <span></span>
                                    <label for="f_60">ittf__copy</label>
                                    <ul>
                                        <li><input type="checkbox" id="f_61" />
                                        <span></span>
                                        <label for="f_61">css</label>
                                        <ul>
                                            <li><a href="#d_193">simple.css.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f_62" />
                                        <span></span>
                                        <label for="f_62">html</label>
                                        <ul>
                                            <li><a href="#d_194">simple.html.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><input type="checkbox" id="f_63" />
                                        <span></span>
                                        <label for="f_63">wfschema</label>
                                        <ul>
                                            <li><a href="#d_195">simple.wfschema.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><a href="#d_196">pluginsManager_internal_1.js.ittf</a>
                                    </li>
                                    <li><a href="#d_197">pluginsManager.js.ittf</a>
                                    </li>
                                    <li><a href="#d_198">runnerServer.js.ittf</a>
                                    </li>
                                    <li><a href="#d_199">wizziFactory.js.ittf</a>
                                    </li>
                                </ul>
                                </li>
                            </ul>
                            </li>
                            <li><input type="checkbox" checked id="f_64" />
                            <span></span>
                            <label for="f_64">tests</label>
                            <ul>
                                <li><input type="checkbox" id="f_65" />
                                <span></span>
                                <label for="f_65">mocks</label>
                                <ul>
                                    <li><input type="checkbox" id="f_66" />
                                    <span></span>
                                    <label for="f_66">plugin_ex</label>
                                    <ul>
                                        <li><a href="#d_200">plugin_ex.js.ittf</a>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><input type="checkbox" id="f_67" />
                                    <span></span>
                                    <label for="f_67">t</label>
                                    <ul>
                                        <li><input type="checkbox" id="f_68" />
                                        <span></span>
                                        <label for="f_68">wizziModels</label>
                                        <ul>
                                            <li><a href="#d_201">tests_mock1.js.ittf</a>
                                            </li>
                                            <li><a href="#d_202">tests_mock2.js.ittf</a>
                                            </li>
                                            <li><a href="#d_203">wfjob_mock1.js.ittf</a>
                                            </li>
                                            <li><a href="#d_204">wfjob_mock2.js.ittf</a>
                                            </li>
                                            <li><a href="#d_205">wfjob_mock3.js.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><a href="#d_206">v3-artifact-generation.js.ittf</a>
                                        </li>
                                        <li><a href="#d_207">v3-model-factory.js.ittf</a>
                                        </li>
                                        <li><a href="#d_208">v3-model-transformation.js.ittf</a>
                                        </li>
                                        <li><a href="#d_209">v3-package-index.js.ittf</a>
                                        </li>
                                        <li><a href="#d_210">v3-schema-definition.js.ittf</a>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><a href="#d_211">definitions.js.ittf</a>
                                    </li>
                                    <li><a href="#d_212">generators.js.ittf</a>
                                    </li>
                                    <li><a href="#d_213">misc.js.ittf</a>
                                    </li>
                                    <li><a href="#d_214">plugin.js.ittf</a>
                                    </li>
                                    <li><a href="#d_215">transformers.js.ittf</a>
                                    </li>
                                    <li><a href="#d_216">wizziModels.js.ittf</a>
                                    </li>
                                </ul>
                                </li>
                                <li><input type="checkbox" id="f_69" />
                                <span></span>
                                <label for="f_69">model</label>
                                <ul>
                                    <li><input type="checkbox" id="f_70" />
                                    <span></span>
                                    <label for="f_70">ittf</label>
                                    <ul>
                                        <li><input type="checkbox" id="f_71" />
                                        <span></span>
                                        <label for="f_71">folder1</label>
                                        <ul>
                                            <li><a href="#d_217">mock2.tests.ittf</a>
                                            </li>
                                            <li><a href="#d_218">mock3.tests.ittf</a>
                                            </li>
                                        </ul>
                                        </li>
                                        <li><a href="#d_219">mock1.tests.ittf</a>
                                        </li>
                                    </ul>
                                    </li>
                                    <li><a href="#d_220">asyncModelLoader.js.ittf</a>
                                    </li>
                                    <li><a href="#d_221">modelInfo_folder.js.ittf</a>
                                    </li>
                                    <li><a href="#d_222">modelInfo.js.ittf</a>
                                    </li>
                                </ul>
                                </li>
                                <li><input type="checkbox" id="f_72" />
                                <span></span>
                                <label for="f_72">t</label>
                                <ul>
                                    <li><a href="#d_223">async.js.ittf</a>
                                    </li>
                                    <li><a href="#d_224">base_test.js.ittf</a>
                                    </li>
                                    <li><a href="#d_225">co_run_test.js.ittf</a>
                                    </li>
                                    <li><a href="#d_226">co_run.js.ittf</a>
                                    </li>
                                    <li><a href="#d_227">expect_throw_error.js.ittf</a>
                                    </li>
                                    <li><a href="#d_228">f_cb_done.js.ittf</a>
                                    </li>
                                    <li><a href="#d_229">f_cb_no_err.js.ittf</a>
                                    </li>
                                    <li><a href="#d_230">f_cb_test.js.ittf</a>
                                    </li>
                                    <li><a href="#d_231">itasync.js.ittf</a>
                                    </li>
                                    <li><a href="#d_232">mongo_before_async.js.ittf</a>
                                    </li>
                                    <li><a href="#d_233">tobe_array.js.ittf</a>
                                    </li>
                                    <li><a href="#d_234">tobe_equal.js.ittf</a>
                                    </li>
                                    <li><a href="#d_235">tobe_false.js.ittf</a>
                                    </li>
                                    <li><a href="#d_236">tobe_function.js.ittf</a>
                                    </li>
                                    <li><a href="#d_237">tobe_null.js.ittf</a>
                                    </li>
                                    <li><a href="#d_238">tobe_number.js.ittf</a>
                                    </li>
                                    <li><a href="#d_239">tobe_object.js.ittf</a>
                                    </li>
                                    <li><a href="#d_240">tobe_string_value.js.ittf</a>
                                    </li>
                                    <li><a href="#d_241">tobe_string.js.ittf</a>
                                    </li>
                                    <li><a href="#d_242">tobe_true.js.ittf</a>
                                    </li>
                                    <li><a href="#d_243">tobe_undefined.js.ittf</a>
                                    </li>
                                </ul>
                                </li>
                            </ul>
                            </li>
                        </ul>
                        </li>
                        <li><a href="#d_244">generate.wfjob.ittf</a>
                        </li>
                    </ul>
                    <ul>
                        <li><input type="checkbox" id="externalFragments" />
                        <span></span>
                        <label for="externalFragments">external fragments</label>
                        <ul>
                            <li><a href="#d_245">fsitem.js.ittf</a>
                            </li>
                            <li><a href="#d_246">proj_gitignore.text.ittf</a>
                            </li>
                            <li><a href="#d_247">mit_license.text.ittf</a>
                            </li>
                            <li><a href="#d_248">kernel_package.json.ittf</a>
                            </li>
                            <li><a href="#d_249">kernel.md.ittf</a>
                            </li>
                            <li><a href="#d_250">workinprogress.md.ittf</a>
                            </li>
                            <li><a href="#d_251">wf.md.ittf</a>
                            </li>
                            <li><a href="#d_252">license.md.ittf</a>
                            </li>
                            <li><a href="#d_253">any_js.wfjob.ittf</a>
                            </li>
                            <li><a href="#d_254">root.wfjob.ittf</a>
                            </li>
                            <li><a href="#d_255">any_js.wfjob.ittf</a>
                            </li>
                            <li><a href="#d_256">any_json.wfjob.ittf</a>
                            </li>
                            <li><a href="#d_257">any_md.wfjob.ittf</a>
                            </li>
                            <li><a href="#d_258">any_text.wfjob.ittf</a>
                            </li>
                            <li><a href="#d_259">any_plain.wfjob.ittf</a>
                            </li>
                            <li><a href="#d_260">any_tests_ittf.wfjob.ittf</a>
                            </li>
                        </ul>
                        </li>
                    </ul>
                </div>
            </nav>
            <div class="mc-content">
                <div class="mc-pane mc-pane-code-d_1">
                    <div class="code-panel" id="d_1">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/examples/html/ittf__copy/basic.html.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">html</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">head</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">body</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">h1</span><span class="pp-pln"> Hello world</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_2">
                    <div class="code-panel" id="d_2">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/examples/html/index.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> fs = require('fs')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> index = require('../../index')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> file = require('wizzi-utils').file</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> suffix_in = '.html.ittf'</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> suffix_out = '.g.html'</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> index.createFactory</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">@</span><span class="pp-pln"> 'stefi'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">@</span><span class="pp-pln"> 'admin'</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> repo</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind 'filesystem'</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> plugins</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> items</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">[</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'wizzi-html'</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> wf </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ittfPath</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in getFiles(ittfPath)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> item = item.substring(0, item.length - suffix_in.length)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'item', item</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> execute(item, wf)</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> _ execute('function')</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> execute</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> wf</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ittfSource</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> name + suffix_in</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> artifactOutput</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> name + suffix_out</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wf.loadModelAndGenerateArtifact</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> ittfSource</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'html/document'</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> artifactText </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> file.write</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> artifactOutput</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> artifactText</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> getFiles</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> srcpath</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> fs.readdirSync</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> srcpath</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                </span><span class="pp-tag">._</span><span class="pp-pln"> filter</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                    </span><span class="pp-tag">=></span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                        </span><span class="pp-tag">param</span><span class="pp-pln"> file</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                            </span><span class="pp-tag">&&</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> fs.lstatSync(path.join(srcpath, file)).isFile()</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> verify.endsWith(file, suffix_in)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_3">
                    <div class="code-panel" id="d_3">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/examples/io/index.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> index = require('../../index')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> wfs = index.Filesystem</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> userId = 'stefi'</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> projectId = 'example'</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.mount</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'io_fs'</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.mkdir</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderA'</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.mkdir</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderB'</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.mkdir</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderC'</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.mkdir</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderD'</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.mkdir</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderToDelete/folder1'</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                                                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                                                    </span><span class="pp-tag">_</span><span class="pp-pln"> createExampleFiles</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> createExampleFiles</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.writeFile</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderA/docA1.js.ittf'</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'module\n\t kind react'</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.writeFile</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderA/docA2.js.ittf'</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'module\n\t kind jsfile'</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.writeFile</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderB/docB1.js.ittf'</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'module\n\t kind es6'</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.writeFile</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderC/docC1.js.ittf'</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'module\n\t kind es6'</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.writeFile</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderC/docC2.js.ittf'</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'module\n\t kind es6'</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                                                </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.writeFile</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderToDelete/folder1/docToDel1.js.ittf'</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'module\n\t kind es6'</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                                                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                                                        </span><span class="pp-tag">_</span><span class="pp-pln"> executeCopyMove</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> executeCopyMove</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.copyFolder</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderA'</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderA_copied'</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.moveFolder</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderB'</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderB_moved'</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.copyFile</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderC/docC1.js.ittf'</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderD/docC1.js.ittf'</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.moveFile</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderC/docC2.js.ittf'</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'folderD/docC2.js.ittf'</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> executeBatch</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> executeBatch</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wfs.batch</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">            </span><span class="pp-tag">[</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> actionType 'copy'</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> itemKind 0</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> sourceProjectId projectId</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> sourceItemPath 'folderB_moved'</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> destProjectId projectId</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> destItemPath 'folderE_batch'</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> actionType 'move'</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> itemKind 0</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> sourceProjectId projectId</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> sourceItemPath 'folderToDelete'</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> destProjectId projectId</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> destItemPath 'folderF_batch'</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> actionType 'delete'</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId userId</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> itemKind 0</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> projectId projectId</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> itemPath 'folderF_batch'</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> actionType 'copy'</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> itemKind 1</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> sourceProjectId projectId</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> sourceItemPath 'folderC/docC1.js.ittf'</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> destProjectId projectId</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> destItemPath 'folderG_batch/docC1.js.ittf'</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> actionType 'move'</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> itemKind 1</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> sourceProjectId projectId</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> sourceItemPath 'folderC/docC1.js.ittf'</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> destProjectId projectId</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> destItemPath 'folderH_batch/docC1.js.ittf'</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> actionType 'delete'</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> itemKind 1</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId userId</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> projectId projectId</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> itemPath 'folderA/docA1.js.ittf'</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-mix">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_4">
                    <div class="code-panel" id="d_4">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/examples/js/ittf__copy/basic.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> Hello</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> sayHello</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'Hello ' + name</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_5">
                    <div class="code-panel" id="d_5">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/examples/js/index.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> fs = require('fs')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> index = require('../../index')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> file = require('wizzi-utils').file</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> suffix_in = '.js.ittf'</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> suffix_out = '.g.js'</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> index.createFactory</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">@</span><span class="pp-pln"> 'stefi'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">@</span><span class="pp-pln"> 'admin'</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> repo</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind 'filesystem'</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> plugins</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> items</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">[</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'wizzi-js'</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> wf </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ittfPath</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in getFiles(ittfPath)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> item = item.substring(0, item.length - suffix_in.length)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'item', item</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> execute(item, wf)</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> _ execute('function')</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> execute</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> wf</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ittfSource</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> name + suffix_in</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> artifactOutput</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> name + suffix_out</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wf.loadModelAndGenerateArtifact</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> ittfSource</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'js/module'</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> artifactText </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> file.write</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> artifactOutput</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> artifactText</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> getFiles</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> srcpath</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> fs.readdirSync</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> srcpath</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                </span><span class="pp-tag">._</span><span class="pp-pln"> filter</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                    </span><span class="pp-tag">=></span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                        </span><span class="pp-tag">param</span><span class="pp-pln"> file</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                            </span><span class="pp-tag">&&</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> fs.lstatSync(path.join(srcpath, file)).isFile()</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> verify.endsWith(file, suffix_in)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_6">
                    <div class="code-panel" id="d_6">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/examples/light/ittf__copy/genfolder/html/friends.html.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">html</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">body</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">h1</span><span class="pp-pln"> My two Friends</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-kwd">$foreach</span><span class="pp-pln"> friend in friends</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">h2</span><span class="pp-kwd"> ${</span><span class="pp-expr">friend</span><span class="pp-kwd">}</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_7">
                    <div class="code-panel" id="d_7">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/examples/light/ittf__copy/genfolder/alpha.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> i = 0</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_8">
                    <div class="code-panel" id="d_8">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/examples/light/ittf__copy/genfolder/basic.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> Hello</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> sayHello</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'Hello ' + name</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_9">
                    <div class="code-panel" id="d_9">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/examples/light/ittf__copy/jobs/ittf/lib/step_1.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> Animal</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> sayHello</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> this.cry, ', I am ', this.name</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> Horse</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">super</span><span class="pp-pln"> Animal</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.name = name</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.cry = 'Hiii'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> horse = new Horse('Varenne')</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> horse.sayHello</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_10">
                    <div class="code-panel" id="d_10">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/examples/light/ittf__copy/jobs/step_1.wfjob.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">wfjob</span><span class="pp-pln"> step_1</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> Generates a javascript module</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> from a single ittf document of schema `js`</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-kwd">$</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-expr frag-to-link-a">console.log(</span><span class="pp-arg"> 'Destination folder name: ' + options.destFolder</span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-expr">var</span><span class="pp-expr"> ittf_lib_folder  = path.join(__dirname, 'ittf', 'lib');</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-expr">var</span><span class="pp-expr"> dest_folder      = path.join(__dirname, options.destFolder);</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">line</span><span class="pp-pln"> lib</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">cwd-folder</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_lib_folder</span><span class="pp-kwd">}</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Generates a single javascript module</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">artifact</span><span class="pp-pln"> step_1_javascript_module</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">src</span><span class="pp-pln"> step_1.js.ittf</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">schema</span><span class="pp-pln"> js</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">generator</span><span class="pp-pln"> js/module</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">extension</span><span class="pp-pln"> js</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">production</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">dest-folder</span><span class="pp-kwd"> ${</span><span class="pp-expr">dest_folder</span><span class="pp-kwd">}</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">line-ref</span><span class="pp-pln"> lib</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_11">
                    <div class="code-panel" id="d_11">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/examples/light/ittf__copy/models/complex/forms.html.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">html</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">body</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-kwd">$foreach</span><span class="pp-pln"> form in data.forms</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">h2</span><span class="pp-kwd"> ${</span><span class="pp-expr">form.name</span><span class="pp-kwd">}</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">form</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-kwd">$foreach</span><span class="pp-pln"> c in form.controls</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                    </span><span class="pp-tag">label</span><span class="pp-kwd"> ${</span><span class="pp-expr">c.label</span><span class="pp-kwd">}</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                        </span><span class="pp-tag">for</span><span class="pp-kwd"> ${</span><span class="pp-expr">c.name</span><span class="pp-kwd">}</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-kwd">$if</span><span class="pp-expr"> c.type === 'text'</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                        </span><span class="pp-tag">input</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                            </span><span class="pp-tag">type</span><span class="pp-pln"> text</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-tag">br</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_12">
                    <div class="code-panel" id="d_12">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/examples/light/ittf__copy/models/complex/formsData.json.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">[</span><span class="pp-pln"> forms</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">name</span><span class="pp-pln"> "form1"</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">[</span><span class="pp-pln"> controls</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                    </span><span class="pp-tag">name</span><span class="pp-pln"> "control1"</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                    </span><span class="pp-tag">label</span><span class="pp-pln"> "First control"</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">type</span><span class="pp-pln"> "text"</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">name</span><span class="pp-pln"> "control2"</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-tag">label</span><span class="pp-pln"> "Second control"</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                    </span><span class="pp-tag">type</span><span class="pp-pln"> "text"</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_13">
                    <div class="code-panel" id="d_13">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/examples/light/ittf__copy/mtree/friends.html.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">html</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">body</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">h1</span><span class="pp-pln"> My two Friends</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-kwd">$foreach</span><span class="pp-pln"> friend in friends</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">h2</span><span class="pp-kwd"> ${</span><span class="pp-expr">friend</span><span class="pp-kwd">}</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_14">
                    <div class="code-panel" id="d_14">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/examples/light/ittf__copy/schemas/friends.wfschema.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">wfschema</span><span class="pp-pln"> friends</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$if</span><span class="pp-expr"> comments == true</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">e</span><span class="pp-pln"> comment</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">tag</span><span class="pp-pln"> #</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">r</span><span class="pp-pln"> comment/s</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">e</span><span class="pp-pln"> friends </span><span class="pp-kwd">${</span><span class="pp-expr"> comments ? ': comment' : ''</span><span class="pp-kwd">}</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">is-root</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">r</span><span class="pp-pln"> friend/s</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">e</span><span class="pp-pln"> friend </span><span class="pp-kwd">${</span><span class="pp-expr"> comments ? ': comment' : ''</span><span class="pp-kwd">}</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">a</span><span class="pp-pln"> mobilePhone</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">tag</span><span class="pp-pln"> cell</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">a</span><span class="pp-pln"> phone</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">a</span><span class="pp-pln"> birthday</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_15">
                    <div class="code-panel" id="d_15">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/examples/light/index.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> stringify = require('json-stringify-safe')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> wizzi = require('../../index')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> htmlFriendsPath</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'mtree'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'friends.html.ittf'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> friendsArray</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">[</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'arthur'</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'mary'</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> schemaFriendsPath</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'schemas'</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'friends.wfschema.ittf'</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> schemaFriendsOutputPath</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'friendsplugin'</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> jobsPath</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'jobs'</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> genFolderPath</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'genfolder'</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'index.js.ittf'</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> genFolderDest</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'genfolder_out'</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> modelsComplexPath</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'models'</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'complex'</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">    </span><span class="pp-kwd">$*</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> generate the source magical tree</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> wizzi.mtree</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">        </span><span class="pp-tag">@</span><span class="pp-pln"> htmlFriendsPath</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> friends friendsArray</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> mTreeModel</span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> dump</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> JSON.stringify</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> mTreeModel.toIttf</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 2</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'mTree friends\n', dump</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> Generate the html model.</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> The html schema is detected from the path.</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wizzi.model</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> htmlFriendsPath</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> friends friendsArray</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> wizziModel</span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> dump</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> stringify</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModel.elements</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 2</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                    </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizziModel friends\n', dump</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> Generate the html document artifact.</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> No options, the default artifact generator</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> for the html schema will be used.</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> wizzi.gen</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> htmlFriendsPath</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> friends friendsArray</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> artifactText</span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                            </span><span class="pp-tag">log</span><span class="pp-pln"> 'artifactText friends\n', artifactText</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> Generate the javascript modules for the wizzi schema</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> of a new wizzi plugin.</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> wizzi.schema</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> schemaFriendsPath</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> comments true</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> outputPackagePath schemaFriendsOutputPath</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> schemaPaths</span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                                    </span><span class="pp-tag">log</span><span class="pp-pln"> 'schemaPaths of generated schema friends\n', schemaPaths</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                                    </span><span class="pp-tag">#</span><span class="pp-pln"> Generate the javascript modules for the wizzi schema</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                                    </span><span class="pp-tag">#</span><span class="pp-pln"> of a new wizzi plugin.</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> wizzi.job</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> jobsPath</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'step_1.wfjob.ittf'</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                                        </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> friends friendsArray</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                                        </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> name 'step_1'</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                                            </span><span class="pp-tag">{</span><span class="pp-pln"> jobContext</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> destFolder 'output'</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                                            </span><span class="pp-tag">{</span><span class="pp-pln"> globalContext</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> destFolder 'output'</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> jobResults</span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">                                            </span><span class="pp-tag">log</span><span class="pp-pln"> 'results of job step_1\n', JSON.stringify(jobResults, null, 2)</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">                                            </span><span class="pp-tag">#</span><span class="pp-pln"> Generate all the artifacts in a folder</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> wizzi.genFolder</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> genFolderPath</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> friends friendsArray</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> destFolder genFolderDest</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> copyInclude ['*']</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> copyExclude []</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                                                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> schemaPaths</span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                                                    </span><span class="pp-tag">log</span><span class="pp-pln"> 'genFolder wrote generated and copied files to dest folder\n', schemaPaths        *</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Load a complex wizzi model passing a model description to the loader</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> of a new wizzi plugin.</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wizzi.model</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> src</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> modelsComplexPath</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'forms.html.ittf'</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> schema 'html'</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                </span><span class="pp-tag">[</span><span class="pp-pln"> contexts</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> src</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> modelsComplexPath</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'formsData.json.ittf'</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> schema 'json'</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> exportName 'data'</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> wizziModel</span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizziModel.wzElement', wizziModel.wzElement</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> wizzi.gen</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModel</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> artifactText</span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">                        </span><span class="pp-tag">log</span><span class="pp-pln"> 'artifactText complex forms\n', artifactText</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_16">
                    <div class="code-panel" id="d_16">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/acl/acl.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> Acl</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> config</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> wizziConfig</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.config = config</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wizziConfig = wizziConfig</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> checkAuth</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> subscriptionType</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> operId</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> resourceType</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> resourceName</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> subscriptionType === 'admin'</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> ok true</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> ok false</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> reason userId + ' not authorized to ' + operId</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports = Acl</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_17">
                    <div class="code-panel" id="d_17">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/acl/aclstat.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> Acl = require('./acl')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> Statistics = require('./statistics')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> config = null</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> AclStat</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> subscriptionType</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> aclConfig</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> statisticsConfig</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.userId = userId</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.subscriptionType = subscriptionType</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.aclConfig = aclConfig</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.statisticsConfig = statisticsConfig</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this._init()</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> _init</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> config == null</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> config = require('../../index').config</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.acl.AclStat._init.config', config</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.acl.AclStat._init.aclConfig', this.aclConfig</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.acl.AclStat._init.statisticsConfig', this.statisticsConfig</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.acl = new Acl(this.aclConfig, config)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.statistics = new Statistics(this.statisticsConfig, config)</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> checkAuth</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> operId</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> resourceType</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> resourceName</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.acl.checkAuth</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.userId</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.subscriptionType</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> operId</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> resourceType</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> resourceName</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> stat</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> operId</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.statistics.stat</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.userId</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.subscriptionType</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> operId</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports = AclStat</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_18">
                    <div class="code-panel" id="d_18">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/acl/index.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports =</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.AclStat = require('./aclstat')</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_19">
                    <div class="code-panel" id="d_19">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/acl/statistics.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> Statistics</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> config</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> wizziConfig</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.config = config</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wizziConfig = wizziConfig</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> stat</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> subscriptionType</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> operId</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> TODO</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports = Statistics</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_20">
                    <div class="code-panel" id="d_20">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/artifact/artifactInfo.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> assert = require('assert')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> _ = require('lodash')</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> interpolate = require('../util/interpolate')</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> ModelInfo = require("../model/modelinfo").ModelInfo</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> ArtifactInfo is a wrapper around an 'artifact' element</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> of a 'wfjob' wizzi model.</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> The 'artifact' element has been preprocessed</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> by the lib/production/wfjob module giving the artifactConfig parameter.</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> param</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { artifactConfig</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> name:String,</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> options:Object {</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> basedir:String // Uri</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> dotgExtensionPrefix:Boolean</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> },</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> model:Object {  // ModelInfo config object</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> see lib/production/wfjob.js for creation</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> see lib/model/modelInfo.js for use</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> },</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> isWfJob:Boolean,</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> isWfSchema:Boolean,</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> transformers:Array {</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> name:String</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> dumpFile:String    // Uri</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> },</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> gen:Object {</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> generator:String // generator name</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> },</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> dest:Object {</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> fullpath:String    // Uri</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> folder:String      // a basepath Uri, may be relative</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> baseFolder:String  // a basepath Uri (required when folder is relative)</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> path:String        // relative path</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> extension:String</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> }</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> }</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> logme</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> false</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> console.log.apply(console, arguments)</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">    </span><span class="pp-tag">wz-class</span><span class="pp-pln"> ArtifactInfo</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> artifactConfig</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.name = artifactConfig.name</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.options = artifactConfig.options</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isObject(artifactConfig.model)</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.modelInfo = new ModelInfo(artifactConfig.model)</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.contextInfos = null</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.contextInfos = []</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in artifactConfig.contexts</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.contextInfos.push</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                        </span><span class="pp-tag">new</span><span class="pp-pln"> ModelInfo(item)</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.modelInfo = null</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.isWfJob = artifactConfig.isWfJob</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.isWfModelType = artifactConfig.isWfModelType</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.transformers = artifactConfig.transformers</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.gen = artifactConfig.gen</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.dest = artifactConfig.dest</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wfjob = artifactConfig.wfjob</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.genContexts = []</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> initialize</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> productionManager</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.productionManager = productionManager</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.modelInfo</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.modelInfo.productionManager</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> productionManager</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.contextInfos</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> item.productionManager</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> productionManager</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.options</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> _.merge</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> productionManager.options || {}</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.options || {}</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addGenContext</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> genContext</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.genContexts.push(genContext)</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> isWizziModelTypesArtifact</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.modelInfo != null && this.modelInfo.getModelCollectionInfo() == null && this.isWfModelType</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> isWizziFactoryJob</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.modelInfo != null && this.modelInfo.getModelCollectionInfo() == null && this.isWfJob</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> isWizziModelArtifact</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.modelInfo != null && this.modelInfo.getModelCollectionInfo() == null && verify.isObject(this.gen) && verify.isNotEmpty(this.gen.generator)</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> isModelCollectionArtifact</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.modelInfo != null && verify.isObject(this.modelInfo.getModelCollectionInfo()) && verify.isObject(this.gen)</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> isCodeWriteArtifact</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.modelInfo == null && verify.isObject(this.gen) && verify.isNotEmpty(this.gen.generator)</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> isFinalArtifact</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.modelInfo != null && (verify.isObject(this.gen) === false || verify.isEmpty(this.gen.generator))</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getFileService</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> assert.ok</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> verify.isObject</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.productionManager</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'productionManager not set.'</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> assert.ok</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> verify.isObject</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.productionManager.wizziFactory.fileService</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'fileService must be set on wizziFactory'</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.productionManager.wizziFactory.fileService</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getItemsToPersistToFile</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> check</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> items</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> genContext in this.genContexts</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> srcPath = genContext.srcPath</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> this.isModelCollectionArtifact()</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> collectionItem = genContext.model</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> assert.strictEqual</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> verify.isObject(collectionItem)</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> true</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'genContext.model must contain an object.'</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_171">checked_call(</span><span class="pp-arg"> ipcontext </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> this.getInterpolatePathNameContext(collectionItem)</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_171">checked_call(</span><span class="pp-arg"> destUri </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> this.getDestinationUri(srcPath)</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> filepath</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> interpolate</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> destUri</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> ipcontext</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> delimiter '{}'</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> logme('ArtifactInfo.getItemsToPersistToFile.ipcontext', ipcontext, 'filepath', filepath)</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> check[filepath]</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> this.error</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> "Duplicated destination filepath: " + filepath</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> "getItemsToPersistToFile"</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> check[filepath] = true</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> persisteable</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> artifactInfo this</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> genContext genContext</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> filepath filepath</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> items.push(persisteable)</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_171">checked_call(</span><span class="pp-arg"> destUri </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> this.getDestinationUri(srcPath)</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> persisteable</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> artifactInfo this</span></div><div class="L5"><span class="pp-ln"> 155 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> genContext genContext</span></div><div class="L6"><span class="pp-ln"> 156 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> filepath destUri</span></div><div class="L7"><span class="pp-ln"> 157 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> items.push(persisteable)</span></div><div class="L8"><span class="pp-ln"> 158 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, items)</span></div><div class="L9"><span class="pp-ln"> 159 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getInterpolatePathNameContext</span></div><div class="L0"><span class="pp-ln"> 160 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> collectionItem</span></div><div class="L1"><span class="pp-ln"> 161 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.isModelCollectionArtifact()</span></div><div class="L2"><span class="pp-ln"> 162 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> result</span></div><div class="L3"><span class="pp-ln"> 163 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln"> 164 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> info = this.modelInfo.getModelCollectionInfo()</span></div><div class="L5"><span class="pp-ln"> 165 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> templValue in info.pathTemplateValues</span></div><div class="L6"><span class="pp-ln"> 166 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> templValue.function</span></div><div class="L7"><span class="pp-ln"> 167 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> result[templValue.token] = collectionItem[templValue.function]()</span></div><div class="L8"><span class="pp-ln"> 168 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isEmpty(result[templValue.token])</span></div><div class="L9"><span class="pp-ln"> 169 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln"> 170 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> this.error</span></div><div class="L1"><span class="pp-ln"> 171 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'the path template value function must return a not empty string for token: "' + templValue.token + '"'</span></div><div class="L2"><span class="pp-ln"> 172 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'getInterpolatePathNameContext'</span></div><div class="L3"><span class="pp-ln"> 173 </span><span class="pp-pln">                    </span><span class="pp-tag">elif</span><span class="pp-pln"> templValue.attribute</span></div><div class="L4"><span class="pp-ln"> 174 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> result[templValue.token] = collectionItem[templValue.attribute]</span></div><div class="L5"><span class="pp-ln"> 175 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L6"><span class="pp-ln"> 176 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'result[templValue.token]'</span></div><div class="L7"><span class="pp-ln"> 177 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> result[templValue.token]</span></div><div class="L8"><span class="pp-ln"> 178 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> verify.isEmpty</span></div><div class="L9"><span class="pp-ln"> 179 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> result[templValue.token]</span></div><div class="L0"><span class="pp-ln"> 180 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isEmpty(result[templValue.token])</span></div><div class="L1"><span class="pp-ln"> 181 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln"> 182 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> this.error</span></div><div class="L3"><span class="pp-ln"> 183 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'the path template value attribute "' + templValue.attribute + '" must return a not empty string for token: "' + templValue.token + '"'</span></div><div class="L4"><span class="pp-ln"> 184 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'getInterpolatePathNameContext'</span></div><div class="L5"><span class="pp-ln"> 185 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln"> 186 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln"> 187 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> this.error</span></div><div class="L8"><span class="pp-ln"> 188 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'path template value must contain an attribute or a function value for token: "' + templValue.token + '"'</span></div><div class="L9"><span class="pp-ln"> 189 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'getInterpolatePathNameContext'</span></div><div class="L0"><span class="pp-ln"> 190 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> result</span></div><div class="L1"><span class="pp-ln"> 191 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L2"><span class="pp-ln"> 192 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln"> 193 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.error</span></div><div class="L4"><span class="pp-ln"> 194 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> "Method called on an artifact that is not a wizzi collection artifact."</span></div><div class="L5"><span class="pp-ln"> 195 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'getInterpolatePathNameContext'</span></div><div class="L6"><span class="pp-ln"> 196 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getDestinationUri</span></div><div class="L7"><span class="pp-ln"> 197 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> srcPath</span></div><div class="L8"><span class="pp-ln"> 198 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> dest = this.dest</span></div><div class="L9"><span class="pp-ln"> 199 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> opt = this.options</span></div><div class="L0"><span class="pp-ln"> 200 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> msg</span></div><div class="L1"><span class="pp-ln"> 201 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L2"><span class="pp-ln"> 202 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'ArtifactInfo.getDestinationUri'</span></div><div class="L3"><span class="pp-ln"> 203 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'config.dest'</span></div><div class="L4"><span class="pp-ln"> 204 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isNotEmpty(dest.fullpath)</span></div><div class="L5"><span class="pp-ln"> 205 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> dest.fullpath</span></div><div class="L6"><span class="pp-ln"> 206 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isEmpty(dest.folder)</span></div><div class="L7"><span class="pp-ln"> 207 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln"> 208 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.error</span></div><div class="L9"><span class="pp-ln"> 209 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'A not empty dest.folder is required'</span></div><div class="L0"><span class="pp-ln"> 210 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'getDestinationUri'</span></div><div class="L1"><span class="pp-ln"> 211 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> destpath</span></div><div class="L2"><span class="pp-ln"> 212 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> dest.path && verify.isAbsolutePath(dest.path)</span></div><div class="L3"><span class="pp-ln"> 213 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> destpath = path.join(dest.path, srcPath)</span></div><div class="L4"><span class="pp-ln"> 214 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L5"><span class="pp-ln"> 215 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> dest.path</span></div><div class="L6"><span class="pp-ln"> 216 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> destpath = path.join(dest.folder, dest.path)</span></div><div class="L7"><span class="pp-ln"> 217 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln"> 218 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isEmpty(srcPath)</span></div><div class="L9"><span class="pp-ln"> 219 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln"> 220 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> this.error</span></div><div class="L1"><span class="pp-ln"> 221 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'A not empty srcPath is required'</span></div><div class="L2"><span class="pp-ln"> 222 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'getDestinationUri'</span></div><div class="L3"><span class="pp-ln"> 223 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> destpath = path.join(dest.folder, srcPath)</span></div><div class="L4"><span class="pp-ln"> 224 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> this.isFinalArtifact() === false && dest.extension !== '@@null'</span></div><div class="L5"><span class="pp-ln"> 225 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> ext = (dest.extension || 'js')</span></div><div class="L6"><span class="pp-ln"> 226 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> ext = verify.startsWith(ext, '.') ? ext.substr(1) : ext</span></div><div class="L7"><span class="pp-ln"> 227 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> this.options.dotgExtensionPrefix</span></div><div class="L8"><span class="pp-ln"> 228 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> ext = 'g.' + ext</span></div><div class="L9"><span class="pp-ln"> 229 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> destpath = verify.stripIttfExtension(destpath)</span></div><div class="L0"><span class="pp-ln"> 230 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> destpath = verify.replaceExtension(destpath, ext)</span></div><div class="L1"><span class="pp-ln"> 231 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.isFinalArtifact() === true</span></div><div class="L2"><span class="pp-ln"> 232 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> destpath = verify.replaceAll(destpath, '__copy', '')</span></div><div class="L3"><span class="pp-ln"> 233 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isAbsolutePath(destpath)</span></div><div class="L4"><span class="pp-ln"> 234 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> destpath</span></div><div class="L5"><span class="pp-ln"> 235 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isEmpty(dest.baseFolder)</span></div><div class="L6"><span class="pp-ln"> 236 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln"> 237 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.error</span></div><div class="L8"><span class="pp-ln"> 238 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'When dest.folder is a relative path, a not empty dest.baseFolder value is required. Received destpath : ' + destpath</span></div><div class="L9"><span class="pp-ln"> 239 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'getDestinationUri'</span></div><div class="L0"><span class="pp-ln"> 240 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L1"><span class="pp-ln"> 241 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L2"><span class="pp-ln"> 242 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> dest.baseFolder</span></div><div class="L3"><span class="pp-ln"> 243 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> destpath</span></div><div class="L4"><span class="pp-ln"> 244 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> error</span></div><div class="L5"><span class="pp-ln"> 245 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> message</span></div><div class="L6"><span class="pp-ln"> 246 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> method</span></div><div class="L7"><span class="pp-ln"> 247 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> err</span></div><div class="L8"><span class="pp-ln"> 248 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln"> 249 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L0"><span class="pp-ln"> 250 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> message message</span></div><div class="L1"><span class="pp-ln"> 251 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> source "wizzi/lib/production/artifactinfo.js/" + method</span></div><div class="L2"><span class="pp-ln"> 252 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo this.modelInfo</span></div><div class="L3"><span class="pp-ln"> 253 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> logme(err)</span></div><div class="L4"><span class="pp-ln"> 254 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> err</span></div><div class="L5"><span class="pp-ln"> 255 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> dump</span></div><div class="L6"><span class="pp-ln"> 256 </span><span class="pp-pln">            </span><span class="pp-tag">throw</span></div><div class="L7"><span class="pp-ln"> 257 </span><span class="pp-pln">                </span><span class="pp-tag">new</span><span class="pp-pln"> Error('Not implemented')</span></div><div class="L8"><span class="pp-ln"> 258 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> _relPath</span></div><div class="L9"><span class="pp-ln"> 259 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.modelInfo</span></div><div class="L0"><span class="pp-ln"> 260 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L1"><span class="pp-ln"> 261 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.modelInfo.srcFullPath()</span></div><div class="L2"><span class="pp-ln"> 262 </span><span class="pp-pln">                        </span><span class="pp-tag">._</span><span class="pp-pln"> substr(this.options.basedir.length + 1)</span></div><div class="L3"><span class="pp-ln"> 263 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln"> 264 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> 'null'</span></div><div class="L5"><span class="pp-ln"> 265 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> toString</span></div><div class="L6"><span class="pp-ln"> 266 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln"> 267 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L8"><span class="pp-ln"> 268 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> '\n'</span></div><div class="L9"><span class="pp-ln"> 269 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'ArtifactInfo '</span></div><div class="L0"><span class="pp-ln"> 270 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'name: ' + this.name</span></div><div class="L1"><span class="pp-ln"> 271 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'model.src: ' + this._relPath()</span></div><div class="L2"><span class="pp-ln"> 272 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> ', gen.generator:'</span></div><div class="L3"><span class="pp-ln"> 273 </span><span class="pp-pln">                    </span><span class="pp-tag">iif</span><span class="pp-pln"> this.gen</span></div><div class="L4"><span class="pp-ln"> 274 </span><span class="pp-pln">                        </span><span class="pp-tag">then</span></div><div class="L5"><span class="pp-ln"> 275 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> this.gen.generator</span></div><div class="L6"><span class="pp-ln"> 276 </span><span class="pp-pln">                        </span><span class="pp-tag">else</span><span class="pp-pln"> 'none'</span></div><div class="L7"><span class="pp-ln"> 277 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> '\n'</span></div><div class="L8"><span class="pp-ln"> 278 </span><span class="pp-pln">                    </span><span class="pp-tag">._</span><span class="pp-pln"> join(' ')</span></div><div class="L9"><span class="pp-ln"> 279 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> terminate</span></div><div class="L0"><span class="pp-ln"> 280 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.modelInfo</span></div><div class="L1"><span class="pp-ln"> 281 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.modelInfo.terminate()</span></div><div class="L2"><span class="pp-ln"> 282 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.contextInfos</span></div><div class="L3"><span class="pp-ln"> 283 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.contextInfos</span></div><div class="L4"><span class="pp-ln"> 284 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> item.terminate()</span></div><div class="L5"><span class="pp-ln"> 285 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.genContexts</span></div><div class="L6"><span class="pp-ln"> 286 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.genContexts</span></div><div class="L7"><span class="pp-ln"> 287 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> item.terminate()</span></div><div class="L8"><span class="pp-ln"> 288 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> isArtifactConfig</span></div><div class="L9"><span class="pp-ln"> 289 </span><span class="pp-pln">            </span><span class="pp-tag">static</span></div><div class="L0"><span class="pp-ln"> 290 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> test</span></div><div class="L1"><span class="pp-ln"> 291 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !test</span></div><div class="L2"><span class="pp-ln"> 292 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> false</span></div><div class="L3"><span class="pp-ln"> 293 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !verify.isObject(test.options)</span></div><div class="L4"><span class="pp-ln"> 294 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> false</span></div><div class="L5"><span class="pp-ln"> 295 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !verify.isObject(test.model) && !verify.isObject(test.contexts)</span></div><div class="L6"><span class="pp-ln"> 296 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> false</span></div><div class="L7"><span class="pp-ln"> 297 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !verify.isObject(test.dest)</span></div><div class="L8"><span class="pp-ln"> 298 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> false</span></div><div class="L9"><span class="pp-ln"> 299 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !verify.isObject(test.gen)</span></div><div class="L0"><span class="pp-ln"> 300 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> false</span></div><div class="L1"><span class="pp-ln"> 301 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> true</span></div><div class="L2"><span class="pp-ln"> 302 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> isArtifactInstance</span></div><div class="L3"><span class="pp-ln"> 303 </span><span class="pp-pln">            </span><span class="pp-tag">static</span></div><div class="L4"><span class="pp-ln"> 304 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> test</span></div><div class="L5"><span class="pp-ln"> 305 </span><span class="pp-pln">            </span><span class="pp-tag">throw</span></div><div class="L6"><span class="pp-ln"> 306 </span><span class="pp-pln">                </span><span class="pp-tag">new</span><span class="pp-pln"> Error('Not implemented')</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_21">
                    <div class="code-panel" id="d_21">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/artifact/asyncArtifactGenerator.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> async = require('async')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> GenContext = require('./genContext')</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> logme</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> false</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> console.log.apply(console, arguments)</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Generation functions are called by the wizzi.production.Runner.</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> A generation produces an array of wizzi.artifact.genContext(s),</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> text buffers containing the generated artifact.</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> genContexts are accumulated into the artifactInfo.genContexts collection.</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-tag">wz-var</span><span class="pp-pln"> AsyncArtifactGenerator</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">#</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> { artifactInfo</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> api-ref wizzi.artifact.artifactInfo</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> { generator</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> api-ref wizzi-plugin.artifactGenerator</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> [ modelInfos</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> { modelInfo</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> api-ref wizzi.model.modelInfo</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> [ mainSourceModels</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> { mainSourceModel</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> # wizzi model or POJO</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> # 1 context model for each modelInfo</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> generate</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span><span class="pp-pln"> artifactInfo</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span><span class="pp-pln"> productionManager</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span><span class="pp-pln"> wizziFactory</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span><span class="pp-pln"> generator</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                        </span><span class="pp-tag">func</span><span class="pp-pln"> gen</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span><span class="pp-pln"> modelInfos</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span><span class="pp-pln"> mainSourceModels</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-tag">callback</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.production.AsyncArtifactGenerator.generate, modelInfos', modelInfos, 'mainSourceModels', mainSourceModels</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isObject(generator) == false || verify.isFunction(generator.gen) == false</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'The parameter "generator" must be an object and must contain the "gen" function.'</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'generate'</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> artifactInfo</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> genItems</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                        </span><span class="pp-tag">[</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">for</span><span class="pp-pln"> var i = 0; i &lt; modelInfos.length; i++</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> modelInfo = modelInfos[i]</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> mainSourceModel = mainSourceModels[i]</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> genContext</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                            </span><span class="pp-tag">new</span><span class="pp-pln"> GenContext</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> model null</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> srcPath modelInfo.src()</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> srcFullPath modelInfo.srcFullPath()</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> options artifactInfo.options</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> pman artifactInfo.productionManager</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> genItems.push</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> generator generator</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> mainSourceModel mainSourceModel</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> genContext genContext</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> async.map</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> genItems</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> AsyncArtifactGenerator._gen_item</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> genContexts </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in genContexts</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> artifactInfo.addGenContext(item)</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> oper 'AsyncArtifactGenerator.generate'</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> status 'success'</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> item 'genContexts.count: ' + genContexts.length</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> generateModelCollection</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span><span class="pp-pln"> artifactInfo</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span><span class="pp-pln"> productionManager</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span><span class="pp-pln"> wizziFactory</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span><span class="pp-pln"> generator</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                        </span><span class="pp-tag">func</span><span class="pp-pln"> gen</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span><span class="pp-pln"> modelInfos</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span><span class="pp-pln"> mainSourceModelsOfModelCollection</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                    </span><span class="pp-tag">callback</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isObject(generator) == false || verify.isFunction(generator.gen) == false</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'The parameter "generator" must be an object and must contain the "gen" function.'</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'generateModelCollection'</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> artifactInfo</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> genItems</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                        </span><span class="pp-tag">[</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                    </span><span class="pp-tag">for</span><span class="pp-pln"> var i = 0; i &lt; modelInfos.length; i++</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> modelInfo = modelInfos[i]</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> mainSourceModels = mainSourceModelsOfModelCollection[i]</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                        </span><span class="pp-tag">for</span><span class="pp-pln"> var j = 0; j &lt; mainSourceModels.length; j++</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                            </span><span class="pp-tag">var</span><span class="pp-pln"> mainSourceModel = mainSourceModels[j]</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> logme('AsyncArtifactGenerator.generateModelCollection', 'item', j, mainSourceModel)</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> api-ref wizzi.model.modelCollectionConfig</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">                            </span><span class="pp-tag">var</span><span class="pp-pln"> genContext</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">                                </span><span class="pp-tag">new</span><span class="pp-pln"> GenContext</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> model mainSourceModel.___collItem</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> srcPath modelInfo.src()</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> srcFullPath modelInfo.srcFullPath()</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> options artifactInfo.options</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> pman artifactInfo.productionManager</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> genItems.push</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> generator generator</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> mainSourceModel mainSourceModel</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> genContext genContext</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> async.map</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> genItems</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> AsyncArtifactGenerator._gen_item</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> genContexts </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">                            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in genContexts</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> artifactInfo.addGenContext(item)</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> oper 'AsyncArtifactGenerator.generate'</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> status 'success'</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> item 'genContexts.count: ' + genContexts.length</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> generateCodeWrite</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span><span class="pp-pln"> artifactInfo</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span><span class="pp-pln"> productionManager</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span><span class="pp-pln"> wizziFactory</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span><span class="pp-pln"> generator</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">                        </span><span class="pp-tag">func</span><span class="pp-pln"> gen</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span><span class="pp-pln"> contextModels</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">                    </span><span class="pp-tag">callback</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isObject(generator) == false || verify.isFunction(generator.gen) == false</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'The parameter "generator" must be an object and must contain the "gen" function.'</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'generateCodeWrite'</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> artifactInfo</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> mainSourceModel</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in contextModels</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> mainSourceModel[item.___exportName] = item</span></div><div class="L5"><span class="pp-ln"> 155 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> genContext</span></div><div class="L6"><span class="pp-ln"> 156 </span><span class="pp-pln">                        </span><span class="pp-tag">new</span><span class="pp-pln"> GenContext</span></div><div class="L7"><span class="pp-ln"> 157 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln"> 158 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> model null</span></div><div class="L9"><span class="pp-ln"> 159 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> srcPath null</span></div><div class="L0"><span class="pp-ln"> 160 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> srcFullPath null</span></div><div class="L1"><span class="pp-ln"> 161 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> options artifactInfo.options</span></div><div class="L2"><span class="pp-ln"> 162 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> pman artifactInfo.productionManager</span></div><div class="L3"><span class="pp-ln"> 163 </span><span class="pp-pln">                    </span><span class="pp-tag">new</span><span class="pp-pln"> generator.gen(mainSourceModel, genContext)</span></div><div class="L4"><span class="pp-ln"> 164 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> artifactInfo.addGenContext(genContext)</span></div><div class="L5"><span class="pp-ln"> 165 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln"> 166 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L7"><span class="pp-ln"> 167 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln"> 168 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> oper 'AsyncArtifactGenerator.generateCodeWrite'</span></div><div class="L9"><span class="pp-ln"> 169 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> status 'success'</span></div><div class="L0"><span class="pp-ln"> 170 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> _gen_item</span></div><div class="L1"><span class="pp-ln"> 171 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L2"><span class="pp-ln"> 172 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> genInfo</span></div><div class="L3"><span class="pp-ln"> 173 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln"> 174 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L5"><span class="pp-ln"> 175 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'AsyncArtifactGenerator._gen_item'</span></div><div class="L6"><span class="pp-ln"> 176 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'genInfo.mainSourceModel'</span></div><div class="L7"><span class="pp-ln"> 177 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> genInfo.mainSourceModel</span></div><div class="L8"><span class="pp-ln"> 178 </span><span class="pp-pln">                    </span><span class="pp-tag">new</span><span class="pp-pln"> genInfo.generator.gen</span></div><div class="L9"><span class="pp-ln"> 179 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> genInfo.mainSourceModel</span></div><div class="L0"><span class="pp-ln"> 180 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> genInfo.genContext</span></div><div class="L1"><span class="pp-ln"> 181 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln"> 182 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> error</span></div><div class="L3"><span class="pp-ln"> 183 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> message</span></div><div class="L4"><span class="pp-ln"> 184 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> method</span></div><div class="L5"><span class="pp-ln"> 185 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> err</span></div><div class="L6"><span class="pp-ln"> 186 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln"> 187 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L8"><span class="pp-ln"> 188 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> message message</span></div><div class="L9"><span class="pp-ln"> 189 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> source "wizzi/lib/artifact/asyncArtifactGenerator.js/" + method</span></div><div class="L0"><span class="pp-ln"> 190 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> logme(err)</span></div><div class="L1"><span class="pp-ln"> 191 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> err</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_22">
                    <div class="code-panel" id="d_22">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/artifact/block.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> line = require('./line')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> Block</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.lines = []</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.options = (options || {})</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.indentValue = (this.options.indent || 0)</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.currentline = null</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> forceIndent</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> save = this.indentValue</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.indentValue = value</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> save</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> indent</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.indentValue += typeof (value) !== 'undefined' ? value : 1</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> deindent</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.indentValue -= typeof (value) !== 'undefined' ? value : 1</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.indentValue = Math.max(0, this.indentValue)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> w</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.currentline != null</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.currentline.add(text)</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.lines.push</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.currentline</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.currentline = null</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.lines.push</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">new</span><span class="pp-pln"> line</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> text</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> this.indentValue</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> this.options</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> write</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.currentline != null</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.currentline.add(text)</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.currentline = new line(text, this.indentValue, this.options)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> appendFile</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> filePath</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.currentline != null</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.currentline.addFile(filePath)</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.lines.push</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.currentline</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.currentline = null</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.lines.push</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                    </span><span class="pp-tag">new</span><span class="pp-pln"> line</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> filePath</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> this.indentValue</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> this.options</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> true</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> toStream</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> stream</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.lines</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> item.toStream(stream, ctx)</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.currentline != null</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.currentline.toStream(stream, ctx)</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> terminate</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> delete (this.options)</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> delete (this.currentline)</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.lines</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> item.terminate()</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> hydrate</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> lines</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.currentline = null</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.lines = []</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> l</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in lines</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> l = new line('', 0, options)</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> l.hydrate(item)</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.lines.push(l)</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports = Block</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_23">
                    <div class="code-panel" id="d_23">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/artifact/genContext.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> StringWriter = require('../util/stringwriter')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> file = require('wizzi-utils').file</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> block = require('./block')</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> interpolate = require('../util/interpolate')</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> errors = require('../errors')</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> GenContext</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> genconfig</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">{</span><span class="pp-pln"> pman</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span><span class="pp-pln"> wizziFactory</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">#</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> !verify.isObject(genconfig)</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">throw</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">new</span><span class="pp-pln"> Error('wizzi.artifact.GenContext: genconfig argument must be an Object')</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> !verify.isObject(genconfig.options)</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">throw</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                        </span><span class="pp-tag">new</span><span class="pp-pln"> Error('wizzi.artifact.GenContext: genconfig.options argument must be an Object')</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.artifact.genContext.pman.globalContext', genconfig.pman.globalContext()</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> globalContext</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> Object.assign</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> genconfig.options.data || {}</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> genconfig.pman.globalContext()</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.model = genconfig.model</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.srcPath = genconfig.srcPath</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.pman = genconfig.pman</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wizziFactory = genconfig.pman.wizziFactory</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.block = new block(genconfig.options)</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.values = globalContext</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.writeFilePath = null</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.isEmpty = true</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.artifactGenerationErrors = []</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> forceIndent</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.block.forceIndent(value)</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> indent</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.block.indent(value)</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> deindent</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.block.deindent(value)</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> a</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.values[name] = value</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> g</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.values[name]</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> r</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.values[name]</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> delete (this.values[name])</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> w</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.writeFilePath != null</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error('Cannot write when a file write has been requested: ' + this.writeFilePath)</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isString(text)</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.block.w</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                    </span><span class="pp-tag">iif</span><span class="pp-pln"> text.indexOf('{') &gt; -1</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                        </span><span class="pp-tag">then</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> interpolate</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> text</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> this.values</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                        </span><span class="pp-tag">else</span><span class="pp-pln"> text</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.block.w('')</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.isEmpty = false</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> write</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.writeFilePath != null</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error('Cannot write when a file write has been requested: ' + this.writeFilePath)</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !verify.isString(text)</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.block.write</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                </span><span class="pp-tag">iif</span><span class="pp-pln"> text.indexOf('{') &gt; -1</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                    </span><span class="pp-tag">then</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> interpolate</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> text</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> this.values</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span><span class="pp-pln"> text</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.isEmpty = false</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> writeAligned</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.writeFilePath != null</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error('Cannot write when a file write has been requested: ' + this.writeFilePath)</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !verify.isString(text)</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> line in text.split('\n')</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> i &lt; i_len - 1 || line.length &gt; 0</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.block.w</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                        </span><span class="pp-tag">iif</span><span class="pp-pln"> line.indexOf('{') &gt; -1</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                            </span><span class="pp-tag">then</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> interpolate</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> line</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.values</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                            </span><span class="pp-tag">else</span><span class="pp-pln"> line</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.isEmpty = false</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> appendFile</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> filePath</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.block.appendFile</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> interpolate</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> filePath</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.values</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.isEmpty = false</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> writeFile</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> filePath</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.isEmpty == false</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error('Cannot write a file when text has already been added : ' + this.getContent())</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.writeFilePath = filePath</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> toStream</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> stream</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.writeFilePath != null</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.artifact.genContext.toStream. this.writeFilePath', this.writeFilePath</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> stream.write</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> file.read</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> this.writeFilePath</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.block.toStream(stream)</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getContent</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.writeFilePath != null</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> file.read</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> this.writeFilePath</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> sw = new StringWriter()</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.block.toStream(sw)</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> sw.toString()</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getContentInLine</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> verify.replaceAll</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.getContent()</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> '\n'</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> '__1_2_3__'</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> error</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> message</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">                </span><span class="pp-tag">new</span><span class="pp-pln"> errors.NodeError(message, node)</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> artifactGenerationError</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> message</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> location</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.artifact.genContext.artifactGenerationError.message', message</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> error</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">                </span><span class="pp-tag">new</span><span class="pp-pln"> errors.ArtifactGenerationError(message, location, node)</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.artifactGenerationErrors.push(error)</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> error</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> terminate</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> delete this.pman</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.block.terminate()</span></div><div class="L5"><span class="pp-ln"> 155 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> hydrate</span></div><div class="L6"><span class="pp-ln"> 156 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> block</span></div><div class="L7"><span class="pp-ln"> 157 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L8"><span class="pp-ln"> 158 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.block = new block(options)</span></div><div class="L9"><span class="pp-ln"> 159 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.block.hydrate</span></div><div class="L0"><span class="pp-ln"> 160 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> block.lines</span></div><div class="L1"><span class="pp-ln"> 161 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L2"><span class="pp-ln"> 162 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> toStringFromJSON</span></div><div class="L3"><span class="pp-ln"> 163 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> block</span></div><div class="L4"><span class="pp-ln"> 164 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L5"><span class="pp-ln"> 165 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !block || !block.lines</span></div><div class="L6"><span class="pp-ln"> 166 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> 'NO TEXT'</span></div><div class="L7"><span class="pp-ln"> 167 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> gw</span></div><div class="L8"><span class="pp-ln"> 168 </span><span class="pp-pln">                </span><span class="pp-tag">new</span><span class="pp-pln"> GenContext</span></div><div class="L9"><span class="pp-ln"> 169 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln"> 170 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> options options</span></div><div class="L1"><span class="pp-ln"> 171 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> gw.block.hydrate</span></div><div class="L2"><span class="pp-ln"> 172 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> block.lines</span></div><div class="L3"><span class="pp-ln"> 173 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L4"><span class="pp-ln"> 174 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> gw.getContent()</span></div><div class="L5"><span class="pp-ln"> 175 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports = GenContext</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_24">
                    <div class="code-panel" id="d_24">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/artifact/line.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> file = require('wizzi-utils').file</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> Line</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> textOrPath</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> indentValue</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> isFilePath</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.containsFilePath = isFilePath</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.text = []</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> isFilePath</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.text.push</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> k 0</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> t textOrPath</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.text.push(textOrPath)</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.indentValue = indentValue</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.options = options</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> add</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.containsFilePath</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.text.push</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> k 1</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> t text</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.text.push(text)</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addFile</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> filePath</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.containsFilePath</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.text.push</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> k 0</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> t filePath</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">for</span><span class="pp-pln"> var i = 0; i &lt; text.length; i++</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> text[i] =</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> k 1</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> t text[i]</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.text.push</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> k 0</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> t filePath</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> toStream</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> stream</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.options.isDebugLine && !ctx.isDebug</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> seen_tokens = false</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.containsFilePath</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                </span><span class="pp-tag">var</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                    </span><span class="pp-tag">decl</span><span class="pp-pln"> i</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                    </span><span class="pp-tag">decl</span><span class="pp-pln"> t</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                    </span><span class="pp-tag">decl</span><span class="pp-pln"> len = this.text.length</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">for</span><span class="pp-pln"> i = 0; i &lt; len; i++</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> t = this.text[i]</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> t.k === 1</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> stream.write</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> t.t</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> seen_tokens = true</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> this._fileToStream</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> seen_tokens</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> stream</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> t.t</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> ctx</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> i == len - 1</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> stream.write</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> this.options.CRLF</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> stream.write</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> spaces(this.indentValue * this.options.indentSpaces) + this.text.join('') + this.options.CRLF</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> _fileToStream</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> seen_tokens</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> stream</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> filePath</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> lines = file.readLines(filePath)</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> indent = spaces(this.indentValue * this.options.indentSpaces)</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">            </span><span class="pp-tag">var</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> i</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> t</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> len = lines.length</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> tabspaces = spaces(this.options.indentSpaces)</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> line</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">            </span><span class="pp-tag">for</span><span class="pp-pln"> i = 0; i &lt; len; i++</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> line = verify.replaceAll(lines[i], '\t', tabspaces)</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> line.length &gt; 0</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> i &gt; 0 || seen_tokens == false</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> stream.write(indent)</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> stream.write</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> line</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> i &lt; len - 1</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> stream.write</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> this.options.CRLF</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> terminate</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> delete (this.options)</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> hydrate</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> item</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.text = item.text</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.indentValue = item.indentValue</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> spaces</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> num</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> Array(num + 1)</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">                </span><span class="pp-tag">._</span><span class="pp-pln"> join(" ")</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports = Line</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_25">
                    <div class="code-panel" id="d_25">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/artifact/readme.md.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">mdx</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">h2</span><span class="pp-pln"> Artifact</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">p</span><span class="pp-pln"> An artifact is a set of descriptors used to instantiate and execute an artifact production (alias generation process).</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">ul</span><span class="pp-pln"> Artifact descriptors</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">li</span><span class="pp-pln"> Main source model</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">li</span><span class="pp-pln"> Context models</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">li</span><span class="pp-pln"> Generation module</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">li</span><span class="pp-pln"> Transpilers</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">li</span><span class="pp-pln"> Destination path</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Main source model</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> The main source module can be a wizzi model or a POJO passed to a 'wizzi-plugin.artifactGenerator.gen' method in the 'model' parameter.</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Context models</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Context models are wizzi models or POJO passed to a 'wizzi-plugin.artifactGenerator.gen' method in the 'values' object property of the 'ctx' (api-ref: wizzi.artifact.genContext) parameter. The name of each context model, defeined in the 'export-name' attribute of the 'modelRef' element of the 'wfjob' model, is a property name of the 'values' object.</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Generation module</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Is a nodejs module that implements the 'wizzi-plugin.artifactGenerator' interface. It uses the main source model and optionally the context models to generate the textual artifact. The artifact is buffered using the 'write' and 'w' methods of the 'wizzi.artifact.genContext' instance, but the code text can be built using the services of the wizzi factory and its language schemas and language artifacts. The current instance of the wizzi.wizziFactory class can be accessed from 'wizzi-plugin.artifactGenerator' implementors in the property 'wizziFactory' of the 'wizzi.artifact.genContext' instance.</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Transpilers</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> A transpiler is a nodejs module that implements the wizzi-plugin.transpiler interface.</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Destination path</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> A destination path is the location where a generated artifact is persisted.</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">    </span><span class="pp-tag">h2</span><span class="pp-pln"> Artifact types</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">    </span><span class="pp-tag">ul</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> Model artifact</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> Model collection artifact</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> Code write artifact</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> Final artifact</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Model artifact</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> A model artifact is an artifact which main source model is a wizzi model.</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Model collection artifact</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> A model collection artifact is a model artifact which source model is an item of a collection property of a wizzi model. The same artifact is applied to all the items of the collection and generates distinct code units, for any of them, which file path is built using a template interpolated with the values of the item properties.</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Code write artifact</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> A code write artifact do not require a wizzi model as a main source model. The artifact generator receive in the 'model' parameter a context object, which properties are the items of the context models collection. It emits the code using the 'write' and 'w' methods of a wizzi.artifact,genContext instance.</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Native artifact</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> A native artifact is a source already coded in the synthax of a target language. It is not processed by the wizzi factory. It can be copied as is in the destination folder or can be transpiled before copying.</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_26">
                    <div class="code-panel" id="d_26">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/t/check_mounted.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">if</span><span class="pp-pln"> isMounted == false</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_27">
                    <div class="code-panel" id="d_27">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/t/r_cb_fs_err.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> message</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> message "</span><span class="pp-kwd">${</span><span class="pp-expr">message</span><span class="pp-kwd">}</span><span class="pp-pln">"</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_28">
                    <div class="code-panel" id="d_28">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/t/r_cb_fs.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> message</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> message "</span><span class="pp-kwd">${</span><span class="pp-expr">message</span><span class="pp-kwd">}</span><span class="pp-pln">"</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_29">
                    <div class="code-panel" id="d_29">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/batch.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.batch</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> actions</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> async.mapSeries</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> actions</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> action</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> action.actionType === 'copy'</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> md.copyFsItem</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> action</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">elif</span><span class="pp-pln"> action.actionType === 'move'</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> md.moveFsItem</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> action</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">elif</span><span class="pp-pln"> action.actionType === 'delete'</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> md.deleteFsItem</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> action</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback('Filesystem.batch. Invalid parameter "action.actionType":' + action.actionType)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_30">
                    <div class="code-panel" id="d_30">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/delete_copy_moveFile.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.deleteFile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> path_string</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_26"> check_mounted</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> fsPath</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> path_string</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.deleteFile.fsPath', fsPath</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> file.deleteFile</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> fsPath</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.deleteFile.fsPath', fsPath, 'result', result</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, result)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.copyFile</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> source_projectId</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> source_path_string</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> dest_projectId</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> dest_path_string</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> isMounted == false</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> sourceFsPath</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> source_projectId</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> source_path_string</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> destFsPath</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> dest_projectId</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> dest_path_string</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.copyFile.sourceFsPath', sourceFsPath, 'destFsPath', destFsPath</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> file.copy</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> sourceFsPath</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> destFsPath</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.copyFile.sourceFsPath', sourceFsPath, 'destFsPath', destFsPath</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null)</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.moveFile</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> source_projectId</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> source_path_string</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> dest_projectId</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> dest_path_string</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> isMounted == false</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> sourceFsPath</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> source_projectId</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> source_path_string</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> destFsPath</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> dest_projectId</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> dest_path_string</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.moveFile.sourceFsPath', sourceFsPath, 'destFsPath', destFsPath</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> file.moveFile</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> sourceFsPath</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> destFsPath</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.moveFile.sourceFsPath', sourceFsPath, 'destFsPath', destFsPath</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_31">
                    <div class="code-panel" id="d_31">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/delete_copy_moveFolder.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.deleteFolder</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> path_string</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_26"> check_mounted</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> fsPath</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> path_string</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.deleteFolder.fsPath', fsPath</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> file.deleteFolder</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> fsPath</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.deleteFolder.fsPath', fsPath, 'result', result</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, result)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.copyFolder</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> source_projectId</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> source_itemPath</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> dest_projectId</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> dest_itemPath</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_26"> check_mounted</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> sourceFsPath</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> source_projectId</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> source_itemPath</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> destFsPath</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> dest_projectId</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> dest_itemPath</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.copyFolder.sourceFsPath', sourceFsPath, 'destFsPath', destFsPath</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> file.copyFolder</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> sourceFsPath</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> destFsPath</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.copyFolder.sourceFsPath', sourceFsPath, 'destFsPath', destFsPath</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null)</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.moveFolder</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> source_projectId</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> source_itemPath</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> dest_projectId</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> dest_itemPath</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_26"> check_mounted</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> sourceFsPath</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> source_projectId</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> source_itemPath</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> destFsPath</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> dest_projectId</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> dest_itemPath</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.moveFolder.sourceFsPath', sourceFsPath, 'destFsPath', destFsPath</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> file.moveFolder</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> sourceFsPath</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> destFsPath</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.moveFolder.sourceFsPath', sourceFsPath, 'destFsPath', destFsPath</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_32">
                    <div class="code-panel" id="d_32">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/duplicate_renameFile.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.duplicateFile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> itemPath</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> newName</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_26"> check_mounted</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> duplicatedItemPath = parentPath(itemPath) + '/' + newName</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.duplicateFile', userId, projectId, itemPath, duplicatedItemPath</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> md.exists</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> duplicatedItemPath</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> result</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_27">r_cb_fs_err(</span><span class="pp-arg"> duplicated file name already exists </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> md.copyFile</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> itemPath</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> duplicatedItemPath</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_28">r_cb_fs(</span><span class="pp-arg"> file duplicated </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.renameFile</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> itemPath</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> newName</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_26"> check_mounted</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> renamedItemPath = parentPath(itemPath) + '/' + newName</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.renameFile', userId, projectId, itemPath, renamedItemPath</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> md.exists</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> renamedItemPath</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> result</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_27">r_cb_fs_err(</span><span class="pp-arg"> renamed file name already exists </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> oldPath</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> itemPath</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> newPath</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> renamedItemPath</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> file.rename</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> oldPath</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> newPath</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_28">r_cb_fs(</span><span class="pp-arg"> file renamed </span><span class="pp-mix">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_33">
                    <div class="code-panel" id="d_33">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/duplicate_renameFolder.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.duplicateFolder</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> itemPath</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> newName</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_26"> check_mounted</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> duplicatedItemPath = parentPath(itemPath) + '/' + newName</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.duplicateFolder', userId, projectId, itemPath, duplicatedItemPath</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> md.exists</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> duplicatedItemPath</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> result</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_27">r_cb_fs_err(</span><span class="pp-arg"> duplicated folder name already exists </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> md.copyFolder</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> itemPath</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> duplicatedItemPath</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_28">r_cb_fs(</span><span class="pp-arg"> file duplicated </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.renameFolder</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> itemPath</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> newName</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_26"> check_mounted</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> renamedItemPath = parentPath(itemPath) + '/' + newName</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.renameFolder', userId, projectId, itemPath, renamedItemPath</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> md.exists</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> renamedItemPath</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> result</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_27">r_cb_fs_err(</span><span class="pp-arg"> renamed folder name already exists </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> oldPath</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> itemPath</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> newPath</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> renamedItemPath</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> file.rename</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> oldPath</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> newPath</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_28">r_cb_fs(</span><span class="pp-arg"> file renamed </span><span class="pp-mix">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_34">
                    <div class="code-panel" id="d_34">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/exists.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.exists</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> path_string</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> isMounted == false</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> fsPath</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> path_string</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.exists.fsPath', fsPath</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> exists</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> file.exists</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> fsPath</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.exists.fsPath', fsPath, 'exists', exists</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, exists)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_35">
                    <div class="code-panel" id="d_35">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/fsItem.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.copyFsItem</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> action</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> action.itemKind == 0</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> md.copyFolder</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceProjectId</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceItemPath</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destProjectId</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destItemPath</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> md.copyFile</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceProjectId</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceItemPath</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destProjectId</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destItemPath</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.moveFsItem</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> action</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> action.itemKind == 0</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> md.moveFolder</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceProjectId</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceItemPath</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destProjectId</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destItemPath</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> md.moveFile</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceProjectId</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceItemPath</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destProjectId</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destItemPath</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.deleteFsItem</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> action</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.FileSystem.deleteFsItem.action', action</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> action.itemKind == 0</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> md.deleteFolder</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.userId || userId</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.projectId</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.itemPath</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> md.deleteFile</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.userId || userId</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.projectId</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.itemPath</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_36">
                    <div class="code-panel" id="d_36">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/fsstat.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> FsStat</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> fsitem</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.fsitem = fsitem</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> isDirectory</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.fsitem.kind == 0</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> isFile</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.fsitem.kind == 1</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_37">
                    <div class="code-panel" id="d_37">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/glob.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.glob</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> pattern</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> isMounted == false</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> fsPattern</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> pattern</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.glob.fsPattern', fsPattern</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> glob</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> fsPattern</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> this</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> fsitems </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.glob.fsPattern', fsPattern, 'fsitems', fsitems</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, fsitems)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_38">
                    <div class="code-panel" id="d_38">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/isFile.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.isFile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> path_string</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> isMounted == false</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> fsPath</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> path_string</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.isFile.fsPath', fsPath</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> exists</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> file.isFile</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> fsPath</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.isFile.fsPath', fsPath, 'exists', exists</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, exists)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_39">
                    <div class="code-panel" id="d_39">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/isFolder.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.isFolder</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> path_string</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> isMounted == false</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> fsPath</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> path_string</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.isFolder.fsPath', fsPath</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> exists</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> file.isDirectory</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> fsPath</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.isFolder.fsPath', fsPath, 'exists', exists</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, exists)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_40">
                    <div class="code-panel" id="d_40">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/mkdir.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.mkdir</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> path_string</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> isMounted == false</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> fsPath</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> path_string</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.mkdir.fsPath', fsPath</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> file.mkdir</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> fsPath</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.createFolder.fsPath', fsPath</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_41">
                    <div class="code-panel" id="d_41">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/readdir.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.readDir</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> dirPath</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> isMounted == false</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> fsPath</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> projectId != null</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> fsPath = path.join(fsPath, projectId)</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> dirPath != null</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> fsPath = path.join(fsPath, dirPath)</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> fsPath = normalize(fsPath)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.readDir.fsPath', fsPath</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> file.getDir</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> fsPath</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> files </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> fsitems = filesToFsitems(files)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.readDir.fsPath', fsPath, 'fsitems', fsitems</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, fsitems)</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md._readDir</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> dirPath</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> isMounted == false</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> fsPath</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> dirPath</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.readDir.fsPath', fsPath</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> file.getDir</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> fsPath</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> files </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> fsitems = filesToFsitems(files)</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.readDir.fsPath', fsPath, 'fsitems', fsitems</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, fsitems)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_42">
                    <div class="code-panel" id="d_42">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/readFile.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.readFile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> path_string</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> isMounted == false</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> fsPath</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> path_string</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.readFile.fsPath', fsPath</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> file.readFile</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> fsPath</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> content </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.readFile.fsPath', fsPath, 'content', content</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, content)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_43">
                    <div class="code-panel" id="d_43">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/stat.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.stat</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> filePath</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> isMounted == false</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> fsPath</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> filePath</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.stat.fsPath', fsPath</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> fsdb.getItemByPath</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> fsPath</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> fsitem </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.stat.fsPath', fsPath, 'fsitem', fsitem</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> fsitem == null</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> er</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> code 'ENOENT'</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                                </span><span class="pp-tag">new</span><span class="pp-pln"> FsStat</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> fsitem</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md._stat</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> filePath</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> isMounted == false</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> fsPath</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> filePath</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.stat.fsPath', fsPath</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> file.exists(fsPath) == false</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> err</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> code 'ENOENT'</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                        </span><span class="pp-tag">new</span><span class="pp-pln"> FsStat</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> fileToFsItem</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> fsPath</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_44">
                    <div class="code-panel" id="d_44">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/writeFile.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.writeFile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> path_string</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> content</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> isMounted == false</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> message 'IO wizzi repository not mounted. Review your start procedure'</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> fsPath</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> path_string</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.writeFile.fsPath', fsPath</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> file.writeFile</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> fsPath</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> content</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem.writeFile.fsPath', fsPath, 'result', result</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, result)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_45">
                    <div class="code-panel" id="d_45">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/errors.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> util</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_172">error(</span><span class="pp-arg"> NotImplemented</span><span class="pp-pln">,</span><span class="pp-arg">  message </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> 'message', message</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.message = message</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_172">error(</span><span class="pp-arg"> InvalidRequest</span><span class="pp-pln">,</span><span class="pp-arg">  message</span><span class="pp-pln">,</span><span class="pp-arg">  code </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> 'message', message</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.message = message</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.code = code</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_172">error(</span><span class="pp-arg"> FsItemNotFound</span><span class="pp-pln">,</span><span class="pp-arg">  resourceType</span><span class="pp-pln">,</span><span class="pp-arg">  uri </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.message = resourceType + ': ' + uri + ' not found '</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_46">
                    <div class="code-panel" id="d_46">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/filesystem.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> util</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> path</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> glob</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> async</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> file = require('wizzi-utils').file</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">var</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">decl</span><span class="pp-pln"> isMounted = false</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">decl</span><span class="pp-pln"> fsBaseFolderPath = null</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a"> filesystem/fsstat</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports =</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.isMounted</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> isMounted</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.mount</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> baseFolderPath</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> fsBaseFolderPath = baseFolderPath</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> isMounted = true</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-io.filesystem mounted. BaseFolderPath: ' + baseFolderPath</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.unmount</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> isMounted = false</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> fsBaseFolderPath = null</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null)</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.fullPathForHash</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> projectId</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> path_string</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> isMounted == false</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">throw</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-tag">new</span><span class="pp-pln"> Error</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'IO wizzi repository not mounted. Review your start procedure.'</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> normalize</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> fsBaseFolderPath</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> projectId</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> path_string</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_34"> filesystem/exists</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_38"> filesystem/isFile</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_39"> filesystem/isFolder</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_42"> filesystem/readFile</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_44"> filesystem/writeFile</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_40"> filesystem/mkdir</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_41"> filesystem/readdir</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_43"> filesystem/stat</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_37"> filesystem/glob</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_30"> filesystem/delete_copy_moveFile</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_31"> filesystem/delete_copy_moveFolder</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_32"> filesystem/duplicate_renameFile</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_33"> filesystem/duplicate_renameFolder</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_245"> filesystem/fsitem</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_29"> filesystem/batch</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> normalize</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> path</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> path.trim().replace(/\\/g,'/').toLowerCase()</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> filesToFsitems</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> files</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ret = []</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> f in files</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ret.push</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> fileToFsItem</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> f</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> fileToFsItem</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> filePath</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> _id filePath</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> basename path.basename(filePath)</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> parentId path.dirname(filePath)</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> dirname path.dirname(filePath)</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> path filePath</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> kind ( file.isDirectory(filePath) ? 0 : 1 )</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> fileToDocument</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> filePath</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> _id filePath</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> content file.read(filePath)</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> lastModified file.lastModified(filePath)</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> parentPath</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> itemPath</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> itemPath = normalize(itemPath)</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> itemPath.substr(0, itemPath.lastIndexOf('/'))</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_47">
                    <div class="code-panel" id="d_47">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/model/t/modelinfo/loading.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getLoadModel</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> !this.productionManager()</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> InvalidOperation</span><span class="pp-pln">,</span><span class="pp-arg">  getLoadModel </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> "Method called without setting the 'productionManager' object"</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isEmpty(this.schema) && verify.isEmpty(this.format)</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> InvalidOperation</span><span class="pp-pln">,</span><span class="pp-arg">  getLoadModel </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> "Method called without setting neither the 'schema' nor the 'format' name"</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isNotEmpty(this.schema)</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_171">checked_call(</span><span class="pp-arg"> loadModel </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.productionManager().getLoadModel</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.schema</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> loadModel == null</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> err</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">new</span><span class="pp-pln"> errors.NotFoundError</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'WizziModelFactory'</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> this.schema</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> this</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> NotFound</span><span class="pp-pln">,</span><span class="pp-arg">  getLoadModel</span><span class="pp-pln">,</span><span class="pp-arg">  err </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'Cannot retrieve wizzi-plugin.modelFactory.loadModel method for schema: ' + this.schema</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, loadModel)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.format === 'json'</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> this._getLoadJsonModel()</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">elif</span><span class="pp-pln"> this.format === 'xml'</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> this._getLoadXmlModel()</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> this._getLoadJsModel()</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> _getLoadJsonModel</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">function</span><span class="pp-pln"> loadJsonModel</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">string</span><span class="pp-pln"> sourceUri</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">{</span><span class="pp-pln"> context</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                    </span><span class="pp-tag">optional</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                </span><span class="pp-tag">callback</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> TODO interpolate object values of type string?</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> interpolate property names too?</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> that.readJSON</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> sourceUri</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> _getLoadXmlModel</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">function</span><span class="pp-pln"> loadXmlModel</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">string</span><span class="pp-pln"> sourceUri</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                </span><span class="pp-tag">{</span><span class="pp-pln"> context</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">callback</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> TODO interpolate object values of type string?</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> interpolate property names too?</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> that.readXml</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> sourceUri</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> _getLoadJsModel</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">            </span><span class="pp-tag">function</span><span class="pp-pln"> loadJsModel</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                </span><span class="pp-tag">string</span><span class="pp-pln"> sourceUri</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                </span><span class="pp-tag">{</span><span class="pp-pln"> context</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                </span><span class="pp-tag">callback</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> fileService = that.getFileService()</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> fileService.isFile</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> sourceUri</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> isFile </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> isFile == false</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'NotFound'</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'loadJsModel'</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'Cannot find javascript module: ' + sourceUri + '. See inner error'</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                                        </span><span class="pp-tag">new</span><span class="pp-pln"> errors.NotFoundError</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'javascript module'</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> sourceUri</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> this</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                        </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                            </span><span class="pp-tag">try</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                                </span><span class="pp-tag">var</span><span class="pp-pln"> model = require(sourceUri)</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                                </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isFunction(model.toModel)</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                                    </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> model.toModel</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> context</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                                </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                                    </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> model</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                            </span><span class="pp-tag">catch</span><span class="pp-pln"> ex</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> TypeError</span><span class="pp-pln">,</span><span class="pp-arg">  loadJsModel</span><span class="pp-pln">,</span><span class="pp-arg">  ex </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'Error requiring js module: ' + sourceUri + '. Message: ' + ex.message</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getModelTransformer</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> trasformerName</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> !this.productionManager()</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> InvalidOperation</span><span class="pp-pln">,</span><span class="pp-arg">  getModelTransformer </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> "Method called without setting the 'productionManager' object"</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_171">checked_call(</span><span class="pp-arg"> modelTransformer </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.productionManager().getModelTransformer</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> trasformerName</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> modelTransformer == null</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">                    </span><span class="pp-tag">new</span><span class="pp-pln"> errors.NotFoundError</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'modelTransformer'</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> trasformerName</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> this</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, modelTransformer)</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getArtifactGenerator</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> generatorName</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> !this.productionManager()</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_178">r_cb_error(</span><span class="pp-arg"> 999</span><span class="pp-pln">,</span><span class="pp-arg">  getArtifactGenerator</span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> "Method called without setting the 'productionManager' object"</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_171">checked_call(</span><span class="pp-arg"> generator </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.productionManager().getArtifactGenerator</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> generatorName</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> generator == null</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">                    </span><span class="pp-tag">new</span><span class="pp-pln"> errors.NotFoundError</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'generator'</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> generatorName</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> this</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, generator)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_48">
                    <div class="code-panel" id="d_48">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/model/t/modelinfo/sources.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getSource</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> fileService = this.getFileService()</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.exists</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> exists </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> !exists</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> NotFound</span><span class="pp-pln">,</span><span class="pp-arg">  getSource </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> "Cannot get source. File not found : " + that.srcFullPath()</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> that.isFile</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> isFile </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> !isFile</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> InvalidOperation</span><span class="pp-pln">,</span><span class="pp-arg">  getSource </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> "Cannot get source. Is not a file : " + that.srcFullPath()</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> fileService.read</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> that.srcFullPath()</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getSources</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> fileService = this.getFileService()</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.exists</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> exists </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> !exists</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> NotFound</span><span class="pp-pln">,</span><span class="pp-arg">  getSources </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> "Cannot get sources. Directory not found : " + that.srcFullPath()</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> that.isDirectory</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> isDirectory </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> !isDirectory</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> InvalidOperation</span><span class="pp-pln">,</span><span class="pp-arg">  getSources </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> "Cannot get sources. Is not a directory : " + that.srcFullPath()</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> that.getFiles</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> fileInfos </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> async.map</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> fileInfos</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                                    </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                                        </span><span class="pp-tag">param</span><span class="pp-pln"> fileInfo</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                                        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> fileService.read</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> fileInfo.fullpath</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> content </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                                                </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                                                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                                                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                                                        </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                                                            </span><span class="pp-tag">@</span><span class="pp-pln"> fullpath fileInfo.fullpath</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                                                            </span><span class="pp-tag">@</span><span class="pp-pln"> relpath fileInfo.relpath</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                                                            </span><span class="pp-tag">@</span><span class="pp-pln"> content content</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> fileContents </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                                        </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> fileContents</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getFiles</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">boolean</span><span class="pp-pln"> final</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> fileService = this.getFileService()</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.exists</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> exists </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> !exists</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> NotFound</span><span class="pp-pln">,</span><span class="pp-arg">  getFiles </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> "Cannot get files. Directory not found : " + that.srcFullPath()</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> that.isDirectory</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> isDirectory </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> !isDirectory</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> InvalidOperation</span><span class="pp-pln">,</span><span class="pp-arg">  getFiles </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> "Cannot get files. Is not a directory : " + that.srcFullPath()</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                            </span><span class="pp-tag">decl</span><span class="pp-pln"> ret</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                                </span><span class="pp-tag">[</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                            </span><span class="pp-tag">decl</span><span class="pp-pln"> srcFullPath = that.srcFullPath()</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                            </span><span class="pp-tag">decl</span><span class="pp-pln"> srcGlobPath = that.srcGlobPath()</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> fileService.getGlobbedFiles</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> srcGlobPath</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> that.srcGlobOptions()</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> files </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                                </span><span class="pp-tag">for</span><span class="pp-pln"> var i = 0; i &lt; files.length; i++</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                                    </span><span class="pp-tag">var</span><span class="pp-pln"> fileInfo = files[i]</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                                    </span><span class="pp-tag">#</span><span class="pp-pln"> skip "_debug" folder</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                                    </span><span class="pp-tag">if</span><span class="pp-pln"> fileInfo.indexOf('/_debug/') &gt; -1</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                                        </span><span class="pp-tag">continue</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                                    </span><span class="pp-tag">#</span><span class="pp-pln"> skip "__copy" and "t" folders</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                                    </span><span class="pp-tag">if</span><span class="pp-pln"> !options.final</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                                        </span><span class="pp-tag">if</span><span class="pp-pln"> fileInfo.indexOf('__copy/') &gt;= 0 || fileInfo.indexOf('/t/') &gt;= 0</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                                            </span><span class="pp-tag">continue</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                                    </span><span class="pp-tag">var</span><span class="pp-pln"> fullpath = fileInfo</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                                    </span><span class="pp-tag">var</span><span class="pp-pln"> relpath</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                                        </span><span class="pp-tag">iif</span><span class="pp-pln"> that.config.cwd</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                                            </span><span class="pp-tag">then</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                                                </span><span class="pp-tag">_</span><span class="pp-pln"> relPath</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> fullpath</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> that.config.cwd</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                                            </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                                                </span><span class="pp-tag">set</span><span class="pp-pln"> null</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> ret.push</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> fullpath fullpath</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> relpath relpath</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> ret</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> readJSON</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> sourceUri</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> fileService = this.getFileService()</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> fileService.isFile</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> sourceUri</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> isFile </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> isFile == false</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> NotFound</span><span class="pp-pln">,</span><span class="pp-arg">  readJSON </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> "Cannot find json document : " + sourceUri</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> fileService.readJSON</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> sourceUri</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> readXml</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> sourceUri</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> fileService = this.getFileService()</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> fileService.isFile</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> sourceUri</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> isFile </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> isFile == false</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> NotFound</span><span class="pp-pln">,</span><span class="pp-arg">  readXml </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> "Cannot find xml document : " + sourceUri</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> fileService.readXml</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> sourceUri</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> exists</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> fileService = this.getFileService()</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> fileService.exists</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.srcFullPath()</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> isDirectory</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> fileService = this.getFileService()</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> fileService.isDirectory</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.srcFullPath()</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> isFile</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> fileService = this.getFileService()</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> fileService.isFile</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.srcFullPath()</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_49">
                    <div class="code-panel" id="d_49">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/model/asyncModelLoader.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Objects</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> - Model</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Is the core object of the model driven wizzi factory.</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> A model is a single object (wizzi model or POJO) acting as a context object in</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> mTree loadings, model transformations and artifact generations.</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Models (single or group of similars) are described by wizzi.model.modelInfo api.</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> - Templated model</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> A templated model is a model that contains itself template commands and require</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> one or more context objects. The process is recursive and has no limit except</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> a guard to avoid infinite loops during recursive evaluation of contexts.</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> - Context models</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Context models are an array of models acting as a context object for a templated</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> model.</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Context models, being models themselves, are also described by wizzi.model.modelInfo api.</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> - Model collection</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> A model collection is an array property of a model, where each item of</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> the array is used as a model acting as a context object.</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> The properties of the item can be used to build the destination path of the generated artifact.</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Model collections are described in the wizzi.model.ModelCollectionInfo api.</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> TODO Implement transformModel context objects.</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> async = require('async')</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> _ = require('lodash')</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> log</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> require('../util/log')</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a">(</span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> module</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> logme</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> false</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> console.log.apply(console, arguments)</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">    </span><span class="pp-tag">wz-function</span><span class="pp-pln"> loadMany</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> modelInfos</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> modelInfos.length &gt; 0</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> log.setLevel</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfos[0].productionManager().options.verbose</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log '+ asyncModelLoader.loadMany, modelInfos', modelInfos</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> async.map</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfos</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> _load_item</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziModels </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'asyncModelLoader.loadMany, wizziModels', wizziModels</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_180">r_cb(</span><span class="pp-arg"> wizziModels </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">    </span><span class="pp-tag">wz-function</span><span class="pp-pln"> load</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> modelInfo</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> log.setLevel</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo.productionManager().options.verbose</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> _load_item</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziModel </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'asyncModelLoader.load, wizziModel', wizziModel</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_180">r_cb(</span><span class="pp-arg"> wizziModel </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">    </span><span class="pp-tag">wz-function</span><span class="pp-pln"> old_VIA_load</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> modelInfo</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> log.setLevel</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo.productionManager().options.verbose</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> log.info</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'Started.async.load.model'</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.srcFullPath()</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> modelInfos</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">[</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> async.map</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfos</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> _load_item</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> wizziModels</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span><span class="pp-pln"> callback(err, null)</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> log.info</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'Ended.async.load.model'</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.srcFullPath()</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModels[0]</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Load a single wizzi model using ModelInfo data</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> The master ModelInfo may contain one or many context ModelInfos</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { masterModelInfo</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string id</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> [ contexts</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> [ transformers</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string exportName</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string schema</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { coll</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> boolean generatorRequireContextOnly</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> func getLoadModel</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> func productionManager</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> func srcFullPath</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">    </span><span class="pp-tag">wz-function</span><span class="pp-pln"> _load_item</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> masterModelInfo</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log '+ asyncModelLoader._load_item, masterModelInfo', masterModelInfo</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'AsyncModelLoader._load_item.masterModelInfo.config'</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> util.inspect</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> masterModelInfo.config</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> depth 3</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> masterModelInfo.contexts && masterModelInfo.contexts.length &gt; 0</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> The master modelInfo has context ModelInfos, so it is a 'templated model'.</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> First of all recursively load and evaluate its 'context models'</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> (obsolete VIA) step 1 - set the production state on each contextModelInfo</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> contextModelInfo in masterModelInfo.contexts</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> (obsolete VIA) set contextModelInfo.___state = masterModelInfo.___state</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'AsyncModelLoader._load_item.context'</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> contextModelInfo.id</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> contextModelInfo.srcFullPath()</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log '====== ++++++ masterModelInfo.contexts', masterModelInfo.contexts</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> step 2 - recurse contextModelInfo loading</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> async.map</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> masterModelInfo.contexts</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> _load_item</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> contextWizziModels</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log '+ asyncModelLoader._load_item, after load contexts.contextWizziModels', contextWizziModels</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> log.error</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'Error.AsyncModelLoader._load_item'</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> util.inspect</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> err</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> depth null</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span><span class="pp-pln"> callback(err, null)</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log '====== ++++++ contextWizziModels.length', contextWizziModels.length</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> step 3 - Prepare the loading context object for the master model loading.</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> If one context is a model collection, prepare the model collection context</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">                        </span><span class="pp-tag">decl</span><span class="pp-pln"> wizziModelWithModelCollection = null</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">                        </span><span class="pp-tag">decl</span><span class="pp-pln"> modelCollectionContextWizziModelIndex = -1</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">                        </span><span class="pp-tag">decl</span><span class="pp-pln"> masterLoadingContext</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">                    </span><span class="pp-tag">for</span><span class="pp-pln"> var i = 0; i &lt; contextWizziModels.length; i++</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> contextWizziModel = contextWizziModels[i]</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> masterLoadingContext[contextWizziModel.___exportName] = contextWizziModel</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> contextWizziModel.___coll</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> wizziModelWithModelCollection = contextWizziModel</span></div><div class="L5"><span class="pp-ln"> 155 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> modelCollectionContextWizziModelIndex = i</span></div><div class="L6"><span class="pp-ln"> 156 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log '====== ++++++ modelCollectionContextWizziModelIndex', modelCollectionContextWizziModelIndex</span></div><div class="L7"><span class="pp-ln"> 157 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> modelCollectionContextWizziModelIndex &gt; -1</span></div><div class="L8"><span class="pp-ln"> 158 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> Yes one of the loaded context models is a model collection.</span></div><div class="L9"><span class="pp-ln"> 159 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> step 3.b - Prepare the context object of each item of the model collection.</span></div><div class="L0"><span class="pp-ln"> 160 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> This is quite complex:</span></div><div class="L1"><span class="pp-ln"> 161 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> . We must create a context object for each item in the model collection.</span></div><div class="L2"><span class="pp-ln"> 162 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> . Every context object must contain (as properties) all the loaded contextWizziModels</span></div><div class="L3"><span class="pp-ln"> 163 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> plus the item itself of the model collection.</span></div><div class="L4"><span class="pp-ln"> 164 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_171">checked_call(</span><span class="pp-arg"> collectionItemsContextObjects</span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln"> 165 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> prepareCollectionItemsContextObjects</span></div><div class="L6"><span class="pp-ln"> 166 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> masterModelInfo</span></div><div class="L7"><span class="pp-ln"> 167 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> contextWizziModels</span></div><div class="L8"><span class="pp-ln"> 168 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModelWithModelCollection</span></div><div class="L9"><span class="pp-ln"> 169 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> masterLoadingContext</span></div><div class="L0"><span class="pp-ln"> 170 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> masterModelInfo.generatorRequireContextOnly</span></div><div class="L1"><span class="pp-ln"> 171 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> There is no source document for the artifact to be generated.</span></div><div class="L2"><span class="pp-ln"> 172 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> The ArtifactGenerator simply requires a context object.</span></div><div class="L3"><span class="pp-ln"> 173 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> So collect the loaded contexts in an array and pass them back.</span></div><div class="L4"><span class="pp-ln"> 174 </span><span class="pp-pln">                            </span><span class="pp-tag">var</span><span class="pp-pln"> collModelInstances</span></div><div class="L5"><span class="pp-ln"> 175 </span><span class="pp-pln">                                </span><span class="pp-tag">[</span></div><div class="L6"><span class="pp-ln"> 176 </span><span class="pp-pln">                            </span><span class="pp-tag">foreach</span><span class="pp-pln"> itemContextObject in collectionItemsContextObjects</span></div><div class="L7"><span class="pp-ln"> 177 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> collModelInstances.push</span></div><div class="L8"><span class="pp-ln"> 178 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> _.assign</span></div><div class="L9"><span class="pp-ln"> 179 </span><span class="pp-pln">                                        </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln"> 180 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> itemContextObject.context</span></div><div class="L1"><span class="pp-ln"> 181 </span><span class="pp-pln">                                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln"> 182 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> ___collItem itemContextObject.itemObject</span></div><div class="L3"><span class="pp-ln"> 183 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln"> 184 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, collModelInstances)</span></div><div class="L5"><span class="pp-ln"> 185 </span><span class="pp-pln">                        </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln"> 186 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> step 4.b - load a context for each item of the collection context</span></div><div class="L7"><span class="pp-ln"> 187 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln"> 188 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> async.map</span></div><div class="L9"><span class="pp-ln"> 189 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> collectionItemsContextObjects</span></div><div class="L0"><span class="pp-ln"> 190 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> load_collection_item</span></div><div class="L1"><span class="pp-ln"> 191 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln"> 192 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln"> 193 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> step 3.1 - load the context model</span></div><div class="L4"><span class="pp-ln"> 194 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> masterModelInfo.getLoadModel</span></div><div class="L5"><span class="pp-ln"> 195 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziModelFactory </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln"> 196 </span><span class="pp-pln">                                </span><span class="pp-tag">var</span><span class="pp-pln"> loadContext</span></div><div class="L7"><span class="pp-ln"> 197 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln"> 198 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> mTreeBuildUpContext</span></div><div class="L9"><span class="pp-ln"> 199 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> _.assign</span></div><div class="L0"><span class="pp-ln"> 200 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln"> 201 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> masterModelInfo.productionManager().globalContext() || {}</span></div><div class="L2"><span class="pp-ln"> 202 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> masterLoadingContext</span></div><div class="L3"><span class="pp-ln"> 203 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> __productionManager masterModelInfo.productionManager()</span></div><div class="L4"><span class="pp-ln"> 204 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L5"><span class="pp-ln"> 205 </span><span class="pp-pln">                                            </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln"> 206 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> isCompile masterModelInfo.isCompile</span></div><div class="L7"><span class="pp-ln"> 207 </span><span class="pp-pln">                                </span><span class="pp-tag">#</span><span class="pp-pln"> log '====== ++++++ wizziModelFactory, masterModelInfo.srcFullPath()', wizziModelFactory, masterModelInfo.srcFullPath(), Object.keys(masterLoadingContext)</span></div><div class="L8"><span class="pp-ln"> 208 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> wizziModelFactory</span></div><div class="L9"><span class="pp-ln"> 209 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> masterModelInfo.srcFullPath()</span></div><div class="L0"><span class="pp-ln"> 210 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext</span></div><div class="L1"><span class="pp-ln"> 211 </span><span class="pp-pln">                                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziModel </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln"> 212 </span><span class="pp-pln">                                        </span><span class="pp-tag">set</span><span class="pp-pln"> wizziModel.___exportName = (masterModelInfo.exportName || masterModelInfo.schema)</span></div><div class="L3"><span class="pp-ln"> 213 </span><span class="pp-pln">                                        </span><span class="pp-tag">#</span><span class="pp-pln"> log '====== ++++++ wizziModel.___exportName', wizziModel.___exportName</span></div><div class="L4"><span class="pp-ln"> 214 </span><span class="pp-pln">                                        </span><span class="pp-tag">if</span><span class="pp-pln"> masterModelInfo.coll</span></div><div class="L5"><span class="pp-ln"> 215 </span><span class="pp-pln">                                            </span><span class="pp-tag">set</span><span class="pp-pln"> wizziModel.___coll = masterModelInfo.coll</span></div><div class="L6"><span class="pp-ln"> 216 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L7"><span class="pp-ln"> 217 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'AsyncModelLoader._load_item'</span></div><div class="L8"><span class="pp-ln"> 218 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'success with masterLoadingContext no collectionContext, masterModelInfo'</span></div><div class="L9"><span class="pp-ln"> 219 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> masterModelInfo.id</span></div><div class="L0"><span class="pp-ln"> 220 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'exportName'</span></div><div class="L1"><span class="pp-ln"> 221 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModel.___exportName</span></div><div class="L2"><span class="pp-ln"> 222 </span><span class="pp-pln">                                        </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln"> 223 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, wizziModel)</span></div><div class="L4"><span class="pp-ln"> 224 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L5"><span class="pp-ln"> 225 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> The master modelInfo has no context ModelInfos</span></div><div class="L6"><span class="pp-ln"> 226 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> simply load it.</span></div><div class="L7"><span class="pp-ln"> 227 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> srcFullPath = masterModelInfo.srcFullPath()</span></div><div class="L8"><span class="pp-ln"> 228 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> masterModelInfo.getLoadModel</span></div><div class="L9"><span class="pp-ln"> 229 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziModelFactory </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln"> 230 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> loadContext</span></div><div class="L1"><span class="pp-ln"> 231 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln"> 232 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> mTreeBuildUpContext</span></div><div class="L3"><span class="pp-ln"> 233 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> _.assign</span></div><div class="L4"><span class="pp-ln"> 234 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln"> 235 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> (masterModelInfo.productionManager().globalContext() || {})</span></div><div class="L6"><span class="pp-ln"> 236 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __productionManager masterModelInfo.productionManager()</span></div><div class="L7"><span class="pp-ln"> 237 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L8"><span class="pp-ln"> 238 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln"> 239 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> isCompile masterModelInfo.isCompile</span></div><div class="L0"><span class="pp-ln"> 240 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> wizziModelFactory</span></div><div class="L1"><span class="pp-ln"> 241 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> srcFullPath</span></div><div class="L2"><span class="pp-ln"> 242 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext</span></div><div class="L3"><span class="pp-ln"> 243 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziModel </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln"> 244 </span><span class="pp-pln">                            </span><span class="pp-tag">if</span><span class="pp-pln"> masterModelInfo.transformers && masterModelInfo.transformers.length &gt; 0</span></div><div class="L5"><span class="pp-ln"> 245 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> recurseTransform</span></div><div class="L6"><span class="pp-ln"> 246 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> masterModelInfo.transformers</span></div><div class="L7"><span class="pp-ln"> 247 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModel</span></div><div class="L8"><span class="pp-ln"> 248 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> masterModelInfo</span></div><div class="L9"><span class="pp-ln"> 249 </span><span class="pp-pln">                                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> transformedWizziModel</span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln"> 250 </span><span class="pp-pln">                                        </span><span class="pp-tag">set</span><span class="pp-pln"> transformedWizziModel.___exportName = (masterModelInfo.exportName || masterModelInfo.schema)</span></div><div class="L1"><span class="pp-ln"> 251 </span><span class="pp-pln">                                        </span><span class="pp-tag">if</span><span class="pp-pln"> masterModelInfo.coll</span></div><div class="L2"><span class="pp-ln"> 252 </span><span class="pp-pln">                                            </span><span class="pp-tag">#</span><span class="pp-pln"> this wizziModel is a context model from which</span></div><div class="L3"><span class="pp-ln"> 253 </span><span class="pp-pln">                                            </span><span class="pp-tag">#</span><span class="pp-pln"> will be extracted a collection context,</span></div><div class="L4"><span class="pp-ln"> 254 </span><span class="pp-pln">                                            </span><span class="pp-tag">#</span><span class="pp-pln"> when bubbling up from the recursive loading</span></div><div class="L5"><span class="pp-ln"> 255 </span><span class="pp-pln">                                            </span><span class="pp-tag">set</span><span class="pp-pln"> transformedWizziModel.___coll = masterModelInfo.coll</span></div><div class="L6"><span class="pp-ln"> 256 </span><span class="pp-pln">                                        </span><span class="pp-tag">#</span><span class="pp-pln"> cache the loaded model, one day, may be, will be useful</span></div><div class="L7"><span class="pp-ln"> 257 </span><span class="pp-pln">                                        </span><span class="pp-tag">set</span><span class="pp-pln"> masterModelInfo.productionManager().setStateModel(srcFullPath, transformedWizziModel)</span></div><div class="L8"><span class="pp-ln"> 258 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L9"><span class="pp-ln"> 259 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'AsyncModelLoader._load_item'</span></div><div class="L0"><span class="pp-ln"> 260 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'success after transformation, masterModelInfo'</span></div><div class="L1"><span class="pp-ln"> 261 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> masterModelInfo.id</span></div><div class="L2"><span class="pp-ln"> 262 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'exportName'</span></div><div class="L3"><span class="pp-ln"> 263 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModel.___exportName</span></div><div class="L4"><span class="pp-ln"> 264 </span><span class="pp-pln">                                        </span><span class="pp-tag">#</span><span class="pp-pln"> log '+ asyncModelLoader._load_item.after transformations', transformedWizziModel</span></div><div class="L5"><span class="pp-ln"> 265 </span><span class="pp-pln">                                        </span><span class="pp-tag">return</span></div><div class="L6"><span class="pp-ln"> 266 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, transformedWizziModel)</span></div><div class="L7"><span class="pp-ln"> 267 </span><span class="pp-pln">                            </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln"> 268 </span><span class="pp-pln">                                </span><span class="pp-tag">set</span><span class="pp-pln"> wizziModel.___exportName = (masterModelInfo.exportName || masterModelInfo.schema)</span></div><div class="L9"><span class="pp-ln"> 269 </span><span class="pp-pln">                                </span><span class="pp-tag">if</span><span class="pp-pln"> masterModelInfo.coll</span></div><div class="L0"><span class="pp-ln"> 270 </span><span class="pp-pln">                                    </span><span class="pp-tag">#</span><span class="pp-pln"> this wizziModel is a context model from which</span></div><div class="L1"><span class="pp-ln"> 271 </span><span class="pp-pln">                                    </span><span class="pp-tag">#</span><span class="pp-pln"> will be extracted a collection context,</span></div><div class="L2"><span class="pp-ln"> 272 </span><span class="pp-pln">                                    </span><span class="pp-tag">#</span><span class="pp-pln"> when bubbling up from the recursive loading</span></div><div class="L3"><span class="pp-ln"> 273 </span><span class="pp-pln">                                    </span><span class="pp-tag">set</span><span class="pp-pln"> wizziModel.___coll = masterModelInfo.coll</span></div><div class="L4"><span class="pp-ln"> 274 </span><span class="pp-pln">                                </span><span class="pp-tag">#</span><span class="pp-pln"> cache the loaded model, one day, may be, will be useful</span></div><div class="L5"><span class="pp-ln"> 275 </span><span class="pp-pln">                                </span><span class="pp-tag">set</span><span class="pp-pln"> masterModelInfo.productionManager().setStateModel(srcFullPath, wizziModel)</span></div><div class="L6"><span class="pp-ln"> 276 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L7"><span class="pp-ln"> 277 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'AsyncModelLoader._load_item'</span></div><div class="L8"><span class="pp-ln"> 278 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'success, masterModelInfo'</span></div><div class="L9"><span class="pp-ln"> 279 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> masterModelInfo.id</span></div><div class="L0"><span class="pp-ln"> 280 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'exportName'</span></div><div class="L1"><span class="pp-ln"> 281 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModel.___exportName</span></div><div class="L2"><span class="pp-ln"> 282 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln"> 283 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, wizziModel)</span></div><div class="L4"><span class="pp-ln"> 284 </span><span class="pp-pln">    </span><span class="pp-tag">wz-function</span><span class="pp-pln"> recurseTransform</span></div><div class="L5"><span class="pp-ln"> 285 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> modelTransformers</span></div><div class="L6"><span class="pp-ln"> 286 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> instance</span></div><div class="L7"><span class="pp-ln"> 287 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> modelInfo</span></div><div class="L8"><span class="pp-ln"> 288 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln"> 289 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> len = modelTransformers.length</span></div><div class="L0"><span class="pp-ln"> 290 </span><span class="pp-pln">        </span><span class="pp-tag">function</span><span class="pp-pln"> do_transform</span></div><div class="L1"><span class="pp-ln"> 291 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> index</span></div><div class="L2"><span class="pp-ln"> 292 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> index &gt;= len</span></div><div class="L3"><span class="pp-ln"> 293 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> callback(null, instance)</span></div><div class="L4"><span class="pp-ln"> 294 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> transformerConfig = modelTransformers[index]</span></div><div class="L5"><span class="pp-ln"> 295 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.getModelTransformer</span></div><div class="L6"><span class="pp-ln"> 296 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> transformerConfig.name</span></div><div class="L7"><span class="pp-ln"> 297 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> modelTransformer </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln"> 298 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> modelTransformer.trans</span></div><div class="L9"><span class="pp-ln"> 299 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> instance</span></div><div class="L0"><span class="pp-ln"> 300 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln"> 301 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> transformedWizziModel</span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln"> 302 </span><span class="pp-pln">                            </span><span class="pp-tag">if</span><span class="pp-pln"> transformerConfig.dumpFile</span></div><div class="L3"><span class="pp-ln"> 303 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> transformerConfig.dumpFile</span></div><div class="L4"><span class="pp-ln"> 304 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> transformedWizziModel</span></div><div class="L5"><span class="pp-ln"> 305 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> instance = transformedWizziModel</span></div><div class="L6"><span class="pp-ln"> 306 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> do_transform</span></div><div class="L7"><span class="pp-ln"> 307 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> index + 1</span></div><div class="L8"><span class="pp-ln"> 308 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> do_transform(0)</span></div><div class="L9"><span class="pp-ln"> 309 </span><span class="pp-pln">    </span><span class="pp-tag">wz-function</span><span class="pp-pln"> prepareCollectionItemsContextObjects</span></div><div class="L0"><span class="pp-ln"> 310 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> modelInfo</span></div><div class="L1"><span class="pp-ln"> 311 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> wizziModelContexts</span></div><div class="L2"><span class="pp-ln"> 312 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> wizziModelWithModelCollection</span></div><div class="L3"><span class="pp-ln"> 313 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> masterLoadingContext</span></div><div class="L4"><span class="pp-ln"> 314 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L5"><span class="pp-ln"> 315 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'prepareCollectionItemsContextObjects'</span></div><div class="L6"><span class="pp-ln"> 316 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'modelInfo'</span></div><div class="L7"><span class="pp-ln"> 317 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo.id</span></div><div class="L8"><span class="pp-ln"> 318 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> collName = wizziModelWithModelCollection.___coll.name</span></div><div class="L9"><span class="pp-ln"> 319 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> collItemExportName = wizziModelWithModelCollection.___coll.itemName</span></div><div class="L0"><span class="pp-ln"> 320 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L1"><span class="pp-ln"> 321 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'prepareCollectionItemsContextObjects'</span></div><div class="L2"><span class="pp-ln"> 322 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'collName, collItemExportName'</span></div><div class="L3"><span class="pp-ln"> 323 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> collName</span></div><div class="L4"><span class="pp-ln"> 324 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> collItemExportName</span></div><div class="L5"><span class="pp-ln"> 325 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> collectionArray = wizziModelWithModelCollection[collName]</span></div><div class="L6"><span class="pp-ln"> 326 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> !verify.isArray(collectionArray)</span></div><div class="L7"><span class="pp-ln"> 327 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln"> 328 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L9"><span class="pp-ln"> 329 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'Collection is not an array. Name: ' + collName + ', ' + modelInfo.toString()</span></div><div class="L0"><span class="pp-ln"> 330 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'prepareCollectionItemsContextObjects'</span></div><div class="L1"><span class="pp-ln"> 331 </span><span class="pp-pln">        </span><span class="pp-tag">var</span></div><div class="L2"><span class="pp-ln"> 332 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> itemContextObjects</span></div><div class="L3"><span class="pp-ln"> 333 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L4"><span class="pp-ln"> 334 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> context</span></div><div class="L5"><span class="pp-ln"> 335 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> itemObject in collectionArray</span></div><div class="L6"><span class="pp-ln"> 336 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> context</span></div><div class="L7"><span class="pp-ln"> 337 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> _.assign</span></div><div class="L8"><span class="pp-ln"> 338 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln"> 339 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> masterLoadingContext</span></div><div class="L0"><span class="pp-ln"> 340 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> context[collItemExportName] = itemObject</span></div><div class="L1"><span class="pp-ln"> 341 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> itemContextObjects.push</span></div><div class="L2"><span class="pp-ln"> 342 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln"> 343 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo modelInfo</span></div><div class="L4"><span class="pp-ln"> 344 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> itemObject itemObject</span></div><div class="L5"><span class="pp-ln"> 345 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> context context</span></div><div class="L6"><span class="pp-ln"> 346 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> itemContextObjects.length == 1</span></div><div class="L7"><span class="pp-ln"> 347 </span><span class="pp-pln">                </span><span class="pp-tag">for</span><span class="pp-pln"> var k in context</span></div><div class="L8"><span class="pp-ln"> 348 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> logme('prepareCollectionItemsContextObjects', 'context exportName', k)</span></div><div class="L9"><span class="pp-ln"> 349 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L0"><span class="pp-ln"> 350 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'prepareCollectionItemsContextObjects'</span></div><div class="L1"><span class="pp-ln"> 351 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'itemObject'</span></div><div class="L2"><span class="pp-ln"> 352 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> itemObject.wzName</span></div><div class="L3"><span class="pp-ln"> 353 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> itemContextObjects</span></div><div class="L4"><span class="pp-ln"> 354 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L5"><span class="pp-ln"> 355 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Load a single WizziModel using a single collection item as a context.</span></div><div class="L6"><span class="pp-ln"> 356 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L7"><span class="pp-ln"> 357 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { collectionLoadData</span></div><div class="L8"><span class="pp-ln"> 358 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { modelInfo</span></div><div class="L9"><span class="pp-ln"> 359 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string schema</span></div><div class="L0"><span class="pp-ln"> 360 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { ___state</span></div><div class="L1"><span class="pp-ln"> 361 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { pman // ProductionManager</span></div><div class="L2"><span class="pp-ln"> 362 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> function srcFullPath</span></div><div class="L3"><span class="pp-ln"> 363 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> boolean isCompile</span></div><div class="L4"><span class="pp-ln"> 364 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { context</span></div><div class="L5"><span class="pp-ln"> 365 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # prepared by prepareCollectionItemsContextObjects</span></div><div class="L6"><span class="pp-ln"> 366 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { itemObject</span></div><div class="L7"><span class="pp-ln"> 367 </span><span class="pp-pln">    </span><span class="pp-tag">wz-function</span><span class="pp-pln"> load_collection_item</span></div><div class="L8"><span class="pp-ln"> 368 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> collectionLoadData</span></div><div class="L9"><span class="pp-ln"> 369 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln"> 370 </span><span class="pp-pln">        </span><span class="pp-tag">var</span></div><div class="L1"><span class="pp-ln"> 371 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> modelInfo = collectionLoadData.modelInfo</span></div><div class="L2"><span class="pp-ln"> 372 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> context = collectionLoadData.context</span></div><div class="L3"><span class="pp-ln"> 373 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> itemObject = collectionLoadData.itemObject</span></div><div class="L4"><span class="pp-ln"> 374 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.getLoadModel</span></div><div class="L5"><span class="pp-ln"> 375 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziModelFactory </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln"> 376 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L7"><span class="pp-ln"> 377 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> "AsyncModelLoader.load_collection_item"</span></div><div class="L8"><span class="pp-ln"> 378 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> "modelInfo"</span></div><div class="L9"><span class="pp-ln"> 379 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo.id</span></div><div class="L0"><span class="pp-ln"> 380 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> "schema"</span></div><div class="L1"><span class="pp-ln"> 381 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo.schema</span></div><div class="L2"><span class="pp-ln"> 382 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> loadContext</span></div><div class="L3"><span class="pp-ln"> 383 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln"> 384 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> mTreeBuildUpContext</span></div><div class="L5"><span class="pp-ln"> 385 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> _.assign</span></div><div class="L6"><span class="pp-ln"> 386 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln"> 387 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo.productionManager().globalContext() || {}</span></div><div class="L8"><span class="pp-ln"> 388 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> context</span></div><div class="L9"><span class="pp-ln"> 389 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> __productionManager modelInfo.productionManager()</span></div><div class="L0"><span class="pp-ln"> 390 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L1"><span class="pp-ln"> 391 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln"> 392 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> isCompile modelInfo.isCompile</span></div><div class="L3"><span class="pp-ln"> 393 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'asyncModelLoader.load_collection_item.loadContext', loadContext</span></div><div class="L4"><span class="pp-ln"> 394 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> wizziModelFactory</span></div><div class="L5"><span class="pp-ln"> 395 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.srcFullPath()</span></div><div class="L6"><span class="pp-ln"> 396 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext</span></div><div class="L7"><span class="pp-ln"> 397 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziModel </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln"> 398 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L9"><span class="pp-ln"> 399 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> "AsyncModelLoader.load_collection_item"</span></div><div class="L0"><span class="pp-ln"> 400 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> "success, wizziModel root"</span></div><div class="L1"><span class="pp-ln"> 401 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModel.wzTag</span></div><div class="L2"><span class="pp-ln"> 402 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModel.wzName</span></div><div class="L3"><span class="pp-ln"> 403 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> wizziModel.___collItem = itemObject</span></div><div class="L4"><span class="pp-ln"> 404 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln"> 405 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, wizziModel)</span></div><div class="L6"><span class="pp-ln"> 406 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> error</span></div><div class="L7"><span class="pp-ln"> 407 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> message</span></div><div class="L8"><span class="pp-ln"> 408 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> method</span></div><div class="L9"><span class="pp-ln"> 409 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> err</span></div><div class="L0"><span class="pp-ln"> 410 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln"> 411 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L2"><span class="pp-ln"> 412 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> message message</span></div><div class="L3"><span class="pp-ln"> 413 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> source "wizzi/lib/model/asyncModelLoader/" + method</span></div><div class="L4"><span class="pp-ln"> 414 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> logme(err)</span></div><div class="L5"><span class="pp-ln"> 415 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> err</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_50">
                    <div class="code-panel" id="d_50">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/model/modelInfo.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span><span class="pp-pln"> wizzi.model.modelInfo</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require("util")</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> assert = require("assert")</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require("path")</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> async = require("async")</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> errors = require('../errors')</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> ittfs = require('wizzi-repo').Filesystem</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Is the ModelInfo instance that</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> - receive the 'wfjob' data to build a model</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> - calls the wizzi factory to retrieve model loaders.</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> TODO generatorRequireContextOnly ... explain ...</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> { config</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> # built from a `wfjob` `artifact` element</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> string cwd</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> string src</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> string ignore</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> string schema</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> string format</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> boolean isCompile</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> [ contexts</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> { context</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> api-ref wizzi.model.modelInfoConfig</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> { coll</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> string name</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> string itemName</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> [    pathTemplateValues</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                                </span><span class="pp-tag">#</span><span class="pp-pln"> { pathTemplateValues</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                                    </span><span class="pp-tag">#</span><span class="pp-pln"> string token</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                                    </span><span class="pp-tag">#</span><span class="pp-pln"> string attribute</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                                    </span><span class="pp-tag">#</span><span class="pp-pln"> function function</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> logme</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> false</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> console.log.apply(console, arguments)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> modelInfoCount = 0</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">    </span><span class="pp-tag">wz-class</span><span class="pp-pln"> ModelInfo</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> config</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                </span><span class="pp-tag">string</span><span class="pp-pln"> src</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                </span><span class="pp-tag">string</span><span class="pp-pln"> cwd</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">optional</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                </span><span class="pp-tag">string</span><span class="pp-pln"> ignore</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">optional</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                </span><span class="pp-tag">string</span><span class="pp-pln"> schema</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">optional</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                </span><span class="pp-tag">string</span><span class="pp-pln"> format</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                    </span><span class="pp-tag">optional</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">boolean</span><span class="pp-pln"> isCompile</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                    </span><span class="pp-tag">optional</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">[</span><span class="pp-pln"> contexts</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                    </span><span class="pp-tag">optional</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                </span><span class="pp-tag">[</span><span class="pp-pln"> transformers</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                    </span><span class="pp-tag">optional</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                </span><span class="pp-tag">string</span><span class="pp-pln"> exportName</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                    </span><span class="pp-tag">optional</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                </span><span class="pp-tag">{</span><span class="pp-pln"> coll</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                    </span><span class="pp-tag">optional</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> config.id = ('mi_' + ++modelInfoCount)</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.id = config.id</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.config = config</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.schema = config.schema</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.format = config.format</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.isCompile = !!config.isCompile</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.contexts</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isArray(config.contexts)</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in config.contexts</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.contexts.push</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                        </span><span class="pp-tag">new</span><span class="pp-pln"> ModelInfo(item)</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.transformers = config.transformers</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.coll = config.coll</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.exportName = config.exportName</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.generatorRequireContextOnly = false</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> config.src === 'context'</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.generatorRequireContextOnly = true</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> config.src = verify.unixifyPath(config.src)</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isString(config.cwd)</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> config.cwd = verify.unixifyPath(config.cwd)</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> ndx = config.src.indexOf('/*')</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> ndx &gt; -1</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> config.srcPattern = config.src.substr(ndx)</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> config.src = config.src.substr(0, ndx)</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.generatorRequireContextOnly == false</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isAbsolutePath(config.src) === false && verify.isEmpty(config.cwd) === true</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                    </span><span class="pp-tag">throw</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 999</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'ctor'</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> "When the parameter config.src is not an absolute path, config.cwd must be a not empty string. Received: " + config.cwd</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> src</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">            </span><span class="pp-tag">string</span><span class="pp-pln"> value</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> typeof (value) === 'undefined'</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> this.generatorRequireContextOnly == true</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span><span class="pp-pln"> null</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span><span class="pp-pln"> this.config.src</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.config.src = value</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> srcFullPath</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.generatorRequireContextOnly == true</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> null</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                </span><span class="pp-tag">iif</span><span class="pp-pln"> verify.isAbsolutePath(this.config.src)</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">                    </span><span class="pp-tag">then</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> this.config.src</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> this.config.cwd</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> this.config.src</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> ignoreFullPath</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.config.ignore</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">                    </span><span class="pp-tag">iif</span><span class="pp-pln"> verify.isAbsolutePath(this.config.ignore)</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">                        </span><span class="pp-tag">then</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> this.config.ignore</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">                        </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> this.config.cwd</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> this.config.ignore</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> null</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> srcGlobPath</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> globPattern = this.config.srcPattern || '/**/*.*'</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> globPattern.substr(0, 1) !== '/'</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> globPattern = ('/' + globPattern)</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.srcFullPath() + globPattern</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> srcGlobOptions</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ret</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> TODO fix or VIA</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> for now see getFiles skip `*__copy`</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> if this.config.ignore</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> set ret.ignore = [this.ignoreFullPath()]</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> productionManager</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> value</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> typeof (value) === 'undefined'</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> this.productionManagerInstance</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isObject(value) === false</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">                    </span><span class="pp-tag">throw</span></div><div class="L5"><span class="pp-ln"> 155 </span><span class="pp-pln">                        </span><span class="pp-tag">new</span><span class="pp-pln"> Error("value parameter must be an object. Instead is: " + value)</span></div><div class="L6"><span class="pp-ln"> 156 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.model.modelInfo.set_productionManager.globalContext', value.globalContext()</span></div><div class="L7"><span class="pp-ln"> 157 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.productionManagerInstance = value</span></div><div class="L8"><span class="pp-ln"> 158 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> modelInfo in this.contexts</span></div><div class="L9"><span class="pp-ln"> 159 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.productionManager(value)</span></div><div class="L0"><span class="pp-ln"> 160 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> hasContext</span></div><div class="L1"><span class="pp-ln"> 161 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> verify.isArray(this.config.contexts) && this.config.contexts.length &gt; 0</span></div><div class="L2"><span class="pp-ln"> 162 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getFileService</span></div><div class="L3"><span class="pp-ln"> 163 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> return ittfs</span></div><div class="L4"><span class="pp-ln"> 164 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> TODO</span></div><div class="L5"><span class="pp-ln"> 165 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> assert.ok</span></div><div class="L6"><span class="pp-ln"> 166 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> verify.isObject</span></div><div class="L7"><span class="pp-ln"> 167 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.productionManagerInstance</span></div><div class="L8"><span class="pp-ln"> 168 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'productionManagerInstance not set. Must call productionManager(productionManagerInstance)'</span></div><div class="L9"><span class="pp-ln"> 169 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> assert.ok</span></div><div class="L0"><span class="pp-ln"> 170 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> verify.isObject</span></div><div class="L1"><span class="pp-ln"> 171 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.productionManagerInstance.wizziFactory.fileService</span></div><div class="L2"><span class="pp-ln"> 172 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'fileService must be set on wizziFactory'</span></div><div class="L3"><span class="pp-ln"> 173 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.productionManagerInstance.wizziFactory.fileService</span></div><div class="L4"><span class="pp-ln"> 174 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getModelCollectionInfo</span></div><div class="L5"><span class="pp-ln"> 175 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.hasContext()</span></div><div class="L6"><span class="pp-ln"> 176 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.config.contexts</span></div><div class="L7"><span class="pp-ln"> 177 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isObject(item.coll)</span></div><div class="L8"><span class="pp-ln"> 178 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span><span class="pp-pln"> item.coll</span></div><div class="L9"><span class="pp-ln"> 179 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> null</span></div><div class="L0"><span class="pp-ln"> 180 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getModelInfos</span></div><div class="L1"><span class="pp-ln"> 181 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L2"><span class="pp-ln"> 182 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln"> 183 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.generatorRequireContextOnly == true</span></div><div class="L4"><span class="pp-ln"> 184 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_180">r_cb(</span><span class="pp-arg"> [this]</span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln"> 185 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L6"><span class="pp-ln"> 186 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.isDirectory</span></div><div class="L7"><span class="pp-ln"> 187 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> isDirectory </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln"> 188 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> isDirectory</span></div><div class="L9"><span class="pp-ln"> 189 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> ret</span></div><div class="L0"><span class="pp-ln"> 190 </span><span class="pp-pln">                            </span><span class="pp-tag">[</span></div><div class="L1"><span class="pp-ln"> 191 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> that.getFiles</span></div><div class="L2"><span class="pp-ln"> 192 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L3"><span class="pp-ln"> 193 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> files </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln"> 194 </span><span class="pp-pln">                                </span><span class="pp-tag">if</span><span class="pp-pln"> files.__is_error</span></div><div class="L5"><span class="pp-ln"> 195 </span><span class="pp-pln">                                    </span><span class="pp-tag">return</span></div><div class="L6"><span class="pp-ln"> 196 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback(files)</span></div><div class="L7"><span class="pp-ln"> 197 </span><span class="pp-pln">                                </span><span class="pp-tag">for</span><span class="pp-pln"> var i = 0; i &lt; files.length; i++</span></div><div class="L8"><span class="pp-ln"> 198 </span><span class="pp-pln">                                    </span><span class="pp-tag">var</span><span class="pp-pln"> fileInfo = files[i]</span></div><div class="L9"><span class="pp-ln"> 199 </span><span class="pp-pln">                                    </span><span class="pp-tag">var</span><span class="pp-pln"> mi = that.clone()</span></div><div class="L0"><span class="pp-ln"> 200 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> mi.src</span></div><div class="L1"><span class="pp-ln"> 201 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> fileInfo.relpath</span></div><div class="L2"><span class="pp-ln"> 202 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> mi.productionManager</span></div><div class="L3"><span class="pp-ln"> 203 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> that.productionManagerInstance</span></div><div class="L4"><span class="pp-ln"> 204 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> ret.push(mi)</span></div><div class="L5"><span class="pp-ln"> 205 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span></div><div class="L6"><span class="pp-ln"> 206 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln"> 207 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L8"><span class="pp-ln"> 208 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> ret</span></div><div class="L9"><span class="pp-ln"> 209 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln"> 210 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L1"><span class="pp-ln"> 211 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln"> 212 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L3"><span class="pp-ln"> 213 </span><span class="pp-pln">                                </span><span class="pp-tag">[</span></div><div class="L4"><span class="pp-ln"> 214 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> that</span></div><div class="L5"><span class="pp-ln"> 215 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> clone</span></div><div class="L6"><span class="pp-ln"> 216 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> newconfig</span></div><div class="L7"><span class="pp-ln"> 217 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln"> 218 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> cwd this.config.cwd</span></div><div class="L9"><span class="pp-ln"> 219 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> src this.config.src</span></div><div class="L0"><span class="pp-ln"> 220 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> schema this.config.schema</span></div><div class="L1"><span class="pp-ln"> 221 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> format this.config.format</span></div><div class="L2"><span class="pp-ln"> 222 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> isCompile this.config.isCompile</span></div><div class="L3"><span class="pp-ln"> 223 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> contexts this.config.contexts</span></div><div class="L4"><span class="pp-ln"> 224 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> transformers this.config.transformers</span></div><div class="L5"><span class="pp-ln"> 225 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> coll this.config.coll</span></div><div class="L6"><span class="pp-ln"> 226 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ret</span></div><div class="L7"><span class="pp-ln"> 227 </span><span class="pp-pln">                </span><span class="pp-tag">new</span><span class="pp-pln"> ModelInfo(newconfig)</span></div><div class="L8"><span class="pp-ln"> 228 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div><div class="L9"><span class="pp-ln"> 229 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> toString</span></div><div class="L0"><span class="pp-ln"> 230 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> 'modelInfo.config: ' + util.inspect(this.config, {depth: 2})</span></div><div class="L1"><span class="pp-ln"> 231 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> terminate</span></div><div class="L2"><span class="pp-ln"> 232 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_48"> modelinfo/sources</span></div><div class="L3"><span class="pp-ln"> 233 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_47"> modelinfo/loading</span></div><div class="L4"><span class="pp-ln"> 234 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> relPath</span></div><div class="L5"><span class="pp-ln"> 235 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> fullpath</span></div><div class="L6"><span class="pp-ln"> 236 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> basedir</span></div><div class="L7"><span class="pp-ln"> 237 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> fullpath.substr(basedir.length + 1)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_51">
                    <div class="code-panel" id="d_51">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/model/readme.md.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">mdx</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">h2</span><span class="pp-pln"> Model</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> The wizzi.model.modelInfo class</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Describes a set of models</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Describes a set of models</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Folders with the name ending with `__copy` and `t` folders</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> have a special treatment. When a `wizzi.artifact.artifactInfo` instance</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> calls the method `getFiles` the files contained in these folders</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> are skipped unless the value of the parameter `options.final`</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> is true.</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_52">
                    <div class="code-panel" id="d_52">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/helpers/sourceTree.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports =</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> wzmodel</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> filepath</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> wzrepoRootPath</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> filepath_norm</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">iif</span><span class="pp-pln"> verify.isString(filepath)</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                    </span><span class="pp-tag">then</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> verify.replaceAll</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> path.dirname(filepath)</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> '\\'</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> '/'</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span><span class="pp-pln"> null</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> wzrepoRootPath_norm</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">iif</span><span class="pp-pln"> verify.isString(wzrepoRootPath)</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">then</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> verify.replaceAll(wzrepoRootPath, '\\', '/')</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span><span class="pp-pln"> null</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">var</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> source</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> fullpath</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> relpath</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> wzpath</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> ret</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> kind '$sourcetree'</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> filepath filepath</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> sources</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                            </span><span class="pp-tag">[</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> sources = wzmodel.loadHistory.sources</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">for</span><span class="pp-pln"> var k in sources</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> fullpath = sources[k].filepath</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> filepath_norm</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> fullpath_norm = verify.replaceAll(fullpath, '\\', '/')</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> relpath = fullpath_norm.substr(filepath_norm.length + 1)</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> wzpath = fullpath_norm.substr(wzrepoRootPath_norm.length + 1)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> source =</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> kind '$source'</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> key k</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> filepath fullpath</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> relpath relpath</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> wzpath wzpath</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> ret.sources.push(source)</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_53">
                    <div class="code-panel" id="d_53">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/t/manager/async_initialize_jobRequests.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> async run a wizzi job request</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> from jobRequest</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> called by the productionManager.initialize method</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> . loads a requested wfjob model and</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> . add its artifactInfos objects to the productionManager artifactInfos collection and</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> . initializes them</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> AsyncInitializeJobRequests</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> run</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span><span class="pp-pln"> jobRequest</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span><span class="pp-pln"> __pman</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span><span class="pp-pln"> wfjob</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                            </span><span class="pp-tag">string</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">callback</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> pman = jobRequest.__pman</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> ok log 'AsyncInitializeJobRequests.pman.globalContext()', pman.globalContext()</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> wfjobIttfDocumentUri = jobRequest.wfjob.ittfDocumentUri</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> pman.productionName += '_' + path.basename(wfjobIttfDocumentUri)</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.production.asyncInitializeJobRequests.productionName', pman.productionName</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> The wfjobLoader instance is created here and used</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> in any case of recursive request of `wfjob` executions.</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> wfjobLoader = new WfjobLoader(pman)</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> wfjobLoadRequest</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> model</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> src wfjobIttfDocumentUri</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobLoader wfjobLoader</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> AsyncRecurseWfjobLoad</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobLoadRequest</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                            </span><span class="pp-tag">foreach</span><span class="pp-pln"> artifactInfoConfig in result.artifactInfoConfigs</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.production.asyncInitializeJobRequests.artifactInfoConfig', util.inspect(artifactInfoConfig, { depth: 2 })</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                                </span><span class="pp-tag">set</span><span class="pp-pln"> artifactInfoConfig.wfjob = wfjobIttfDocumentUri</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                                </span><span class="pp-tag">if</span><span class="pp-pln"> pman.options.trace</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                                    </span><span class="pp-tag">log</span><span class="pp-pln"> 'ProductionManager.initialize.artifactInfoConfig', artifactInfoConfig.toString()</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> pman.addArtifactRequest(artifactInfoConfig)</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_54">
                    <div class="code-panel" id="d_54">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/t/manager/async_persister.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> async persist one or more artifact productions</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> from an artifactInfo object.</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> uses an ArtifactPersister instance</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> AsyncPersisterToFile</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> run</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span><span class="pp-pln"> artifactInfo</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span><span class="pp-pln"> productionManager</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">callback</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-tag">log</span><span class="pp-pln"> 'Started async persist to file artifact: ', artifactInfo.name</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> persister = new ArtifactPersister(artifactInfo)</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> persister.toFile</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> operResult </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                            </span><span class="pp-tag">foreach</span><span class="pp-pln"> oper in operResult</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> log.info</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> oper.oper + ', ' + oper.status + ', ' + oper.item.filepath</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                            </span><span class="pp-tag">log</span><span class="pp-pln"> 'Ended async persist to file artifact: ', artifactInfo.name</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, operResult)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_55">
                    <div class="code-panel" id="d_55">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/t/manager/async_runner.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> async run an artifact production</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> from an artifactInfo object</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> AsyncRunner</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> run</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> artifactInfo</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> log.info('Started async run artifact: ' + artifactInfo.name)</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> runner = new Runner(artifactInfo)</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> runner.run</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_173">f_cb_no_err(</span><span class="pp-arg"> operResult </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                            </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                                </span><span class="pp-tag">set</span><span class="pp-pln"> err.artifactInfo = artifactInfo.toString()</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                                </span><span class="pp-tag">#</span><span class="pp-pln"> set err.ProfuctionManagerAsyncRunnerStack = (new Error()).stack</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_177">r_cb_err(</span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> log.info('Ended async run artifact: ' + artifactInfo.name)</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, operResult)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_56">
                    <div class="code-panel" id="d_56">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/t/manager/factoryServices.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getLoadModel</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> schemaName</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.productionManager.getLoadModel.globalContextObject', this.globalContextObject</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.wizziFactory.getLoadModel</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> schemaName</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> this.globalContextObject</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getSchemaDefinition</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> schemaName</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.wizziFactory.getSchemaDefinition</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> schemaName</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> this.globalContextObject</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getModelTransformer</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> transformerName</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.wizziFactory.getModelTransformer</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> transformerName</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> this.globalContextObject</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getArtifactGenerator</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> artifactName</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.wizziFactory.getArtifactGenerator</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> artifactName</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> this.globalContextObject</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> loadWfjob</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> context</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> called by WfjobLoader</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.production.productionManager.loadWfjob.ittfDocumentUri', ittfDocumentUri</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> !this.wfjobLoadModel</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_170">checked_call_set(</span><span class="pp-arg"> this.wfjobLoadModel </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.getLoadModel</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'wfjob'</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ctx</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.wizziFactory.createLoadContext</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> context</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.production.productionManager.loadWfjob.ctx', ctx, this.wizziFactory.globalContext</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.wfjobLoadModel</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.wizziFactory.createLoadContext</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> context</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_57">
                    <div class="code-panel" id="d_57">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/t/manager/generations.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> go_generateArtifact</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> artifactName</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> artifactContext</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> wizziModelInstance</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> self = this</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> generator = this.getArtifactGenerator(artifactName)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> generator == null</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> msg = 'ProductionManager.go_generateArtifact cannot find generator for artifact: ' + artifactName</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> fail.warn(msg)</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error(msg)</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> genContext = new GenContext({ options: options(null, { data: artifactContext.__data }) })</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">new</span><span class="pp-pln"> generator.gen</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModelInstance</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> genContext</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> msg = util.inspect(err, { depth: null})</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> fail.warn(msg)</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error(msg)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> sw = new StringWriter()</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> genContext.toStream(sw)</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, sw.toString())</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> generateArtifact</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> schemaName</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> artifactName</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> modelContext</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> artifactContext</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> self = this</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> loadModel = this.getLoadModel(schemaName)</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> loadModel == null</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> msg = 'ProductionManager.generateArtifact cannot find loadModel for schema: ' + schemaName + ' for artifact ' + ittfDocumentUri</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> fail.warn(msg)</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error(msg)</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> !loadModel</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> msg = 'ProductionManager.generateArtifact. Missing load method in loadModel for schema: ' + schemaName + ' for artifact ' + ittfDocumentUri</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> fail.warn(msg)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error(msg)</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> loadModel</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> modelContext</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> wizziModelInstance</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'ProductionManager.generateArtifact', err</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> msg = 'Error loading IttfDocument: ' + ittfDocumentUri + '\n' + util.inspect(err, { depth: null})</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> fail.warn(msg)</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                        </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error(msg)</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> self.go_generateArtifact</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> artifactName</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> artifactContext</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModelInstance</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_58">
                    <div class="code-panel" id="d_58">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/t/manager/state.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> aclStat</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> typeof(value) === 'undefined'</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.aclStatObject</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.aclStatObject = value</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.productionContext.setAclStat(value)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> globalContext</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> typeof(value) === 'undefined'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.globalContextObject || {}</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.globalContextObject = value</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> setStateModel</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> key</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.___state.models[key] = value</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getLogState</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> logState</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> models</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-factory/productionManager/state models length', this.___state.models.length</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">for</span><span class="pp-pln"> var m in this.___state.models</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> mo = this.___state.models[m]</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> modelState = {}</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> logState[m] = modelState</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">for</span><span class="pp-pln"> var k in mo</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-factory/productionManager/state model prop', k</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> mo.loadHistory</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> modelState.ittfSources = mo.loadHistory.getIttfDocuments()</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> idm in mo.loadHistory.ittfDocumentDatas</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> idm_o = mo.loadHistory.ittfDocumentDatas[idm]</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                        </span><span class="pp-tag">+</span><span class="pp-pln"> delete idm_o.mTree</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                        </span><span class="pp-tag">for</span><span class="pp-pln"> var idm_k in idm_o</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-factory/productionManager/state model loadHistory ittfDocumentData prop', idm_k</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> set modelState.ittfDocumentDatas = mo.loadHistory.ittfDocumentDatas</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                    </span><span class="pp-tag">for</span><span class="pp-pln"> var z in mo.loadHistory</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-factory/productionManager/state model loadHistory prop', z</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> mo.loadHistory.ittfSources</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                        </span><span class="pp-tag">for</span><span class="pp-pln"> var z in mo.loadHistory.ittfSources</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi-factory/productionManager/state model ittfSources prop', z</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> logState</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_59">
                    <div class="code-panel" id="d_59">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/t/wfjobLoader/asyncRecurseWfjobLoad.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> A 'wfjob' model may contain the request for the execution</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> of another wfjob. The accumulation of all the requested artifacts</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> must be a recursive action.</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> The same wizzi.production.WfjobLoader instance is passed through</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> the recursive loadings.</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> It loads the `wfjob` requests and checks that wfjobs and</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> wfjobArtifactModels are processed once.</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> (see methods _areWfjobRequestsEqual and _areArtifactInfoConfigsEqual for equality criteria)</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> At the end of the recursion the WfjobLoader instance contains</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> the wizzi.artifact.artifactInfo instances that have to be</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> executed by the wizzi.production.productionManager.</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">wz-function</span><span class="pp-pln"> AsyncRecurseWfjobLoad</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> wfjobRequest</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> wfjobLoader</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> '='</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> '= ========= wizzi.AsyncRecurseWfjobLoad. Start. wfjobRequest.model : ', wfjobRequest.model</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> '='</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> wfjobLoader = wfjobRequest.wfjobLoader</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wfjobLoader.load</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobRequest</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> '='</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> '= ========= wizzi.AsyncRecurseWfjobLoad. Results. ', 'seenWfjobRequests: ', result.seenWfjobRequests.length, ', artifactInfoConfigs: ', result.artifactInfoConfigs.length, ', pendingWfjobRequests: ', result.pendingWfjobRequests</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> '='</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> result.pendingWfjobRequests.length &gt; 0</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> jobRequests = result.pendingWfjobRequests</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> result.pendingWfjobRequests = []</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> set the same wfjobLoader for any jobRequest</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in jobRequests</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> item.wfjobLoader = wfjobLoader</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> recurse</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> async.map</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> jobRequests</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> AsyncRecurseWfjobLoad</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobLoader</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobLoader</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_60">
                    <div class="code-panel" id="d_60">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/t/wfjobLoader/processModel.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> processWfjobModel</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> wfjobModel</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> Analizes a wizzi model of schema `wfjob`.</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> Creates a wizzi.productionManager.artifactInfoConfig object for each artifact production request.</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> Accumulates the requests calling the methods:</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> . addPendingWfjobRequest(artifactInfoConfig)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> . addArtifactInfoConfig(artifactInfoConfig)</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">#</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> There are four types of artifacts</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> .1 Wizzi model artifact</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> .2 Wizzi model collection artifact</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> .3 Code write artifact</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> .4 Wfjob artifact</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> Production structure</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> { wfjob</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> [ productions</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> { production</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> string destFolder</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> [ lines</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> { line</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> string cwdFolder</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> string destFolder</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> [ artifacts</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> { artifact</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> string src</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> The path to the primary source document of the artifact.</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> If relative, the base path is the "cwdFolder" of the parent line.</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> If the artifact is a code write artifact the "src" attribute must not be declared.</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> string destPath</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> The artifact source file path "src" is the default relative destination path</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> of the generated artifact. When set, this attribute overrides the default.</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> It may be an absolute path.</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> If the artifact is a code write generation the "destPath" attribute must be declared.</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> artifactInfoConfig</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> wfjobProductionElement in wfjobModel.productions</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.wfjobLoader.processWfjobModel.production', wfjobProductionElement.wzName, util.inspect(wfjobProductionElement, { depth: 2 })</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> wfjobLineElement in wfjobProductionElement.lines</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.wfjobLoader.processWfjobModel.line', wfjobLineElement.wzName, util.inspect(wfjobLineElement, { depth: null })</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> wfjobArtifactElement in wfjobLineElement.artifacts</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.wfjobLoader.processWfjobModel.artifact', util.inspect(wfjobArtifactElement, { depth: 1 })</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isEmpty(wfjobArtifactElement.src)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> THIS IS A CODEWRITE artifact</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> this artifact is generated by a code write generation</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> artifactInfoConfig</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> name wfjobArtifactElement.wzName</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> contexts</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                                    </span><span class="pp-tag">[</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> gen</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> generator wfjobArtifactElement.generator</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> dest</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> baseFolder wfjobModel.destBaseFolder</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> folder wfjobLineElement.destFolder || wfjobProductionElement.destFolder</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> path wfjobArtifactElement.destPath</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> extension wfjobArtifactElement.extension</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> toString</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                                    </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                                        </span><span class="pp-tag">return</span><span class="pp-pln"> 'Artifact info config: ' + this.name + '/' + this.gen.generator</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                        </span><span class="pp-tag">foreach</span><span class="pp-pln"> modelRef in wfjobArtifactElement.modelRefs</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'WizziJob.getArtifactInfoConfigs.modelRef', modelRef.wzName, modelRef.collName, modelRef.modelCollections.length, util.inspect(modelRef, { depth: 2 })</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                            </span><span class="pp-tag">var</span><span class="pp-pln"> modelInfoConfig</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> this._createContextModelInfoConfig</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobModel</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelRef</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> artifactInfoConfig.contexts.push(modelInfoConfig)</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> This is a WIZZIMODEL artifact or WFJOB artifact</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> artifactInfoConfig</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> name wfjobArtifactElement.wzName</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> model</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> cwd wfjobLineElement.cwdFolder</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> src wfjobArtifactElement.src</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> ignore wfjobArtifactElement.ignore</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> schema wfjobArtifactElement.schema</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> format wfjobArtifactElement.format</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> isCompile wfjobArtifactElement.isCompile</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> contexts</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                                            </span><span class="pp-tag">[</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> transformers this._getTransformerList(wfjobArtifactElement.transformers)</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> isWfJob wfjobArtifactElement.isWfJob</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> isWfModelType wfjobArtifactElement.isWfModelType</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> gen</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> generator wfjobArtifactElement.generator</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> dest</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> baseFolder wfjobModel.destBaseFolder</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> folder wfjobLineElement.destFolder || wfjobProductionElement.destFolder</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> path wfjobArtifactElement.destPath</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> extension wfjobArtifactElement.extension</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> toString</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                                    </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                                        </span><span class="pp-tag">return</span><span class="pp-pln"> 'Artifact info config: ' + this.name + '/' + this.model.src + '/' + this.model.schema</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'WizziJob.getArtifactInfoConfigs.art', wfjobArtifactElement.wzName, wfjobLineElement.srcFolder, wfjobArtifactElement.src, wfjobArtifactElement.schema</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                        </span><span class="pp-tag">foreach</span><span class="pp-pln"> modelRef in wfjobArtifactElement.modelRefs</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'WizziJob.getArtifactInfoConfigs.modelRef', modelRef.wzName, modelRef.collName, modelRef.modelCollections.length, util.inspect(modelRef, { depth: 2 })</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                            </span><span class="pp-tag">var</span><span class="pp-pln"> modelInfoConfig</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> this._createContextModelInfoConfig</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobModel</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelRef</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> artifactInfoConfig.model.contexts.push(modelInfoConfig);</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'WizziJob.artifactInfoConfig', util.inspect(artifactInfoConfig, { depth: 1 })</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> wfjobArtifactElement.isWfJob</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> this.addPendingWfjobRequest(artifactInfoConfig)</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> this.addArtifactInfoConfig(artifactInfoConfig)</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { wfjobModelRefElement</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string wzName</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> is the key for the wfjobModelElement</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string collName</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string collItemName</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> [ collPathTemplateValues</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { collPathTemplateValue</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> _createContextModelInfoConfig</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> wfjobModel</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> wfjobModelRefElement</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> model existence has already been verified loading the wfjobModel</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> wfjobModelElement = wfjobModel.getModel(wfjobModelRefElement.wzName)</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> modelInfoConfig</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> exportName wfjobModelRefElement.exportName</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> src</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this._getModelSrc</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobModel</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobModelElement.src</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobModelElement</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> schema wfjobModelElement.schema</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> format wfjobModelElement.format</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> isCompile wfjobModelElement.isCompile</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> contexts []</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> transformers this._getTransformerList(wfjobModelRefElement.transformers)</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> coll null</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> wfjobModelRefElement.collName</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> Single items of a collection contained in a WizziModelInstance may act as data contexts</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> of artifacts where each collection item generates a separate artifact.</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> The coll property specifies:</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> . name                the collection name</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> . itemName            the export name of the collection item when acting as a data context</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> . pathTemplateValues  the property names of the collection item that will be used to build</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> the destination path of the artifact</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> modelInfoConfig.coll</span></div><div class="L5"><span class="pp-ln"> 155 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln"> 156 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> name wfjobModelRefElement.collName</span></div><div class="L7"><span class="pp-ln"> 157 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> itemName wfjobModelRefElement.collItemName</span></div><div class="L8"><span class="pp-ln"> 158 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> pathTemplateValues wfjobModelRefElement.collPathTemplateValues</span></div><div class="L9"><span class="pp-ln"> 159 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> recurse creation of context modelInfos</span></div><div class="L0"><span class="pp-ln"> 160 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> modelRef in wfjobModelElement.modelRefs</span></div><div class="L1"><span class="pp-ln"> 161 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfoConfig.contexts.push</span></div><div class="L2"><span class="pp-ln"> 162 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this._createContextModelInfoConfig</span></div><div class="L3"><span class="pp-ln"> 163 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobModel</span></div><div class="L4"><span class="pp-ln"> 164 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelRef</span></div><div class="L5"><span class="pp-ln"> 165 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> modelInfoConfig</span></div><div class="L6"><span class="pp-ln"> 166 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> _getArtifactModelSrc</span></div><div class="L7"><span class="pp-ln"> 167 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> cwd</span></div><div class="L8"><span class="pp-ln"> 168 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> src</span></div><div class="L9"><span class="pp-ln"> 169 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L0"><span class="pp-ln"> 170 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L1"><span class="pp-ln"> 171 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> When 'src' is relative, the base path is the 'cwd' attribute</span></div><div class="L2"><span class="pp-ln"> 172 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> declared on the wfjobLine element.</span></div><div class="L3"><span class="pp-ln"> 173 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isAbsolutePath(src)</span></div><div class="L4"><span class="pp-ln"> 174 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> src</span></div><div class="L5"><span class="pp-ln"> 175 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln"> 176 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isString(cwd)</span></div><div class="L7"><span class="pp-ln"> 177 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln"> 178 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L9"><span class="pp-ln"> 179 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> cwd</span></div><div class="L0"><span class="pp-ln"> 180 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> src</span></div><div class="L1"><span class="pp-ln"> 181 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L2"><span class="pp-ln"> 182 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln"> 183 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L4"><span class="pp-ln"> 184 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'PathError'</span></div><div class="L5"><span class="pp-ln"> 185 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> "The src attribute of the artifact element: " + src + ' is a relative path. A cwd attribute is required on the line element.'</span></div><div class="L6"><span class="pp-ln"> 186 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> node</span></div><div class="L7"><span class="pp-ln"> 187 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> _getModelSrc</span></div><div class="L8"><span class="pp-ln"> 188 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> wfjobModel</span></div><div class="L9"><span class="pp-ln"> 189 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> src</span></div><div class="L0"><span class="pp-ln"> 190 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L1"><span class="pp-ln"> 191 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L2"><span class="pp-ln"> 192 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> When 'src' is relative, the base path is the 'modelsBaseFolder'</span></div><div class="L3"><span class="pp-ln"> 193 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> declared on the 'wfjob' element.</span></div><div class="L4"><span class="pp-ln"> 194 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isAbsolutePath(src)</span></div><div class="L5"><span class="pp-ln"> 195 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> src;</span></div><div class="L6"><span class="pp-ln"> 196 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln"> 197 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isString(wfjobModel.modelsBaseFolder)</span></div><div class="L8"><span class="pp-ln"> 198 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln"> 199 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L0"><span class="pp-ln"> 200 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobModel.modelsBaseFolder</span></div><div class="L1"><span class="pp-ln"> 201 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> src</span></div><div class="L2"><span class="pp-ln"> 202 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln"> 203 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln"> 204 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L5"><span class="pp-ln"> 205 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'PathError'</span></div><div class="L6"><span class="pp-ln"> 206 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> "The src attribute of the model element: " + src + ' is a relative path. A models-base-folder attribute is required on the wfjob element.'</span></div><div class="L7"><span class="pp-ln"> 207 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> node</span></div><div class="L8"><span class="pp-ln"> 208 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> _getTransformerList</span></div><div class="L9"><span class="pp-ln"> 209 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> transformers</span></div><div class="L0"><span class="pp-ln"> 210 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ret = []</span></div><div class="L1"><span class="pp-ln"> 211 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in transformers</span></div><div class="L2"><span class="pp-ln"> 212 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ret.push</span></div><div class="L3"><span class="pp-ln"> 213 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln"> 214 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> name item.wzName</span></div><div class="L5"><span class="pp-ln"> 215 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> dumpFile item.dumpFile</span></div><div class="L6"><span class="pp-ln"> 216 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_61">
                    <div class="code-panel" id="d_61">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/_old_via_asyncWfJobRunner.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> path</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> util</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> async</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> thisPackageIndex = require('../../index')</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> log = require('../util/log')(module)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> logme</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> false</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> console.log.apply(console, arguments);</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> AsyncWfJobRunner</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> run_many</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> modelInfos</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> async.mapSeries</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfos</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> AsyncWfJobRunner._run_item</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> _run_item</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> modelInfo</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> srcFullPath = modelInfo.srcFullPath();</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log "AsyncWfJobRunner._run_item: I should run " + srcFullPath</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> thisPackageIndex.executeJob</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> name 'wizzi-studio dev-dashboard-incubator'</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> path srcFullPath</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> thisPackageIndex.options</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> indentSpaces 4</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> basedir path.dirname(srcFullPath)</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> verbose 2</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports = AsyncWfJobRunner</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_62">
                    <div class="code-panel" id="d_62">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/_old_via_service.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> file = require('wizzi-utils').file</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> log = require('../util/log')(module)</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> sourcetree = require('./helpers/sourcetree')</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> ProductionContext = require('./context')</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> ProductionService</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.options = options</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.schemaModules = []</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.artifactModules = []</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.productionContext = new ProductionContext()</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> log.setLevel(options.verbose || 0);</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> registerSchemaModule</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> schemaModule</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.schemaModules.push(schemaModule)</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getSchemaLoader</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> schemaName</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> console.log('ProductionService.getSchemaLoader.schemaName: ' + schemaName);</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> result = null</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.schemaModules</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> result == null && verify.isFunction(item[schemaName])</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> result = item[schemaName]</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !result</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> availables = []</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.schemaModules</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                    </span><span class="pp-tag">for</span><span class="pp-pln"> key in item</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isFunction(item[key])</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> availables.push(key)</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> log.error('getSchemaLoader. Cannot find schema loader: ' + schemaName + '\n' + 'availables: ' + availables.join(', '))</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> result</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> registerArtifactModule</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> artifactModule</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.artifactModules.push(artifactModule)</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getArtifactGenerator</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> artifactName</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> console.log('ProductionService.getArtifactGenerator.artifactName: ' + artifactName);</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> result = null</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.artifactModules</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> result == null && verify.isFunction(item[artifactName])</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> result = item[artifactName]</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !result</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> log.error('getArtifactGenerator. Cannot find artifact generator: ' + artifactName)</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> result</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> loadWizziModel</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> schemaName</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> ittfSource</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> context</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> schemaNameDef = file.exists(ittfSource) ? schemaName : schemaName + 'FromString';</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> schemaLoader = this.getSchemaLoader(schemaNameDef);</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> schemaLoader == null</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> callback({ message: 'ProductionService.loadWmtModel error. Cannot find schema loader for schema ' + schemaName })</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> schemaLoader</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> ittfSource</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> context</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> loadWizziModelSourceTree</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> schemaName</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> ittfSource</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> context</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> schemaNameDef = file.exists(ittfSource) ? schemaName : schemaName + 'FromString'</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> schemaLoader = this.getSchemaLoader(schemaNameDef)</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> schemaLoader == null</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> callback({ message: 'ProductionService.loadWmtModel error. Cannot find schema loader for schema ' + schemaName })</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> self = this</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> schemaLoader</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> ittfSource</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> context</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback(err, sourcetree(result, file.exists(ittfSource) ? ittfSource : null, context.wzrepoRootPath))</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> generateArtifact</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> artifactName</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> ittfSource</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> context</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isString(artifactName) === false</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> callback({ message: 'ProductionService.generateArtifact error. Invalid artifact name ' + artifactName })</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ss = artifactName.split('/')</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> ss.length == 2</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> artifactName = ss[0] + ss[1].substr(0, 1).toUpperCase() + ss[1].substr(1)</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> artifactNameDef = file.exists(ittfSource) ? artifactName : artifactName + 'FromString'</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> artifactGenerator = this.getArtifactGenerator(artifactNameDef)</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> artifactGenerator == null</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> callback({ message: 'ProductionService.generateArtifact error. Cannot find artifact generator for artifact ' + artifactName });</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> artifactGenerator</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> ittfSource</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> context</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports = ProductionService</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_63">
                    <div class="code-panel" id="d_63">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/_old_wfjob.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> async = require('async')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> errors = require('../errors')</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> log = require('../util/log')(module)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> TODO Check recursion of model contexts</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> wfjob</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> param config {</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> options: {</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> verbose:Boolean</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> }</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> wfjob: {</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> src:String</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> }</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> }</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">#</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> An instance of wfjob prepares the required wizzi packages</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> and the artifact infos of a single wfjob WizziModel, whose source IttfDocument</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> is referenced in config.wfjob.src</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">#</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> methods</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> getArtifactInfoConfigs</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> called by the production manager</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> productionManager</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> config</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.productionManager = productionManager</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.config = config</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.options = config.options</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wfjobSrc = config.wfjob.src</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> log.setLevel(this.options.verbose || 0)</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.initialized = false</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> initialize</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.initialized</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> return callback(null, this.wfjobModel)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.productionManager.options.trace</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> log.info('Started initialize. wfjob source: ' + this.wfjobSrc)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> wfjobFactory = this.productionManager.getLoadModel('wfjob')</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> wfjobFactory == null</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">throw</span><span class="pp-pln"> errors.NodeError('Factory for schema @wfjob@ not found', null)</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ittfLoadContext</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> Object.assign</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> __productionManager this.productionManager</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.productionManager.globalContext()</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> self = this</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wfjobFactory</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> this.wfjobSrc</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> ittfLoadContext</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> wfjobModel</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> self.productionManager.options.trace</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> log.info('Job model loaded. err: ' + err)</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span><span class="pp-pln"> callback(err, null)</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> self.wfjobModel = wfjobModel</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> self.initialized = true</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> self.productionManager.options.trace</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> log.info('Done initialize')</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, wfjobModel)</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getRequiredPackages</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> self = this</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.initialize</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> wfjobModel</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span><span class="pp-pln"> callback(err, null)</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> result = []</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> r in wfjobModel.requires</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> result.push(r.wzName)</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span><span class="pp-pln"> callback(null, result)</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getArtifactInfoConfigs</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wfjob.getArtifactInfoConfigs.start'</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">            </span><span class="pp-tag">var</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> self = this</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> artifactInfoConfig</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> destPath</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> destFullPath</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> resultRequires = []</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> resultArtifactInfos = []</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.initialize</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> wfjobModel</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span><span class="pp-pln"> callback(err, null)</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> require in wfjobModel.requires</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> resultRequires.push(require.wzName)</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> Production structure</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> wfjob</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> production Collection</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> attribute destFolder</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> lines Collection</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> attribute cwdFolder</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> attribute destFolder</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> artifacts Collection</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> attribute src</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> The path to the primary source document of the artifact.</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> If relative, the base path is the "cwdFolder" of the parent line.</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> If the artifact is a code write artifact the "src" attribute must not be declared.</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> attribute destPath</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> The artifact source file path "src" is the default relative destination path</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> of the generated artifact. When set, this attribute overrides the default.</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> It may be an absolute path.</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> If the artifact is a code write generation the "destPath" attribute must be declared.</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> wfjob_production in wfjobModel.productions</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'WizziJob.getArtifactInfoConfigs.production', wfjob_production.wzName, util.inspect(wfjob_production, { depth: 2 })</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                        </span><span class="pp-tag">foreach</span><span class="pp-pln"> wfjob_line in wfjob_production.lines</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'WizziJob.getArtifactInfoConfigs.line', wfjob_line.wzName, util.inspect(wfjob_line, { depth: null })</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">                            </span><span class="pp-tag">foreach</span><span class="pp-pln"> wfjob_artifact in wfjob_line.artifacts</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">                                </span><span class="pp-kwd">$$</span><span class="pp-pln"> log 'WizziJob.art', util.inspect(wfjob_artifact, { depth: 1 })</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">                                </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isEmpty(wfjob_artifact.src)</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">                                    </span><span class="pp-tag">#</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">                                        </span><span class="pp-tag">#</span><span class="pp-pln"> THIS IS A CODEWRITE artifact</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">                                        </span><span class="pp-tag">#</span><span class="pp-pln"> this artifact is generated by a code write generation</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">                                    </span><span class="pp-tag">set</span><span class="pp-pln"> artifactInfoConfig</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                                        </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> name wfjob_artifact.wzName</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> contexts</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">                                                </span><span class="pp-tag">[</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> gen</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> generator wfjob_artifact.generator</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> dest</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> baseFolder wfjobModel.destBaseFolder</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> folder wfjob_line.destFolder || wfjob_production.destFolder</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> path wfjob_artifact.destPath</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> extension wfjob_artifact.extension</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> toString</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">                                                </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">                                                    </span><span class="pp-tag">return</span><span class="pp-pln"> 'Artifact info config: ' + this.name + '/' + this.gen.generator</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">                                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> modelRef in wfjob_artifact.modelRefs</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">                                        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'WizziJob.getArtifactInfoConfigs.modelRef', modelRef.wzName, modelRef.collName, modelRef.modelCollections.length, util.inspect(modelRef, { depth: 2 })</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">                                        </span><span class="pp-tag">var</span><span class="pp-pln"> modelInfoConfig = self.createContextModelInfoConfig(modelRef)</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> artifactInfoConfig.contexts.push(modelInfoConfig)</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">                                </span><span class="pp-tag">else</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">                                    </span><span class="pp-tag">#</span><span class="pp-pln"> This is a WIZZIMODEL artifact or WFJOB artifact</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">                                    </span><span class="pp-tag">set</span><span class="pp-pln"> artifactInfoConfig</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">                                        </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln"> 155 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> name wfjob_artifact.wzName</span></div><div class="L6"><span class="pp-ln"> 156 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L7"><span class="pp-ln"> 157 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln"> 158 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> model</span></div><div class="L9"><span class="pp-ln"> 159 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln"> 160 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> cwd wfjob_line.cwdFolder</span></div><div class="L1"><span class="pp-ln"> 161 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> src wfjob_artifact.src</span></div><div class="L2"><span class="pp-ln"> 162 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> ignore wfjob_artifact.ignore</span></div><div class="L3"><span class="pp-ln"> 163 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> schema wfjob_artifact.schema</span></div><div class="L4"><span class="pp-ln"> 164 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> format wfjob_artifact.format</span></div><div class="L5"><span class="pp-ln"> 165 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> isCompile wfjob_artifact.isCompile</span></div><div class="L6"><span class="pp-ln"> 166 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> contexts</span></div><div class="L7"><span class="pp-ln"> 167 </span><span class="pp-pln">                                                        </span><span class="pp-tag">[</span></div><div class="L8"><span class="pp-ln"> 168 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> transformers self._getTransformerList(wfjob_artifact.transformers)</span></div><div class="L9"><span class="pp-ln"> 169 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> isWfJob wfjob_artifact.isWfJob</span></div><div class="L0"><span class="pp-ln"> 170 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> gen</span></div><div class="L1"><span class="pp-ln"> 171 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln"> 172 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> generator wfjob_artifact.generator</span></div><div class="L3"><span class="pp-ln"> 173 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> dest</span></div><div class="L4"><span class="pp-ln"> 174 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln"> 175 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> baseFolder wfjobModel.destBaseFolder</span></div><div class="L6"><span class="pp-ln"> 176 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> folder wfjob_line.destFolder || wfjob_production.destFolder</span></div><div class="L7"><span class="pp-ln"> 177 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> path wfjob_artifact.destPath</span></div><div class="L8"><span class="pp-ln"> 178 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> extension wfjob_artifact.extension</span></div><div class="L9"><span class="pp-ln"> 179 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> toString</span></div><div class="L0"><span class="pp-ln"> 180 </span><span class="pp-pln">                                                </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln"> 181 </span><span class="pp-pln">                                                    </span><span class="pp-tag">return</span><span class="pp-pln"> 'Artifact info config: ' + this.name + '/' + this.model.src + '/' + this.model.schema</span></div><div class="L2"><span class="pp-ln"> 182 </span><span class="pp-pln">                                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'WizziJob.getArtifactInfoConfigs.art', wfjob_artifact.wzName, wfjob_line.srcFolder, wfjob_artifact.src, wfjob_artifact.schema</span></div><div class="L3"><span class="pp-ln"> 183 </span><span class="pp-pln">                                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> modelRef in wfjob_artifact.modelRefs</span></div><div class="L4"><span class="pp-ln"> 184 </span><span class="pp-pln">                                        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'WizziJob.getArtifactInfoConfigs.modelRef', modelRef.wzName, modelRef.collName, modelRef.modelCollections.length, util.inspect(modelRef, { depth: 2 })</span></div><div class="L5"><span class="pp-ln"> 185 </span><span class="pp-pln">                                        </span><span class="pp-tag">var</span><span class="pp-pln"> modelInfoConfig = self.createContextModelInfoConfig(modelRef)</span></div><div class="L6"><span class="pp-ln"> 186 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> artifactInfoConfig.model.contexts.push(modelInfoConfig);</span></div><div class="L7"><span class="pp-ln"> 187 </span><span class="pp-pln">                                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'WizziJob.artifactInfoConfig', util.inspect(artifactInfoConfig, { depth: 1 })</span></div><div class="L8"><span class="pp-ln"> 188 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> resultArtifactInfos.push(artifactInfoConfig)</span></div><div class="L9"><span class="pp-ln"> 189 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, [resultRequires, resultArtifactInfos]);</span></div><div class="L0"><span class="pp-ln"> 190 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L1"><span class="pp-ln"> 191 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> param modelRef:Object { wfjob:ModelRef</span></div><div class="L2"><span class="pp-ln"> 192 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> wzName:String // is the key for the wfjob:Model</span></div><div class="L3"><span class="pp-ln"> 193 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> collName:String</span></div><div class="L4"><span class="pp-ln"> 194 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> collItemName:String</span></div><div class="L5"><span class="pp-ln"> 195 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> collPathTemplateValues:Array of {</span></div><div class="L6"><span class="pp-ln"> 196 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> }</span></div><div class="L7"><span class="pp-ln"> 197 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> }</span></div><div class="L8"><span class="pp-ln"> 198 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> createContextModelInfoConfig</span></div><div class="L9"><span class="pp-ln"> 199 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> wfjob_modelRef</span></div><div class="L0"><span class="pp-ln"> 200 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> model existence of this.wfjobModel has already been verified loading wfjobModel</span></div><div class="L1"><span class="pp-ln"> 201 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> wfjob_model = this.wfjobModel.getModel(wfjob_modelRef.wzName)</span></div><div class="L2"><span class="pp-ln"> 202 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> modelInfoConfig</span></div><div class="L3"><span class="pp-ln"> 203 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln"> 204 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> exportName wfjob_modelRef.exportName</span></div><div class="L5"><span class="pp-ln"> 205 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> src this._getModelSrc(wfjob_model.src, wfjob_model)</span></div><div class="L6"><span class="pp-ln"> 206 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> schema wfjob_model.schema</span></div><div class="L7"><span class="pp-ln"> 207 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> format wfjob_model.format</span></div><div class="L8"><span class="pp-ln"> 208 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> isCompile wfjob_model.isCompile</span></div><div class="L9"><span class="pp-ln"> 209 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> contexts []</span></div><div class="L0"><span class="pp-ln"> 210 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> transformers this._getTransformerList(wfjob_modelRef.transformers)</span></div><div class="L1"><span class="pp-ln"> 211 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> coll null</span></div><div class="L2"><span class="pp-ln"> 212 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> wfjob_modelRef.collName</span></div><div class="L3"><span class="pp-ln"> 213 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> Single items of a collection contained in a WizziModelInstance may act as data contexts</span></div><div class="L4"><span class="pp-ln"> 214 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> of artifacts where each collection item generates a separate artifact.</span></div><div class="L5"><span class="pp-ln"> 215 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> The coll property specifies:</span></div><div class="L6"><span class="pp-ln"> 216 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> . name                the collection name</span></div><div class="L7"><span class="pp-ln"> 217 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> . itemName            the export name of the collection item when acting as a data context</span></div><div class="L8"><span class="pp-ln"> 218 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> . pathTemplateValues  the property names of the collection item that will be used to build</span></div><div class="L9"><span class="pp-ln"> 219 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> the destination path of the artifact</span></div><div class="L0"><span class="pp-ln"> 220 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> modelInfoConfig.coll</span></div><div class="L1"><span class="pp-ln"> 221 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln"> 222 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> name wfjob_modelRef.collName</span></div><div class="L3"><span class="pp-ln"> 223 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> itemName wfjob_modelRef.collItemName</span></div><div class="L4"><span class="pp-ln"> 224 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> pathTemplateValues wfjob_modelRef.collPathTemplateValues</span></div><div class="L5"><span class="pp-ln"> 225 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> recurse creation of context modelInfos</span></div><div class="L6"><span class="pp-ln"> 226 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> ctxModelRef in wfjob_model.modelRefs</span></div><div class="L7"><span class="pp-ln"> 227 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfoConfig.contexts.push(this.createContextModelInfoConfig(ctxModelRef))</span></div><div class="L8"><span class="pp-ln"> 228 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> modelInfoConfig</span></div><div class="L9"><span class="pp-ln"> 229 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> _getModelSrc</span></div><div class="L0"><span class="pp-ln"> 230 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> src</span></div><div class="L1"><span class="pp-ln"> 231 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L2"><span class="pp-ln"> 232 </span><span class="pp-pln">            </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln"> 233 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> When 'src' is relative, the base path is the 'modelsBaseFolder'</span></div><div class="L4"><span class="pp-ln"> 234 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> declared on the 'wfjob' element.</span></div><div class="L5"><span class="pp-ln"> 235 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isAbsolutePath(src)</span></div><div class="L6"><span class="pp-ln"> 236 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> src;</span></div><div class="L7"><span class="pp-ln"> 237 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln"> 238 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isString(this.wfjobModel.modelsBaseFolder)</span></div><div class="L9"><span class="pp-ln"> 239 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span><span class="pp-pln"> path.join(this.wfjobModel.modelsBaseFolder, src)</span></div><div class="L0"><span class="pp-ln"> 240 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln"> 241 </span><span class="pp-pln">                    </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.wfjob.node', node</span></div><div class="L2"><span class="pp-ln"> 242 </span><span class="pp-pln">                    </span><span class="pp-tag">throw</span><span class="pp-pln"> new errors.NodeError("The src attribute of the model element: " + src + ' is a relative path. A models-base-folder attribute is required on the wfjob element.', node)</span></div><div class="L3"><span class="pp-ln"> 243 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> _getTransformerList</span></div><div class="L4"><span class="pp-ln"> 244 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> transformers</span></div><div class="L5"><span class="pp-ln"> 245 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ret = []</span></div><div class="L6"><span class="pp-ln"> 246 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in transformers</span></div><div class="L7"><span class="pp-ln"> 247 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> ret.push</span></div><div class="L8"><span class="pp-ln"> 248 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln"> 249 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> name item.wzName</span></div><div class="L0"><span class="pp-ln"> 250 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> dumpFile item.dumpFile</span></div><div class="L1"><span class="pp-ln"> 251 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div><div class="L2"><span class="pp-ln"> 252 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> getPath</span></div><div class="L3"><span class="pp-ln"> 253 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> base</span></div><div class="L4"><span class="pp-ln"> 254 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> src</span></div><div class="L5"><span class="pp-ln"> 255 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> verify.isAbsolutePath(src) ? src : path.join(base, src)</span></div><div class="L6"><span class="pp-ln"> 256 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports = wfjob;</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_64">
                    <div class="code-panel" id="d_64">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/_old_wfpackageloader.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> This is duplicated</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> use the packageFinder in wizzi-core/services</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> file = require('wizzi-utils').file</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> log = require('../util/log')(module)</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.load</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> pkgName</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> cwd</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> pkgName == 'wizzi'</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> require('../../index')</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> result</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> try fullpath</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">try</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'try fullpath ', pkgName</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> result = require(pkgName)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'found fullpath ', pkgName</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> result</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">catch</span><span class="pp-pln"> ex</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> ex</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'Is not a full path'</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> localNodeModule = findUpFolder(cwd, 'node_modules')</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> localNodeModule</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'try in ', localNodeModule</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> pkgLocalPath = path.join(localNodeModule, pkgName)</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                </span><span class="pp-tag">try</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> result = require(pkgLocalPath)</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span><span class="pp-pln"> result</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                </span><span class="pp-tag">catch</span><span class="pp-pln"> ex</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                    </span><span class="pp-tag">log</span><span class="pp-pln"> ex</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'node_modules not found in cwd', cwd</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> findUpFolder</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> basePath</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> folderName</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> test = path.join(basePath, folderName)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> file.isDirectory(test)</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> test</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> basePath = path.dirname(basePath)</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> basePath.length &gt; 3</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> findUpFolder(basePath, folderName)</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> null</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_65">
                    <div class="code-panel" id="d_65">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/asyncWizziModelTypesRunner.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> path</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> util</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> async</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> chalk</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> log = require('../util/log')(module)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> AsyncWizziModelTypesRunner</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> run</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> wmtRequest</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> modelInfo = wmtRequest.modelInfo</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> productionManager</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.productionManager()</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> wizziFactory = productionManager.wizziFactory</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log "AsyncWizziModelTypesRunner.run: I should run " + wmtRequest.wfschemaIttfDocumentUri</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactory.generateModelTypes</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> wmtRequest.wfschemaIttfDocumentUri</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> wmtRequest.outputPackageFolder</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> wmtRequest.schemaName</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                            </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.green('WIZZI MODEL TYPES GENERATED FOR SCHEMA ' + wmtRequest.schemaName)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> result</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports = AsyncWizziModelTypesRunner</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_66">
                    <div class="code-panel" id="d_66">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/context.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> file = require('wizzi-utils').file</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> fail = require('wizzi-utils').fail</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> runnerServer = null</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { options</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { dumps</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string dumpsBaseFolder</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { mTreeBuildupJsWizziScript</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> boolean dump</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string dumpsBaseFolder</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">wz-class</span><span class="pp-pln"> ProductionContext</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.dump = false</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.dumps = options.dumps || {}</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.ittfDocuments =</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.ittfEvaluationScripts =</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.mTrees =</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.evaluatedMTrees =</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wizziModels =</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.artifacts = []</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> runnerServer == null</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> runnerServer = require('../services/runnerServer')</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.runnerServer = runnerServer.instance</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> setAclStat</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> aclstat</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.aclstat = aclstat</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addIttfDocument</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> uri</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> content</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.ittfDocuments[uri]</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.ittfDocuments[uri].cacheCount++</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.ittfDocuments[uri]</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> uri uri</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> content content</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> cacheCount 0</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addMTreeBuildUpScript</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> uri</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> ittfEvalScript</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.ittfEvaluationScripts[uri]</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> uri uri</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> ittfEvalScript ittfEvalScript</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log '*=*=*=*= temporary wizzi.production.productionContext. this.dumps : ', this.dumps</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.dumps && this.dumps.mTreeBuildupJsWizziScript && this.dumps.mTreeBuildupJsWizziScript.dump</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> dumpsFolder = this.dumps.mTreeBuildupJsWizziScript.dumpsBaseFolder || this.dumps.dumpsBaseFolder</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> file.write</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> dumpsFolder</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> path.basename(uri) + '.js.dump'</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> ittfEvalScript.toCode()</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addMixedMTree</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> uri</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> mTree</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.dumps && this.dumps.mixedMTree && this.dumps.mixedMTree.dump</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> dumpsFolder = this.dumps.mixedMTree.dumpsBaseFolder || this.dumps.dumpsBaseFolder</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> file.write</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> dumpsFolder</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> (path.basename(uri) + '.mixed.mTree.dump')</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> mTree.dump()</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addEvaluatedMTree</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> uri</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> mTree</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.evaluatedMTrees[uri] = mTree.dump(true)</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.dumps && this.dumps.evaluatedMTree && this.dumps.evaluatedMTree.dump</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> dumpsFolder = this.dumps.evaluatedMTree.dumpsBaseFolder || this.dumps.dumpsBaseFolder</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> file.write</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> dumpsFolder</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> path.basename(uri) + '.evaluated.mTree.dump'</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.evaluatedMTrees[uri]</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addMTree</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> uri</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> loadHistory</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.mTrees[uri] =</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> uri uri</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> loadHistory loadHistory</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addWizziModel</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> uri</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> wizziModel</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wizziModels[uri] =</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> uri uri</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModel wizziModel</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addArtifact</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> artifact</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.artifacts.push(artifact)</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> raiseIttfEvaluationScriptError</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> uri</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> exception</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> script = this.ittfEvaluationScripts[uri]</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> script && script.ittfEvalScript && exception && exception.lineNumber</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> lines</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> script.ittfEvalScript.getErrorLines(exception)</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                        </span><span class="pp-tag">._</span><span class="pp-pln"> join('\n')</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> exception.message = '\nError evaluating ittf in uri: ' + uri + '\n' + lines + '\n'</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> exception.message = '\nError evaluating ittf in uri: ' + uri + '\n' + exception.message + '\n'</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> fail.warn(exception)</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">            </span><span class="pp-tag">throw</span><span class="pp-pln"> exception</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_67">
                    <div class="code-panel" id="d_67">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/manager.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span><span class="pp-pln"> wizzi.productionManager</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> assert = require('assert')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> async = require('async')</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> file = require('wizzi-utils').file</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> fail = require('wizzi-utils').fail</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> GenContext = require('../artifact/GenContext')</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> StringWriter = require('../util/stringwriter')</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> log = require('../util/log')(module)</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> options = require('./options')</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> ProductionContext = require("./context").ProductionContext</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> ArtifactInfo = require('../artifact/artifactinfo').ArtifactInfo</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> old VIA var pkgLoader = require('./wfpackageloader')</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> Runner = require('./runner').Runner</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> old VIA var WfJob = require('./wfjob')</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> WfjobLoader = require('./wfjobLoader').WfjobLoader</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> AsyncRecurseWfjobLoad = require('./wfjobLoader').AsyncRecurseWfjobLoad</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> ArtifactPersister = require('./persister').ArtifactPersister</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> thisWizziPackage = require('../../index')</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> var legacy = require('../../legacy')</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> var Logger = require('../services/logger')</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> The wizzi.productionManager is used for complex productions.</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> It executes wfjob models.</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> The 'meat' of a production is the execution of a wizzi.artifact.artifactInfo instance</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> performed by an instance of a wizzi.production.Runner.</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> wizzi.artifact.artifactInfo (s) are added to the wizzi.production.productionManager</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> in three ways:</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> 1. adding a request for loading a 'wfjob' wizzi model.</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> 2. adding a wfjobArtifactModel</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> 3. adding a wizzi.artifact.artifactInfo created programmaticaly.</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> When the 'run' method is called the production manager:</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> 1. loads the requested wfjobModels.</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> A wfjobModel can contain wfjobArtifactModel(s) and others 'wfjob' requests.</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Every wfjob request is execute until we have wfjobArtifactModel(s) only.</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> 2  wfjobArtifactModel(s) are transformed in instances of wizzi.artifact.artifactInfo (s)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> 3  A wizzi.production.Runner is instantiated and asynchronously executed for each</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> wizzi.artifact.artifactInfo.</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> addArtifactInfo(artifactInfo)</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> addWfJob(wfJobConfig)</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> getLoadModel(schemaName)</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> getWizziSchemaObject(schemaName)</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> getModelTransformer(transName)</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> getArtifactGenerator(artifactName)</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> run:AsyncMethod</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> persistToFile:AsyncMethod</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> You execute a production</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> adding wfjobs and/or artifact infos</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> finally executing the run and persistToFile async methods</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> ProductionManager</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> CTOR_PARAMS</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> { wizziFactory</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> { options</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> boolean verbose</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> boolean trace</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> string basedir // uri</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> { dumps</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> string dumpsBaseFolder</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> { mTreeBuildUpScript</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> boolean dump</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> string dumpsBaseFolder</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> wizziFactory</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> assert.strictEqual(wizziFactory.__type, 'WizziFactory', 'param wizziFactory must be of type WizziFactory')</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wizziFactory = wizziFactory</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.options = options</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.artifactInfos = []</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.artifactInfosFromWfJob = []</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.jobRequests = []</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.productionContext = new ProductionContext(options)</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wfjobLoadModel = null</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> log.setLevel(options.verbose || 0)</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.___state</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> models</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> pman this</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> pcx this.productionContext</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> set this.logger = new Logger()</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.productionName = 'production'</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> Add an artifact info to be run by a Runner instance.</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> The artifactInfoConfig parameter can be</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> .1 An artifact info config declared in a "artifact" element of a "wfjob" wizzi model.</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> .2 An artifactInfo instance created programmatically.</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addArtifactInfo</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> artifactInfoConfig</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> ArtifactInfo.isArtifactConfig(artifactInfoConfig)</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> artifactInfo = new ArtifactInfo(artifactInfoConfig)</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> artifactInfo.initialize(this)</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.artifactInfos.push(artifactInfo)</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">            </span><span class="pp-tag">elif</span><span class="pp-pln"> ArtifactInfo.isArtifactInstance(artifactInfoConfig)</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> artifactInfo.initialize(this)</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.artifactInfos.push(artifactInfoConfig)</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error('ProductionManager.addArtifactInfo is not an artifact info: ' + util.inspect(artifactInfoConfig))</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> Add an artifact info from a configuration object</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> declared in an "artifact" element of a "wfjob" wizzi model.</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> It may also be built programmatically.</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">            </span><span class="pp-tag">#</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> { artifactInfoConfig</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addArtifactRequest</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> artifactInfoConfig</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> ArtifactInfo.isArtifactConfig(artifactInfoConfig)</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> artifactInfo = new ArtifactInfo(artifactInfoConfig)</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> artifactInfo.initialize(this)</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.artifactInfos.push(artifactInfo)</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error("wizzi.production.productionManager.addArtifactRequest. The 'artifactInfoConfig' parameter is not a valid artifact info config: " + util.inspect(artifactInfoConfig))</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> Add a WfJob request</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> 23/8/2018, the wfJobConfig.options parameter was optional, it seems it is not</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> called by wizzi.executeJob</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addWfJob</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> wfJobConfig</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">                </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span><span class="pp-pln"> wfjob</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                        </span><span class="pp-tag">string</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> wfJobConfig.__pman = this</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> wfJobConfig.options</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> Object.assign</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.options</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> wfJobConfig.options || {}</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.jobRequests.push(wfJobConfig)</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> The same as addWfJob (a duplication) but without the options</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> property in the jobRequest parameter.</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> called by wizzi.executeWizziJob and wizziFactory.executeJob</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> TODO unify these two methods.</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> { jobRequest</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> { wfjob</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> string ittfDocumentUri</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addJobRequest</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> jobRequest</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">                </span><span class="pp-tag">{</span><span class="pp-pln"> wfjob</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">                    </span><span class="pp-tag">string</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.productionManager.addJobRequest.jobRequest', jobRequest</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> jobRequest.__pman = this</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> jobRequest.options</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> Object.assign</span></div><div class="L5"><span class="pp-ln"> 155 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln"> 156 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.options</span></div><div class="L7"><span class="pp-ln"> 157 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> jobRequest.options || {}</span></div><div class="L8"><span class="pp-ln"> 158 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.jobRequests.push(jobRequest)</span></div><div class="L9"><span class="pp-ln"> 159 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> initialize</span></div><div class="L0"><span class="pp-ln"> 160 </span><span class="pp-pln">            </span><span class="pp-tag">callback</span></div><div class="L1"><span class="pp-ln"> 161 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> async.mapSeries</span></div><div class="L2"><span class="pp-ln"> 162 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> this.jobRequests</span></div><div class="L3"><span class="pp-ln"> 163 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> AsyncInitializeJobRequests.run</span></div><div class="L4"><span class="pp-ln"> 164 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> notUsed </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln"> 165 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null)</span></div><div class="L6"><span class="pp-ln"> 166 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> run</span></div><div class="L7"><span class="pp-ln"> 167 </span><span class="pp-pln">            </span><span class="pp-tag">callback</span></div><div class="L8"><span class="pp-ln"> 168 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> self = this</span></div><div class="L9"><span class="pp-ln"> 169 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.initialize</span></div><div class="L0"><span class="pp-ln"> 170 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln"> 171 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> run artifact requests</span></div><div class="L2"><span class="pp-ln"> 172 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.productionManager.self.artifactInfos.length', self.artifactInfos.length</span></div><div class="L3"><span class="pp-ln"> 173 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> async.mapSeries</span></div><div class="L4"><span class="pp-ln"> 174 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> self.artifactInfos</span></div><div class="L5"><span class="pp-ln"> 175 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> AsyncRunner.run</span></div><div class="L6"><span class="pp-ln"> 176 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L7"><span class="pp-ln"> 177 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L8"><span class="pp-ln"> 178 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> result</span></div><div class="L9"><span class="pp-ln"> 179 </span><span class="pp-pln">                            </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L0"><span class="pp-ln"> 180 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span><span class="pp-pln"> callback(err);</span></div><div class="L1"><span class="pp-ln"> 181 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> self.artifactInfos = result</span></div><div class="L2"><span class="pp-ln"> 182 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, result)</span></div><div class="L3"><span class="pp-ln"> 183 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> terminate</span></div><div class="L4"><span class="pp-ln"> 184 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.wizziFactory</span></div><div class="L5"><span class="pp-ln"> 185 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.wizziFactory.terminate</span></div><div class="L6"><span class="pp-ln"> 186 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> persistToFile</span></div><div class="L7"><span class="pp-ln"> 187 </span><span class="pp-pln">            </span><span class="pp-tag">callback</span></div><div class="L8"><span class="pp-ln"> 188 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'ProductionManager.persistToFile.this.artifactInfos.length', this.artifactInfos.length</span></div><div class="L9"><span class="pp-ln"> 189 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> self = this</span></div><div class="L0"><span class="pp-ln"> 190 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> async.mapSeries</span></div><div class="L1"><span class="pp-ln"> 191 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> this.artifactInfos</span></div><div class="L2"><span class="pp-ln"> 192 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> AsyncPersisterToFile.run</span></div><div class="L3"><span class="pp-ln"> 193 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln"> 194 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L5"><span class="pp-ln"> 195 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> result</span></div><div class="L6"><span class="pp-ln"> 196 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'persistToFile err, result', err, result</span></div><div class="L7"><span class="pp-ln"> 197 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L8"><span class="pp-ln"> 198 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span><span class="pp-pln"> callback(err)</span></div><div class="L9"><span class="pp-ln"> 199 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'ProductionManager.persistToFile.persisted artifacts', util.inspect(result, { depth: 1 })</span></div><div class="L0"><span class="pp-ln"> 200 </span><span class="pp-pln">                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> ai in self.artifactInfos</span></div><div class="L1"><span class="pp-ln"> 201 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> ai.terminate()</span></div><div class="L2"><span class="pp-ln"> 202 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, result)</span></div><div class="L3"><span class="pp-ln"> 203 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> relPath</span></div><div class="L4"><span class="pp-ln"> 204 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> filepath</span></div><div class="L5"><span class="pp-ln"> 205 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> filepath.substr(this.options.basedir.length + 1)</span></div><div class="L6"><span class="pp-ln"> 206 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_56"> manager/factoryServices</span></div><div class="L7"><span class="pp-ln"> 207 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_58"> manager/state</span></div><div class="L8"><span class="pp-ln"> 208 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_57"> manager/generations</span></div><div class="L9"><span class="pp-ln"> 209 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_53">manager/async_initialize_jobRequests(</span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln"> 210 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_55"> manager/async_runner</span></div><div class="L1"><span class="pp-ln"> 211 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_54"> manager/async_persister</span></div><div class="L2"><span class="pp-ln"> 212 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_176">f_error(</span><span class="pp-arg"> wizzi.production.productionManager </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln"> 213 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports = ProductionManager</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_68">
                    <div class="code-panel" id="d_68">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/options.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> _ = require('lodash')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports =</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userdefaults</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> genoptions</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> _.merge</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> isDebug false</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> CRLF '\n'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> indentSpaces 4</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> dotgExtensionPrefix false</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> dumps {}</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> userdefaults || {}</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> genoptions || {}</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_69">
                    <div class="code-panel" id="d_69">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/persister.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> async = require('async')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> file = require('wizzi-utils').file</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> log</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> require('../util/log')</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a">(</span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> module</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> logme</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> false</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> console.log.apply(console, arguments)</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">wz-class</span><span class="pp-pln"> ArtifactPersister</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> artifactInfo</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.artifactInfo = artifactInfo</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> log.setLevel</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> artifactInfo.productionManager.options.verbose</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> toFile</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.artifactInfo.isWizziModelTypesArtifact()</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> TODO</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> Write here model type artifacts ?</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> The wizzi model artifacts could be generated in memory and retrieved</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> by the this.artifactInfo.getItemsToPersistToFile() method</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> TODO Add more info to result info ?</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                        </span><span class="pp-tag">[</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> oper 'generate-schema'</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> status 'success'</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span><span class="pp-pln"> item</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> filepath 'Unavailable'</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.artifactInfo.getItemsToPersistToFile</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> items </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> async.mapSeries</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> items</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> asyncArtifactFilePersister_hof(that.artifactInfo)</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> toTest</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ret</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.artifactInfo.getItemsToPersistToFile</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> items </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in items</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> ret.push</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> filepath item.filepath</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> content item.genContext.getContent()</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> asyncArtifactFilePersister_hof</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> artifactInfo</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> fileService = artifactInfo.getFileService()</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">function</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> genInfo</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'AsyncArtifactFilePersister.persist'</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> genInfo.filepath</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> genInfo.genContext.getContent()</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> fileService.openWrite</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> genInfo.filepath</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> stream </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> genInfo.genContext.toStream(stream)</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> stream.end()</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('Written to file: ' + genInfo.filepath)</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> oper 'persist-to-file'</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> item</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> filepath genInfo.filepath</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> status 'success'</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_70">
                    <div class="code-panel" id="d_70">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/readme.md.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">mdx</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">h2</span><span class="pp-pln"> Production</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> The wizzi.production.productionManager</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Manages a production of software artifacts. It is instantiated by a wizzi.wizziFactory instance which sets up the production environment (plugins, global context, store system). Clients use its 'addJobRequest' and 'addArtifactRequest' methods to add artifact requests and then use the 'run' and 'persistToFile' methods to execute the generations and save to file the generated artifacts.</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> The wizzi.production.wfjobLoader</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Async load a 'wfjob' wizzi model and accumulate wfjobArtifactModel elements. If the model contains 'wfjob' requests also check that they have not already been processed and add them to pendingWfjobRequests. If the model contains wfjobArtifactModel elements check that they have not already been added and add them to the artifactInfoConfigs collection.</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> The wizzi.production.runner</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Executes the generations described by a wizzi.artifact.artifactInfo instance. It is instantiated by the wizzi.production.productionManager, selects the artifact type, and asynchronously run the generations using the wizzi.artifact.asyncArtifactGenerator.</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> The generated artifacts are added to the 'genContexts' collection of the wizzi.artifact.artifactInfo instance.</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> The wizzi.production.persister</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Executes the write to file of the generated artifacts added to the 'genContexts' collection of a wizzi.artifact.artifactInfo instance. It is instantiated by the wizzi.production.productionManager, and asynchronously executes the writes using the wizzi.production.asyncArtifactFilePersister.</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> The global context</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> The default value in options.js is empty ( = {} )</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> The user can pass a global context to</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">ul</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> A wizzi job execution</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> An mTree load</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> A wizzi model load</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> An artifact generation</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">    </span><span class="pp-tag">span</span><span class="pp-pln"> using the property globalContext of the options parameter of</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">    </span><span class="pp-tag">ul</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> The wizzi.executeInstanceJob method</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> The wizzi.createFactory method</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Creating a wizziFactory instance always is preliminar to executing an mTree load, a wizzi model load or an artifact generation.</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> The wizzi.executeInstanceJob creates its wizziFactory instance from the options that receives.</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_71">
                    <div class="code-panel" id="d_71">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/runner.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> assert = require('assert')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> log</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> require('../util/log')</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a">(</span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> module</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> GenContext = require('../artifact/GenContext')</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> AsyncModelLoader = require('../model/asyncModelLoader')</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> AsyncArtifactGenerator = require('../artifact/asyncArtifactGenerator').AsyncArtifactGenerator</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> AsyncWizziModelTypesRunner = require('./asyncWizziModelTypesRunner')</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Async artifact generation runner.</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> A runner instance runs a single artifactInfo.</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Input: an ArtifactInfo (constructor injected).</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Output: the ArtifactInfo enriched with (one or many) genContext(s),</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> ready to be persisted (callback ok result).</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> A Runner can run</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> a WfJob</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> a WfSchema (a wizzi model types generation)</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> a ModelArtifact</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> a ModelCollectionArtifact</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> a CodeWriteArtifact</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> a FinalArtifact</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> logme</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> false</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> console.log.apply(console, arguments)</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">    </span><span class="pp-tag">wz-class</span><span class="pp-pln"> Runner</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> artifactInfo</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.artifactInfo = artifactInfo</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> log.setLevel((artifactInfo.options.verbose || 0))</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> run</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.artifactInfo.modelInfo</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this._runOnModelInfo</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.artifactInfo.modelInfo</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this._runOnContextInfos</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.artifactInfo.contextInfos</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> _runOnContextInfos</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> contextInfos</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.artifactInfo.isCodeWriteArtifact()</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.runCodeWriteArtifact</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.artifactInfo.modelInfo</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.artifactInfo.gen</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_178">r_cb_error(</span><span class="pp-arg"> 999</span><span class="pp-pln">,</span><span class="pp-arg">  _runOnContextInfos</span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'Artifact is in an invalid state: ' + util.inspect(this.artifactInfo, {depth: 2})</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> _runOnModelInfo</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> modelInfo</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> gen = this.artifactInfo.gen</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.artifactInfo.isWizziModelTypesArtifact()</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.runWizziModelTypesArtifact</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">            </span><span class="pp-kwd">$*</span><span class="pp-pln"> OLD VIA</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">elif</span><span class="pp-pln"> this.artifactInfo.isWizziFactoryJob()</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.runWizziFactoryJob</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">*$</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-tag">elif</span><span class="pp-pln"> this.artifactInfo.isWizziModelArtifact()</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.runWizziModelArtifact</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> gen</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">elif</span><span class="pp-pln"> this.artifactInfo.isModelCollectionArtifact()</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.runModelCollectionArtifact</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> gen</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">            </span><span class="pp-tag">elif</span><span class="pp-pln"> this.artifactInfo.isFinalArtifact()</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.runFinalArtifact</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_178">r_cb_error(</span><span class="pp-arg"> 999</span><span class="pp-pln">,</span><span class="pp-arg">  _runOnModelInfo</span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'Artifact is in an invalid state: ' + util.inspect(this.artifactInfo, {depth: 2})</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> runWizziModelTypesArtifact</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> modelInfo</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> log.warn('runWizziModelTypesArtifact ' + this.artifactInfo.name)</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> outputPackageFolder = this.artifactInfo.getDestinationUri()</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.production.runner.runWizziModelTypesArtifact.outputPackageFolder', outputPackageFolder</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.getModelInfos</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> final false</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> modelInfos </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> modelInfos.length != 1</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_178">r_cb_error(</span><span class="pp-arg"> 999</span><span class="pp-pln">,</span><span class="pp-arg">  runWizziModelTypesArtifact </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'Expected exactly one wizzi.model.modelInfo. Received: ' + modelInfos.length</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> wfschemaIttfDocumentUri = modelInfos[0].srcFullPath()</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> basenameParts = path.basename(wfschemaIttfDocumentUri).split('.')</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> basenameParts.length != 3</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_178">r_cb_error(</span><span class="pp-arg"> 999</span><span class="pp-pln">,</span><span class="pp-arg">  runWizziModelTypesArtifact </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> "The name of the source 'wfschema' ittf document must be in the format '&lt;schema-name&gt;.wfschema.ittf'. Received: " + path.basename(wfschemaIttfDocumentUri)</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> schemaName = basenameParts[0]</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> wmtRequest</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfo modelInfos[0]</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> schemaName schemaName</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wfschemaIttfDocumentUri wfschemaIttfDocumentUri</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> outputPackageFolder outputPackageFolder</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> AsyncWizziModelTypesRunner.run</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> wmtRequest</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> TODO how to expose results ?</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, that.artifactInfo)</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> runWizziModelArtifact</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> modelInfo</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> gen</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.getModelInfos</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> final false</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> modelInfos </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log '+ wizzi.production.runner.runWizziModelArtifact, modelInfos, gen', modelInfos, gen</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.getArtifactGenerator</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> gen.generator</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> generator </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                            </span><span class="pp-tag">#</span><span class="pp-pln"> log '+ wizzi.production.runner.runWizziModelArtifact, generator', generator</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> AsyncModelLoader.loadMany</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfos</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">                                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> mainSourceModels </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">                                    </span><span class="pp-tag">#</span><span class="pp-pln"> log '+ wizzi.production.runner.runWizziModelArtifact, mainSourceModels', mainSourceModels</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> AsyncArtifactGenerator.generate</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> that.artifactInfo</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> generator</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfos</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> mainSourceModels</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">                                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> notUsed </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, that.artifactInfo)</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> runModelCollectionArtifact</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> modelInfo</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> gen</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.getModelInfos</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> final false</span></div><div class="L5"><span class="pp-ln"> 155 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> modelInfos </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln"> 156 </span><span class="pp-pln">                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> mi in modelInfos</span></div><div class="L7"><span class="pp-ln"> 157 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L8"><span class="pp-ln"> 158 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> "runModelCollectionArtifact.modelInfo to load"</span></div><div class="L9"><span class="pp-ln"> 159 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> mi</span></div><div class="L0"><span class="pp-ln"> 160 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.getArtifactGenerator</span></div><div class="L1"><span class="pp-ln"> 161 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> gen.generator</span></div><div class="L2"><span class="pp-ln"> 162 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> generator </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln"> 163 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> AsyncModelLoader.loadMany</span></div><div class="L4"><span class="pp-ln"> 164 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfos</span></div><div class="L5"><span class="pp-ln"> 165 </span><span class="pp-pln">                                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> mainSourceModelsOfModelCollection </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln"> 166 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L7"><span class="pp-ln"> 167 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'runModelCollectionArtifact got mainSourceModelsOfModelCollection'</span></div><div class="L8"><span class="pp-ln"> 168 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> mainSourceModelsOfModelCollection</span></div><div class="L9"><span class="pp-ln"> 169 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> AsyncArtifactGenerator.generateModelCollection</span></div><div class="L0"><span class="pp-ln"> 170 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> that.artifactInfo</span></div><div class="L1"><span class="pp-ln"> 171 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> generator</span></div><div class="L2"><span class="pp-ln"> 172 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfos</span></div><div class="L3"><span class="pp-ln"> 173 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> mainSourceModelsOfModelCollection</span></div><div class="L4"><span class="pp-ln"> 174 </span><span class="pp-pln">                                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln"> 175 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> logme</span></div><div class="L6"><span class="pp-ln"> 176 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'runModelCollectionArtifact result'</span></div><div class="L7"><span class="pp-ln"> 177 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> result</span></div><div class="L8"><span class="pp-ln"> 178 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, that.artifactInfo)</span></div><div class="L9"><span class="pp-ln"> 179 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> runCodeWriteArtifact</span></div><div class="L0"><span class="pp-ln"> 180 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> contextInfos</span></div><div class="L1"><span class="pp-ln"> 181 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> gen</span></div><div class="L2"><span class="pp-ln"> 182 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln"> 183 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L4"><span class="pp-ln"> 184 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.getArtifactGenerator</span></div><div class="L5"><span class="pp-ln"> 185 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> gen.generator</span></div><div class="L6"><span class="pp-ln"> 186 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> generator </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln"> 187 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> AsyncModelLoader.loadMany</span></div><div class="L8"><span class="pp-ln"> 188 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> contextInfos</span></div><div class="L9"><span class="pp-ln"> 189 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> mainSourceModels </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln"> 190 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> AsyncArtifactGenerator.generateCodeWrite</span></div><div class="L1"><span class="pp-ln"> 191 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> that.artifactInfo</span></div><div class="L2"><span class="pp-ln"> 192 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> generator</span></div><div class="L3"><span class="pp-ln"> 193 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> mainSourceModels</span></div><div class="L4"><span class="pp-ln"> 194 </span><span class="pp-pln">                                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> notUsed </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln"> 195 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, that.artifactInfo)</span></div><div class="L6"><span class="pp-ln"> 196 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> TODO execute copy without loading content in genContext</span></div><div class="L7"><span class="pp-ln"> 197 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> runFinalArtifact</span></div><div class="L8"><span class="pp-ln"> 198 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> modelInfo</span></div><div class="L9"><span class="pp-ln"> 199 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln"> 200 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L1"><span class="pp-ln"> 201 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.isDirectory</span></div><div class="L2"><span class="pp-ln"> 202 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> isDirectory </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln"> 203 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> isDirectory</span></div><div class="L4"><span class="pp-ln"> 204 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.getFiles</span></div><div class="L5"><span class="pp-ln"> 205 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln"> 206 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> final true</span></div><div class="L7"><span class="pp-ln"> 207 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> files </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln"> 208 </span><span class="pp-pln">                                </span><span class="pp-tag">foreach</span><span class="pp-pln"> fileInfo in files</span></div><div class="L9"><span class="pp-ln"> 209 </span><span class="pp-pln">                                    </span><span class="pp-tag">var</span><span class="pp-pln"> genContext</span></div><div class="L0"><span class="pp-ln"> 210 </span><span class="pp-pln">                                        </span><span class="pp-tag">new</span><span class="pp-pln"> GenContext</span></div><div class="L1"><span class="pp-ln"> 211 </span><span class="pp-pln">                                            </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln"> 212 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> model null</span></div><div class="L3"><span class="pp-ln"> 213 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> srcPath fileInfo.relpath</span></div><div class="L4"><span class="pp-ln"> 214 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> srcFullPath fileInfo.fullpath</span></div><div class="L5"><span class="pp-ln"> 215 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> options that.artifactInfo.options</span></div><div class="L6"><span class="pp-ln"> 216 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> pman modelInfo.productionManager()</span></div><div class="L7"><span class="pp-ln"> 217 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> genContext.writeFile</span></div><div class="L8"><span class="pp-ln"> 218 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> fileInfo.fullpath</span></div><div class="L9"><span class="pp-ln"> 219 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> that.artifactInfo.addGenContext(genContext)</span></div><div class="L0"><span class="pp-ln"> 220 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span></div><div class="L1"><span class="pp-ln"> 221 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln"> 222 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L3"><span class="pp-ln"> 223 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> that.artifactInfo</span></div><div class="L4"><span class="pp-ln"> 224 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L5"><span class="pp-ln"> 225 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> genContext</span></div><div class="L6"><span class="pp-ln"> 226 </span><span class="pp-pln">                            </span><span class="pp-tag">new</span><span class="pp-pln"> GenContext</span></div><div class="L7"><span class="pp-ln"> 227 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln"> 228 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> model null</span></div><div class="L9"><span class="pp-ln"> 229 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> srcPath modelInfo.src()</span></div><div class="L0"><span class="pp-ln"> 230 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> srcFullPath modelInfo.srcFullPath()</span></div><div class="L1"><span class="pp-ln"> 231 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> options that.artifactInfo.options</span></div><div class="L2"><span class="pp-ln"> 232 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> pman modelInfo.productionManager()</span></div><div class="L3"><span class="pp-ln"> 233 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> modelInfo.getSource</span></div><div class="L4"><span class="pp-ln"> 234 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> content </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln"> 235 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> genContext.write(content)</span></div><div class="L6"><span class="pp-ln"> 236 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> that.artifactInfo.addGenContext(genContext)</span></div><div class="L7"><span class="pp-ln"> 237 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln"> 238 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln"> 239 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L0"><span class="pp-ln"> 240 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> that.artifactInfo</span></div><div class="L1"><span class="pp-ln"> 241 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_176">f_error(</span><span class="pp-arg"> wizzi.production.runner </span><span class="pp-mix">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_72">
                    <div class="code-panel" id="d_72">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/production/wfjobLoader.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> assert = require('assert')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> async = require('async')</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Async load a 'wfjob' wizzi model and accumulate</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> wfjobArtifactModel elements.</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> If the model contains 'wfjob' requests also check that</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> they have not already been processed and add them to</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> pendingWfjobRequests.</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> If the model contains wfjobArtifactModel elements</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> check that they have not already been added and add them to</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> the artifactInfoConfigs collection.</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">wz-class</span><span class="pp-pln"> WfjobLoader</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> productionManager</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.productionManager = productionManager</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.pendingWfjobRequests = []</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.seenWfjobRequests = []</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.artifactInfoConfigs = []</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> load</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> wfjobRequest</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.seenWfjobRequests.push(wfjobRequest)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">iif</span><span class="pp-pln"> verify.isAbsolutePath(wfjobRequest.model.src)</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                    </span><span class="pp-tag">then</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> wfjobRequest.model.src</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobRequest.model.cwd</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobRequest.model.src</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> wfjobRequest.context has not been implemented yet</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> and probably it will never be.</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> Its properties should be produced by previous</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> executions in the wfjob load recursive process.</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> To pass a context to the wfjob mTree loader</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> we use the globalContext of the wizziFactory.</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.productionManager.loadWfjob</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobRequest.context || {}</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wfjobModel </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> that.processWfjobModel(wfjobModel)</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> that</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addPendingWfjobRequest</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> artifactInfoConfig</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this._isWfjobSeen(artifactInfoConfig) == false</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.pendingWfjobRequests.push(artifactInfoConfig)</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> _isWfjobSeen</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> artifactInfoConfig</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.seenWfjobRequests</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> this._areWfjobRequestsEqual(item, artifactInfoConfig)</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span><span class="pp-pln"> true</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> false</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addArtifactInfoConfig</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> artifactInfoConfig</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this._isArtifactInfoConfigAdded(artifactInfoConfig) == false</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.artifactInfoConfigs.push(artifactInfoConfig)</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> _isArtifactInfoConfigAdded</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> artifactInfoConfig</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.artifactInfoConfigs</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> this._areArtifactInfoConfigsEqual(item, artifactInfoConfig)</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span><span class="pp-pln"> true</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> false</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> _areWfjobRequestsEqual</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> a</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> b</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> a.model.cwd === b.model.cwd && a.model.src === b.model.src</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> _areArtifactInfoConfigsEqual</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> a</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> b</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> a.model.cwd === b.model.cwd && a.model.src === b.model.src && a.dest.baseFolder === b.dest.baseFolder && a.dest.folder === b.dest.folder && a.dest.path === b.dest.path && a.dest.extension === b.dest.extension && a.gen.generator === b.gen.generator</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_60"> wfjobLoader/processModel</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_59"> wfjobLoader/asyncRecurseWfjobLoad</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> error</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> code</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> message</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> message</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">            </span><span class="pp-tag">iif</span><span class="pp-pln"> node</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                </span><span class="pp-tag">then</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                    </span><span class="pp-tag">new</span><span class="pp-pln"> errors.NodeError</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> message</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> node</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                    </span><span class="pp-tag">._</span><span class="pp-pln"> toString</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                </span><span class="pp-tag">else</span><span class="pp-pln"> message</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> code code</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> message message</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_73">
                    <div class="code-panel" id="d_73">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/pluginsManager/artifact-generator.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> retrieve an artifact generator searching the factoryPlugins</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> registered to this plugins manager</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string artifactName</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> returns</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> | api-ref wizzi-plugin.modelTransformer</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> | wzError NotFound</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getArtifactGenerator</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> artifactName</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'PluginsManager.getArtifactGenerator.artifactName: ' + artifactName</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">var</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> found = null</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> foundInPlugin = null</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> result = null</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> all factoryPlugins are searched, last matching encountered wins.</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.factoryPlugins</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'searching artifact ', artifactName, ' in module', item.getName()</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_168">checked_call_r_set(</span><span class="pp-arg"> found </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> item.getArtifactGenerator(artifactName)</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'found', found, found && verify.isFunction(found.gen)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> found && verify.isFunction(found.gen)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> result = found</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> foundInPlugin = item.getFilename()</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> !result</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> msg = 'getArtifactGenerator. Cannot find artifact generator: ' + artifactName + '\n' + 'availables generators: ' + this.availableArtifactGenerators().join(', ')</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> log.error</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> msg</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_182">r_wz_err(</span><span class="pp-arg"> NotFound</span><span class="pp-pln">,</span><span class="pp-arg">  getArtifactGenerator </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> msg</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('getArtifactGenerator. Found artifact generator: ' + artifactName + ' in plugin ' + foundInPlugin)</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> result</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_74">
                    <div class="code-panel" id="d_74">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/pluginsManager/getInfo.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getInfo</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> factoryPluginsInfo = []</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.factoryPlugins</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> factoryPluginsInfo.push</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> packageName item.packageName</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> packagePath item.packagePath</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> provides item.provides</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> providedSchemas this.providedSchemas</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> providedModelTransformers this.providedModelTransformers</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> providedArtifactGenerators this.providedArtifactGenerators</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> factoryPlugins factoryPluginsInfo</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_75">
                    <div class="code-panel" id="d_75">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/pluginsManager/initialize.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { options</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string pluginsBaseFolder</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> default process.cwd()</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> [ items</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> required</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string pluginName</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> }</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> initialize</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">[</span><span class="pp-pln"> items</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.pluginsManager.initialize.options', options</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> itemsOptions = options.items</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> typeof(itemsOptions) === 'undefined' || itemsOptions == null</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> options.items = []</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.loadPlugins</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> plugins </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">function</span><span class="pp-pln"> register</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> i</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> i &gt;= plugins.length</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> that</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> plugin = plugins[i]</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> that.registerFactoryPlugin</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> plugin</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> notUsed </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span><span class="pp-pln"> register(++i)</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> register(0)</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> loadPlugins</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> typeof window !== 'undefined'</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> when bundled wizzi.createFactory must be called passing plugin objects</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, options.items)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> itemsOptions = options.items</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> pluginsBaseFolder = options.pluginsBaseFolder || process.cwd()</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'pluginsBaseFolder', pluginsBaseFolder</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> packagePathCache = this.packagePathCache</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">        </span><span class="pp-tag">function</span><span class="pp-pln"> resolveNext</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> i</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> i &gt;= itemsOptions.length</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'itemsOptions', itemsOptions</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> callback(null, itemsOptions)</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> plugin = itemsOptions[i]</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> typeof (plugin) === "string"</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> plugin = itemsOptions[i] = {packagePath: plugin}</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> plugin.hasOwnProperty("packagePath") && !(plugin.hasOwnProperty("setup"))</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> resolveModule</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> pluginsBaseFolder</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> plugin.packagePath</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> moduleObject</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                            </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span><span class="pp-pln"> callback(err)</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> Object.keys(moduleObject)</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                                </span><span class="pp-tag">._</span><span class="pp-pln"> forEach</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                                    </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                                        </span><span class="pp-tag">param</span><span class="pp-pln"> key</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                                        </span><span class="pp-tag">if</span><span class="pp-pln"> !plugin.hasOwnProperty(key)</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                                            </span><span class="pp-tag">set</span><span class="pp-pln"> plugin[key] = moduleObject[key]</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                                            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'plugin key', key</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> plugin.packageName = plugin.packagePath</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> plugin.packagePath = moduleObject.packagePath</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span><span class="pp-pln"> resolveNext(++i)</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> resolveNext(++i)</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> resolveNext(0)</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_79"> ./resolve-module</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_80"> ./resolve-package</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_76">
                    <div class="code-panel" id="d_76">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/pluginsManager/model-factory.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Retrieve a model factory searching the factoryPlugins</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> registered to this repository</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> returns</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> | api-ref wizzi-plugin.modelFactory</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> | wzError NotFound</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getModelFactory</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> schemaName</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> textOnlyMockBaseDir</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.services.PluginsManager.getModelFactory: schemaName, textOnlyMockBaseDir ' + schemaName, textOnlyMockBaseDir</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">var</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> found = null</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> foundInPlugin = null</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> result = null</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> all factoryPlugins are searched, last matching encountered wins.</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.factoryPlugins</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.pluginsManager.getModelFactory.searching model loader', schemaName, ' in plugin ', item.getName()</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_168">checked_call_r_set(</span><span class="pp-arg"> found </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> item.getModelFactory</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> schemaName</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> textOnlyMockBaseDir</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'found', found, found && verify.isFunction(found.createLoadModel)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> found && verify.isFunction(found.createLoadModel)</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> result = found</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> foundInPlugin = item.getFilename()</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> !result</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> log.error('getModelFactory. Cannot find model loader: ' + schemaName + '\n' + 'availables schemas: ' + this.availableSchemas().join(', '))</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_182">r_wz_err(</span><span class="pp-arg"> NotFound</span><span class="pp-pln">,</span><span class="pp-arg">  getModelFactory </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'Cannot find model loader: ' + schemaName + '\navailables schemas: ' + this.availableSchemas().join(', ')</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('getModelFactory. Found model loader: ' + schemaName + ' in plugin ' + foundInPlugin)</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> result</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_77">
                    <div class="code-panel" id="d_77">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/pluginsManager/model-transformer.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Retrieve a model transformer searching the factoryPlugins</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> registered to this plugins manager</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string transformerName</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> returns</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> | api-ref wizzi-plugin.modelTransformer</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> | wzError NotFound</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getModelTransformer</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> transformerName</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.pluginsManager.getModelTransformer.transformerName: ' + transformerName</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">var</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> found = null</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> foundInPlugin = null</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> result = null</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> all factoryPlugins are searched, last matching encountered wins.</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.factoryPlugins</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'searching transformer ', transformerName, ' in plugin', item.getName()</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_168">checked_call_r_set(</span><span class="pp-arg"> found </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> item.getModelTransformer(transformerName)</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'found', found, found && verify.isFunction(found.trans)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> found && verify.isFunction(found.trans)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> result = found</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> foundInPlugin = item.getFilename()</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> !result</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> msg = 'getModelTransformer. Cannot find model transformer: ' + transformerName + '\n' + 'availables transformers: ' + this.availableModelTransformers().join(', ')</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> log.error</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> msg</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_182">r_wz_err(</span><span class="pp-arg"> NotFound</span><span class="pp-pln">,</span><span class="pp-arg">  getModelTransformer </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> msg</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('getModelTransformer. Found transformer: ' + transformerName + ' in plugin ' + foundInPlugin)</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> result</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_78">
                    <div class="code-panel" id="d_78">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/pluginsManager/register.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Register a factoryPlugin to this plugins manager</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> registerFactoryPlugin</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> pluginModule</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">func</span><span class="pp-pln"> createFactoryPlugin</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> pluginModule.createFactoryPlugin</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> this.createWizziForPlugin()</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> factoryPlugin </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> vld = that.validateFactoryPlugin(factoryPlugin)</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> vld.__is_error</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> vld</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> factoryPlugin.packageName = pluginModule.packageName</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> factoryPlugin.packagePath = pluginModule.packagePath</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> that.factoryPlugins.push(factoryPlugin)</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_171">checked_call(</span><span class="pp-arg"> providesAdded </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> that.addPluginProvides(factoryPlugin)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null)</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> createWizziForPlugin</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> file file</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> validateFactoryPlugin</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> factoryPlugin</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">for</span><span class="pp-pln"> var k in factoryPlugin</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.pluginsManager.validatefactoryPlugin.key', k</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> methodNames</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">[</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'getName'</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'getFilename'</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'getProvides'</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'getModelFactory'</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'getModelTransformer'</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'getArtifactGenerator'</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'getSchemaDefinition'</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> methodName in methodNames</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isFunction(factoryPlugin[methodName]) == false</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'InvalidFactoryPlugin'</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'validateFactoryPlugin'</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'Missing method: ' + methodName</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">try</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> factoryPlugin[methodName]('dummy')</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">catch</span><span class="pp-pln"> ex</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'InvalidFactoryPlugin'</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'validateFactoryPlugin'</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'Error executing method: ' + methodName + ', message: ' + ex.message</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> providesProperties</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-tag">[</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'schemas'</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'modelTransformers'</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'artifactGenerators'</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> provides = factoryPlugin.getProvides()</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> propName in providesProperties</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isArray(provides[propName]) == false</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'InvalidFactoryPlugin'</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'validateFactoryPlugin'</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'Missing property: ' + propName + ' in provides object'</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'validateFactoryPlugin', factoryPlugin.getName(), true</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error false</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> addPluginProvides</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> factoryPlugin</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> provides</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                </span><span class="pp-tag">[</span><span class="pp-pln"> schemas</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                </span><span class="pp-tag">[</span><span class="pp-pln"> modelTransformers</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                </span><span class="pp-tag">[</span><span class="pp-pln"> artifactGenerators</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> found</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in factoryPlugin.provides.schemas</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> found</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> _.find</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.providedSchemas</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> name item</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> found</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'DuplicatedPluginResource'</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'addPluginProvides'</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'Schema ' + item + ' already provided'</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.providedSchemas.push</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> name item</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in factoryPlugin.provides.modelTransformers</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> found</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> _.find</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.providedModelTransformers</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> name item</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> found</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'DuplicatedPluginResource'</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'addPluginProvides'</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'Model transformer ' + item + ' already provided'</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.providedModelTransformers.push</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> name item</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in factoryPlugin.provides.artifactGenerators</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> found</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> _.find</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.providedArtifactGenerators</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> name item</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> found</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'DuplicatedPluginResource'</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'addPluginProvides'</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'Artifact generator ' + item + ' already provided'</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.providedArtifactGenerators.push</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> name item</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> availableSchemas</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ret = []</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.providedSchemas</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ret.push(item.name)</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> availableModelTransformers</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ret = []</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.providedModelTransformers</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ret.push(item.name)</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> availableArtifactGenerators</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ret = []</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.providedArtifactGenerators</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ret.push(item.name)</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_79">
                    <div class="code-panel" id="d_79">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/pluginsManager/resolve-module.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> resolveModule</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> pluginsBaseFolder</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> modulePath</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> resolvePackage</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> pluginsBaseFolder</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> (modulePath + "/package.json")</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> packagePath</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> metadata</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> packageMetadata</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> !err</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">try</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> packageMetadata = (packagePath && require(packagePath).plugin) || {}</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">catch</span><span class="pp-pln"> ex</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'PackageError'</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'resolveModule'</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'Error loading plugin package.json ' + packagePath + ', message: ' + ex.message</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">iife</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> next</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> mp = verify.endsWith(modulePath, '.js') ? modulePath : modulePath + '.js'</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> resolvePackage(pluginsBaseFolder, mp, next)</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                    </span><span class="pp-tag">elif</span><span class="pp-pln"> packagePath</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> next</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> path.dirname(packagePath)</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> resolvePackage(pluginsBaseFolder, modulePath, next)</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a">(</span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> modulePath </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                            </span><span class="pp-tag">var</span><span class="pp-pln"> moduleObject</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                            </span><span class="pp-tag">try</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                                </span><span class="pp-tag">#</span><span class="pp-pln"> load the module now</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                                </span><span class="pp-tag">set</span><span class="pp-pln"> moduleObject = require(modulePath)</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.services.pluginManager.resolveModule: modulePath, moduleObject', modulePath, moduleObject</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                            </span><span class="pp-tag">catch</span><span class="pp-pln"> ex</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'ModuleError'</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'resolveModule'</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'Error loading plugin module ' + modulePath + ', message: ' + ex.message + '\n' + ex.stack</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> moduleObject.provides = (packageMetadata && packageMetadata.provides) || moduleObject.provides || []</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> moduleObject.consumes = (packageMetadata && packageMetadata.consumes) || moduleObject.consumes || []</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> moduleObject.packagePath = modulePath</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, moduleObject)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_80">
                    <div class="code-panel" id="d_80">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/pluginsManager/resolve-package.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> resolvePackage</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> pluginsBaseFolder</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> packagePath</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> originalBase = pluginsBaseFolder</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> !packagePathCache.hasOwnProperty(pluginsBaseFolder)</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> packagePathCache[pluginsBaseFolder] =</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> cache = packagePathCache[pluginsBaseFolder]</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> cache.hasOwnProperty(packagePath)</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> cache[packagePath]</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> packagePath[0] === "." || packagePath[0] === "/"</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> local folder plugin module</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> newPath = path.resolve(pluginsBaseFolder, packagePath)</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> exists</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> newPath</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> exists</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> exists</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> realpath</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> newPath</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> newPath </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                                </span><span class="pp-tag">set</span><span class="pp-pln"> cache[packagePath] = newPath</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span><span class="pp-pln"> callback(null, newPath)</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> ENOENT</span><span class="pp-pln">,</span><span class="pp-arg">  resolvePackage </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> "Can't find '" + newPath + "' ('" + packagePath + "' relative to '" + originalBase + "')"</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> npm (node_modules folder) plugin module</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> tryNext(pluginsBaseFolder)</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">function</span><span class="pp-pln"> tryNext</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> base</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> base == "/"</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> ENOENT</span><span class="pp-pln">,</span><span class="pp-arg">  resolvePackage </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> "Can't find '" + packagePath + "' relative to '" + originalBase + "'"</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> newPath = path.resolve(base, "node_modules", packagePath)</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> exists</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> newPath</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> exists</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> exists</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> realpath</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> newPath</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> newPath </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                                </span><span class="pp-tag">set</span><span class="pp-pln"> cache[packagePath] = newPath</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span><span class="pp-pln"> callback(null, newPath)</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> nextBase = path.resolve(base, '..')</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> nextBase === base</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> tryNext("/")</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                        </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> tryNext(nextBase)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_81">
                    <div class="code-panel" id="d_81">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/pluginsManager/schema-definition.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Retrieve a schema definition searching the factoryPlugins</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> registered to this plugins manager</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string schemaName</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> returns</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> | { jsonSchema</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> | wzError NotFound</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getSchemaDefinition</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> schemaName</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'PluginsManager.getSchemaObject.schemaName: ' + schemaName</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">var</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> found = null</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> foundInPlugin = null</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> result = null</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> all factoryPlugins are searched, last encountered results override the previous.</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.factoryPlugins</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'searching wizzi schema definition', schemaName, ' in plugin ', item.getName()</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_168">checked_call_r_set(</span><span class="pp-arg"> found </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> item.getSchemaDefinition(schemaName)</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'found', found</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> found && verify.isObject(found)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> result = found</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> foundInPlugin = item.getFilename()</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> !result</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> msg = 'getSchemaDefinition. Cannot find schema: ' + schemaName + '\n' + 'availables schemas: ' + this.availableSchemas().join(', ')</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> log.error</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> msg</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_182">r_wz_err(</span><span class="pp-arg"> NotFound</span><span class="pp-pln">,</span><span class="pp-arg">  getSchemaDefinition </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> msg</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('getSchemaDefinition. Found schema object: ' + schemaName + ' in plugin ' + foundInPlugin)</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> result</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_82">
                    <div class="code-panel" id="d_82">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/runnerServer/apiServer.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> registerApi</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> apiName</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">func</span><span class="pp-pln"> apiFunction</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.apis[apiName] = apiFunction</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.yellow('WIZZI RunnerServer. Registered Api: ' + apiName)</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> callApi</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> apiName</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> apiFunction = this.apis[apiName]</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> _.isFunction(apiFunction) == false</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_182">r_wz_err(</span><span class="pp-arg"> InvalidArgument</span><span class="pp-pln">,</span><span class="pp-arg">  callApi </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'apiName: "' + apiName + '" is not a function'</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> args = Array.prototype.slice.call(arguments, 1)</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">try</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> apiFunction.apply(this, args)</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">catch</span><span class="pp-pln"> ex</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_182">r_wz_err(</span><span class="pp-arg"> OperationError</span><span class="pp-pln">,</span><span class="pp-arg">  callApi</span><span class="pp-pln">,</span><span class="pp-arg">  ex </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'apiName "' + apiName + '" exception: ' + ex.message</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_83">
                    <div class="code-panel" id="d_83">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/runnerServer/factoryServer.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> registerFsNoAclFactory</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> name</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> plugins</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-tag">[</span><span class="pp-pln"> items</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> options.user = 'stefi'</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> options.role = 'admin'</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> options.repo</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind 'filesystem'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.registerFactory</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> name</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> registerFactory</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> name</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.wizziFactories.push</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> name name</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> options options</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.yellow('WIZZI RunnerServer. Registered factory: ' + name)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> callOnPrepare</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> wizzifile</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> wizziConfig</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> async.map</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> this.wizziFactories</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> item</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactory.createFactory</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> item.options</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wf </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> that.wizziFactory = wf</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> wizzifile.onPrepare</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> item.name</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> that</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wizziConfig</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> notUsed </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_180">r_cb(</span><span class="pp-arg"> null </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> notUsed </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_180">r_cb(</span><span class="pp-arg"> null </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> loadModel</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> modelTicket</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> schemaName</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> loadContext</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.wizziFactory.loadModel</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> schemaName</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziModel </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> that.models[modelTicket] = wizziModel</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.yellow('WIZZI RunnerServer. Loaded model: ' + modelTicket)</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_180">r_cb(</span><span class="pp-arg"> wizziModel </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> transformModel</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> modelTicket</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> transformerName</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> model</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> context</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">optional</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.wizziFactory.transformModel</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> transformerName</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> model</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> context</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> transformedModel </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> that.models[modelTicket] = transformedModel</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.yellow('WIZZI RunnerServer. Loaded transformed model: ' + modelTicket)</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_180">r_cb(</span><span class="pp-arg"> wizziModel </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getModel</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> modelTicket</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> this.models[modelTicket]</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_84">
                    <div class="code-panel" id="d_84">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/wizziFactory/artifact-generation.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Retrieve an artifact generator</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Artifact generators are searched in the PluginsManager</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> They are cached</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getArtifactGenerator</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> artifactName</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> globalContext</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">optional</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> generator = this.artifactGenerators[artifactName] || null</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> generator == null</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_168">checked_call_r_set(</span><span class="pp-arg"> generator </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.pluginsManager.getArtifactGenerator(artifactName)</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isFunction(generator.setGlobalContext) && globalContext</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> generator.setGlobalContext</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> globalContext</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.artifactGenerators[artifactName] = generator</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> generator</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Async generate an artifact</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { artifactModel</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # A wizzi model or POJO, the main context of the generation</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # May be null for artifacts of type 'code write'</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string ittfDocumentUri</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # For trace and documentation purposes</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string artifactName</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # The name for retrieving the artifact generation module</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { artifactRequestContext</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # context data for the artifact generator</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string generated artifact</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> generateArtifact</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">[{</span><span class="pp-pln"> artifactModel</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">optional</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> artifactName</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> artifactRequestContext</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'generateArtifact.artifactModel', artifactModel</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> typeof(callback) === 'undefined'</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> callback = artifactRequestContext</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> artifactRequestContext = {}</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> !artifactRequestContext</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> artifactRequestContext = {}</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_166">check_wz_callback(</span><span class="pp-arg"> generateArtifact </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> TODO (next wizzi factory versions)</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> check_cb_object( artifactModel, generateArtifact ) cannot be done because</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> artifactModel may be null for artifacts of type 'code write'.</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> To check the match between artifact descriptors (wzjob/artifact) and</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> artifact modules (lib/artifatcs/schema/artifactName/main.js) could be helpfull.</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> generator = this.getArtifactGenerator(artifactName)</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> generator.__is_error</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> generator.ittfDocumentUri = ittfDocumentUri</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> callback(generator)</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">        </span><span class="pp-tag">##</span><span class="pp-pln"> TODO productionOptions should come from production manager</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> The `data` property of the productionOptions will be merged</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> to the `values` property of the GenContext.</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> genContext</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">            </span><span class="pp-tag">new</span><span class="pp-pln"> GenContext</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> productionOptions</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> artifactRequestContext</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> data artifactRequestContext</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> pman this.createProductionManager()</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> generator.gen</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> artifactModel</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> genContext</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">function</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> result</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                    </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.wizziFactory.generateArtifact', typeof(err), err, err.length, err.length && err.length &gt; 0 && err[0]</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> ArtifactGenerationError</span><span class="pp-pln">,</span><span class="pp-arg">  generateArtifact</span><span class="pp-pln">,</span><span class="pp-arg">  err </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'Error in generation: ' + artifactName + '. For artifactModel: ' + ittfDocumentUri + '. See inner error.'</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> sw = new StringWriter()</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> result.toStream(sw)</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, sw.toString())</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Loads a wizzi model from an IttfDocument and use it as</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> the artifactModel for the artifact generation.</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string ittfDocumentUri</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # the uri of the IttfDocument</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { requestContext</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { modelRequestContext</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # Context data for the wizzi model loading</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { artifactRequestContext</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # Context data for the artifact generation</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string artifactName</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> function callback</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> loadModelAndGenerateArtifact</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> requestContext</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> modelRequestContext</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> artifactRequestContext</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> artifactName</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.wizziFactory.loadModelAndGenerateArtifact.requestContext.modelRequestContext', requestContext.modelRequestContext, 'artifactRequestContext', requestContext.artifactRequestContext</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> load the wizzi model from an ittfDocument</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.loadModel</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> requestContext.modelRequestContext</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> artifactModel </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.wizziFactory.loadModelAndGenerateArtifact', 'model loaded', artifactModel</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> the loaded wizzi model becomes the artifactModel of the artifact generation</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> that.generateArtifact</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> artifactModel</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> artifactName</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> requestContext.artifactRequestContext</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_85">
                    <div class="code-panel" id="d_85">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/wizziFactory/detectSchema.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> detectSchema</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> parts = path.basename(ittfDocumentUri).split('.')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> parts.length &lt; 3</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'InvalidIttfDocumentUri'</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'detectSchema'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'IttfDocumentUri basename must contain at least 3 parts separated by a dot. Received: ' + path.basename(ittfDocumentUri) + ' in IttfDocumentUri: ' + ittfDocumentUri</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ittf = parts[parts.length-1]</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> ittf.toLowerCase() != 'ittf'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'InvalidIttfDocumentUri'</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'detectSchema'</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'IttfDocumentUri extension must be ".ittf". Received: ' + ittf + ' in IttfDocumentUri: ' + ittfDocumentUri</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> parts[parts.length-2]</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_86">
                    <div class="code-panel" id="d_86">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/wizziFactory/getInfo.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getInfo</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> user this.user</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> role this.role</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind this.storeKind</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> store this.store.getInfo()</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> pluginsManager this.pluginsManager.getInfo()</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> globalContext this.globalContext</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __is_test this.__is_test</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> testOptions this.testOptions</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_87">
                    <div class="code-panel" id="d_87">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/wizziFactory/initialize.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { options</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { repo</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string storeKind</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> oneOf 'filesystem', 'mongodb', 'localstorage'</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string storeUri</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # when storeKind == mongodb</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string storeBaseFolder</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # when storeKind == mongodb</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { plugins</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> [ items</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string pluginName</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string pluginsBaseFolder</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { test</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string testOnlyMockBaseDir</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { dumps</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string dumpsBaseFolder</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { mTreeBuildupJsWizziScript</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> boolean dump</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string dumpsBaseFolder</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> initialize</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> repo</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> plugins</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> globalContext</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> test</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> options.test</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.__is_test = true</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.testOptions</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> dumps options.test.dumps</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.testOnlyMockBaseDir = options.test.testOnlyMockBaseDir</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> options.globalContext</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.globalContext</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> Object.assign</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.globalContext</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> options.globalContext</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.wizziFactory.initialize.globalContext', this.globalContext</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> repoOptions = options.repo</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> pluginsOptions = options.plugins</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isObject(pluginsOptions) == false</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> pluginsOptions = {}</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.storeKind = repoOptions.storeKind || 'filesystem'</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.storePool.initialize</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> repoOptions</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> pool </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> that.fileService = pool.fileService</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> that.createStore = pool.createStore</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_170">checked_call_set(</span><span class="pp-arg"> that.__loadMTree </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> mtree.createLoadMTree</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> that.createStore</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_170">checked_call_set(</span><span class="pp-arg"> that.__loadMTreeRaw </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> mtree.createLoadMTree</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> that.createStore</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> raw true</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_170">checked_call_set(</span><span class="pp-arg"> that.__loadMTreeDebugInfo </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> mtree.createLoadMTree</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> that.createStore</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> debugInfo true</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> that.createStore</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> store </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> that.store = store</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> PluginsManager.createManager</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> pluginsOptions</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> pluginsManager </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                                </span><span class="pp-tag">set</span><span class="pp-pln"> that.pluginsManager = pluginsManager</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'pluginsManager', pluginsManager</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, that)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_88">
                    <div class="code-panel" id="d_88">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/wizziFactory/model-loading.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Retrieve a loadModel function by the model schema name.</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Model factories are searched in the PluginsManager.</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> They are cached.</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> return</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> | func wizzi-plugin.modelFactory.loadModel</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> | wzError NotFound</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string schemaName</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { globalContext</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # A global context object can be used to add mTree buildup contex values</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # to those contained in the mTreeBuildUpContext parameter, every time</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # the returned loadModel function is called.</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string testOnlyMockBaseDir</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # used for test purposes</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getLoadModel</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> schemaName</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> globalContext</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">optional</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> testOnlyMockBaseDir</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.services.wizziFactory.getLoadModel: globalContext, testOnlyMockBaseDir', globalContext, testOnlyMockBaseDir</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> loadModel = this.modelLoaders[schemaName] || null</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> loadModel == null</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_169">checked_call_r(</span><span class="pp-arg"> factory </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.pluginsManager.getModelFactory</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> schemaName</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> (testOnlyMockBaseDir || this.testOnlyMockBaseDir)</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.wizziFactory.getLoadModel.schemaName,factory', schemaName, factory</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.wizziFactory.getLoadModel.this.__loadMTree.loadHistory', this.__loadMTree.loadHistory</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> loadModel</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> factory.createLoadModel</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> loadMTree this.__loadMTree</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> file file</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> verify verify</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> errors errors</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> wizziFactory this</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> globalContext</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'getLoadModel.loadModel', loadModel</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.modelLoaders[schemaName] = loadModel</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> loadModel</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Retrieve a loadModelFromTree function by the model schema name.</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Model factories are searched in the PluginsManager.</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> They are cached.</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> return</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> | func wizzi-plugin.modelFactory.loadModel</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> | wzError NotFound</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string schemaName</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getLoadModelFromMTree</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> schemaName</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> loadModel = this.modelLoaders[schemaName + 'FromMTree'] || null</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> loadModel == null</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_169">checked_call_r(</span><span class="pp-arg"> factory </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.pluginsManager.getModelFactory</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> schemaName</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.wizziFactory.getLoadModel.schemaName,factory', schemaName, factory</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> loadModel</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> factory.createLoadModel</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> loadMTree this.__loadMTree</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> file file</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> verify verify</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> errors errors</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> wizziFactory this</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> loadFromMTree true</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> {}</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'getLoadModel.loadModel', loadModel</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.modelLoaders[schemaName + 'FromMTree'] = loadModel</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> loadModel</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Async load a wizzi model</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string schemaName</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string ittfDocumentUri</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { loadContext</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { mTreeBuildUpContext</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { globalContext</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # Being the loadModel function called once this usually is not used.</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { formatOptions</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> boolean ittfSources</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # if true returns not the model but its ittf source documents.</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> loadModel</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> schemaName</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> loadContext</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> testOnlyMockBaseDir</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> typeof(callback) == 'undefined'</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> testOnlyMockBaseDir = null</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> callback = loadContext</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> loadContext = ittfDocumentUri</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> ittfDocumentUri = schemaName</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> schemaName = null</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_166">check_wz_callback(</span><span class="pp-arg"> loadModel </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> schemaName == null</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_170">checked_call_set(</span><span class="pp-arg"> schemaName </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> detectSchema(ittfDocumentUri)</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_167">check_wz_not_empty(</span><span class="pp-arg"> ittfDocumentUri</span><span class="pp-pln">,</span><span class="pp-arg">  loadModel </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.wizziFactory.loadModel: schemaName, ittfDocumentUri, testOnlyMockBaseDir', schemaName, ittfDocumentUri, testOnlyMockBaseDir</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> loadContext = loadContext || {}</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> loadModel</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.getLoadModel</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> schemaName</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext.globalContext</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> testOnlyMockBaseDir</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> loadModel.__is_error</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> loadModel.ittfDocumentUri = ittfDocumentUri</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> callback(loadModel)</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> loadModel</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.createLoadContext</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziModel </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> that.formatWizziModel</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModel</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext.formatOptions</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> formatWizziModel</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> model</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> formatOptions</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> !formatOptions</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> model</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> partial = false</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ret = {}</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> formatOptions.ittfSources</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> partial = true</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> ret.loadHistory = {}</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> ret.loadHistory.ittfSources = model.loadHistory.ittfSources</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> partial</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> model</span></div><div class="L5"><span class="pp-ln"> 155 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> loadModelFromMtree</span></div><div class="L6"><span class="pp-ln"> 156 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> schemaName</span></div><div class="L7"><span class="pp-ln"> 157 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> mTree</span></div><div class="L8"><span class="pp-ln"> 158 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> loadContext</span></div><div class="L9"><span class="pp-ln"> 159 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln"> 160 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln"> 161 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> typeof(callback) == 'undefined'</span></div><div class="L2"><span class="pp-ln"> 162 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> callback = loadContext</span></div><div class="L3"><span class="pp-ln"> 163 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> loadContext = {}</span></div><div class="L4"><span class="pp-ln"> 164 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.wizziFactory.loadModelFromMtree 2', schemaName, mTree, mTree.nodes[0].children, loadContext, callback</span></div><div class="L5"><span class="pp-ln"> 165 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln"> 166 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_166">check_wz_callback(</span><span class="pp-arg"> loadModelFromMtree </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln"> 167 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln"> 168 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> loadModel</span></div><div class="L9"><span class="pp-ln"> 169 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.getLoadModelFromMTree</span></div><div class="L0"><span class="pp-ln"> 170 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> schemaName</span></div><div class="L1"><span class="pp-ln"> 171 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln"> 172 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> loadModel.__is_error</span></div><div class="L3"><span class="pp-ln"> 173 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> loadModel.ittfDocumentUri = "Unavailable (loaded from mTree)"</span></div><div class="L4"><span class="pp-ln"> 174 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> callback(loadModel)</span></div><div class="L5"><span class="pp-ln"> 175 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln"> 176 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L7"><span class="pp-ln"> 177 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> loadModel</span></div><div class="L8"><span class="pp-ln"> 178 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> mTree</span></div><div class="L9"><span class="pp-ln"> 179 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.createLoadContext</span></div><div class="L0"><span class="pp-ln"> 180 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext || {}</span></div><div class="L1"><span class="pp-ln"> 181 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziModel </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln"> 182 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln"> 183 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln"> 184 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L5"><span class="pp-ln"> 185 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> that.formatWizziModel</span></div><div class="L6"><span class="pp-ln"> 186 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModel</span></div><div class="L7"><span class="pp-ln"> 187 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext.formatOptions</span></div><div class="L8"><span class="pp-ln"> 188 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L9"><span class="pp-ln"> 189 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Async load a wizzi model from a</span></div><div class="L0"><span class="pp-ln"> 190 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> config object built programmatically</span></div><div class="L1"><span class="pp-ln"> 191 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L2"><span class="pp-ln"> 192 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { modelConfig</span></div><div class="L3"><span class="pp-ln"> 193 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string src</span></div><div class="L4"><span class="pp-ln"> 194 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string cwd</span></div><div class="L5"><span class="pp-ln"> 195 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional</span></div><div class="L6"><span class="pp-ln"> 196 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string schema</span></div><div class="L7"><span class="pp-ln"> 197 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional</span></div><div class="L8"><span class="pp-ln"> 198 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string format</span></div><div class="L9"><span class="pp-ln"> 199 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional</span></div><div class="L0"><span class="pp-ln"> 200 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string exportName</span></div><div class="L1"><span class="pp-ln"> 201 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional - has meaning only for context models.</span></div><div class="L2"><span class="pp-ln"> 202 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> [ contexts</span></div><div class="L3"><span class="pp-ln"> 203 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional - has the same format of modelConfig</span></div><div class="L4"><span class="pp-ln"> 204 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> [ transformers</span></div><div class="L5"><span class="pp-ln"> 205 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional</span></div><div class="L6"><span class="pp-ln"> 206 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { formatOptions</span></div><div class="L7"><span class="pp-ln"> 207 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional</span></div><div class="L8"><span class="pp-ln"> 208 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> boolean ittfSources</span></div><div class="L9"><span class="pp-ln"> 209 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # if true returns not the model but its ittf source documents.</span></div><div class="L0"><span class="pp-ln"> 210 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> loadModelFromConfig</span></div><div class="L1"><span class="pp-ln"> 211 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> modelConfig</span></div><div class="L2"><span class="pp-ln"> 212 </span><span class="pp-pln">            </span><span class="pp-tag">string</span><span class="pp-pln"> src</span></div><div class="L3"><span class="pp-ln"> 213 </span><span class="pp-pln">            </span><span class="pp-tag">string</span><span class="pp-pln"> cwd</span></div><div class="L4"><span class="pp-ln"> 214 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L5"><span class="pp-ln"> 215 </span><span class="pp-pln">            </span><span class="pp-tag">string</span><span class="pp-pln"> schema</span></div><div class="L6"><span class="pp-ln"> 216 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L7"><span class="pp-ln"> 217 </span><span class="pp-pln">            </span><span class="pp-tag">string</span><span class="pp-pln"> format</span></div><div class="L8"><span class="pp-ln"> 218 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L9"><span class="pp-ln"> 219 </span><span class="pp-pln">            </span><span class="pp-tag">string</span><span class="pp-pln"> exportName</span></div><div class="L0"><span class="pp-ln"> 220 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L1"><span class="pp-ln"> 221 </span><span class="pp-pln">            </span><span class="pp-tag">[</span><span class="pp-pln"> contexts</span></div><div class="L2"><span class="pp-ln"> 222 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L3"><span class="pp-ln"> 223 </span><span class="pp-pln">            </span><span class="pp-tag">[</span><span class="pp-pln"> transformers</span></div><div class="L4"><span class="pp-ln"> 224 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L5"><span class="pp-ln"> 225 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> globalContext</span></div><div class="L6"><span class="pp-ln"> 226 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> formatOptions</span></div><div class="L7"><span class="pp-ln"> 227 </span><span class="pp-pln">                </span><span class="pp-tag">optional</span></div><div class="L8"><span class="pp-ln"> 228 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L9"><span class="pp-ln"> 229 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> ModelInfo == null</span></div><div class="L0"><span class="pp-ln"> 230 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> ModelInfo = require("../model/modelinfo").ModelInfo</span></div><div class="L1"><span class="pp-ln"> 231 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> AsyncModelLoader = require('../model/asyncModelLoader')</span></div><div class="L2"><span class="pp-ln"> 232 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> mi = new ModelInfo(modelConfig)</span></div><div class="L3"><span class="pp-ln"> 233 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.productionManager</span></div><div class="L4"><span class="pp-ln"> 234 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.createProductionManager</span></div><div class="L5"><span class="pp-ln"> 235 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L6"><span class="pp-ln"> 236 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> globalContext</span></div><div class="L7"><span class="pp-ln"> 237 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L8"><span class="pp-ln"> 238 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> AsyncModelLoader.load</span></div><div class="L9"><span class="pp-ln"> 239 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> mi</span></div><div class="L0"><span class="pp-ln"> 240 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziModel </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln"> 241 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln"> 242 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln"> 243 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L4"><span class="pp-ln"> 244 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> that.formatWizziModel</span></div><div class="L5"><span class="pp-ln"> 245 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wizziModel</span></div><div class="L6"><span class="pp-ln"> 246 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> globalContext.formatOptions</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_89">
                    <div class="code-panel" id="d_89">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/wizziFactory/model-transformation.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Retrieve a model transformer</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Model transformation are searched in the PluginsManager</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> They are cached</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getModelTransformer</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> transformerName</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> globalContext</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">optional</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> transformer = this.modelTransformers[transformerName] || null</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> transformer == null</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_168">checked_call_r_set(</span><span class="pp-arg"> transformer </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.pluginsManager.getModelTransformer(transformerName)</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isFunction(transformer.setGlobalContext) && globalContext</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> transformer.setGlobalContext</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> globalContext</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.modelTransformers[transformerName] = transformer</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> transformer</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Async execute a model transformation</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> transformModel</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> model</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> transformerName</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> context</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_166">check_wz_callback(</span><span class="pp-arg"> transformModel </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> transformer = this.getModelTransformer(transformerName)</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> transformer.__is_error</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> transformer.ittfDocumentUri = ittfDocumentUri</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> callback(transformer)</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> transformer.trans</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> model</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> context</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_90">
                    <div class="code-panel" id="d_90">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/wizziFactory/modelTypes-generation.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> From an IttfDocument of schema "wfschema"</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> async generate:</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> - a WizziModelType</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> - a WizziModelFactory</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> - a WizziModelType test module</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> - a WizziModelType json documentation</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> - a WizziModelType html documentation</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> generateModelTypes</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> wfschemaIttfDocumentUri</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> outputPackagePath</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> wfschemaName</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> mTreeBuildUpContext</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> wizziSchemaLabFolder = path.join(outputPackagePath, 'lib', 'wizzi', 'schemas', 'lab')</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> wizziModelFolder = path.join(outputPackagePath, 'lib', 'wizzi', 'models')</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> paths</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> model path.join(wizziModelFolder, wfschemaName + '-model.g.js')</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> factory path.join(wizziModelFolder, wfschemaName + '-factory.g.js')</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> lab path.join(wizziSchemaLabFolder, wfschemaName + '-test.g.js')</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> jsondocs path.join(wizziModelFolder, wfschemaName + '-schema.g.json')</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> htmldocs path.join(wizziModelFolder, wfschemaName + '-schema.g.html')</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.generateModelTypesArtifacts</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> wfschemaIttfDocumentUri</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> mTreeBuildUpContext</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> generatedArtifacts </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> file.write</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> paths.model</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> generatedArtifacts.model</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('Generated WizziModel: ' + paths.model)</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> file.write</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> paths.factory</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> generatedArtifacts.factory</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('Generated WizziModelFactory: ' + paths.factory)</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> file.write</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> paths.lab</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> generatedArtifacts.lab</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('Generated WizziModel test: ' + paths.lab)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> file.write</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> paths.jsondocs</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> generatedArtifacts.jsondocs</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('Generated WizziModel json docs: ' + paths.jsondocs)</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> file.write</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> paths.htmldocs</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> generatedArtifacts.htmldocs</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('Generated WizziModel html docs: ' + paths.htmldocs)</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> modelPath paths.model</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> factoryPath paths.factory</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> jsondocsPath paths.jsondocs</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> htmldocsPath paths.htmldocs</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> generate the wizzi model type artifacts</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> from an IttfDocument of schema "wfschema"</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> generateModelTypesArtifacts</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> wfschemaIttfDocumentUri</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> mTreeBuildUpContext</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> loadContext</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> mTreeBuildUpContext mTreeBuildUpContext</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> log.info('starting async load of wizzi model from wfschemaIttfDocumentUri: ' + wfschemaIttfDocumentUri)</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.loadModel</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'wfschema'</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> wfschemaIttfDocumentUri</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> schemaWizziModel </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> load the schemaWizziModel instance into the bootstrap wizzimodel.</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> This is required until the generation of the wizzi model of type 'wfschema'</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> is not completely automated.</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> BootWizziSchema == null</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> BootWizziSchema = require(bootModelUri).WizziSchema</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> bootWizziModel = new BootWizziSchema(schemaWizziModel.wzName)</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> bootWizziModel.loadFromWizziModel(schemaWizziModel)</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> log.info('starting the artifact generator wfschema/model')</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> that.generateArtifact</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> bootWizziModel</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> bootModelDefUri</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'wfschema/model'</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziModelArtifact </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> log.info('starting the artifact generator wfschema/factory')</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> that.generateArtifact</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> bootWizziModel</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> bootModelDefUri</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'wfschema/factory'</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziFactoryArtifact </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> log.info('starting the artifact generator wfschema/test')</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> that.generateArtifact</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> bootWizziModel</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> bootModelDefUri</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'wfschema/test'</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziTestArtifact </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> that.transformModel</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> bootWizziModel</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'wfschema/json_docs'</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">                                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziDocsObject </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                                                </span><span class="pp-tag">var</span><span class="pp-pln"> jsondocsJson = stringify(wizziDocsObject, null, 2)</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                                                </span><span class="pp-tag">_</span><span class="pp-pln"> log.info('starting the artifact generator wfschema/html_docs')</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                                                </span><span class="pp-tag">_</span><span class="pp-pln"> that.generateArtifact</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> wizziDocsObject</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> bootModelDefUri</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'wfschema/html_docs'</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                                                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziHtmlDocsArtifact </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                                                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                                                            </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">                                                            </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">                                                                </span><span class="pp-tag">@</span><span class="pp-pln"> model wizziModelArtifact</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">                                                                </span><span class="pp-tag">@</span><span class="pp-pln"> factory wizziFactoryArtifact</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">                                                                </span><span class="pp-tag">@</span><span class="pp-pln"> test wizziTestArtifact</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">                                                                </span><span class="pp-tag">@</span><span class="pp-pln"> jsondocs jsondocsJson</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">                                                                </span><span class="pp-tag">@</span><span class="pp-pln"> htmldocs wizziHtmlDocsArtifact</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_91">
                    <div class="code-panel" id="d_91">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/wizziFactory/mtree-loading.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Async load a wizzi magical tree</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string ittfDocumentUri</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { mTreeBuildUpContext</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> loadMTree</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> mTreeBuildUpContext</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.__loadMTree</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.createLoadContext</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> mTreeBuildUpContext mTreeBuildUpContext</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Async load a raw ittf document</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string ittfDocumentUri</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> loadMTreeRaw</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.__loadMTreeRaw</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.createLoadContext</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Async load the mTree debug info of an ittf document</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string ittfDocumentUri</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> loadMTreeDebugInfo</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> mTreeBuildUpContext</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.__loadMTreeDebugInfo</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.createLoadContext</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> mTreeBuildUpContext mTreeBuildUpContext</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_92">
                    <div class="code-panel" id="d_92">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/wizziFactory/request-context.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> TODO</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> This method is optimal to implement the</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> replacement of wizzi.model.modelInfo(s) properties of</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> 'loadContext' with loaded wizzi models.</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> But the method must become asynchronous !!!</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> createLoadContext</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> loadContext</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isObject(loadContext) && verify.isObject(loadContext.__productionManager)</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> Already a valid request context</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> loadContext</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> mTreeBuildUpContext</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> Object.assign</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> this.globalContext</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> loadContext.mTreeBuildUpContext</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.wizziFactory.createLoadContext.mTreeBuildUpContext', mTreeBuildUpContext</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __productionManager</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.createProductionManager</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> mTreeBuildUpContext mTreeBuildUpContext</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { userProductionOptions</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> integer indentSpaces</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> default 4</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string basedir</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> integer verbose</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> default 2</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { dumps</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> ...</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { globalContext</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> createProductionManager</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> userProductionOptions</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">optional</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> globalContext</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">optional</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> options</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> productionOptions</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> userProductionOptions || {}</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> this.__is_test</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> options</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> Object.assign</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.testOptions</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log '*=*=*=*= temporary wizzi.wizziFactory.createProductionManager. options : ', options</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ProductionManager = getProductionManager()</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> pman</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">new</span><span class="pp-pln"> ProductionManager</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> this</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> create and set aclStat</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> aclStat</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">new</span><span class="pp-pln"> acl.AclStat</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> this.user</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> this.role</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> pman.aclStat(aclStat)</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> create and set the global context</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> globalContext</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> Object.assign</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> this.globalContext</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> globalContext || {}</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> pman.globalContext(globalContext)</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> pman</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_93">
                    <div class="code-panel" id="d_93">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/wizziFactory/schema-definition.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Retrieve a schema definition in json format</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Schema definitions are searched in the PluginsManager</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> They are cached</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getSchemaDefinition</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">string</span><span class="pp-pln"> schemaName</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> schema = this.schemaDefinitions[schemaName] || null</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> schema == null</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> schema = this.pluginsManager.getSchemaDefinition(schemaName)</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> schema != null</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.schemaDefinitions[schemaName] = schema</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> schema</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_94">
                    <div class="code-panel" id="d_94">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/wizziFactory/terminate.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> terminate</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.storePool.close</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_95">
                    <div class="code-panel" id="d_95">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/t/wizziFactory/wizzi-job-execution.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Execute a wizzi job</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { jobRequest type 1</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string name</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string path</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # path to the 'wfjob' ittf document that the wizzi.production.programManager will load.</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { productionOptions</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { globalContext</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { jobRequest type 2</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { wfjobModel</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # 'wfjob' wizzi model, built programmatically or previously loaded</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { productionOptions</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { globalContext</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> executeJob</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">{</span><span class="pp-pln"> jobRequest</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> productionOptions</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">callback</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.wizziFactory.executeJob.jobRequest', jobRequest</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isNotEmpty(jobRequest.path)</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> jobRequest type 1</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this._executeJob_by_path</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> jobRequest</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> jobRequest type 2</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this._executeJob_by_wfjobModel</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> jobRequest</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> _executeJob_by_path</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> jobRequest</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.storePool.get</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> store </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> store.documentExists</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> jobRequest.path</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> exists </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> !exists</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_178">r_cb_error(</span><span class="pp-arg"> NotFound</span><span class="pp-pln">,</span><span class="pp-arg">  _executeJob_by_path </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'Cannot find wfjob ittf document: ' + jobRequest.path</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                        </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                            </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.wizziFactory._executeJob_by_path,jobRequest.globalContext', jobRequest.globalContext</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_171">checked_call(</span><span class="pp-arg"> pman</span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> that.createProductionManager</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> jobRequest.productionOptions</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> jobRequest.globalContext</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                            </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_171">checked_call(</span><span class="pp-arg"> notUsed</span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> pman.addJobRequest</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                                        </span><span class="pp-tag">{</span><span class="pp-pln"> wfjob</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentUri jobRequest.path</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                            </span><span class="pp-tag">+</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                            </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.wizziFactory._executeJob_by_path,pman.globalContext()', pman.globalContext()</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                            </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> pman.run</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('wizzi.wizziFactory.executeJob.' + jobRequest.name + ' run completed')</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> pman.persistToFile</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('wizzi.wizziFactory.executeJob.' + jobRequest.name + ' persistToFile completed')</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> pman.terminate</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                                            </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                                                </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, result)</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> _executeJob_by_wfjobModel</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> jobRequest</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">        </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error('wizzi.wizziFactory._executeJob_by_wfjobModel not implemented.')</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_96">
                    <div class="code-panel" id="d_96">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/pluginsManager.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span><span class="pp-pln"> wizzi.pluginsManager</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> fs = require('fs')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> _ = require('lodash')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> log = require('../util/log')(module)</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> file = require('wizzi-utils').file</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> fail = require('wizzi-utils').fail</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> errors = require('../errors')</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> existsSync = fs.existsSync || path.existsSync</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> realpathSync = fs.realpathSync</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> exists = fs.exists || path.exists</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> realpath = fs.realpath</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> TODO</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> Implement available wizzi factories</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> availableFactories = []</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> PluginsManager</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.packagePathCache = {}</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.factoryPlugins = []</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.providedSchemas = []</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.providedModelTransformers = []</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.providedArtifactGenerators = []</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_75"> pluginsManager/initialize</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_78"> pluginsManager/register</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_76"> pluginsManager/model-factory</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_77"> pluginsManager/model-transformer</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_73"> pluginsManager/artifact-generator</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_81"> pluginsManager/schema-definition</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_74"> pluginsManager/getInfo</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> For test - begin</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> packagePathCache = {}</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_79"> pluginsManager/resolve-module</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_80"> pluginsManager/resolve-package</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> For test - end</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> createManager</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">function</span><span class="pp-pln"> createManager</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">callback</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> pm</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                        </span><span class="pp-tag">new</span><span class="pp-pln"> PluginsManager</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> pm.initialize</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> PluginsManager PluginsManager</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> resolveModule resolveModule</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> resolvePackage resolvePackage</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_97">
                    <div class="code-panel" id="d_97">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/runnerServer.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span><span class="pp-pln"> wizzi.runnerServer</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> _ = require('lodash')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> async = require('async')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> chalk = require('chalk')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> errors = require('../errors')</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> wizziFactory = require('./wizziFactory')</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> RunnerServer</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">string</span><span class="pp-pln"> cwd</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> user</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> role</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.cwd = cwd</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.user = user</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.role = role</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wizziFactory = null</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wizziFactories = []</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.apis = {}</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.models = {}</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-kwd">$$</span><span class="pp-pln"> TODO VIA</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.registeredPlugins = []</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-kwd">$$</span><span class="pp-pln"> TODO VIA</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.globalContext = {}</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-kwd">$$</span><span class="pp-pln"> TODO VIA</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> registerPlugin</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">string</span><span class="pp-pln"> pluginName</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.wizziFactory != null</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error('wizzi/runnerServer/registerPlugin error: Cannot register a plugin. The WizziFactory has been already initialized.')</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.registeredPlugins.push</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> pluginName</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-kwd">$$</span><span class="pp-pln"> TODO VIA</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> registerGlobalContext</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> context</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.wizziFactory != null</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error('wizzi/runnerServer/registerPlugin error: Cannot register a global context. The WizziFactory has been already initialized.')</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.globalContext</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> _.merge</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.globalContext</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> context</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> initializeFactory</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">string</span><span class="pp-pln"> userid</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">string</span><span class="pp-pln"> role</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> typeof(callback) == 'undefined'</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> callback = options</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> options = {}</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> options.storeKind = options.storeKind || 'filesystem'</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_166">check_wz_callback(</span><span class="pp-arg"> initializeFactory </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactory.createFactory</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> userid</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> role</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> repo</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind options.storeKind</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> plugins</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> items this.registeredPlugins</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> pluginsBaseFolder this.cwd</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> globalContext this.globalContext</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> test options.test</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wf </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> that.wizziFactory = wf</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                    </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.yellow('RUNNER SERVER WIZZI FACTORY CREATED on store ' + options.storeKind)</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wf</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_83"> runnerServer/factoryServer</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_82"> runnerServer/apiServer</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> instance null</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> init</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> cwd</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> user</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> role</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> this.instance != null</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                        </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error('wizzi/services/runnerServer/init error: The runner server has already been instantiated.')</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> this.instance</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                        </span><span class="pp-tag">new</span><span class="pp-pln"> RunnerServer</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> cwd</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> user</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> role</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_98">
                    <div class="code-panel" id="d_98">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/storePool.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span><span class="pp-pln"> wizzi.storePool</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> repo = require('wizzi-repo')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> StorePool</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> wizziFactory</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wizziFactory = wizziFactory</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.stores = []</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> initialize</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> repoOptions</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">callback</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.storeKind = repoOptions.storeKind || 'filesystem'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this._initializeFileService</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> repoOptions</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> notUsed </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> that._initializeStoreService</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> repoOptions</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> notUsed </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_180">r_cb(</span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> fileService that.fileService</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> createStore that.getCreateStore_hof()</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> _initializeFileService</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> repoOptions</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.storeKind === 'filesystem'</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> repo.fsfile</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> file </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> that.fileService = file</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_180">r_cb(</span><span class="pp-arg"> null </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">elif</span><span class="pp-pln"> this.storeKind === 'mongodb'</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> repo.dbfile</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> mongoUri repoOptions.storeUri</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> mongodbBaseFolder repoOptions.storeBaseFolder</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> file </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> that.fileService = file</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_180">r_cb(</span><span class="pp-arg"> null </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">elif</span><span class="pp-pln"> this.storeKind === 'json'</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'repoOptions', repoOptions</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> repo.jsonfile</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> jsonFsData repoOptions.storeJsonFsData</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> file </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> that.fileService = file</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_180">r_cb(</span><span class="pp-arg"> null </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_179">r_cb_wz_err(</span><span class="pp-arg"> NotImplemented</span><span class="pp-pln">,</span><span class="pp-arg">  _initializeFileService </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'Store kind not implemented yet : ' + this.storeKind</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> _initializeStoreService</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> repoOptions</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> that = this;</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> repo.createStoreFactory</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> repoOptions</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> storeFactory </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> that.storeFactory = storeFactory</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_180">r_cb(</span><span class="pp-arg"> null </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> add</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> store</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.stores.push(store)</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> get</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">callback</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.stores.length &gt; 0</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> this.stores[0]</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> that = this</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.storeFactory</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> store </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> that.add(store)</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> store</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getCreateStore_hof</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> pool = this</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                </span><span class="pp-tag">function</span><span class="pp-pln"> createStore</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> pool.get</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> store </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> store</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> close</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.fileService && this.fileService.close</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.fileService.close</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> store in this.stores</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> store.close</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> store.close</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports = StorePool</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_99">
                    <div class="code-panel" id="d_99">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/wizziFactory.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span><span class="pp-pln"> wizzi.wizziFactory</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> stringify = require('json-stringify-safe')</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> repo = require('wizzi-repo')</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> mtree = require('wizzi-mtree')</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> acl = require('../acl')</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> productionOptions = require('../production/options')</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> ProductionManager = null</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> GenContext = require('../artifact/genContext')</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> file = require('wizzi-utils').file</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> StringWriter = require('../util/stringWriter')</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> errors = require('../errors')</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> log = require('../util/log')(module)</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> PluginsManager = require('./pluginsManager')</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> StorePool = require('./storePool')</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> bootModelUri = "../wizzi/models/bootstrap/wfschema-boot-model"</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> bootModelDefUri = "../wizzi/models/bootstrap/wfschema-boot-modelDef"</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> BootWizziSchema = null</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> ModelInfo = null</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> AsyncModelLoader = null</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> WizziFactory</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> user</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> role</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.__type = 'WizziFactory'</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.user = user</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.role = role</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.storeKind = null</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.fileService = null</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.storePool = new StorePool(this)</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> loadMTree is a method of this class, we need an alias</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.__loadMTree = null</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> loadMTreeRaw is a method of this class, we need an alias</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.__loadMTreeRaw = null</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> loadMTreeDebugInfo is a method of this class, we need an alias</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.__loadMTreeDebugInfo = null</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.pluginsManager = null</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.modelLoaders = {}</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.modelTransformers = {}</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.artifactGenerators = {}</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.schemaDefinitions = {}</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.globalContext = {}</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_87"> wizziFactory/initialize</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_94"> wizziFactory/terminate</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_92"> wizziFactory/request-context</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_91"> wizziFactory/mtree-loading</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_88"> wizziFactory/model-loading</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_89"> wizziFactory/model-transformation</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_84"> wizziFactory/artifact-generation</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_93"> wizziFactory/schema-definition</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_90"> wizziFactory/modelTypes-generation</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_95"> wizziFactory/wizzi-job-execution</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_86"> wizziFactory/getInfo</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_85"> wizziFactory/detectSchema</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> getProductionManager</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> ProductionManager == null</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> ProductionManager = require('../production/manager')</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> ProductionManager</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> createFactory</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> user</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> role</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.wizziFactory.createFactory.options', options</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> typeof(callback) === 'undefined' && typeof(options) === 'undefined'</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                        </span><span class="pp-tag">#</span><span class="pp-pln"> no ACL required</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> options = user</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> callback = role</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> user = 'stefi'</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> role = 'admin'</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.wizziFactory.createFactory.globalContext', options.globalContext</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> wf</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                        </span><span class="pp-tag">new</span><span class="pp-pln"> WizziFactory</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> user</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> role</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> wf.initialize</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_100">
                    <div class="code-panel" id="d_100">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/services/wizziFactory.md.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">mdx</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">h2</span><span class="pp-pln"> The wizzi.WizziFactory class</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> All wizzi factory operations require an instance of the wizzi.WizziFactory class.</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">ul</span><span class="pp-pln"> A wizzi.WizziFactory instance manages</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> The store system (filesystem, mongodb or localstorage).</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> The global context.</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> The loading of plugins.</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> The store system</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> The store system is set at creation time and cannot be changed.</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> The global context</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> The global context is set at creation time and cannot be changed.</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> The loading of plugins</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Plugins are loaded at creation time and cannot be changed.</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Operations</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">ul</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> mTree loading</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> Wizzi model loading</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> Model transformation</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> Artifact generation</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> Wizzi model types generation</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> Production manager creation</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> Wizzi job execution</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> mTree loading</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Executes the loading of an mTree from an ittf document.</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Wizzi model loading</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Executes the loading, initialization and validation of a wizzi model from an ittf document.</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> TODO the 'modelContext' paramater can contain properties of type wizzi.model.modelInfo. wizzi.model.modelInfo(s) will be resolved and replaced with the loaded wizzi models.</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Model transformation</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Executes the transformation of a wizzi model or POJO.</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Artifact generation</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Executes the generation of a single software artifact.</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Wizzi model types generation</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> The generation of the javascript modules for loading and implement a wizzi model is a fundamental part of a wizzi plugin development.</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> A wizzi model of type 'wfschema' describes a wizzi model and its constraints. The method 'generateModelTypes' of the wizzi.wizziFactory uses a 'wfschema' model to generate the javascript artifacts that implement a wizzi model.</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Wizzi job execution</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> A wizzi job is described by a wizzi model of schema 'wfjob', that can contain artifact production requests and optional references to other 'wfjob' models. The 'executeJob' method of the wizzi.wizziFactory triggers the loading of a 'wfjob' model, the resolution of the references to other 'wfjob' models and the execution of the requested artifact productions.</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Production manager creation</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> An instance of a wizzi.production.productionManager class allow a more fine grained control on artifact productions. To a wizzi.production.productionManager instance we can add wizzi job requests ( 'addJobRequest' method ) and single artifact requests ( 'addArtifactRequest' method ), then we can execute the run method and obtain wizzi.artifact.genContexts filled with the artifact ready to be persisted, and, at the end, we can execute the 'persistToFile' method.</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_101">
                    <div class="code-panel" id="d_101">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/util/t/lineparser/parse.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.parse</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !verify.isString(text)</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> tokens</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                            </span><span class="pp-tag">[</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> join</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                            </span><span class="pp-tag">function</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span><span class="pp-pln"> ''</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">var</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> ch</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> l = text.length</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> tokens</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> token</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> quote null</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> text ''</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> raw ''</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">for</span><span class="pp-pln"> var i = 0; i &lt; l; i++</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> ch = text[i]</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> token.quote != null</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> ch == token.quote</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> tokens.push(token)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token =</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> quote null</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> text ''</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> raw ''</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token.text += ch</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token.raw += ch</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">elif</span><span class="pp-pln"> ch == '"' || ch == '\''</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> token.text.length &gt; 0</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> errors.NodeError("Invalid use of quote inside text", node)</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> token.quote = ch</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">elif</span><span class="pp-pln"> ['(', ')', '[', ']', '{', '}'].indexOf(ch) &gt; - (1)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> token.text.length &gt; 0</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> tokens.push(token)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> tokens.push</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> quote null</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> text ch</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> raw ch</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> token =</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> quote null</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> text ''</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> raw ''</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                </span><span class="pp-tag">elif</span><span class="pp-pln"> ch == ' ' || ch == '\t'</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> token.text.length &gt; 0</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token.raw += ch</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> tokens.push(token)</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> quote null</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> text ''</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> raw ''</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> token.text += ch</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> token.raw += ch</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> token.text.length &gt; 0</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> tokens.push(token)</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> token =</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> quote null</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> text ''</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> raw ''</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> tokens tokens</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> length tokens.length</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> join</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> sep</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> start</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                            </span><span class="pp-tag">var</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                                </span><span class="pp-tag">decl</span><span class="pp-pln"> t</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                                    </span><span class="pp-tag">[</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                                </span><span class="pp-tag">decl</span><span class="pp-pln"> startIndex = (start || 0)</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                            </span><span class="pp-tag">for</span><span class="pp-pln"> var i = startIndex; i &lt; this.tokens.length; i++</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                                </span><span class="pp-tag">if</span><span class="pp-pln"> sep === 'forValue'</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                                    </span><span class="pp-tag">var</span><span class="pp-pln"> s = this.tokens[i].text</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                                    </span><span class="pp-tag">if</span><span class="pp-pln"> ['(', ')', '[', ']', '{', '}'].indexOf(s) &gt; - (1)</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> t.push</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> this.tokens[i].text</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                                    </span><span class="pp-tag">else</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> t.push((this.tokens[i].text + ' '))</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                                </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> t.push</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> this.tokens[i].text</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                            </span><span class="pp-tag">if</span><span class="pp-pln"> sep === 'forValue'</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> t.join('')</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                                        </span><span class="pp-tag">._</span><span class="pp-pln"> trim()</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                            </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> t.join(sep)</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                                        </span><span class="pp-tag">._</span><span class="pp-pln"> trim()</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> getByPos</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> pos</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                                </span><span class="pp-tag">iif</span><span class="pp-pln"> pos &gt; this.length</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">                                    </span><span class="pp-tag">then</span><span class="pp-pln"> null</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">                                    </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">                                        </span><span class="pp-tag">set</span><span class="pp-pln"> this.tokens[(pos - 1)]</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> matchByPos</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> pos</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> test</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span><span class="pp-pln"> pos &gt; this.length ? false : this.tokens[(pos - 1)].text === test</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> name</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                                </span><span class="pp-tag">iif</span><span class="pp-pln"> this.length &gt; 0</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                                    </span><span class="pp-tag">then</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">                                        </span><span class="pp-tag">set</span><span class="pp-pln"> this.tokens[0].text</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">                                    </span><span class="pp-tag">else</span><span class="pp-pln"> null</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> value</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span><span class="pp-pln"> this.join('forValue', 1)</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> nameValue</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                            </span><span class="pp-tag">var</span><span class="pp-pln"> ret</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> name ''</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> value ''</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">                            </span><span class="pp-tag">if</span><span class="pp-pln"> this.tokens.length &gt;= 2</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">                                </span><span class="pp-tag">set</span><span class="pp-pln"> tk = this.tokens[0]</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                                </span><span class="pp-tag">set</span><span class="pp-pln"> ret.name = tk.text</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">                                </span><span class="pp-tag">for</span><span class="pp-pln"> var i = 1; i &lt; this.tokens.length; i++</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                                    </span><span class="pp-tag">set</span><span class="pp-pln"> tk = this.tokens[i]</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">                                    </span><span class="pp-tag">set</span><span class="pp-pln"> ret.value += (tk.quote || '')</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">                                    </span><span class="pp-tag">set</span><span class="pp-pln"> ret.value += tk.raw</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">                                    </span><span class="pp-tag">set</span><span class="pp-pln"> ret.value += (tk.quote || '')</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_102">
                    <div class="code-panel" id="d_102">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/util/t/lineparser/parseInterpolation.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.parseInterpolation</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> handlebar</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> ng</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> ! (verify.isString(text))</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> tokens</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                            </span><span class="pp-tag">[</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> join</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                            </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span><span class="pp-pln"> ''</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> openMacro = ng ? '[' : '{'</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> closeMacro = ng ? ']' : '}'</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">var</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> ch</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> l = text.length</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> state = 0</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> tokens</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> token</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> kind 0</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> text ''</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">for</span><span class="pp-pln"> var i = 0; i &lt; l; i++</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> ch = text[i]</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> ch == openMacro</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> state === 0</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> state = 1</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">elif</span><span class="pp-pln"> state === 1</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> token.text.length &gt; 0</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> tokens.push(token)</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token =</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> kind 1</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> text ''</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> state = 2</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-tag">elif</span><span class="pp-pln"> state === 2</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token.text += ch</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-tag">elif</span><span class="pp-pln"> state === 11</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token.text += closeMacro</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> state = 2</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">elif</span><span class="pp-pln"> ch == closeMacro</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> state === 0</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token.text += ch</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                    </span><span class="pp-tag">elif</span><span class="pp-pln"> state === 1</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token.text += openMacro</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> state = 0</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">elif</span><span class="pp-pln"> state === 2</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> state = 11</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">elif</span><span class="pp-pln"> state === 11</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> token.text.length &gt; 0</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> tokens.push(token)</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token =</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> kind 0</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> text ''</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> state = 0</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> state === 1</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token.text += openMacro</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> state = 0</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                    </span><span class="pp-tag">elif</span><span class="pp-pln"> state === 11</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token.text += closeMacro</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> state = 2</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> token.text += ch</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> state === 1</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> token.text += openMacro</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> state = 0</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">elif</span><span class="pp-pln"> state === 11</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> token.text += closeMacro</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> state = 2</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> token.text.length &gt; 0</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> tokens.push(token)</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> tokens tokens</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> length tokens.length</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> join</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                            </span><span class="pp-tag">var</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                                </span><span class="pp-tag">decl</span><span class="pp-pln"> token</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                                </span><span class="pp-tag">decl</span><span class="pp-pln"> t</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                                    </span><span class="pp-tag">[</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                            </span><span class="pp-tag">for</span><span class="pp-pln"> var i = 0; i &lt; this.tokens.length; i++</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                                </span><span class="pp-tag">set</span><span class="pp-pln"> token = this.tokens[i]</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                                </span><span class="pp-tag">if</span><span class="pp-pln"> t.length &gt; 0</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> t.push(' + ')</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                                </span><span class="pp-tag">if</span><span class="pp-pln"> token.kind === 0</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> t.push('"' + escapename(token.text) + '"')</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                                </span><span class="pp-tag">else</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                                    </span><span class="pp-tag">if</span><span class="pp-pln"> handlebar</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> t.push('"{{ ' + escapename(token.text) + '}}"')</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                                    </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> t.push</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> token.text</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span><span class="pp-pln"> t.join('')</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_103">
                    <div class="code-panel" id="d_103">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/util/t/lineparser/parseNameValue.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.parseNameValue</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !verify.isString(text)</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> tokens</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                            </span><span class="pp-tag">[</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> join</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                            </span><span class="pp-tag">function</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span><span class="pp-pln"> ''</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">var</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> ch</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> l = text.length</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> tokens</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> token</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> quote null</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> text ''</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> raw ''</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">for</span><span class="pp-pln"> var i = 0; i &lt; l; i++</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> ch = text[i]</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> token.quote != null</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> ch == token.quote</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> tokens.push(token)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token =</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> quote null</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> text ''</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> raw ''</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token.text += ch</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token.raw += ch</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">elif</span><span class="pp-pln"> ch == '"' || ch == '\''</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> token.text.length &gt; 0</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> errors.NodeError("Invalid use of quote inside text", node)</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> token.quote = ch</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">elif</span><span class="pp-pln"> ch == ' ' || ch == '\t'</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> token.text.length &gt; 0</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token.raw += ch</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> tokens.push(token)</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> token =</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> quote null</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> text ''</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> raw ''</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> token.text += ch</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> token.raw += ch</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> token.text.length &gt; 0</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> tokens.push(token)</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> token</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> quote null</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> text ''</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> raw ''</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> tokens tokens</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> length tokens.length</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> join</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> sep</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> start</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                            </span><span class="pp-tag">var</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                                </span><span class="pp-tag">decl</span><span class="pp-pln"> t</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                                    </span><span class="pp-tag">[</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                                </span><span class="pp-tag">decl</span><span class="pp-pln"> startIndex = (start || 0)</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                            </span><span class="pp-tag">for</span><span class="pp-pln"> var i = startIndex; i &lt; this.tokens.length; i++</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> t.push((this.tokens[i].text + ' '))</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> t.join(sep)</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                                    </span><span class="pp-tag">._</span><span class="pp-pln"> trim()</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> name</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                                </span><span class="pp-tag">iif</span><span class="pp-pln"> this.length &gt; 0</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                                    </span><span class="pp-tag">then</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                                        </span><span class="pp-tag">set</span><span class="pp-pln"> this.tokens[0].text</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                                    </span><span class="pp-tag">else</span><span class="pp-pln"> null</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> value</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span><span class="pp-pln"> this.join('', 1)</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> hasValue</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span><span class="pp-pln"> this.length &gt; 1</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_104">
                    <div class="code-panel" id="d_104">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/util/t/log/log.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> Log</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> id</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> logger</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.id = id</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.logger = logger</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.level = 2</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> setLevel</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> level</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.level = level</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> info</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.level &gt; 1</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.logger.info</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.id</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> "INFO"</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> buildMessage</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> chalk.white</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> arguments</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> warn</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.level &gt; 0</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.logger.info</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.id</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> "WARNING"</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> buildMessage</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> chalk.yellow</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> arguments</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> error</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.logger.info</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> this.id</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> "ERROR"</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> buildMessage</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> chalk.red</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> arguments</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> success</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.level &gt; 1</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.logger.info</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> this.id</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> "SUCCESS"</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> buildMessage</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> chalk.green</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> arguments</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_105">
                    <div class="code-panel" id="d_105">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/util/t/log/myLogger.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> MyLogger</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> level</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> stream</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.level = level</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.stream = (stream || process.stdout)</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> info</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> id</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> level</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> date = new Date()</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> seconds = date.getSeconds()</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> minutes = date.getMinutes()</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> hour = date.getHours()</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.stream</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.stream.write</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> hour + ':' + minutes + ':' + seconds + ' ' + id + ' ' + level + ' ' + text + '\n'</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> console.log</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> hour + ':' + minutes + ':' + seconds + ' ' + id + ' ' + level + ' ' + text + '\n'</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_106">
                    <div class="code-panel" id="d_106">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/util/htmlbuilder.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> WAIT_ATTR = 1</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> WAIT_TEXT = 2</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> HtmlBuilder</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.stm = []</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.indentValue = 0</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.length = 0</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.line = ''</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.state = WAIT_TEXT</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.lfPending = false</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.noLF = false</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> setNoLF</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.noLF = value</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> openTag</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> tag</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> options = options || {}</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.state === WAIT_ATTR</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.write('&gt;')</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> options.inline</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.write('&lt;' + tag)</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> this.lfPending</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.w()</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.write('&lt;' + tag)</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.indent()</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.state = WAIT_ATTR</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> writeAttribute</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> value === null || typeof value === 'undefined'</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.write(' ' + name)</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.write(' ' + name + '="' + value + '"')</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> writeText</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> (text || '').length &gt; 0</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> this.state === WAIT_ATTR</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.write('&gt;')</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> this.state = WAIT_TEXT</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.write(text)</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> writePrettySpaces</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> num</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.openTag('span', { inline: true })</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.writeAttribute('class', 'pnl')</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.writeSpaces(num)</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.closeTag('span', { inline: true })</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> writePrettySpan</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> clazz</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.openTag('span', { inline: true })</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.writeAttribute('class', clazz)</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.writeText(text)</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.closeTag('span', { inline: true })</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> writeSpaces</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> num</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.writeText(spaces(num))</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> closeTag</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> tag</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> options = options || {}</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> options.inline</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> this.state === WAIT_ATTR</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.write(' /&gt;')</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.write('&lt;/' + tag + '&gt;')</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> this.state === WAIT_ATTR</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.write(' /&gt;')</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> this.lfPending = true</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.w()</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.deindent()</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.w('&lt;/' + tag + '&gt;')</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.state = WAIT_TEXT</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> w</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.noLF</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.write(text)</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ind = spaces(this.indentValue * 4)</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.stm.push(ind + this.line + (text || ''))</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.line = ''</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.length++;</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> write</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.line += text || ''</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> indent</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.indentValue++</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> deindent</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.indentValue = Math.max(0, this.indentValue -1)</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> toLines</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.line.length &gt; 0</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> save = this.noLF</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.noLF = false</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.w()</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.noLF = save</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.stm</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> toText</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.line.length &gt; 0</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.w()</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.stm.join('\n');</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> spaces</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> num</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> Array(num + 1).join(" ")</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.HtmlBuilder = HtmlBuilder</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_107">
                    <div class="code-panel" id="d_107">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/util/interpolate.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> port of http://www.bbc.co.uk/glow/docs/1.7/api/glow.lang.shtml#interpolate</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Modified to be stand-alone and offer support for delimters of random length</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> @description Replaces placeholders in a string with data from an object</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> @param {String} template The string containing {placeholders}</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> @param {Object} data Object containing the data to be merged in to the template</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> The object can contain nested data objects and arrays, with nested object properties and array elements are accessed using dot notation. eg foo.bar or foo.0.</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> The data labels in the object cannot contain characters used in the template delimiters, so if the data must be allowed to contain the default { and } delimiters, the delimters must be changed using the option below.</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> @param {Object} opts Options object {</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # @param {String} [opts.delimiter="{}"] Alternative label delimiter(s) for the template.</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Needs to be symmetric, i.e. '{{}}', '&lt;%%&gt;'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> }</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> @returns {String}</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> interpolate</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> template</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> data</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> opts</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">var</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> regex</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> lDel</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> rDel</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> delLen</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> lDelLen</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> rDelLen</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> delimiter</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> regexEscape = /([$\^\\\/()|?+*\[\]{}.\-])/g</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> opts = (opts || {})</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> delimiter = (opts.delimiter || '{}')</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> delLen = delimiter.length</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> lDelLen = Math.ceil(delLen / 2)</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> rDelLen = delLen - lDelLen</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> lDel = delimiter.substr(0, lDelLen).replace(regexEscape, "\\$1")</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> rDel = delimiter.substr(lDelLen, delLen).replace(regexEscape, "\\$1") || lDel</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> regex = new RegExp(lDel + "[^" + lDel + rDel + "]+" + rDel, "g")</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> template.replace</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> regex</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> placeholder</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                        </span><span class="pp-tag">decl</span><span class="pp-pln"> key = placeholder.slice(lDelLen, -rDelLen)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                        </span><span class="pp-tag">decl</span><span class="pp-pln"> keyParts = key.split(".")</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                        </span><span class="pp-tag">decl</span><span class="pp-pln"> val</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                        </span><span class="pp-tag">decl</span><span class="pp-pln"> i = 0</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                        </span><span class="pp-tag">decl</span><span class="pp-pln"> len = keyParts.length</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> key in data</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> val = data[key]</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> val = data</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                        </span><span class="pp-tag">for</span><span class="pp-pln"> ; i&lt;len; i++</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                            </span><span class="pp-tag">if</span><span class="pp-pln"> keyParts[i] in val</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                                </span><span class="pp-tag">set</span><span class="pp-pln"> val = val[keyParts[i]]</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                            </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span><span class="pp-pln"> placeholder</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span><span class="pp-pln"> val</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports = interpolate</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_108">
                    <div class="code-panel" id="d_108">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/util/lineparser.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> errors = require('../errors')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports =</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_101"> lineparser/parse</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_102"> lineparser/parseInterpolation</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-kwd">$$</span><span class="pp-pln"> $include lineparser/parseNameValue</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> ignore quotes</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> name = first not (blank or tab) char sequence</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> value = all remaining chars after name + (blank or tab)</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> example</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> "trip to the london bridge"</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> name() = "trip"</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> value() = "to the london bridge"</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.parseNameValueRaw</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">var</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> name = ''</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">decl</span><span class="pp-pln"> value = ''</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isNotEmpty(text)</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">var</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                    </span><span class="pp-tag">decl</span><span class="pp-pln"> ch</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                    </span><span class="pp-tag">decl</span><span class="pp-pln"> state = 0</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                    </span><span class="pp-tag">decl</span><span class="pp-pln"> l = text.length</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">for</span><span class="pp-pln"> var i = 0; i &lt; l; i++</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> ch = text[i]</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> ch == ' ' || ch == '\t'</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> state == 0</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                            </span><span class="pp-tag">+</span><span class="pp-pln"> ;</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                        </span><span class="pp-tag">elif</span><span class="pp-pln"> state == 1</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> state = 2</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                        </span><span class="pp-tag">elif</span><span class="pp-pln"> state == 2</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> value += ch</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> state == 0</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> name = ch</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> state = 1</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                        </span><span class="pp-tag">elif</span><span class="pp-pln"> state == 1</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> name += ch</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                        </span><span class="pp-tag">elif</span><span class="pp-pln"> state == 2</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> value += ch</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> name</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span><span class="pp-pln"> name</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> value</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span><span class="pp-pln"> value</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> hasValue</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span><span class="pp-pln"> value.length &gt; 0</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> ignore quotes</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> category = first not (blank or tab) char sequence</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> name = second not (blank or tab) char sequence after category + (blank or tab)</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> value = all remaining chars after category + (blank or tab) + name + (blank or tab)</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> example</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> "leisure trip to the london bridge"</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> category() = "leisure"</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> name() = "trip"</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> value() = "to the london bridge"</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.parseCategoryNameValue</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> nv1 = md.parseNameValueRaw(text, node)</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> console.log</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'parseCategoryNameValue 1v'</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> nv1.value()</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> nv2</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> md.parseNameValueRaw</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> nv1.value()</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> node</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> console.log</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'parseCategoryNameValue 2n'</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> nv2.name()</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> category</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span><span class="pp-pln"> nv1.name()</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> name</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span><span class="pp-pln"> nv2.name()</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> value</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span><span class="pp-pln"> nv2.value()</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> hasValue</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span><span class="pp-pln"> value.length &gt; 0</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> escapename</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isNotEmpty(value)</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> verify.replaceAll</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> verify.replaceAll(value, "\\", "\\\\")</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> '"'</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> '\\"'</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> value</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_109">
                    <div class="code-panel" id="d_109">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/util/log.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> fs = require('fs')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> chalk = require('chalk')</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> fileLoggingEnabled = false</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> buildMessage</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> color</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> args</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> typeof (args) !== 'object'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> ''</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> msg = ''</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">for</span><span class="pp-pln"> var i = 0; i &lt; args.length; i++</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> args[i]</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> msg += (' ' + util.inspect(args[i]))</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> color(msg)</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_105"> log/myLogger</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_104"> log/log</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> consoleLogger</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">new</span><span class="pp-pln"> MyLogger('debug')</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> fileLoggers</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> getFileLogger</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> filename</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> dirname = path.dirname(filename)</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> fileLoggers[dirname]</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> fileLoggers[dirname].logger</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> logfile = path.join(dirname, 'debug.log')</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> console.log</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'creating debug.log for: '</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> filename.substr((filename.length - 50))</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> stream = fs.createWriteStream(logfile)</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> logger</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">new</span><span class="pp-pln"> MyLogger('debug', stream)</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> fileLoggers[dirname]</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> logger logger</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> stream stream</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> logFlushSetup()</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> logger</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> logFlush_setup = false</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> logFlushSetup</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> stream</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> logFlush_setup</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> logFlush_setup = true</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> logFlush_flushed = false</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">        </span><span class="pp-tag">function</span><span class="pp-pln"> exitHandler</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !logFlush_flushed</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                </span><span class="pp-tag">for</span><span class="pp-pln"> var k in fileLoggers</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> fileLoggers[k].stream.end()</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> console.log("log. flushed : " + k.substr(k.length - 50))</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> logFlush_flushed = true</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> process.exit()</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> process.on</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'exit'</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> console.log('util.log. Process.exit', err)</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> exitHandler()</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> process.on</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'SIGINT'</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> console.log('util.log. Received Signal', err)</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> exitHandler()</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> process.on</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'uncaughtException'</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> console.error</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> "util.log. " + new Date().toUTCString() + ' uncaughtException:'</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> err.message</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> console.error</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> err.stack</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> exitHandler()</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> module</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> options = (options || {})</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> logger</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> fileLoggingEnabled && options.tofile</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> logger = getFileLogger(module.filename)</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> logger = consoleLogger</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                </span><span class="pp-tag">new</span><span class="pp-pln"> Log</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.basename</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> module.filename</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> logger</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_110">
                    <div class="code-panel" id="d_110">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/util/stringWriter.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> StringWriter</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.buffer = []</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> text</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.buffer.push(text)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> write</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.buffer.push(text)</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> toString</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.buffer.join('')</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports = StringWriter</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_111">
                    <div class="code-panel" id="d_111">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/t/element_derived.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> setupDerived</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> typeof this.derived === 'undefined'</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.derived = []</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> element in this.schema.elements</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> element.superId === this.wzId</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.derived.push(element)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> d in element.setupDerived(ctx)</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> this.superId === element.wzId</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.error('Element ' + element.wzId + ' cannot be both super element and derived element of element ' + this.wzId, this)</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> this.derived.push(d)</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> this.derived</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_112">
                    <div class="code-panel" id="d_112">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/t/element_flat_attributes.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getFlatAttributes</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> typeof this.flatAttributes === 'undefined'</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> flatAttributes = []</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.flatAttributesFill(flatAttributes, false)</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.flatAttributes = flatAttributes</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> this.flatAttributes</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> flatAttributesFill</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> flatAttributes</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> inherited</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> attribute in this.attributes</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> flags = ''</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> flags += attribute.isRequired ? 'required ' : ''</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> flags += attribute.isDataType ? 'is-datatype ' : ''</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> cloned</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> name attribute.wzId</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> type attribute.type</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> tags attribute.tagName.split('|')</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> xmlTag attribute.xmlTagInternal</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> default attribute.default</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> defaultWhenDeclared attribute.defaultWhenDeclared</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> flags flags</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> inheritedFrom (inherited ? this.wzId : null)</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> restricts</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                        </span><span class="pp-tag">[</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> comments</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                        </span><span class="pp-tag">[</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> restrict in attribute.restricts</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> cloned.restricts.push(this.getRestrictFill(restrict))</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> comment in attribute.comments</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> cloned.comments.push(comment.wzName)</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> flatAttributes.push(cloned)</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> schemautil.isNotEmpty(this.superId)</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.superElement</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.superElement.flatAttributesFill(flatAttributes, true)</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getRestrictFill</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> model</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> restrictCloned</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> facets</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> comments</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> facet in model.facets</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> facetCloned</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> type facet.wzElement</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> value facet.wzName</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> comments</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                        </span><span class="pp-tag">[</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> comment in facet.comments</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> facetCloned.comments.push(comment.wzName)</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> restrictCloned.facets.push(facetCloned)</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> comment in model.comments</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> restrictCloned.comments.push(comment.wzName)</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> restrictCloned</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_113">
                    <div class="code-panel" id="d_113">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/t/element_flat_relations.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getFlatRelations</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> typeof this.flatRelations === 'undefined'</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> flatRelations = []</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.flatRelationsFill(flatRelations, false)</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.flatRelations = flatRelations</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> this.flatRelations</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> flatRelationsFill</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> flatRelations</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> inherited</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> relation in this.relations</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> flags = ''</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> flags += relation.isOneToOne ? 'is-one-to-one ' : ''</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> flags += relation.noGetMethod ? 'no-get-method ' : ''</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> flags += relation.hasAddOnce ? 'has-add-once ' : ''</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> cloned</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> name relation.wzName</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> role relation.wzNamePlural</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> tags relation.rightElement.tagName.split('|')</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> cardinality (relation.isOneToOne ? 'one-to-one' : 'one-to-many')</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> flags flags</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> inheritedFrom (inherited ? this.wzId : null)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> comments</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                        </span><span class="pp-tag">[</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> comment in relation.comments</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> cloned.comments.push(comment.wzName)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> flatRelations.push(cloned)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> schemautil.isNotEmpty(this.superId)</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.superElement</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.superElement.flatRelationsFill(flatRelations, true)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_114">
                    <div class="code-panel" id="d_114">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/t/element_gettags.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getTags</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> set ctx.tagElementMapping</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> return array of element tags</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'element.getTags', this.tagName, ctx.tagElementMapping</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> tagElMap = ctx.tagElementMapping</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> tagElMap == null</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> ctx.tagElementMapping = tagElMap = {}</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">var</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> retval = []</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> tagString</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">decl</span><span class="pp-pln"> elId = this.wzId</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> schemautil.isEmpty(this.tagName)</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error('Empty tag name for element ' + this.wzId)</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> STAG_REPL = '__§§__##__'</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> stag = verify.replaceAll(this.tagName, '\\|', STAG_REPL)</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ss = stag.split('|')</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> s in ss</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> tagString = verify.replaceAll(s.trim(), STAG_REPL, '|')</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> tagString != elId && typeof tagElMap[tagString] === 'undefined'</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> tagElMap[tagString] = elId;</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> retval.push(tagString)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> tagString.indexOf("-") &gt; 0</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> tagString = schemautil.replaceAll(tagString, '-', '')</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> tagString != elId && typeof tagElMap[tagString] === 'undefined'</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> tagElMap[tagString] = elId;</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> retval.push(tagString)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> OLD VIA</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> schemautil.startsWith(this.tagName, "|") || schemautil.endsWith(this.tagName, "|")</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> tagString = this.tagName</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> tagString != elId && typeof tagElMap[tagString] === 'undefined'</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> tagElMap[tagString] = elId;</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> retval.push(tagString)</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> ss = this.tagName.split('|')</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> s in ss</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> tagString = s</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> tagString != elId && typeof tagElMap[tagString] === 'undefined'</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> tagElMap[tagString] = elId;</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> retval.push(tagString)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> s.indexOf("-") &gt; 0</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> tagString = schemautil.replaceAll(s, '-', '')</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> tagString != elId && typeof tagElMap[tagString] === 'undefined'</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> tagElMap[tagString] = elId;</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> retval.push(tagString)</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> retval;</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_115">
                    <div class="code-panel" id="d_115">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/t/element_load.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> initializeLoad</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> choiceSet = new ChoiceSet()</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> typeTagSet = new TypeTagSet()</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.initializeLoad_attributes(ctx, choiceSet)</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.initializeLoad_relations(ctx, choiceSet, typeTagSet)</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.initializeLoad_includes(ctx, choiceSet, typeTagSet)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.choiceOrdered = choiceSet.createOrdered()</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.typeTags = typeTagSet.typeTags</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.models.bootstrap.this.typeTags', this.wzId, this.typeTags</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> initializeLoad_attributes</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> choiceSet</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> attribute in this.attributes</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> attribute.isReadOnly</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                </span><span class="pp-tag">continue</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> DEFAULT;</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> schemautil.isEmpty(attribute.defaultWhenDeclared)</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> DEFAULT = "null"</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">elif</span><span class="pp-pln"> attribute.jsType == "string"</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> DEFAULT = "\"" + attribute.defaultWhenDeclared + "\""</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> DEFAULT = attribute.defaultWhenDeclared;</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> schemautil.endsWith(attribute.tagName, "*") && this.schema.preserveTags</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.wildTags.push(attribute.tagName);</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> test in attribute.getTags(ctx)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> choiceSet.addChoice</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> test</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> codelines</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                            </span><span class="pp-tag">if</span><span class="pp-pln"> attribute.jsType === 'string'</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("this." + attribute.wzId + " = child.v; return true;")</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                            </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("this." + attribute.wzId + " = parse" + attribute.jsType + "(child.v, " + DEFAULT + ", child); return true;");</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> initializeLoad_relations</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> choiceSet</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> typeTagSet</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> first = true</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> relation in this.relations</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> relation.isOneToOne</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> RELATION = relation.wzName</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> !relation.rightElement.isAbstract</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> CHILD_ENTITY = relation.rightElement.wzId</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> relation.rightElement.tagType && relation.rightElement.tagType.length &gt; 0</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> typeTagSet.addTypeTag</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> relation.rightElement.tagType</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                            </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> codelines</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("return this.wzLoadOneToOne(child, _md." + CHILD_ENTITY + ", '" + RELATION + "');")</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> test in relation.rightElement.getTags(ctx)</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> choiceSet.addChoice</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> test</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                            </span><span class="pp-tag">function</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> codelines</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("return this.wzLoadOneToOne(child, _md." + CHILD_ENTITY + ", '" + RELATION + "');")</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> d in relation.rightElement.derived</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> d.isAbstract</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                        </span><span class="pp-tag">continue</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> CHILD_ENTITY</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> d.superElement != null && d.superElement.SuppressCollectionEmit_Flat</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> CHILD_ENTITY = d.superElement.wzId</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> CHILD_ENTITY = d.wzId</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> d.tagType && d.tagType.length &gt; 0</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> typeTagSet.addTypeTag</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> d.tagType</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                            </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> codelines</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("return this.wzLoadOneToOne(child, _md." + CHILD_ENTITY + ", '" + RELATION + "')")</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> test in d.getTags(ctx)</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> choiceSet.addChoice</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> test</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                            </span><span class="pp-tag">function</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> codelines</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("return this.wzLoadOneToOne(child, _md." + CHILD_ENTITY + ", '" + RELATION + "')")</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> RELATION = relation.wzIdPlural</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> !relation.rightElement.isAbstract</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> CHILD_ENTITY = relation.rightElement.wzId</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> relation.rightElement.tagType && relation.rightElement.tagType.length &gt; 0</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> typeTagSet.addTypeTag</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> relation.rightElement.tagType</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                            </span><span class="pp-tag">function</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> codelines</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                                </span><span class="pp-tag">if</span><span class="pp-pln"> relation.rightElement.addToChildren</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("return this.wzLoadToChildren(child, _md." + CHILD_ENTITY + ");")</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                                </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("return this.wzLoadToChildColl(child, _md." + CHILD_ENTITY + ", this." + RELATION + ");")</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> test in relation.rightElement.getTags(ctx)</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> choiceSet.addChoice</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> test</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                            </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> codelines</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                                </span><span class="pp-tag">if</span><span class="pp-pln"> relation.rightElement.addToChildren</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("return this.wzLoadToChildren(child, _md." + CHILD_ENTITY + ");")</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                                </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("return this.wzLoadToChildColl(child, _md." + CHILD_ENTITY + ", this." + RELATION + ");")</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> relation.rightElement.addToChildren</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> deriv in relation.rightElement.derived</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> deriv.isAbstract</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                            </span><span class="pp-tag">continue</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> CHILD_ENTITY = deriv.wzId</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> deriv.tagType && deriv.tagType.length &gt; 0</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> typeTagSet.addTypeTag</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> deriv.tagType</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">                                </span><span class="pp-tag">function</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">                                    </span><span class="pp-tag">param</span><span class="pp-pln"> codelines</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("item = new " + CHILD_ENTITY + "(child.v, new wzSourceLineInfo(child.r, child.c, child.u))")</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("item.wzTag = name;")</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("this.AddChild(item);")</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("item.LoadFromNode(child);")</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("return true;")</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">                        </span><span class="pp-tag">foreach</span><span class="pp-pln"> test in deriv.getTags(ctx)</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> choiceSet.addChoice</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> test</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                                </span><span class="pp-tag">function</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                                    </span><span class="pp-tag">param</span><span class="pp-pln"> codelines</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("item = new " + CHILD_ENTITY + "(child.v, new wzSourceLineInfo(child.r, child.c, child.u))")</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("item.wzTag = name;")</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("this.AddChild(item);")</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("item.LoadFromNode(child);")</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("return true;")</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">                    </span><span class="pp-tag">foreach</span><span class="pp-pln"> d in relation.rightElement.derived</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> d.isAbstract</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                            </span><span class="pp-tag">continue</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> CHILD_ENTITY</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> d.superElement != null && d.superElement.SuppressCollectionEmit_Flat</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> CHILD_ENTITY = d.superElement.wzId</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">                        </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> CHILD_ENTITY = d.wzId</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> RELATION = relation.wzIdPlural</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> d.tagType && d.tagType.length &gt; 0</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> typeTagSet.addTypeTag</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> d.tagType</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">                                </span><span class="pp-tag">function</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">                                    </span><span class="pp-tag">param</span><span class="pp-pln"> codelines</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("return this.wzLoadToChildColl(child, _md." + CHILD_ENTITY + ", this." + RELATION + ")")</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">                        </span><span class="pp-tag">foreach</span><span class="pp-pln"> test in d.getTags(ctx)</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> choiceSet.addChoice</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> test</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">                                </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">                                    </span><span class="pp-tag">param</span><span class="pp-pln"> codelines</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("return this.wzLoadToChildColl(child, _md." + CHILD_ENTITY + ", this." + RELATION + ")")</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> initializeLoad_includes</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> choiceSet</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> first = true</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> include in this.includes</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> rootEntityName</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> choiceSet.addChoice</span></div><div class="L5"><span class="pp-ln"> 155 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> include.rootEntityName</span></div><div class="L6"><span class="pp-ln"> 156 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L7"><span class="pp-ln"> 157 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> codelines</span></div><div class="L8"><span class="pp-ln"> 158 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("// generated by wizzi/lib/wizzi/models/bootstrap/t/wfschema/t/element_load")</span></div><div class="L9"><span class="pp-ln"> 159 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("this." + include.actualNameLower + '_' + include.rootEntityNameId + '_items.push(child);')</span></div><div class="L0"><span class="pp-ln"> 160 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("var err, wizziModel;")</span></div><div class="L1"><span class="pp-ln"> 161 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("this.wzRoot().wzFactory.loadModelFromMtree( //")</span></div><div class="L2"><span class="pp-ln"> 162 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("    '" + include.actualNameLower + "',  //")</span></div><div class="L3"><span class="pp-ln"> 163 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("    { nodes: [ child ], loadHistory: this.wzRoot().loadHistory }, //")</span></div><div class="L4"><span class="pp-ln"> 164 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("    function(cberr, cbwizziModel) { //")</span></div><div class="L5"><span class="pp-ln"> 165 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("        err = cberr;")</span></div><div class="L6"><span class="pp-ln"> 166 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("        wizziModel = cbwizziModel;")</span></div><div class="L7"><span class="pp-ln"> 167 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> _ codelines.push("        console.log(err, wizziModel);")</span></div><div class="L8"><span class="pp-ln"> 168 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("    });")</span></div><div class="L9"><span class="pp-ln"> 169 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("this.get_" + include.actualNameLower + " = function(callback) { //")</span></div><div class="L0"><span class="pp-ln"> 170 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("    // We must wait until the async loadModelFromMtree(..) has returned a wizziModel or an err")</span></div><div class="L1"><span class="pp-ln"> 171 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("    var iv = setInterval(function() { //")</span></div><div class="L2"><span class="pp-ln"> 172 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("        if (err || wizziModel) { //")</span></div><div class="L3"><span class="pp-ln"> 173 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("            clearInterval(iv);")</span></div><div class="L4"><span class="pp-ln"> 174 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("            if (callback) { //")</span></div><div class="L5"><span class="pp-ln"> 175 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("                callback(err, wizziModel);")</span></div><div class="L6"><span class="pp-ln"> 176 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("                callback = null;")</span></div><div class="L7"><span class="pp-ln"> 177 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("            } //")</span></div><div class="L8"><span class="pp-ln"> 178 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("        } //")</span></div><div class="L9"><span class="pp-ln"> 179 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("    }, 100);")</span></div><div class="L0"><span class="pp-ln"> 180 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("}")</span></div><div class="L1"><span class="pp-ln"> 181 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> codelines.push("return true;")</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_116">
                    <div class="code-panel" id="d_116">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/attribute.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> Attribute</span><span class="pp-pln">,</span><span class="pp-arg">  Node </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzElement = 'attribute'</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.restricts = []</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.type = 'string'</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.isReadOnly = false</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.isCalculated = false; $$ TODO</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.calculated = 'null'; $$ TODO</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.default = null</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.defaultWhenDeclared = null</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.tagInternal = null</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> wzVerify</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzId = schemautil.getIdentifier(this.wzName, false)</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzIdPlural = schemautil.pluralize(this.wzId)</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.tagName = this.tagInternal || this.wzName</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.jsType = this.type</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> wzInitialize</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> allowedDeclaration</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> enums = this.getEnumFacets()</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> enums.length &gt; 0</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> sb = []</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> sb.push("this.allowed" + this.wzIdPlural.toUpperCase() + " = [ ");</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> first = true</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> facet in enums</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> !first</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> sb.push(", ")</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> sb.push('"' + schemautil.replaceAll(facet.wzName, "\"", "\\\"") + '"')</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> first = false</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> sb.push('];')</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> sb.join('')</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> null;</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getEnumFacets</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ret = []</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> restrict in this.restricts</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> facet in restrict.facets</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> facet.wzElement === 'enumFacet'</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> _.find(ret, function(item) { return item.wzName === facet.wzName; }) == null</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                            </span><span class="pp-tag">set</span><span class="pp-pln"> facet.wzName = facet.wzName.trim();</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> ret.push(facet);</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getTags</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ret = []</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ss = this.tagName.split('|')</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> s in ss</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> ret.push(schemautil.replaceAll(s, "\"", "\\\""))</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> s.indexOf("-") &gt;= 0</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> s = schemautil.replaceAll(s, "-", "_")</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> ret.push(schemautil.replaceAll(s, "\"", "\\\""))</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getTagMatch</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> left</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> sb = []</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ss = this.tagName.split('|')</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> s in ss</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> sb.length &gt; 0</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> sb.push(" || ")</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> sb.push(left + " == \"" + schemautil.replaceAll(s, "\"", "\\\"") + "\"")</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> s.indexOf("-") &gt;= 0</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> s = schemautil.replaceAll(s, "-", "_")</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> sb.push(left + " == \"" + schemautil.replaceAll(s, "\"", "\\\"") + "\"")</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> sb.join('')</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.Attribute.STRING = "string"</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.Attribute.BOOLEAN = "boolean"</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.Attribute.INTEGER = "integer"</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.Attribute.FLOAT = "float"</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.Attribute.DATE = "date"</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_117">
                    <div class="code-panel" id="d_117">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/choice.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> Choice </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> test</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> Make test case insensitive</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> test = test.toLowerCase()</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.length = test.length</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.char = verify.escapeQuotes(test[0])</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.test = verify.escapeQuotes(test)</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.bootstrap.choice', this.length, this.char, this.test</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.codelines = []</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_118">
                    <div class="code-panel" id="d_118">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/choiceOrdered.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> ChoiceOrdered </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> char</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> length</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.char = char</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.length = length</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.choices = []</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_119">
                    <div class="code-panel" id="d_119">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/choiceSet.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> ChoiceSet </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.choices = []</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addChoice</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> test</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> choice = new Choice(test)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(choice.codelines)</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.choices.push(choice)</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> createOrdered</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> retval = []</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> done</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> choice in this.choices</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> done = false</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> ordered in retval</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> ordered.char == choice.char && ordered.length == choice.length</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> ordered.choices.push(choice);</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> done = true</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> !done</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> ordered = new ChoiceOrdered(choice.char, choice.length);</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> ordered.choices.push(choice);</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> retval.push(ordered);</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> retval.sort(ChoiceSetCompare)</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> retval</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> ChoiceSetCompare</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> a</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> b</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> a.length &gt; b.length</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> 1</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> a.length &lt; b.length</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> -1</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> a.char &gt; b.char</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> 1</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> a.char &lt; b.char</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> -1</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> 0</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_120">
                    <div class="code-panel" id="d_120">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/comment.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a">clazz(</span><span class="pp-arg"> Comment</span><span class="pp-pln">,</span><span class="pp-arg">  Node </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzElement = 'comment'</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_121">
                    <div class="code-panel" id="d_121">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/declare.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> Declare</span><span class="pp-pln">,</span><span class="pp-arg">  Node </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzElement = 'declare'</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.statements = []</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addStatement</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> statement</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> item = new Statement(statement.wzElement + ' ' + statement.wzName)</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> item.wzParent = this;</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.statements.push(item)</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> item</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> importStatement</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> statement</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> json = this.stringifyWizziStatement(statement, null)</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> item = new Statement(stringify(json))</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> item.wzParent = this;</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.statements.push(item)</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> item</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> stringifyWizziStatement</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> wizziNode</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> parent</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> json</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> n wizziNode.wzTag</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> v wizziNode.wzName</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> children []</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> wizziNode.params && wizziNode.params.length &gt; 0</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> p in wizziNode.params</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> json.children.push</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> n 'param'</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> v p.wzName</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> children []</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> s in wizziNode.statements</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.stringifyWizziStatement(s, json)</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> parent</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> parent.children.push(json)</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> json;</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_122">
                    <div class="code-panel" id="d_122">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/element.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> Element</span><span class="pp-pln">,</span><span class="pp-arg">  Node </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">ctor</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzElement = 'element'</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.attributes = []</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.elements = []</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.includes = []</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.relations = []</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.methods = []</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.restricts = []</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wildTags = []</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.typeTags = []</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.choiceOrdered = []</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.super = null</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.superId = null</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.superType = null</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.addToChildren = false</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.isAbstract = false</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.isRoot = false</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.acceptAnyTag = null</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.acceptAnyTagCollection = null</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.suppressCollectionEmit_Flat = false</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.nameIsRequired = false</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.xmlTagInternal = null</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.tagInternal = null</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.tagType = null</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.defaultWhenDeclared = null</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> allowedNameDeclaration</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> key</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> enums = this.getEnumFacets()</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> enums.length &gt; 0</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> sb = []</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> sb.push("this.allowedNames = [ ");</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> first = true</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> facet in enums</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> !first</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> sb.push(", ")</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> sb.push('"' + schemautil.replaceAll(facet.wzName, "\"", "\\\"") + '"')</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> first = false</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> sb.push('];')</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> sb.join('')</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> null</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getEnumFacets</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ret = []</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> restrict in this.restricts</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> facet in restrict.facets</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> facet.wzElement === 'enumFacet'</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> _.find(ret, function(item) { return item.wzName === facet.wzName; }) == null</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> facet.wzName = facet.wzName.trim();</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> ret.push(facet);</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> needsVerify</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> emitKey</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> this.relations.length &gt; 0</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> true</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> this.restricts.length &gt; 0</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> true;</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> attribute in this.attributes</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> attribute.restricts.length &gt; 0</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> true</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> method in this.methods</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> (emitKey == null || method.emitKey == emitKey) && method.wzName.toLowerCase() === "wzverify"</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> true</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> false</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> hasAttributesOrChildsToLoad</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> this.attributes.length &gt; 0</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> true;</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> this.relations.length &gt; 0</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> true;</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> this.setupDerived().length &gt; 0</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> true;</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> this.includes.length &gt; 0</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> true;</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> false</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> needsInitialize</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> emitKey</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> attribute in this.attributes</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> attribute.IsDataType</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> true</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> this.relations.length &gt; 0</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> true</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> method in this.methods</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> (emitKey == null || method.emitKey == emitKey) && method.wzName.toLowerCase() === "wzinitialize"</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> true</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> false</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> setupNames</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ss = this.wzName.split('/')</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> ss.length == 2</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> zz = ss[0].split('-')</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> zz.length == 2</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzName = zz[0] + zz[1]</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzNamePlural = zz[0] + ss[1]</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzName = ss[0]</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzNamePlural = ss[0] + ss[1]</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzNamePlural + 's'</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzId = schemautil.getIdentifier(this.wzName, true)</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzIdPlural = schemautil.getIdentifier(this.wzNamePlural, true)</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzIdCapital = schemautil.capitalize(this.wzId)</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> 30/10/2015 set this.tagName = this.tagInternal || this.wzId</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.tagName = this.tagInternal || this.wzName</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.tagSafe = this.tagName.replace("\"", "\\\"")</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.xmlTag = this.xmlTagInternal || this.wzId</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> schemautil.isNotEmpty(this.acceptAnyTag)</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.acceptAnyTagId = schemautil.getIdentifier(this.acceptAnyTag, true)</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> schemautil.isNotEmpty(this.acceptAnyTagCollection)</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.acceptAnyTagCollectionId = schemautil.getIdentifier(this.acceptAnyTagCollection, true)</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> wzSetup</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ss = this.wzName.split(':')</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> ss.length &gt; 1</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzName = ss[0].trim()</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.super = ss[1].trim()</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.schema = this.wzParent</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> schemautil.isNotEmpty(this.super)</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.superId = schemautil.getIdentifier(this.super, true)</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.wzId === this.superId</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.error('An element cannot be super of itself.', this)</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.superType = this.superId === null ? this.schema.wzId + 'Base' : this.superId</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.setupNames(ctx)</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> wzInitialize</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.attributes</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> item.wzInitialize(ctx)</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.relations</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> item.wzInitialize(ctx)</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.methods</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> item.wzInitialize(ctx)</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.includes</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> item.wzInitialize(ctx)</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.initializeLoad(ctx)</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> wzVerify</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> this.ensureName(1) == false</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.error('Element name is required', this)</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.wzVerifySuper(ctx);</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.attributes</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> item.wzVerify(ctx)</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.relations</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> item.wzVerify(ctx)</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.includes</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> item.wzVerify(ctx)</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> wzVerifySuper</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> schemautil.isNotEmpty(this.superId)</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.superElement = null</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> element in this.schema.elements</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> element.wzId === this.superId</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> this.superElement = element</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">                    </span><span class="pp-tag">break</span></div><div class="L5"><span class="pp-ln"> 155 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.superElement === null</span></div><div class="L6"><span class="pp-ln"> 156 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.error('Super element not found : ' + this.superId, this)</span></div><div class="L7"><span class="pp-ln"> 157 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> addAttribute</span></div><div class="L8"><span class="pp-ln"> 158 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L9"><span class="pp-ln"> 159 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> item = new Attribute(name)</span></div><div class="L0"><span class="pp-ln"> 160 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> item.wzParent = this;</span></div><div class="L1"><span class="pp-ln"> 161 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.attributes.push(item)</span></div><div class="L2"><span class="pp-ln"> 162 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> item</span></div><div class="L3"><span class="pp-ln"> 163 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> addRelation</span></div><div class="L4"><span class="pp-ln"> 164 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln"> 165 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> item = new Relation(name)</span></div><div class="L6"><span class="pp-ln"> 166 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> item.wzParent = this;</span></div><div class="L7"><span class="pp-ln"> 167 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.relations.push(item)</span></div><div class="L8"><span class="pp-ln"> 168 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> item</span></div><div class="L9"><span class="pp-ln"> 169 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> addInclude</span></div><div class="L0"><span class="pp-ln"> 170 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L1"><span class="pp-ln"> 171 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> item = new Include(name)</span></div><div class="L2"><span class="pp-ln"> 172 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> item.wzParent = this;</span></div><div class="L3"><span class="pp-ln"> 173 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.includes.push(item)</span></div><div class="L4"><span class="pp-ln"> 174 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> item</span></div><div class="L5"><span class="pp-ln"> 175 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a">element_derived(</span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln"> 176 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_114">element_gettags(</span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln"> 177 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_115">element_load(</span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln"> 178 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a">element_flat_attributes(</span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln"> 179 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a">element_flat_relations(</span><span class="pp-mix">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_123">
                    <div class="code-panel" id="d_123">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/exportTo.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a">clazz(</span><span class="pp-arg"> ExportTo</span><span class="pp-pln">,</span><span class="pp-arg">  Node </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzElement = 'exportTo'</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_124">
                    <div class="code-panel" id="d_124">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/facet.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> Facet</span><span class="pp-pln">,</span><span class="pp-arg">  Node </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzId = schemautil.getIdentifier(this.wzName, true)</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzNameEscaped = schemautil.escapeString(this.wzName)</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.Facet.ENUMERATION = "enum"</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.Facet.LENGTH = "length"</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.Facet.MAX_LENGTH = "max-length"</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.Facet.MIN_LENGTH = "min-length"</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.Facet.MAX_EXCLUSIVE = "&gt;"</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.Facet.MIN_EXCLUSIVE = "&lt;"</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.Facet.MAX_INCLUSIVE = "&gt;="</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.Facet.MIN_INCLUSIVE = "&lt;="</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> EnumFacet</span><span class="pp-pln">,</span><span class="pp-arg">  Facet </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzElement = 'enumFacet'</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_125">
                    <div class="code-panel" id="d_125">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/include.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> Include</span><span class="pp-pln">,</span><span class="pp-arg">  Node </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">ctor</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzElement = 'include'</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> wzInitialize</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> nv = verify.parseNameValue(this.wzName)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.actualName = nv.name()</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> nv.hasValue()</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.rootEntityName = nv.value()</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.rootEntityName = this.actualName</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.actualNameLower = this.actualName.toLowerCase()</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.actualNameId = schemautil.getIdentifier(this.actualName, true)</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.rootEntityNameId = schemautil.getIdentifier(this.rootEntityName, true)</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.models.bootstrap.wfschema.include', this.actualNameLower, this.actualNameId, this.rootEntityNameId</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_126">
                    <div class="code-panel" id="d_126">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/method.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> Param</span><span class="pp-pln">,</span><span class="pp-arg">  Node </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzElement = 'param'</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> Statement</span><span class="pp-pln">,</span><span class="pp-arg">  Node </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzElement = 'statement'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> Method</span><span class="pp-pln">,</span><span class="pp-arg">  Node </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzElement = 'method'</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.emitKey = null</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.isStatic = false</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.isKnownMethod = false</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.params = []</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.requires = []</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.statements = []</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addParam</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> item = new Param(name)</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> item.wzParent = this;</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.params.push(item)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> item</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addRequire</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> item = new Require(name)</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> item.wzParent = this;</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.requires.push(item)</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> item</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addStatement</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> statement</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> item = new Statement(statement.wzElement + ' ' + statement.wzName)</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> item.wzParent = this;</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.statements.push(item)</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> item</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> importStatement</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> statement</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> json = this.stringifyWizziStatement(statement, null)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> item = new Statement(stringify(json))</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> item.wzParent = this;</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.statements.push(item)</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> item</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> stringifyWizziStatement</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> wizziNode</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> parent</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> json</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> n wizziNode.wzTag</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> v wizziNode.wzName</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> children []</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> s in wizziNode.statements</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.stringifyWizziStatement(s, json)</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> parent</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> parent.children.push(json)</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> json;</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> wzInitialize</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.wzName.indexOf("-static") &gt;= 0</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.isStatic = true;</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzName = schemautil.replaceAll(this.wzName, "-static", "").trim()</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ss = this.wzName.trim().split(' ')</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> ss.length &gt; 1</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzName = ss[0]</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                </span><span class="pp-tag">for</span><span class="pp-pln"> var i=1; i &lt; ss.length; i++</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.params.push(ss[i])</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.wzName.toLowerCase() === "wzinitialize"</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.isKnownMethod = true</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.wzName.toLowerCase() === "wzverify"</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.isKnownMethod = true</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_127">
                    <div class="code-panel" id="d_127">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/node.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> Node </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">ctor</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> wzName</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzName = wzName</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzId = schemautil.getIdentifier(wzName, true)</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.comments = []</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> ensureName</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> minLength</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ml = typeof minLength === 'undefined' ? 1 : minLength</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> empty = !schemautil.isNotEmpty(this.wzName)</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> !empty && this.wzName.length &gt;= ml</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> wzInitialize</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> wzVerify</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> importComments</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> other</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> level</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> level = level || 0</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> space = new Array(level * 4).join(' ')</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> comment in other.comments</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> comment.wzName == '[*ittf'</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> buffer = []</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.addIttfComment(comment, buffer, 0)</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.addComment(buffer.join('\n'))</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.addComment(space + comment.wzName)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.importComments(comment, level + 1)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> addIttfComment</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> other</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> buffer</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> level</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> space = new Array(level * 4).join(' ')</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> buffer.push(space + other.wzName)</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> comment in other.comments</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.addIttfComment(comment, buffer, level + 1)</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> addComment</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> item = new Comment(name)</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> item.wzParent = this;</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.comments.push(item)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> item</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> importRestricts</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> other</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> restrictFrom in other.restricts</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> restrict = this.addRestrict(restrictFrom.wzName)</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> restrict.importComments(restrictFrom)</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> facetFrom in restrictFrom.facets</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> facetFrom.wzElement === 'enumFacet'</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> enumFacet = restrict.addEnumFacet(facetFrom.wzName)</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> enumFacet.importComments(facetFrom)</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> addRestrict</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> item = new Restrict(name)</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> item.wzParent = this;</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.restricts.push(item)</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> item</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> importDeclares</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> other</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> declareFrom in other.declares</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> declare = this.addDeclare(declareFrom.wzName)</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> declare.importComments(declareFrom)</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> statementFrom in declareFrom.statements</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> declare.importStatement(statementFrom)</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> addDeclare</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> item = new Declare(name)</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> item.wzParent = this;</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.declares.push(item)</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> item</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> importMethods</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> other</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> methodFrom in other.methods</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> method = this.addMethod(methodFrom.wzName)</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> method.emitKey = methodFrom.emitKey</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> method.importComments(methodFrom)</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> paramFrom in methodFrom.params</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> method.addParam(paramFrom.wzName)</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> requireFrom in methodFrom.requires</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> require = method.addRequire(requireFrom.wzName)</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> require.declareVar = requireFrom.declareVar</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> require.invoke = requireFrom.invoke</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> require.kind = requireFrom.kind</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> statementFrom in methodFrom.statements</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> method.importStatement(statementFrom)</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> addMethod</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> item = new Method(name)</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> item.wzParent = this;</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.methods.push(item)</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> item</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_128">
                    <div class="code-panel" id="d_128">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/relation.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> Relation</span><span class="pp-pln">,</span><span class="pp-arg">  Node </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">ctor</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzElement = 'relation'</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzNamePlural = null</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzIdPlural = null</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.childRole = null</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.rightElement = null</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.noGetMethod = false</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.hasAddOnce = false</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.isOneToOne = false</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> wzInitializeNames</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> this.isOneToOne == false</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.childRole == null</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> hyphen = this.wzName.indexOf("[-]");</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> name = hyphen &gt;= 0 ? schemautil.replaceAll(this.wzName, '[-]', '§§§') : this.wzName</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> ss = name.split('/')</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> ss.length == 2</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> zz = ss[0].split('-')</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> zz.length == 2</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzName = zz[0] + zz[1]</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzNamePlural = zz[0] + ss[1]</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzName = ss[0]</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzNamePlural = ss[0] + ss[1]</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzNamePlural = this.wzName + 's'</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> hyphen &gt;= 0</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzName = schemautil.replaceAll(this.wzName, '§§§', '-')</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzNamePlural = schemautil.replaceAll(this.wzNamePlural, '§§§', '-')</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzNamePlural = this.childRole</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> wzInitialize</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.wzInitializeNames(ctx)</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzId = schemautil.getIdentifier(this.wzName, true)</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> this.isOneToOne == false</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzIdPlural = schemautil.getIdentifier(this.wzNamePlural, true)</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.leftElement = this.wzParent</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> this.rightElement === null</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.rightElement = this.wzParent.schema.getElement(this.wzName)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> this.rightElement === null</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.error('Related element ' + this.wzName + ' not found', this)</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.childEntityId = this.rightElement.wzId</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.childEntityIdCapital = this.rightElement.wzIdCapital</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> wzVerify</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_129">
                    <div class="code-panel" id="d_129">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/require.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a">clazz(</span><span class="pp-arg"> Require</span><span class="pp-pln">,</span><span class="pp-arg">  Node </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzElement = 'require'</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.declareVar = name</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.invoke = ''</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.kind = 'module'</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_130">
                    <div class="code-panel" id="d_130">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/restrict.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a">clazz(</span><span class="pp-arg"> Restrict</span><span class="pp-pln">,</span><span class="pp-arg">  Node </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzElement = 'restrict'</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.facets = []</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addEnumFacet</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> facet = new EnumFacet(name)</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> facet.wzParent = this</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.facets.push(facet)</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> facet</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_131">
                    <div class="code-panel" id="d_131">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/wfschema/typeTagSet.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> TypeTag </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> type</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> Make test case insensitive</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.type = type.toLowerCase()</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.codelines = []</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.type === 'number'</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.element = 'number'</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.method = 'isNumber'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">elif</span><span class="pp-pln"> this.type === 'css-length'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.element = 'cssLength'</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.method = 'isCssLength'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> TypeTagSet </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.typeTags = []</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addTypeTag</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> type</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> typeTag = new TypeTag(type)</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(typeTag.codelines)</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.typeTags.push(typeTag)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_132">
                    <div class="code-panel" id="d_132">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/clazz.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> name, supeR|@@null</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-kwd"> ${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-kwd">$if</span><span class="pp-expr"> supeR != null</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">super</span><span class="pp-kwd"> ${</span><span class="pp-expr">supeR</span><span class="pp-kwd">}</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln"> = </span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">;</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_133">
                    <div class="code-panel" id="d_133">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/schema_analizer.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> addRequire</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> kind</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> r = _.find(this.requires, function(item) { return item.wzName === name && item.kind === kind })</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> !r</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r = new Require(name)</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r.kind = kind</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.requires.push(r)</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> r</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> analize</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> element in this.elements</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> element.nameIsRequired</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.addRequire("verifyRequired", "context-method")</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> element.allowedNameDeclaration("js") != null</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.addRequire("verifyEnum", "context-method")</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> attribute in element.attributes</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> attribute.isRequired</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.addRequire("verifyRequired", "context-method")</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> attribute.isDataType</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.addRequire("getTypesystem", "context-method")</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> attribute.allowedDeclaration("js") != null</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.addRequire("verifyEnum", "context-method")</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> attribute.type == md.Attribute.STRING</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.addRequire("parsestring", 'function')</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">elif</span><span class="pp-pln"> (attribute.type == md.Attribute.BOOLEAN)</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.addRequire("parseboolean", 'function')</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">elif</span><span class="pp-pln"> attribute.type == md.Attribute.INTEGER</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.addRequire("parseinteger", 'function')</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">elif</span><span class="pp-pln"> attribute.type == md.Attribute.FLOAT</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.addRequire("parsefloat", 'function')</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-tag">elif</span><span class="pp-pln"> attribute.type == md.Attribute.DATE</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.addRequire("parsedate", 'function')</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> method in element.methods</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> require in method.requires</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> this.addRequire(require.wzName, require.kind)</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> method in this.methods</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> require in method.requires</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.addRequire(require.wzName, require.kind)</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.addRequiredFunctionsDependencies()</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> exportToJson</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> typeof _.find(this.exportTos, function(item) { return item.wzName && item.wzName.toLowerCase() === 'json' }) !== 'undefined'</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> exportToXml</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> typeof _.find(this.exportTos, function(item) { return item.wzName && item.wzName.toLowerCase() === 'xml' }) !== 'undefined'</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> exportToPrettify</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> typeof _.find(this.exportTos, function(item) { return item.wzName && item.wzName.toLowerCase() === 'prettify' }) !== 'undefined'</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getRequiredFunctions</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> _.filter(this.requires, function(item) { return item.kind === 'function' })</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getRequiredModules</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> _.filter(this.requires, function(item) { return item.kind === 'module' })</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getRequiredContextMethods</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> _.filter(this.requires, function(item) { return item.kind === 'context-method' })</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> addRequiredFunctionsDependencies</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> deps = []</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> require in this.requires</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> require.kind === 'function'</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.getRequiredFunctionsByItem(require.wzName, deps)</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> dep in deps</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.addRequire(dep, 'function')</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getRequiredFunctionsByItem</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> deps</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> name == "isEmpty"</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isString")</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">        </span><span class="pp-tag">elif</span><span class="pp-pln"> name == "isNumber"</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isArray")</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">        </span><span class="pp-tag">elif</span><span class="pp-pln"> name == "replaceAll"</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("escapeRegExp")</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">        </span><span class="pp-tag">elif</span><span class="pp-pln"> name == "isInt"</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isNumber")</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">        </span><span class="pp-tag">elif</span><span class="pp-pln"> name == "isFloat"</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isNumber")</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">        </span><span class="pp-tag">elif</span><span class="pp-pln"> name == "isDate"</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isString")</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">        </span><span class="pp-tag">elif</span><span class="pp-pln"> name == "parsestring"</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isString")</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isEmpty")</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isBoolean")</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("nodeException")</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">        </span><span class="pp-tag">elif</span><span class="pp-pln"> name == "parseboolean"</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isString")</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isEmpty")</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isBoolean")</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("nodeException")</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">        </span><span class="pp-tag">elif</span><span class="pp-pln"> name == "parseinteger"</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isString")</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isEmpty")</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isArray")</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isNumber")</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isInt")</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("nodeException")</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">        </span><span class="pp-tag">elif</span><span class="pp-pln"> name == "parsefloat"</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isString")</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isEmpty")</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isArray")</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isNumber")</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isFloat")</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("nodeException")</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">        </span><span class="pp-tag">elif</span><span class="pp-pln"> name == "parsedate"</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isString")</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("isEmpty")</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> deps.push("nodeException")</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_134">
                    <div class="code-panel" id="d_134">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/t/schema_loader.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> The method called by the model types generator</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> (wizzi.wizziFactory.generateModelTypes)</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { wfschemaWizziModel</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # The model loaded from the 'SCHEMA_NAME.wfschema.ittf' source document.</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> [ requires</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> [ exportTos</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> [ elements</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> loadFromWizziModel</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> wfschemaWizziModel</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzName = wfschemaWizziModel.wzName</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.unknownElementReplacer = wfschemaWizziModel.unknownElementReplacer || false</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.importComments(wfschemaWizziModel)</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> requireFrom in wfschemaWizziModel.requires</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> require = this.addRequire(requireFrom.wzName)</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> requireFrom.declareVar && requireFrom.declareVar.length &gt; 0</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> require.declareVar = requireFrom.declareVar</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> requireFrom.invoke && requireFrom.invoke.length &gt; 0</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> require.invoke = requireFrom.invoke</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> require.kind = requireFrom.kind</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.importDeclares(wfschemaWizziModel)</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.importMethods(wfschemaWizziModel)</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> eFrom in wfschemaWizziModel.elements</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> element = this.addElement(eFrom.wzName)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> element.importComments(eFrom)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> element.importRestricts(eFrom)</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> element.tagInternal = eFrom.tagInternal</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> element.super = eFrom.super</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> element.isAbstract = eFrom.isAbstract</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> element.isRoot = eFrom.isRoot</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> element.xmlTagInternal = eFrom.xmlTagInternal</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> element.tagType = eFrom.tagType</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> element.acceptAnyTag = eFrom.acceptAnyTag</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> element.nameIsRequired = eFrom.nameIsRequired</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> element.addToChildren = eFrom.addToChildren</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> element.suppressCollectionEmit = eFrom.suppressCollectionEmit</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> aFrom in eFrom.attributes</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> attribute = element.addAttribute(aFrom.wzName)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> attribute.importComments(aFrom)</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> attribute.importRestricts(aFrom)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> attribute.tagInternal = aFrom.tagInternal</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> attribute.xmlTagInternal = aFrom.xmlTagInternal</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> attribute.type = aFrom.type</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> attribute.default = aFrom.default</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> attribute.isRequired = aFrom.isRequired</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> attribute.isDataType = aFrom.isDataType</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> attribute.defaultWhenDeclared = aFrom.defaultWhenDeclared</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> rFrom in eFrom.relations</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> relation = element.addRelation(rFrom.wzName)</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> relation.importComments(rFrom)</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> relation.noGetMethod = rFrom.noGetMethod</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> relation.hasAddOnce = rFrom.hasAddOnce</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> relation.isOneToOne = rFrom.isOneToOne</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> iFrom in eFrom.includes</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> include = element.addInclude(iFrom.wzName)</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> include.importComments(rFrom)</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> element.importMethods(eFrom)</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> exportTo in wfschemaWizziModel.exportTos</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.addExportTo(exportTo.wzName)</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ctx</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> error</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                    </span><span class="pp-tag">function</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                        </span><span class="pp-tag">param</span><span class="pp-pln"> msg</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                        </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                        </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error(msg + '\n' + util.inspect(node, { depth: 2}))</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.wzSetup(ctx);</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.wzVerify(ctx);</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> this.wzInitialize(ctx);</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_135">
                    <div class="code-panel" id="d_135">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/util.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> inflect = require('i')()</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.getIdentifier</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> str</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> checkKeyword</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> md.isNotEmpty(str) === false</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> str</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> str = str.trim()</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ch, sb = []</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">for</span><span class="pp-pln"> var i=0; i&lt;str.length; i++</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> ch = str[i]</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> sb.push( isIdentifierChar(ch) ? ch : '_')</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ret = sb.join('')</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> checkKeyword</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> keywords.indexOf(ret) &gt;= 0 ? 'x' + ret : ret</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.isNotEmpty</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> str</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> typeof str === 'string' && str.trim().length &gt; 0</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.isEmpty</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> str</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> typeof str === 'undefined' || str == null || ( typeof str === 'string' && str.trim().length === 0 )</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.endsWith</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> str</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> suffix</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> str.indexOf(suffix, str.length - suffix.length) !== -1;</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.startsWith</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> str</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> prefix</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> str.indexOf(prefix) === 0;</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.replaceAll</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> str</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> find</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> replace</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> typeof str === 'undefined' || str == null</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> str</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> str.replace(new RegExp(escapeRegExp(find), 'g'), replace)</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.pluralize</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> str</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> inflect.pluralize(str)</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.capitalize</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> str</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> do not use inflect ( in inflect titleName becames Titlename non TitleName )</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> str && str.length &gt; 0</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> str.charAt(0).toUpperCase() + str.slice(1);</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> str</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> escapeRegExp</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> str</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> str.replace(/([.*+?^=!:</span><span class="pp-kwd">${</span><span class="pp-expr"></span><span class="pp-kwd">}</span><span class="pp-pln">()|\[\]\/\\])/g, "\\$1")</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.escapeString</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> str</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> (str + '').replace(/[\\"']/g, '\\$&').replace(/\u0000/g, '\\0');</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> isIdentifierChar</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> str</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> isAlphaNumeric(str) || str === '_'</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> isAlphaNumeric</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> str</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> letterNumber = /^[0-9a-zA-Z]+$/</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> str.match(letterNumber)</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> keywords</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">        </span><span class="pp-tag">[</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'abstract'</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'arguments'</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'boolean'</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'break'</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'byte'</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'case'</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'catch'</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'char'</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'class'</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'const'</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'continue'</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'debugger'</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'default'</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'delete'</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'do'</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'double'</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'else'</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'enum'</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'eval'</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'export'</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'extends'</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'false'</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'final'</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'finally'</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'float'</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'for'</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'function'</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'goto'</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'if'</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'implements'</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'import'</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'in'</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'instanceof'</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'int'</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'interface'</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'let'</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'long'</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'native'</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'new'</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'null'</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'package'</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'private'</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'protected'</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'public'</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'require'</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'return'</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'short'</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'static'</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'super'</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'switch'</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'synchronized'</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'this'</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'throw'</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'throws'</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'transient'</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'true'</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'try'</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'typeof'</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'var'</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'void'</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'volatile'</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'while'</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'with'</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'yield'</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_136">
                    <div class="code-panel" id="d_136">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/wfschema-boot-model.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> _ = require('lodash')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> stringify = require('json-stringify-safe')</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> schemautil = require('./util')</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_127">wfschema/node(</span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_116">wfschema/attribute(</span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a">wfschema/restrict(</span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_124">wfschema/facet(</span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_125">wfschema/include(</span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_122">wfschema/element(</span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_128">wfschema/relation(</span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_117">wfschema/choice(</span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_119">wfschema/choiceSet(</span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_118">wfschema/choiceOrdered(</span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_131">wfschema/typeTagSet(</span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a">wfschema/require(</span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a">wfschema/exportTo(</span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_121">wfschema/declare(</span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_126">wfschema/method(</span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a">wfschema/comment(</span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> The main class imported and instantiated by the model types generator</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> (wizzi.wizziFactory.generateModelTypes).</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> This is an in-memory trasformer of a loaded 'SCHEMA_NAME.wfschema.ittf' source document.</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> TODO this 'wfschema-boot-model' should become a wizzi-plugin.modelTransformer.</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_132">clazz(</span><span class="pp-arg"> WizziSchema</span><span class="pp-pln">,</span><span class="pp-arg">  Node </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.wzElement = 'wfschema'</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.elements = []</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.declares = []</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.methods = []</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.requires = []</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.requiredModules = []</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.requiredFunctions = []</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.exportTos = []</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.preserveTags = true</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.rootElement = null</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addElement</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> item = new Element(name)</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> item.wzParent = this;</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.elements.push(item)</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> item</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getElement</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> element in this.elements</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> element.wzName === name</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span><span class="pp-pln"> element</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> null</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> addExportTo</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> item = new ExportTo(name)</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> item.wzParent = this;</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.exportTos.push(item)</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> item</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> wzSetup</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.elements</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> item.wzSetup(ctx)</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.elements</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> item.setupDerived(ctx)</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> wzVerify</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.elements</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> item.wzVerify(ctx)</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> wzInitialize</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.elements</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> item.isRoot</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> this.rootElement = item</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> this.rootElement == null && this.elements.length &gt; 0</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.elements[0].isRoot = true;</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.rootElement = this.elements[0]</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in this.elements</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> item.wzInitialize(ctx)</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> this.analize()</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> d = ctx.tagElementMapping</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> typeof d === 'object'</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> str = []</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> str.push("{ ")</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> first = true</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                </span><span class="pp-tag">for</span><span class="pp-pln"> var k in d</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> !first</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> str.push(", ")</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> first = false</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> key = schemautil.escapeString(k)</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> str.push("'" + key + "': '" + d[key] + "'")</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> str.push(" }")</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.tagElementMapping = str.join('')</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> this.tagElementMapping = '{}'</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.requiredModules = this.getRequiredModules()</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.requiredFunctions = this.getRequiredFunctions()</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.requiredContextMethods = this.getRequiredContextMethods()</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_133">schema_analizer(</span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">schema_loader(</span><span class="pp-mix">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_137">
                    <div class="code-panel" id="d_137">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/wizzi/models/bootstrap/wfschema-boot-modelDef.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> BootWizziSchema = require('./wfschema-boot-model').WizziSchema</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.createInstance</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> wfschema = new BootWizziSchema('wfschema')</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> wfschema</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_wfschema = wfschema.addElement("wfschema", {})</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_wfschema.xmlTagInternal = "wfschema"</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_wfschema_preserveTags = e_wfschema.addAttribute("preserveTags", {})</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_wfschema_preserveTags.type = "boolean"</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_wfschema_preserveTags.default = "false"</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_wfschema_preserveTags.tagInternal = "preserve-tags"</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_wfschema_preserveTags.defaultWhenDeclared = "true"</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_wfschema_unknownElementReplacer = e_wfschema.addAttribute("unknownElementReplacer", {})</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_wfschema_unknownElementReplacer.tagInternal = "unknown-element-replacer"</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> element</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_element = wfschema.addElement("element", {})</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element.tagInternal = "e"</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element.xmlTagInternal = "element"</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_element_super = e_element.addAttribute("super", {})</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_element_isAbstract = e_element.addAttribute("isAbstract", {})</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_isAbstract.type = "boolean"</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_isAbstract.default = "false"</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_isAbstract.tagInternal = "is-abstract"</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_isAbstract.defaultWhenDeclared = "true"</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_element_isRoot = e_element.addAttribute("isRoot", {})</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_isRoot.type = "boolean"</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_isRoot.default = "false"</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_isRoot.tagInternal = "is-root"</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_isRoot.defaultWhenDeclared = "true"</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_element_tagInternal = e_element.addAttribute("tagInternal", {})</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_tagInternal.tagInternal = "tag"</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_element_xmlTagInternal = e_element.addAttribute("xmlTagInternal", {})</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_xmlTagInternal.tagInternal = "xml-tag"</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_element_acceptAnyTag = e_element.addAttribute("acceptAnyTag", {})</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_acceptAnyTag.tagInternal = "any"</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_element_nameIsRequired = e_element.addAttribute("nameIsRequired", {})</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_nameIsRequired.type = "boolean"</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_nameIsRequired.default = "false"</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_nameIsRequired.tagInternal = "name-is-required"</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_nameIsRequired.defaultWhenDeclared = "true"</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_element_addToChildren = e_element.addAttribute("addToChildren", {})</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_addToChildren.type = "boolean"</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_addToChildren.default = "false"</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_addToChildren.tagInternal = "add-to-children"</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_addToChildren.defaultWhenDeclared = "true"</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_element_suppressCollectionEmit = e_element.addAttribute("suppressCollectionEmit", {})</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_suppressCollectionEmit.type = "boolean"</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_suppressCollectionEmit.default = "false"</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_suppressCollectionEmit.tagInternal = "suppress-collection-emit"</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_element_suppressCollectionEmit.defaultWhenDeclared = "true"</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> attribute</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_attribute = wfschema.addElement("attribute", {})</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_attribute.tagInternal = "a"</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_attribute.xmlTagInternal = "attribute"</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_attribute_tagInternal = e_attribute.addAttribute("tagInternal", {})</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_attribute_tagInternal.tagInternal = "tag"</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_attribute_type = e_attribute.addAttribute("type", {})</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_attribute_type.default = "string"</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_attribute_default = e_attribute.addAttribute("default", {})</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_attribute_default.tagInternal = "default"</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_attribute_calculated = e_attribute.addAttribute("calculated ", {})</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_attribute_isRequired = e_attribute.addAttribute("isRequired", {})</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_attribute_isRequired.type = "boolean"</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_attribute_isRequired.default = "false"</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_attribute_isRequired.tagInternal = "is-required"</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_attribute_isRequired.defaultWhenDeclared = "true"</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_attribute_isDataType = e_attribute.addAttribute("isDataType", {})</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_attribute_isDataType.type = "boolean"</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_attribute_isDataType.default = "false"</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_attribute_isDataType.tagInternal = "is-datatype"</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_attribute_isDataType.defaultWhenDeclared = "true"</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_attribute_defaultWhenDeclared = e_attribute.addAttribute("defaultWhenDeclared", {})</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_attribute_defaultWhenDeclared.tagInternal = "default-when-declared"</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> restrict</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_restrict = wfschema.addElement("restrict", {})</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_restrict.xmlTagInternal = "restrict"</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_restrict_nameIsRequired = e_restrict.addAttribute("nameIsRequired", {})</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_restrict_nameIsRequired.type = "boolean"</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_restrict_nameIsRequired.default = "false"</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_restrict_nameIsRequired.tagInternal = "name-is-required"</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_restrict_nameIsRequired.defaultWhenDeclared = "true"</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> facet</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_facet = wfschema.addElement("facet", {})</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_facet.IsAbstract = "true"</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_facet.xmlTagInternal = "facet"</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> enumFacet</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_enumFacet = wfschema.addElement("enumFacet", {})</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_enumFacet.tagInternal = "enum"</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_enumFacet.super = "facet"</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_enumFacet.xmlTagInternal = "enumFacet"</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> maxLengthFacet</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_maxLengthFacet = wfschema.addElement("maxLengthFacet", {})</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_maxLengthFacet.tagInternal = "max-length"</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_maxLengthFacet.super = "facet"</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_maxLengthFacet.xmlTagInternal = "maxLengthFacet"</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> minLengthFacet</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_minLengthFacet = wfschema.addElement("minLengthFacet", {})</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_minLengthFacet.tagInternal = "min-length"</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_minLengthFacet.super = "facet"</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_minLengthFacet.xmlTagInternal = "minLengthFacet"</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> relation</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_relation = wfschema.addElement("relation", {})</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_relation.tagInternal = "r"</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_relation.xmlTagInternal = "relation"</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_relation_noGetMethod = e_relation.addAttribute("noGetMethod", {})</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_relation_noGetMethod.type = "boolean"</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_relation_noGetMethod.default = "false"</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_relation_noGetMethod.tagInternal = "no-get"</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_relation_noGetMethod.defaultWhenDeclared = "true"</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_relation_hasAddOnce = e_relation.addAttribute("hasAddOnce", {})</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_relation_hasAddOnce.type = "boolean"</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_relation_hasAddOnce.default = "false"</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_relation_hasAddOnce.tagInternal = "add-once"</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_relation_hasAddOnce.defaultWhenDeclared = "true"</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_relation_isOneToOne = e_relation.addAttribute("isOneToOne", {})</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_relation_isOneToOne.type = "boolean"</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_relation_isOneToOne.default = "false"</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_relation_isOneToOne.tagInternal = "one-to-one"</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_relation_isOneToOne.defaultWhenDeclared = "true"</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> property</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_property = wfschema.addElement("property", {})</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_property.tagInternal = "p"</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_property.xmlTagInternal = "property"</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_property_emitkey = e_property.addAttribute("emitkey", {})</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> declare</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_declare = wfschema.addElement("declare", {})</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_declare.tagInternal = "declare"</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_declare.xmlTagInternal = "declare"</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> method</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_method = wfschema.addElement("method", {})</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_method.tagInternal = "m"</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_method.xmlTagInternal = "method"</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_method_emitkey = e_method.addAttribute("emitKey", {})</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_method_emitkey.tagInternal = "emit-key"</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> param</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_param = wfschema.addElement("param", {})</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_param.xmlTagInternal = "param"</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_param_type = e_param.addAttribute("type", {})</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> exportTo</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_exportTo = wfschema.addElement("exportTo", {})</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_exportTo.tagInternal = "export-to"</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_exportTo.xmlTagInternal = "exportTo"</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> require</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_require = wfschema.addElement("require", {})</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_require.xmlTagInternal = "require"</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_require_kind = e_require.addAttribute("kind", {})</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_require_invoke = e_require.addAttribute("invoke", {})</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_require_declareVar = e_require.addAttribute("declareVar", {})</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_require_declareVar.tagInternal = "declare-var"</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> include</span></div><div class="L5"><span class="pp-ln"> 155 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_include = wfschema.addElement("include", {})</span></div><div class="L6"><span class="pp-ln"> 156 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_include.xmlTagInternal = "include"</span></div><div class="L7"><span class="pp-ln"> 157 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> comment</span></div><div class="L8"><span class="pp-ln"> 158 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_comment = wfschema.addElement("comment", {})</span></div><div class="L9"><span class="pp-ln"> 159 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_comment.tagInternal = "#"</span></div><div class="L0"><span class="pp-ln"> 160 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_comment.xmlTagInternal = "comment"</span></div><div class="L1"><span class="pp-ln"> 161 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> statement</span></div><div class="L2"><span class="pp-ln"> 162 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_statement = wfschema.addElement("statement", {})</span></div><div class="L3"><span class="pp-ln"> 163 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_statement.xmlTagInternal = "statement"</span></div><div class="L4"><span class="pp-ln"> 164 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> codeline</span></div><div class="L5"><span class="pp-ln"> 165 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_codeline = wfschema.addElement("codeline", {})</span></div><div class="L6"><span class="pp-ln"> 166 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_codeline.tagInternal = "+"</span></div><div class="L7"><span class="pp-ln"> 167 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_codeline.super = "statement"</span></div><div class="L8"><span class="pp-ln"> 168 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> var</span></div><div class="L9"><span class="pp-ln"> 169 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_var = wfschema.addElement("var", {})</span></div><div class="L0"><span class="pp-ln"> 170 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_var.tagInternal = "var"</span></div><div class="L1"><span class="pp-ln"> 171 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_var.super = "statement"</span></div><div class="L2"><span class="pp-ln"> 172 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_var.xmlTagInternal = "var"</span></div><div class="L3"><span class="pp-ln"> 173 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> decl</span></div><div class="L4"><span class="pp-ln"> 174 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_decl = wfschema.addElement("decl", {})</span></div><div class="L5"><span class="pp-ln"> 175 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_decl.tagInternal = "decl"</span></div><div class="L6"><span class="pp-ln"> 176 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_decl.super = "statement"</span></div><div class="L7"><span class="pp-ln"> 177 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_decl.xmlTagInternal = "decl"</span></div><div class="L8"><span class="pp-ln"> 178 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> set</span></div><div class="L9"><span class="pp-ln"> 179 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_set = wfschema.addElement("set", {})</span></div><div class="L0"><span class="pp-ln"> 180 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_set.super = "statement"</span></div><div class="L1"><span class="pp-ln"> 181 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> call</span></div><div class="L2"><span class="pp-ln"> 182 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_call = wfschema.addElement("call", {})</span></div><div class="L3"><span class="pp-ln"> 183 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_call.tagInternal = "_"</span></div><div class="L4"><span class="pp-ln"> 184 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_call.super = "statement"</span></div><div class="L5"><span class="pp-ln"> 185 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> function</span></div><div class="L6"><span class="pp-ln"> 186 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_function = wfschema.addElement("function", {})</span></div><div class="L7"><span class="pp-ln"> 187 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_function.tagInternal = "function"</span></div><div class="L8"><span class="pp-ln"> 188 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_function.super = "statement"</span></div><div class="L9"><span class="pp-ln"> 189 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> return</span></div><div class="L0"><span class="pp-ln"> 190 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_return = wfschema.addElement("return", {})</span></div><div class="L1"><span class="pp-ln"> 191 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_return.tagInternal = "return"</span></div><div class="L2"><span class="pp-ln"> 192 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_return.super = "statement"</span></div><div class="L3"><span class="pp-ln"> 193 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> new</span></div><div class="L4"><span class="pp-ln"> 194 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_new = wfschema.addElement("new", {})</span></div><div class="L5"><span class="pp-ln"> 195 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_new.tagInternal = "new"</span></div><div class="L6"><span class="pp-ln"> 196 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_new.super = "statement"</span></div><div class="L7"><span class="pp-ln"> 197 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> if</span></div><div class="L8"><span class="pp-ln"> 198 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_if = wfschema.addElement("if", {})</span></div><div class="L9"><span class="pp-ln"> 199 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_if.tagInternal = "if"</span></div><div class="L0"><span class="pp-ln"> 200 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_if.super = "statement"</span></div><div class="L1"><span class="pp-ln"> 201 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> elif</span></div><div class="L2"><span class="pp-ln"> 202 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_elif = wfschema.addElement("elif", {})</span></div><div class="L3"><span class="pp-ln"> 203 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_elif.super = "statement"</span></div><div class="L4"><span class="pp-ln"> 204 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> else</span></div><div class="L5"><span class="pp-ln"> 205 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_else = wfschema.addElement("else", {})</span></div><div class="L6"><span class="pp-ln"> 206 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_else.tagInternal = "else"</span></div><div class="L7"><span class="pp-ln"> 207 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_else.super = "statement"</span></div><div class="L8"><span class="pp-ln"> 208 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> for</span></div><div class="L9"><span class="pp-ln"> 209 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_for = wfschema.addElement("for", {})</span></div><div class="L0"><span class="pp-ln"> 210 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_for.tagInternal = "for"</span></div><div class="L1"><span class="pp-ln"> 211 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_for.super = "statement"</span></div><div class="L2"><span class="pp-ln"> 212 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> break</span></div><div class="L3"><span class="pp-ln"> 213 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_break = wfschema.addElement("break", {})</span></div><div class="L4"><span class="pp-ln"> 214 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_break.tagInternal = "break"</span></div><div class="L5"><span class="pp-ln"> 215 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_break.super = "statement"</span></div><div class="L6"><span class="pp-ln"> 216 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> continue</span></div><div class="L7"><span class="pp-ln"> 217 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_continue = wfschema.addElement("continue", {})</span></div><div class="L8"><span class="pp-ln"> 218 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_continue.tagInternal = "continue"</span></div><div class="L9"><span class="pp-ln"> 219 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_continue.super = "statement"</span></div><div class="L0"><span class="pp-ln"> 220 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> foreach</span></div><div class="L1"><span class="pp-ln"> 221 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_foreach = wfschema.addElement("foreach", {})</span></div><div class="L2"><span class="pp-ln"> 222 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_foreach.super = "statement"</span></div><div class="L3"><span class="pp-ln"> 223 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> while</span></div><div class="L4"><span class="pp-ln"> 224 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_while = wfschema.addElement("while", {})</span></div><div class="L5"><span class="pp-ln"> 225 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_while.tagInternal = "while"</span></div><div class="L6"><span class="pp-ln"> 226 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_while.super = "statement"</span></div><div class="L7"><span class="pp-ln"> 227 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> do</span></div><div class="L8"><span class="pp-ln"> 228 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_dowhile = wfschema.addElement("do", {})</span></div><div class="L9"><span class="pp-ln"> 229 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_dowhile.tagInternal = "do"</span></div><div class="L0"><span class="pp-ln"> 230 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_dowhile.super = "statement"</span></div><div class="L1"><span class="pp-ln"> 231 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> switch</span></div><div class="L2"><span class="pp-ln"> 232 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_switch = wfschema.addElement("switch", {})</span></div><div class="L3"><span class="pp-ln"> 233 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_switch.tagInternal = "switch"</span></div><div class="L4"><span class="pp-ln"> 234 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_switch.super = "statement"</span></div><div class="L5"><span class="pp-ln"> 235 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> case</span></div><div class="L6"><span class="pp-ln"> 236 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_case = wfschema.addElement("case", {})</span></div><div class="L7"><span class="pp-ln"> 237 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_case.tagInternal = "case"</span></div><div class="L8"><span class="pp-ln"> 238 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_case.super = "statement"</span></div><div class="L9"><span class="pp-ln"> 239 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> default</span></div><div class="L0"><span class="pp-ln"> 240 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_default = wfschema.addElement("default", {})</span></div><div class="L1"><span class="pp-ln"> 241 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_default.tagInternal = "default"</span></div><div class="L2"><span class="pp-ln"> 242 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_default.super = "statement"</span></div><div class="L3"><span class="pp-ln"> 243 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> try</span></div><div class="L4"><span class="pp-ln"> 244 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_try = wfschema.addElement("try", {})</span></div><div class="L5"><span class="pp-ln"> 245 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_try.tagInternal = "try"</span></div><div class="L6"><span class="pp-ln"> 246 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_try.super = "statement"</span></div><div class="L7"><span class="pp-ln"> 247 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> catch</span></div><div class="L8"><span class="pp-ln"> 248 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_catch = wfschema.addElement("catch", {})</span></div><div class="L9"><span class="pp-ln"> 249 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_catch.tagInternal = "catch"</span></div><div class="L0"><span class="pp-ln"> 250 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_catch.super = "statement"</span></div><div class="L1"><span class="pp-ln"> 251 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> finally</span></div><div class="L2"><span class="pp-ln"> 252 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_finally = wfschema.addElement("finally", {})</span></div><div class="L3"><span class="pp-ln"> 253 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_finally.tagInternal = "finally"</span></div><div class="L4"><span class="pp-ln"> 254 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_finally.super = "statement"</span></div><div class="L5"><span class="pp-ln"> 255 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> throw</span></div><div class="L6"><span class="pp-ln"> 256 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_throw = wfschema.addElement("throw", {})</span></div><div class="L7"><span class="pp-ln"> 257 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_throw.tagInternal = "throw"</span></div><div class="L8"><span class="pp-ln"> 258 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_throw.super = "statement"</span></div><div class="L9"><span class="pp-ln"> 259 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> log</span></div><div class="L0"><span class="pp-ln"> 260 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_log = wfschema.addElement("log", {})</span></div><div class="L1"><span class="pp-ln"> 261 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_log.super = "statement"</span></div><div class="L2"><span class="pp-ln"> 262 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> jsArray</span></div><div class="L3"><span class="pp-ln"> 263 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_jsArray = wfschema.addElement("jsArray", {})</span></div><div class="L4"><span class="pp-ln"> 264 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_jsArray.tagInternal = "["</span></div><div class="L5"><span class="pp-ln"> 265 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_jsArray.super = "statement"</span></div><div class="L6"><span class="pp-ln"> 266 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> jsObject</span></div><div class="L7"><span class="pp-ln"> 267 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_jsObject = wfschema.addElement("jsObject", {})</span></div><div class="L8"><span class="pp-ln"> 268 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_jsObject.tagInternal = "{"</span></div><div class="L9"><span class="pp-ln"> 269 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_jsObject.super = "statement"</span></div><div class="L0"><span class="pp-ln"> 270 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> jsPropertyOrValue</span></div><div class="L1"><span class="pp-ln"> 271 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> e_jsPropertyOrValue = wfschema.addElement("jsPropertyOrValue", {})</span></div><div class="L2"><span class="pp-ln"> 272 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_jsPropertyOrValue.tagInternal = "@"</span></div><div class="L3"><span class="pp-ln"> 273 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> e_jsPropertyOrValue.super = "statement"</span></div><div class="L4"><span class="pp-ln"> 274 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_wfschema_require = e_wfschema.addRelation("require", {})</span></div><div class="L5"><span class="pp-ln"> 275 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_wfschema_require.childRole = "requires"</span></div><div class="L6"><span class="pp-ln"> 276 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_wfschema_require.rightElement = e_require</span></div><div class="L7"><span class="pp-ln"> 277 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_wfschema_element = e_wfschema.addRelation("element", {})</span></div><div class="L8"><span class="pp-ln"> 278 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_wfschema_element.childRole = "elements"</span></div><div class="L9"><span class="pp-ln"> 279 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_wfschema_element.rightElement = e_element</span></div><div class="L0"><span class="pp-ln"> 280 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_wfschema_declare = e_wfschema.addRelation("declare", {})</span></div><div class="L1"><span class="pp-ln"> 281 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_wfschema_declare.childRole = "declares"</span></div><div class="L2"><span class="pp-ln"> 282 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_wfschema_declare.rightElement = e_declare</span></div><div class="L3"><span class="pp-ln"> 283 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_wfschema_method = e_wfschema.addRelation("method", {})</span></div><div class="L4"><span class="pp-ln"> 284 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_wfschema_method.childRole = "methods"</span></div><div class="L5"><span class="pp-ln"> 285 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_wfschema_method.rightElement = e_method</span></div><div class="L6"><span class="pp-ln"> 286 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_wfschema_exportTo = e_wfschema.addRelation("exportTo", {})</span></div><div class="L7"><span class="pp-ln"> 287 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_wfschema_exportTo.childRole = "exportTos"</span></div><div class="L8"><span class="pp-ln"> 288 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_wfschema_exportTo.rightElement = e_exportTo</span></div><div class="L9"><span class="pp-ln"> 289 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_wfschema_comment = e_wfschema.addRelation("comment", {})</span></div><div class="L0"><span class="pp-ln"> 290 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_wfschema_comment.childRole = "comments"</span></div><div class="L1"><span class="pp-ln"> 291 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_wfschema_comment.rightElement = e_comment</span></div><div class="L2"><span class="pp-ln"> 292 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_element_attribute = e_element.addRelation("attribute", {})</span></div><div class="L3"><span class="pp-ln"> 293 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_element_attribute.childRole = "attributes"</span></div><div class="L4"><span class="pp-ln"> 294 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_element_attribute.rightElement = e_attribute</span></div><div class="L5"><span class="pp-ln"> 295 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_element_relation = e_element.addRelation("relation", {})</span></div><div class="L6"><span class="pp-ln"> 296 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_element_relation.childRole = "relations"</span></div><div class="L7"><span class="pp-ln"> 297 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_element_relation.rightElement = e_relation</span></div><div class="L8"><span class="pp-ln"> 298 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_element_restrict = e_element.addRelation("restrict", {})</span></div><div class="L9"><span class="pp-ln"> 299 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_element_restrict.childRole = "restricts"</span></div><div class="L0"><span class="pp-ln"> 300 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_element_restrict.rightElement = e_restrict</span></div><div class="L1"><span class="pp-ln"> 301 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_element_property = e_element.addRelation("property", {})</span></div><div class="L2"><span class="pp-ln"> 302 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_element_property.childRole = "properties"</span></div><div class="L3"><span class="pp-ln"> 303 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_element_property.rightElement = e_property</span></div><div class="L4"><span class="pp-ln"> 304 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_element_method = e_element.addRelation("method", {})</span></div><div class="L5"><span class="pp-ln"> 305 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_element_method.childRole = "methods"</span></div><div class="L6"><span class="pp-ln"> 306 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_element_method.rightElement = e_method</span></div><div class="L7"><span class="pp-ln"> 307 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_element_include = e_element.addRelation("include", {})</span></div><div class="L8"><span class="pp-ln"> 308 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_element_include.childRole = "includes"</span></div><div class="L9"><span class="pp-ln"> 309 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_element_include.rightElement = e_include</span></div><div class="L0"><span class="pp-ln"> 310 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_element_comment = e_element.addRelation("comment", {})</span></div><div class="L1"><span class="pp-ln"> 311 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_element_comment.childRole = "comments"</span></div><div class="L2"><span class="pp-ln"> 312 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_element_comment.rightElement = e_comment</span></div><div class="L3"><span class="pp-ln"> 313 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_attribute_restrict = e_attribute.addRelation("restrict", {})</span></div><div class="L4"><span class="pp-ln"> 314 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_attribute_restrict.childRole = "restricts"</span></div><div class="L5"><span class="pp-ln"> 315 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_attribute_restrict.rightElement = e_restrict</span></div><div class="L6"><span class="pp-ln"> 316 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_attribute_comment = e_attribute.addRelation("comment", {})</span></div><div class="L7"><span class="pp-ln"> 317 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_attribute_comment.childRole = "comments"</span></div><div class="L8"><span class="pp-ln"> 318 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_attribute_comment.rightElement = e_comment</span></div><div class="L9"><span class="pp-ln"> 319 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_restrict_facet = e_restrict.addRelation("facet", {})</span></div><div class="L0"><span class="pp-ln"> 320 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_restrict_facet.childRole = "facets"</span></div><div class="L1"><span class="pp-ln"> 321 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_restrict_facet.rightElement = e_facet</span></div><div class="L2"><span class="pp-ln"> 322 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_restrict_comment = e_restrict.addRelation("comment", {})</span></div><div class="L3"><span class="pp-ln"> 323 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_restrict_comment.childRole = "comments"</span></div><div class="L4"><span class="pp-ln"> 324 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_restrict_comment.rightElement = e_comment</span></div><div class="L5"><span class="pp-ln"> 325 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_enumFacet_comment = e_enumFacet.addRelation("comment", {})</span></div><div class="L6"><span class="pp-ln"> 326 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_enumFacet_comment.childRole = "comments"</span></div><div class="L7"><span class="pp-ln"> 327 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_enumFacet_comment.rightElement = e_comment</span></div><div class="L8"><span class="pp-ln"> 328 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_maxLengthFacet_comment = e_maxLengthFacet.addRelation("comment", {})</span></div><div class="L9"><span class="pp-ln"> 329 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_maxLengthFacet_comment.childRole = "comments"</span></div><div class="L0"><span class="pp-ln"> 330 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_maxLengthFacet_comment.rightElement = e_comment</span></div><div class="L1"><span class="pp-ln"> 331 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_minLengthFacet_comment = e_minLengthFacet.addRelation("comment", {})</span></div><div class="L2"><span class="pp-ln"> 332 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_minLengthFacet_comment.childRole = "comments"</span></div><div class="L3"><span class="pp-ln"> 333 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_minLengthFacet_comment.rightElement = e_comment</span></div><div class="L4"><span class="pp-ln"> 334 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_relation_comment = e_relation.addRelation("comment", {})</span></div><div class="L5"><span class="pp-ln"> 335 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_relation_comment.childRole = "comments"</span></div><div class="L6"><span class="pp-ln"> 336 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_relation_comment.rightElement = e_comment</span></div><div class="L7"><span class="pp-ln"> 337 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_property_statement = e_property.addRelation("statement", {})</span></div><div class="L8"><span class="pp-ln"> 338 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_property_statement.childRole = "statements"</span></div><div class="L9"><span class="pp-ln"> 339 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_property_statement.rightElement = e_statement</span></div><div class="L0"><span class="pp-ln"> 340 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_property_comment = e_property.addRelation("comment", {})</span></div><div class="L1"><span class="pp-ln"> 341 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_property_comment.childRole = "comments"</span></div><div class="L2"><span class="pp-ln"> 342 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_property_comment.rightElement = e_comment</span></div><div class="L3"><span class="pp-ln"> 343 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_method_param = e_method.addRelation("param", {})</span></div><div class="L4"><span class="pp-ln"> 344 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_method_param.childRole = "params"</span></div><div class="L5"><span class="pp-ln"> 345 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_method_param.rightElement = e_param</span></div><div class="L6"><span class="pp-ln"> 346 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_method_require = e_method.addRelation("require", {})</span></div><div class="L7"><span class="pp-ln"> 347 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_method_require.childRole = "requires"</span></div><div class="L8"><span class="pp-ln"> 348 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_method_require.rightElement = e_require</span></div><div class="L9"><span class="pp-ln"> 349 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_method_statement = e_method.addRelation("statement", {})</span></div><div class="L0"><span class="pp-ln"> 350 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_method_statement.childRole = "statements"</span></div><div class="L1"><span class="pp-ln"> 351 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_method_statement.rightElement = e_statement</span></div><div class="L2"><span class="pp-ln"> 352 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_method_comment = e_method.addRelation("comment", {})</span></div><div class="L3"><span class="pp-ln"> 353 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_method_comment.childRole = "comments"</span></div><div class="L4"><span class="pp-ln"> 354 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_method_comment.rightElement = e_comment</span></div><div class="L5"><span class="pp-ln"> 355 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_param_comment = e_param.addRelation("comment", {})</span></div><div class="L6"><span class="pp-ln"> 356 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_param_comment.childRole = "comments"</span></div><div class="L7"><span class="pp-ln"> 357 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_param_comment.rightElement = e_comment</span></div><div class="L8"><span class="pp-ln"> 358 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_require_comment = e_require.addRelation("comment", {})</span></div><div class="L9"><span class="pp-ln"> 359 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_require_comment.childRole = "comments"</span></div><div class="L0"><span class="pp-ln"> 360 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_require_comment.rightElement = e_comment</span></div><div class="L1"><span class="pp-ln"> 361 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_statement_statement = e_statement.addRelation("statement", {})</span></div><div class="L2"><span class="pp-ln"> 362 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_statement_statement.childRole = "statements"</span></div><div class="L3"><span class="pp-ln"> 363 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_statement_statement.rightElement = e_statement</span></div><div class="L4"><span class="pp-ln"> 364 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> r_function_param = e_function.addRelation("param", {})</span></div><div class="L5"><span class="pp-ln"> 365 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_function_param.childRole = "params"</span></div><div class="L6"><span class="pp-ln"> 366 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> r_function_param.rightElement = e_param</span></div><div class="L7"><span class="pp-ln"> 367 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ctx</span></div><div class="L8"><span class="pp-ln"> 368 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln"> 369 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> error</span></div><div class="L0"><span class="pp-ln"> 370 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln"> 371 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> msg</span></div><div class="L2"><span class="pp-ln"> 372 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L3"><span class="pp-ln"> 373 </span><span class="pp-pln">                            </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error(msg + '\n' + util.inspect(node, { depth: 2}))</span></div><div class="L4"><span class="pp-ln"> 374 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wfschema.wzSetup(ctx);</span></div><div class="L5"><span class="pp-ln"> 375 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wfschema.wzVerify(ctx);</span></div><div class="L6"><span class="pp-ln"> 376 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wfschema.wzInitialize(ctx);</span></div><div class="L7"><span class="pp-ln"> 377 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> wfschema</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_138">
                    <div class="code-panel" id="d_138">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/errors.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> util</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> fail = require('wizzi-utils').fail</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_172">error(</span><span class="pp-arg"> NotImplemented</span><span class="pp-pln">,</span><span class="pp-arg">  message </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> 'message', message</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.message = message</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_172">error(</span><span class="pp-arg"> InvalidRequest</span><span class="pp-pln">,</span><span class="pp-arg">  message</span><span class="pp-pln">,</span><span class="pp-arg">  code </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> 'message', message</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.message = message</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.code = code</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_172">error(</span><span class="pp-arg"> Node</span><span class="pp-pln">,</span><span class="pp-arg">  message</span><span class="pp-pln">,</span><span class="pp-arg">  node </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> msg</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">[</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> message</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> node</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> node.wzSourceLineInfo</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> info = node.wzSourceLineInfo</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> filePath = 'TODO'</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> node.wzSourceFilepath</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> filePath = node.wzSourceFilepath(info.sourceKey)</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> msg.push((' at row: ' + info.row))</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> msg.push((', col: ' + info.col))</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> msg.push((', source: ' + info.sourceKey))</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> msg.push((', in file: ' + filePath))</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">elif</span><span class="pp-pln"> node.row</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> msg.push((' at row: ' + node.row))</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> msg.push((', col: ' + node.col))</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.message = msg.join('')</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> 'NodeError', this.message</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> set this.node = node</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_172">error(</span><span class="pp-arg"> NotFound</span><span class="pp-pln">,</span><span class="pp-arg">  resourceType</span><span class="pp-pln">,</span><span class="pp-arg">  name</span><span class="pp-pln">,</span><span class="pp-arg">  message </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.message = resourceType + ': ' + name +' not found, message ' + message</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_172">error(</span><span class="pp-arg"> IttfNotFound</span><span class="pp-pln">,</span><span class="pp-arg">  resourceType</span><span class="pp-pln">,</span><span class="pp-arg">  name</span><span class="pp-pln">,</span><span class="pp-arg">  sourceUri </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.message = resourceType + ': ' + name +' not found, processing document ' + md.getSrcPathInfo(sourceUri)</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_172">error(</span><span class="pp-arg"> IttfLoad</span><span class="pp-pln">,</span><span class="pp-arg">  message</span><span class="pp-pln">,</span><span class="pp-arg">  srcPath</span><span class="pp-pln">,</span><span class="pp-arg">  node</span><span class="pp-pln">,</span><span class="pp-arg">  ex </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> !(ex)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> ex = node</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> node = null</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.message = 'Error: ' + message + '\nLoading ittf document ' + md.getSrcPathInfo(srcPath)</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> node</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.message += ('\n' + new NodeError('', node).message)</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_172">error(</span><span class="pp-arg"> WizziModelLoad</span><span class="pp-pln">,</span><span class="pp-arg">  message</span><span class="pp-pln">,</span><span class="pp-arg">  srcPath</span><span class="pp-pln">,</span><span class="pp-arg">  ex </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.message = 'Error: ' + message + '\nLoading ittf document ' + md.getSrcPathInfo(srcPath)</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_172">error(</span><span class="pp-arg"> ModelTransformation</span><span class="pp-pln">,</span><span class="pp-arg">  message</span><span class="pp-pln">,</span><span class="pp-arg">  generation</span><span class="pp-pln">,</span><span class="pp-arg">  srcPath</span><span class="pp-pln">,</span><span class="pp-arg">  ex </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.message = 'Error: ' + message + '\nDuring generation:' + generation + ', processing document ' + md.getSrcPathInfo(srcPath)</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_172">error(</span><span class="pp-arg"> ArtifactGeneration</span><span class="pp-pln">,</span><span class="pp-arg">  message</span><span class="pp-pln">,</span><span class="pp-arg">  generation</span><span class="pp-pln">,</span><span class="pp-arg">  srcPath</span><span class="pp-pln">,</span><span class="pp-arg">  ex </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.message = 'Error: ' + message +'\nDuring generation:' + generation +', processing document ' + md.getSrcPathInfo(srcPath)</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.artifact.errors.artifactGenerationError.message', this.message</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_172">error(</span><span class="pp-arg"> WizziInvalidRequest</span><span class="pp-pln">,</span><span class="pp-arg">  message</span><span class="pp-pln">,</span><span class="pp-arg">  srcPath</span><span class="pp-pln">,</span><span class="pp-arg">  ex </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.message = message</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_172">error(</span><span class="pp-arg"> RunnerServer</span><span class="pp-pln">,</span><span class="pp-arg">  message </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.message = message</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.artifactGenerationError</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> message</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> generation</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> error</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                </span><span class="pp-tag">new</span><span class="pp-pln"> md.ArtifactGenerationError(message, generation, node)</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> fail.warn(error)</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">throw</span><span class="pp-pln"> error</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.getSrcPathInfo</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> srcPath</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> typeof (srcPath) === 'string'</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> srcPath</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> (srcPath && (typeof (srcPath) === 'object'))</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> msg = md.getSrcPathInfoFromNode(srcPath)</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                    </span><span class="pp-tag">iif</span><span class="pp-pln"> msg</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                        </span><span class="pp-tag">then</span><span class="pp-pln"> msg</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                        </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> srcPath.toString()</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> 'unavailable'</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.getSrcPathInfoFromNode</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> msg</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> node</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> node.wzSourceLineInfo</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> info = node.wzSourceLineInfo</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> filePath = 'TODO'</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> node.wzSourceFilepath</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> filePath = node.wzSourceFilepath(info.sourceKey)</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> msg.push((' at row: ' + info.row))</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> msg.push((', col: ' + info.col))</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> msg.push((', source: ' + info.sourceKey))</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> msg.push((', in file: ' + filePath))</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                </span><span class="pp-tag">iif</span><span class="pp-pln"> msg.length == 0</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                    </span><span class="pp-tag">then</span><span class="pp-pln"> null</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> msg.join('')</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_172">error(</span><span class="pp-arg"> File</span><span class="pp-pln">,</span><span class="pp-arg">  message</span><span class="pp-pln">,</span><span class="pp-arg">  ex </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.message = message</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.inner = ex</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_139">
                    <div class="code-panel" id="d_139">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/meta/index.json.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">name</span><span class="pp-pln"> 'wizzi'</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">version</span><span class="pp-pln"> '0.5.4'</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">title</span><span class="pp-pln"> 'The wizzi factory'</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">license</span><span class="pp-pln"> 'MIT'</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">[</span><span class="pp-pln"> schemas</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_140">
                    <div class="code-panel" id="d_140">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/index/t/lightFunction.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> name, alias</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> ittfDocumentPath</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> context</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> typeof callback === 'undefined'</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> callback = options</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> options = {}</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> typeof callback === 'undefined'</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> callback = context</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> context = {}</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isObject(ittfDocumentPath)</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> ittfInfo</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> ittfDocumentInfoByPath</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentPath</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> ittfInfo.is_error</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> ittfInfo</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> name = ittfInfo.name</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> schema = ittfInfo.schema</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> md.createFactoryLight</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wf</span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                    </span><span class="pp-kwd">$hook</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.</span><span class="pp-kwd">${</span><span class="pp-expr">alias</span><span class="pp-kwd">}</span><span class="pp-pln"> = md.</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_141">
                    <div class="code-panel" id="d_141">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/index/_old_via_wizzi_instance_job.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.executeInstanceJob</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> request</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isFunction(callback) != true</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error('wizzi.executeInstanceJob requires a callback function')</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isObject(request) != true</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 999</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'wizzi/index/executeInstanceJob'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'The request parameter is required'</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isObject(request.config) != true</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 999</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'wizzi/index/executeInstanceJob'</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'The request.configOptions property is required'</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isObject(request.job) != true</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 999</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'wizzi/index/executeInstanceJob'</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'The request.wfschema property is required'</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> user = request.user || 'stefi'</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> role = request.role || 'admin'</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> storeKind = request.storeKind || 'filesystem'</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> VIA set request.globalContext = Object.assign({}, request.globalContext)</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'executeInstanceJob.user', user</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'executeInstanceJob.role', role</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'executeInstanceJob.storeKind', storeKind</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'executeInstanceJob.config', request.config</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'executeInstanceJob.job', request.job</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> md.startJobWizziFactoryInstance</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> user</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> role</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> request.config</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> request.job</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> notUsed </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> md.executeJob</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> request.job</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> notUsed </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> md.terminateJobWizziFactoryInstance</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.executeJob</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> jobRequest</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'executeJob.jobRequest', jobRequest</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> jobName = jobRequest.name</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> path = jobRequest.path</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> productionOptions = jobRequest.productionOptions</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> globalContext = jobRequest.globalContext</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> pman</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> job_wizziFactory.createProductionManager</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> productionOptions</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> globalContext</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> pman.addWfJob</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> wfjob</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> src path</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> pman.run</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> result</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> msg = 'WizziFactoryJob ' + jobName + '\nError running production: ' + path + '\n' + util.inspect(err, {depth: null})</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                        </span><span class="pp-tag">throw</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                            </span><span class="pp-tag">new</span><span class="pp-pln"> Error(msg)</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('run completed')</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> pman.persistToFile</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> result</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                            </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                                </span><span class="pp-tag">var</span><span class="pp-pln"> msg = 'WizziFactoryJob ' + jobName + '\nError persisting production to file: ' + path + '\n' + util.inspect(err, {depth: null})</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                                </span><span class="pp-tag">throw</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                                    </span><span class="pp-tag">new</span><span class="pp-pln"> Error(msg)</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('persistToFile completed')</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                            </span><span class="pp-tag">if</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, result)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_142">
                    <div class="code-panel" id="d_142">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/index/_old_via_wizzi_instance.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> TODO</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Why we cannot pass the wizziFactory instance created</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> for a job to the ProductionManager</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> avoiding a static object that must be guarded ???</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> job_wizziFactory = null</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> start a wizzi factory instance for a job execution</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.startJobWizziFactoryInstance</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> user</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> role</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> storeKind</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> configOptions</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> configJob</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> job_wizziFactory != null</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> TODO enque wizzi job requests</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error('A wizzi job already is running. Only one at a time is allowed.')</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'startJobWizziFactoryInstance.user', user</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'startJobWizziFactoryInstance.role', role</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'startJobWizziFactoryInstance.storeKind', storeKind</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'startJobWizziFactoryInstance.configOptions', configOptions</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'startJobWizziFactoryInstance.configJob', configJob</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> configOptions = Object.assign({}, configOptions)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> wfBaseFolder = configOptions.wfBaseFolder</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> wfBaseFolder && wfBaseFolder.length &gt; 0</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> md.config.set('wfBaseFolder', wfBaseFolder)</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> repoUri = configOptions.repoUri</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> repoBaseFolder = configOptions.repoBaseFolder</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> plugins</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'wizzi-core'</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in configOptions.plugins</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> plugins.indexOf(item) &lt; 0</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> plugins.push(item)</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'startJobWizziFactoryInstance.plugins', plugins</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactory.createFactory</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> user</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> role</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> repo</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind storeKind</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> plugins</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> items plugins</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> globalContext configJob.globalContext || {}</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziFactory </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">set</span><span class="pp-pln"> job_wizziFactory = wizziFactory</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">log</span><span class="pp-pln"> '*'</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">log</span><span class="pp-pln"> '* module ' + __filename</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                    </span><span class="pp-tag">log</span><span class="pp-pln"> '*'</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                    </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.yellow('WIZZI PRODUCTION INSTANCE STARTED')</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span><span class="pp-pln"> callback(null)</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> terminate a wizzi instance</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.terminateJobWizziFactoryInstance</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> job_wizziFactory = null</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.yellow('WIZZI PRODUCTION INSTANCE TERMINATED')</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_143">
                    <div class="code-panel" id="d_143">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/index/autostart.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> 'autostart' is executed at the end</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> of the loading of the Darvin module</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> only if a darvinfile.js is found in the</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> working directory.</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> For a manual start see the 'start' function.</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.autostart</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> darvinCWD = process.cwd()</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> darvinFilePath = path.join(runnerServerCWD, 'darvinfile.js')</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> md.file.isFile(darvinFilePath)</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> md.darvinfile = require(darvinFilePath)</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> console.log</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> md.chalk.yellow(('DARVIN FILE ' + darvinFilePath))</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_144">
                    <div class="code-panel" id="d_144">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/index/defaultFactory.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> DEFAULT_PLUGINS</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">[</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'wizzi-core'</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'wizzi-js'</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'wizzi-web'</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> DEFAULT_ARTIFACTS</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> css 'css/document'</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> graphql 'graphql/docs'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> html 'html/document'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> js 'js/module'</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> json 'json/document'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> scss 'scss/document'</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> text 'text/document'</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> xml 'xml/document'</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> DEFAULT_ARTIFACTS_FROM_SCHEMA_ROOT</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> css 'css/document'</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> graphql 'graphql/docs'</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> html 'html/document'</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> module 'js/module'</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> '{' 'json/document'</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> '[' 'json/document'</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> scss 'scss/document'</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> text 'text/document'</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> xml 'xml/document'</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> DEFAULT_MIME</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> css 'css'</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> graphql 'graphql'</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> html 'html'</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> js 'js'</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> json 'json'</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> scss 'scss'</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> text 'text'</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> xml 'xml'</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.createFactoryLight</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> typeof callback === 'undefined'</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> callback = options</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> options = {}</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> pluginItems = DEFAULT_PLUGINS.concat(options.plugins || [])</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> md.fsnoaclFactory</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span><span class="pp-pln"> plugins</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> items pluginItems</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> globalContext options.globalContext || {}</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { options</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> boolean raw</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { globalContext</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_140">lightFunction(</span><span class="pp-arg"> loadMTree</span><span class="pp-pln">,</span><span class="pp-arg">  mtree </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> options.raw</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wf.loadMTreeRaw</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentPath</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wf.loadMTree</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentPath</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> context</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string ittfDocumentPath</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> or</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { modelDescription</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string src</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string cwd</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string schema</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string format</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string exportName</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional - has meaning only for context models.</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> [ contexts</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional - has the same format of modelConfig</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> [ transformers</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { formatOptions</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> optional</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> boolean ittfSources</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # if true returns not the model but its ittf source documents.</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { globalContext</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_140">lightFunction(</span><span class="pp-arg"> loadModel</span><span class="pp-pln">,</span><span class="pp-arg">  model </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isObject(ittfDocumentPath)</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wf.loadModelFromConfig</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentPath</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentPath.globalContext || {}</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wf.loadModel</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> schema</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentPath</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> mTreeBuildUpContext context</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> globalContext {}</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { options</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { artifactContext</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { globalContext</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_140">lightFunction(</span><span class="pp-arg"> generateArtifact</span><span class="pp-pln">,</span><span class="pp-arg">  gen </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isObject(ittfDocumentPath)</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> artifactName = options.artifactName || DEFAULT_ARTIFACTS_FROM_SCHEMA_ROOT[ittfDocumentPath.wzElement]</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wf.generateArtifact</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentPath</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'unavailable'</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> artifactName</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> options.artifactContext || {}</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> artifactName = options.artifactName || getDefaultArtifact(schema)</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wf.loadModelAndGenerateArtifact</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentPath</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span><span class="pp-pln"> modelRequestContext</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> mTreeBuildUpContext context</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> artifactRequestContext options.artifactContext</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> artifactName</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_140">lightFunction(</span><span class="pp-arg"> generateWizziSchema</span><span class="pp-pln">,</span><span class="pp-arg">  schema </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wf.generateModelTypes</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentPath</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> options.outputPackagePath</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> name</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> context</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { options</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string name</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> integer indentSpaces</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> integer verbose</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { jobContext</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { globalContext</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_140">lightFunction(</span><span class="pp-arg"> executeWizziJob2</span><span class="pp-pln">,</span><span class="pp-arg">  job </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wf.executeJob</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> name options.name || name</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> path ittfDocumentPath</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> productionOptions</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> productionOptions</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> indentSpaces options.indentSpaces || 4</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> basedir __dirname</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> verbose options.verbose || 2</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> modelContext context</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> jobContext options.jobContext || {}</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L5"><span class="pp-ln"> 155 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { options</span></div><div class="L6"><span class="pp-ln"> 156 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string destFolder</span></div><div class="L7"><span class="pp-ln"> 157 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { globalContext</span></div><div class="L8"><span class="pp-ln"> 158 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_140">lightFunction(</span><span class="pp-arg"> generateFolderArtifacts</span><span class="pp-pln">,</span><span class="pp-arg">  genFolder </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln"> 159 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> items</span></div><div class="L0"><span class="pp-ln"> 160 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> folderFilesInfoByPath</span></div><div class="L1"><span class="pp-ln"> 161 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> path.dirname(ittfDocumentPath)</span></div><div class="L2"><span class="pp-ln"> 162 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> 'generateFolderArtifacts\n', JSON.stringify(items, null, 2)</span></div><div class="L3"><span class="pp-ln"> 163 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> async.map</span></div><div class="L4"><span class="pp-ln"> 164 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> items</span></div><div class="L5"><span class="pp-ln"> 165 </span><span class="pp-pln">            </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln"> 166 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> item</span></div><div class="L7"><span class="pp-ln"> 167 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln"> 168 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> item.isIttfDocument</span></div><div class="L9"><span class="pp-ln"> 169 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> md.gen</span></div><div class="L0"><span class="pp-ln"> 170 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> item.fullPath</span></div><div class="L1"><span class="pp-ln"> 171 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> context</span></div><div class="L2"><span class="pp-ln"> 172 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> artifactText</span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln"> 173 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> file.write</span></div><div class="L4"><span class="pp-ln"> 174 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L5"><span class="pp-ln"> 175 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> options.destFolder</span></div><div class="L6"><span class="pp-ln"> 176 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> item.destRelPath</span></div><div class="L7"><span class="pp-ln"> 177 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> artifactText</span></div><div class="L8"><span class="pp-ln"> 178 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln"> 179 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L0"><span class="pp-ln"> 180 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L1"><span class="pp-ln"> 181 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> options.destFolder</span></div><div class="L2"><span class="pp-ln"> 182 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> item.destRelPath</span></div><div class="L3"><span class="pp-ln"> 183 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln"> 184 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> file.copy</span></div><div class="L5"><span class="pp-ln"> 185 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> item.fullPath</span></div><div class="L6"><span class="pp-ln"> 186 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln"> 187 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> options.destFolder</span></div><div class="L8"><span class="pp-ln"> 188 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> item.destRelPath</span></div><div class="L9"><span class="pp-ln"> 189 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln"> 190 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L1"><span class="pp-ln"> 191 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L2"><span class="pp-ln"> 192 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> options.destFolder</span></div><div class="L3"><span class="pp-ln"> 193 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> item.destRelPath</span></div><div class="L4"><span class="pp-ln"> 194 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> result</span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln"> 195 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'result', result</span></div><div class="L6"><span class="pp-ln"> 196 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> getDefaultArtifact</span></div><div class="L7"><span class="pp-ln"> 197 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> schema</span></div><div class="L8"><span class="pp-ln"> 198 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> DEFAULT_ARTIFACTS[schema]</span></div><div class="L9"><span class="pp-ln"> 199 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> TODO this must be done in wizzi-repo on the store filesystem</span></div><div class="L0"><span class="pp-ln"> 200 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> let it be here to start development</span></div><div class="L1"><span class="pp-ln"> 201 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> folderFilesInfoByPath</span></div><div class="L2"><span class="pp-ln"> 202 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> folderPath</span></div><div class="L3"><span class="pp-ln"> 203 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> files</span></div><div class="L4"><span class="pp-ln"> 204 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> file.getFiles</span></div><div class="L5"><span class="pp-ln"> 205 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> folderPath</span></div><div class="L6"><span class="pp-ln"> 206 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> result = []</span></div><div class="L7"><span class="pp-ln"> 207 </span><span class="pp-pln">        </span><span class="pp-tag">foreach</span><span class="pp-pln"> f in files</span></div><div class="L8"><span class="pp-ln"> 208 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> result.push</span></div><div class="L9"><span class="pp-ln"> 209 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> fileInfoByPath</span></div><div class="L0"><span class="pp-ln"> 210 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L1"><span class="pp-ln"> 211 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> folderPath</span></div><div class="L2"><span class="pp-ln"> 212 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> f</span></div><div class="L3"><span class="pp-ln"> 213 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> folderPath</span></div><div class="L4"><span class="pp-ln"> 214 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> result</span></div><div class="L5"><span class="pp-ln"> 215 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> ittfDocumentInfoByPath</span></div><div class="L6"><span class="pp-ln"> 216 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> filePath</span></div><div class="L7"><span class="pp-ln"> 217 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> result = fileInfoByPath(filePath)</span></div><div class="L8"><span class="pp-ln"> 218 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> result.isIttfDocument</span></div><div class="L9"><span class="pp-ln"> 219 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> result</span></div><div class="L0"><span class="pp-ln"> 220 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln"> 221 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln"> 222 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln"> 223 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> is_error true</span></div><div class="L4"><span class="pp-ln"> 224 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> message 'The file is not an ittfdocument: ' + result.fullPath</span></div><div class="L5"><span class="pp-ln"> 225 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> fileInfoByPath</span></div><div class="L6"><span class="pp-ln"> 226 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> filePath</span></div><div class="L7"><span class="pp-ln"> 227 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> baseFolder</span></div><div class="L8"><span class="pp-ln"> 228 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> typeof baseFolder === 'undefined'</span></div><div class="L9"><span class="pp-ln"> 229 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> baseFolder = path.dirname(filePath)</span></div><div class="L0"><span class="pp-ln"> 230 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> filePath = normalize(filePath)</span></div><div class="L1"><span class="pp-ln"> 231 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> basename = path.basename(filePath)</span></div><div class="L2"><span class="pp-ln"> 232 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> dirname = path.dirname(filePath)</span></div><div class="L3"><span class="pp-ln"> 233 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> relFolder</span></div><div class="L4"><span class="pp-ln"> 234 </span><span class="pp-pln">            </span><span class="pp-tag">iif</span><span class="pp-pln"> path.dirname(filePath).length &gt; baseFolder.length</span></div><div class="L5"><span class="pp-ln"> 235 </span><span class="pp-pln">                </span><span class="pp-tag">then</span><span class="pp-pln"> path.dirname(filePath).substr(baseFolder.length + 1)</span></div><div class="L6"><span class="pp-ln"> 236 </span><span class="pp-pln">                </span><span class="pp-tag">else</span><span class="pp-pln"> ''</span></div><div class="L7"><span class="pp-ln"> 237 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> fileUri</span></div><div class="L8"><span class="pp-ln"> 238 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> filePath.substr</span></div><div class="L9"><span class="pp-ln"> 239 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ss = basename.split('.')</span></div><div class="L0"><span class="pp-ln"> 240 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> ss[ss.length-1] === 'ittf'</span></div><div class="L1"><span class="pp-ln"> 241 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> name = ss.slice(0, ss.length-2).join('.')</span></div><div class="L2"><span class="pp-ln"> 242 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> schema = ss[ss.length-2]</span></div><div class="L3"><span class="pp-ln"> 243 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> mime = DEFAULT_MIME[schema] || schema</span></div><div class="L4"><span class="pp-ln"> 244 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln"> 245 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln"> 246 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> name name</span></div><div class="L7"><span class="pp-ln"> 247 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> basename basename</span></div><div class="L8"><span class="pp-ln"> 248 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> isIttfDocument true</span></div><div class="L9"><span class="pp-ln"> 249 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> isFragment filePath.indexOf('/t/') &gt; -1</span></div><div class="L0"><span class="pp-ln"> 250 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> schema schema</span></div><div class="L1"><span class="pp-ln"> 251 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> mime mime</span></div><div class="L2"><span class="pp-ln"> 252 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> relFolder relFolder</span></div><div class="L3"><span class="pp-ln"> 253 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> fullPath filePath</span></div><div class="L4"><span class="pp-ln"> 254 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> destBasename name + '.' + mime</span></div><div class="L5"><span class="pp-ln"> 255 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> destRelPath</span></div><div class="L6"><span class="pp-ln"> 256 </span><span class="pp-pln">                        </span><span class="pp-tag">iif</span><span class="pp-pln"> relFolder.length &gt; 0</span></div><div class="L7"><span class="pp-ln"> 257 </span><span class="pp-pln">                            </span><span class="pp-tag">then</span><span class="pp-pln"> relFolder + '/' + name + '.' + mime</span></div><div class="L8"><span class="pp-ln"> 258 </span><span class="pp-pln">                            </span><span class="pp-tag">else</span><span class="pp-pln"> name + '.' + mime</span></div><div class="L9"><span class="pp-ln"> 259 </span><span class="pp-pln">        </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln"> 260 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L1"><span class="pp-ln"> 261 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln"> 262 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> name ss.slice(0, ss.length-1).join('.')</span></div><div class="L3"><span class="pp-ln"> 263 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> basename basename</span></div><div class="L4"><span class="pp-ln"> 264 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> isIttfDocument false</span></div><div class="L5"><span class="pp-ln"> 265 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> schema null</span></div><div class="L6"><span class="pp-ln"> 266 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> mime ss[ss.length-1]</span></div><div class="L7"><span class="pp-ln"> 267 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> relFolder relFolder</span></div><div class="L8"><span class="pp-ln"> 268 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> fullPath filePath</span></div><div class="L9"><span class="pp-ln"> 269 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> destBasename basename</span></div><div class="L0"><span class="pp-ln"> 270 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> destRelPath</span></div><div class="L1"><span class="pp-ln"> 271 </span><span class="pp-pln">                        </span><span class="pp-tag">iif</span><span class="pp-pln"> relFolder.length &gt; 0</span></div><div class="L2"><span class="pp-ln"> 272 </span><span class="pp-pln">                            </span><span class="pp-tag">then</span><span class="pp-pln"> relFolder + '/' + basename</span></div><div class="L3"><span class="pp-ln"> 273 </span><span class="pp-pln">                            </span><span class="pp-tag">else</span><span class="pp-pln"> basename</span></div><div class="L4"><span class="pp-ln"> 274 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> normalize</span></div><div class="L5"><span class="pp-ln"> 275 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> filepath</span></div><div class="L6"><span class="pp-ln"> 276 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> verify.replaceAll(filepath, '\\', '/')</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_145">
                    <div class="code-panel" id="d_145">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/index/f-artifact-generation.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> artifactGenerators = {}</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Async generate an artifact</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Generators are searched in the PluginsManager</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> @param {Object} modelContext</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> A WizziModel or any other value of type Object used to drive the artifact generation.</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> The object may a contain options parameter and or a structure</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> of other objects or WizziModels.</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> @param {String} sourceIttfDocumentInfo</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> For trace and documentation purposes.</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> @param {String} generationName</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> The name for retrieving the ArtifactGeneration module.</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> @param {Object} emitContext</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> The emitContext</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> . collects the generated elements of an artifact generation</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> . may be used as a service container during generation.</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> For now the wizzi/artifact/genContext is used as emitContext.</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> TODO revise and rename the wizzi/artifact/genContext module</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> The emitContext parameter may be used to pass context data to the artifact generator;</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> It may contain a "__data" property that will be set on the genContext "data" property.</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> @param {Function} callback</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.doArtifactGeneration</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">function</span><span class="pp-pln"> doArtifactGeneration</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> modelContext</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> sourceIttfDocumentInfo</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> generationName</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> emitContext</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !callback</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> callback = emitContext</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> emitContext = {}</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !emitContext</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> emitContext = {}</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> generator = artifactGenerators[generationName]</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !generator</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> generator = md.pluginsManager.getArtifactGenerator(generationName)</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> generator == null</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> error = new errors.NotFoundError('ArtifactGenerator', generationName, sourceIttfDocumentInfo)</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> fail.warn(error.message)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> callback(error)</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">artifactGenerators[generationName]</span><span class="pp-pln"> = generator</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> genContext = new GenContext({ options: options(null, { data: emitContext.__data }) })</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">new</span><span class="pp-pln"> generator.gen</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> modelContext</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> genContext</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> err.srcPath = sourceIttfDocumentInfo</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> fail.warn(util.inspect(err, { depth: null}))</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span><span class="pp-pln"> callback(err)</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> sw = new StringWriter()</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> genContext.toStream(sw)</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, sw.toString())</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_146">
                    <div class="code-panel" id="d_146">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/index/f-ittf-loading.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Simply load an MTree from an IttfDocument</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> param ittfDocumentUri      - the uri of the primary IttfDocument that declares the model</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> param evaluationContext    - the MTree evaluation context</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> param callback</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.ittf</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> evaluationContext</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ittf.loadModel</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> evaluationContext</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> mTree</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                        </span><span class="pp-tag">set</span><span class="pp-pln"> err.srcPath = ittfDocumentUri</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> fail.warn(util.inspect(err, { depth: null}))</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span><span class="pp-pln"> callback(err)</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> ittfmodel = mTree.nodes[0]</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'md.ittf.ittfDocumentUri', ittfDocumentUri, ittfmodel</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, ittfmodel)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_147">
                    <div class="code-panel" id="d_147">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/index/f-model-factory.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> modelFactories = {}</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Retrieve a WizziModelFactory by its wfschema name</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Model factories are searched in the PluginsManager</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.getLoadModel</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> schemaName</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> factory = modelFactories[schemaName]</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !factory</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> factory = md.pluginsManager.getLoadModel(schemaName)</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> factory != null</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> modelFactories[schemaName] = factory</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> factory</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> null</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_148">
                    <div class="code-panel" id="d_148">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/index/f-model-transformation.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> modelTransformers = {}</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Async execute a model transformation</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Transformers are searched in the PluginsManager</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.doModelTransformation</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> model</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> transformerName</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> context</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> transformer = modelTransformers[transformerName]</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !transformer</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> transformer = md.pluginsManager.getModelTransformer(transformerName)</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> transformer == null</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> error = new errors.NotFoundError('doModelTransformation', transformerName, model.uri)</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> wizzi.fail.warn(error.message)</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> callback(error)</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> modelTransformers[transformerName] = transformer</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">new</span><span class="pp-pln"> transformer.trans</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> model</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> context</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_149">
                    <div class="code-panel" id="d_149">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/index/f-schema-object.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> schemaDefinitions = {}</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Retrieve a WizziSchema definition in JSON format</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> schemaDefinitions are searched in the pluginsManager</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.getWizziSchemaDefinition</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> schemaName</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> definition = schemaDefinitions[schemaName]</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> !definition</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> definition = md.pluginsManager.getWizziSchemaDefinition(schemaName)</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> definition != null</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> schemaDefinitions[schemaName] = definition</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> definition</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> null</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_150">
                    <div class="code-panel" id="d_150">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/index/pluginsManager.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.loadPlugins</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_151">
                    <div class="code-panel" id="d_151">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/index/start_runnerServer.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> startRunnerServer is async.</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Can be used at startup to load wizzi models, that is an async process,</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> implementing the onStart and onPrepare callbacks in the wizzifile.</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> During an mTree evaluation the calls to runnerServer</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> must be sync. Both $.api(name, query) and $.model(name, query)</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> are sync methods that operate on wizzi models or POJO</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> previously loaded and/or prepared.</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.startRunnerServer</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">string</span><span class="pp-pln"> user</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                    </span><span class="pp-tag">optional</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">string</span><span class="pp-pln"> role</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">optional</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">callback</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> runnerServerCWD = (options.cwd || process.cwd())</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> wizziFilePath = path.join(runnerServerCWD, 'wizzifile.js')</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> file.isFile(wizziFilePath)</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> md.wizzifile = require(wizziFilePath)</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.yellow('WIZZI FILE FOUND on path: ' + wizziFilePath)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> md.wizzifile.onConfig</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> md.wizzifile.onConfig</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> config</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> notUsed </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                            </span><span class="pp-tag">var</span><span class="pp-pln"> RunnerServer = require('./lib/services/runnerServer')</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> RunnerServer.init</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> runnerServerCWD</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> options.user</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> options.role</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                            </span><span class="pp-tag">if</span><span class="pp-pln"> md.wizzifile.onStart</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> md.wizzifile.onStart</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> RunnerServer.instance</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> config</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                                    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> notUsed </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                                        </span><span class="pp-tag">if</span><span class="pp-pln"> md.wizzifile.onPrepare</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> RunnerServer.instance.callOnPrepare</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> md.wizzifile</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> config</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                                                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> notUsed </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                                                    </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.yellow('WIZZI RUNNER SERVER STARTED ON FOLDER ' + runnerServerCWD)</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                                                    </span><span class="pp-tag">return</span><span class="pp-pln"> callback(null)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                                        </span><span class="pp-tag">else</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                                            </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.yellow('WIZZI RUNNER SERVER STARTED ON FOLDER ' + runnerServerCWD)</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                                            </span><span class="pp-tag">return</span><span class="pp-pln"> callback(null)</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                            </span><span class="pp-tag">else</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                                </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.yellow('WIZZI RUNNER SERVER STARTED ON FOLDER ' + runnerServerCWD)</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span><span class="pp-pln"> callback(null)</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                    </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.yellow('Method wizzifile.onConfig NOT FOUND. RUNNER SERVER NOT STARTED.')</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span><span class="pp-pln"> callback(null)</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.yellow('WIZZI FILE NOT FOUND. RUNNER SERVER NOT STARTED.')</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> callback(null)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_152">
                    <div class="code-panel" id="d_152">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/index/start.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.createWizziFactory</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> store = options.store</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> create store</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> storeOptions = options.plugins</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> PluginsManager = require('./services/pluginsManager')</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> pluginsManager</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_153">
                    <div class="code-panel" id="d_153">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/index/wizzi_job.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { request</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string user</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> default stefi</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string role</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> default admin</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string storeKind</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> default filesystem</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { config</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string wfBaseFolder</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string storeUri</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # when storeKind == 'mongodb'</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string storeBaseFolder</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # when storeKind == 'mongodb'</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string pluginsBaseFolder</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> [ plugins</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string name</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { job</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string name</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # label for messages</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string ittfDocumentUri</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # 'wfjob' model primary ittf document</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { productionOptions</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> integer indentSpaces</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> default 4</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string basedir</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> TODO explain where used</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> integer verbose</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> default 2</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { dumps</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # dumps to files of transient objects for debug purposes</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string dumpsBaseFolder</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { mTreeBuildupJsWizziScript</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> boolean dump</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string dumpsBaseFolder</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { mixedMTree</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> boolean dump</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string dumpsBaseFolder</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { evaluatedMTree</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> boolean dump</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string dumpsBaseFolder</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { globalContext</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # Every wizzi factory loading, transformation and generation</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # executed by this job</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # will have the properties of this object injected in its context</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # at the global level.</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.executeWizziJob</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> request</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">{</span><span class="pp-pln"> config</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span><span class="pp-pln"> plugins</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                </span><span class="pp-tag">{</span><span class="pp-pln"> job</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">callback</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> check_cb( callback, executeWizziJob )</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> check_cb_object( request, executeWizziJob )</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> check_cb_object( request.config, executeWizziJob )</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> check_cb_object( request.job, executeWizziJob )</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> user = request.user || 'stefi'</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> role = request.role || 'admin'</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> storeKind = request.storeKind || 'filesystem'</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> jobName = request.job.name</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> '='</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> '======== v5.wizzi.executeWizziJob ===== Start job: ' + jobName + ' ============='</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> '- Executor module path ', __filename</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> '- Job source path ', request.job.ittfDocumentUri</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> '- user', user + '/' + role</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> '- storeKind', storeKind</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> request.config.wfBaseFolder</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> '- wfBaseFolder', request.config.wfBaseFolder</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> request.config.storeUri</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> '- storeUri', request.config.storeUri</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> request.config.storeBaseFolder</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> '- storeBaseFolder', request.config.storeBaseFolder</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> requestConfig = Object.assign({}, request.config)</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> wfBaseFolder = requestConfig.wfBaseFolder</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> wfBaseFolder && wfBaseFolder.length &gt; 0</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> FIXME property wfBaseFolder in module wizzi/config</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> should be part of the wizzi.wizziFactory instance.</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> Find where it is referenced.</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> md.config.set('wfBaseFolder', wfBaseFolder)</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> '- plugins'</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> plugins</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in requestConfig.plugins</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                </span><span class="pp-tag">if</span><span class="pp-pln"> plugins.indexOf(item) &lt; 0</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> plugins.push(item)</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                    </span><span class="pp-tag">log</span><span class="pp-pln"> '  ', item</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> '- pluginsBaseFolder', requestConfig.pluginsBaseFolder || process.cwd()</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactory.createFactory</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> user</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> role</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> repo</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind storeKind</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> storeUri requestConfig.storeUri</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> storeBaseFolder requestConfig.storeBaseFolder</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> plugins</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> items plugins</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> pluginsBaseFolder requestConfig.pluginsBaseFolder || process.cwd()</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> globalContext request.job.globalContext || {}</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> executeWizziJob_step2</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> request.job</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> executeWizziJob_step2</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> jobRequest</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziFactoryInstance </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> jobName = jobRequest.name</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> jobPath = jobRequest.ittfDocumentUri</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">                </span><span class="pp-tag">+</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> '='</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> '======== v5.wizzi.executeWizziJob_step2 ===== job: ' + jobName + ' ============='</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> '='</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">                </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_171">checked_call(</span><span class="pp-arg"> pman</span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactoryInstance.createProductionManager</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> jobRequest.productionOptions</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> jobRequest.globalContext</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">                </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_171">checked_call(</span><span class="pp-arg"> notUsed</span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> pman.addJobRequest</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wfjob</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">                                </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> ittfDocumentUri jobPath</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">                </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> pman.run</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">                    </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">                        </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">                        </span><span class="pp-tag">param</span><span class="pp-pln"> result</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">                        </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'RunError'</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'executeWizziJob_step2'</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'Running wizzi job ' + jobName + ', source: ' + jobPath</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> err</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">                        </span><span class="pp-tag">log</span><span class="pp-pln"> '='</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('======== v5.wizzi.executeWizziJob. Job: ' + jobName + '. Run completed')</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">                        </span><span class="pp-tag">log</span><span class="pp-pln"> '='</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> pman.persistToFile</span></div><div class="L5"><span class="pp-ln"> 155 </span><span class="pp-pln">                            </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln"> 156 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L7"><span class="pp-ln"> 157 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> result</span></div><div class="L8"><span class="pp-ln"> 158 </span><span class="pp-pln">                                </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L9"><span class="pp-ln"> 159 </span><span class="pp-pln">                                    </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln"> 160 </span><span class="pp-pln">                                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln"> 161 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L2"><span class="pp-ln"> 162 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'RunError'</span></div><div class="L3"><span class="pp-ln"> 163 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'executeWizziJob_step2'</span></div><div class="L4"><span class="pp-ln"> 164 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'Persisting to file wizzi job ' + jobName + ', source: ' + jobPath</span></div><div class="L5"><span class="pp-ln"> 165 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> err</span></div><div class="L6"><span class="pp-ln"> 166 </span><span class="pp-pln">                                </span><span class="pp-tag">log</span><span class="pp-pln"> '='</span></div><div class="L7"><span class="pp-ln"> 167 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> log.success('======== v5.wizzi.executeWizziJob. Job: ' + jobName + '.  PersistToFile completed')</span></div><div class="L8"><span class="pp-ln"> 168 </span><span class="pp-pln">                                </span><span class="pp-tag">log</span><span class="pp-pln"> '='</span></div><div class="L9"><span class="pp-ln"> 169 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> pman.terminate</span></div><div class="L0"><span class="pp-ln"> 170 </span><span class="pp-pln">                                </span><span class="pp-tag">if</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln"> 171 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, result)</span></div><div class="L2"><span class="pp-ln"> 172 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.printWizziJobError</span></div><div class="L3"><span class="pp-ln"> 173 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln"> 174 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> jobName</span></div><div class="L5"><span class="pp-ln"> 175 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L6"><span class="pp-ln"> 176 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> err.WizziIndexStack = (new Error()).stack</span></div><div class="L7"><span class="pp-ln"> 177 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> "\n"</span></div><div class="L8"><span class="pp-ln"> 178 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> "====================================================================================================\n"</span></div><div class="L9"><span class="pp-ln"> 179 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> "FATAL ERROR : v5.executing wizzi instance job: " + jobName</span></div><div class="L0"><span class="pp-ln"> 180 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> "\n"</span></div><div class="L1"><span class="pp-ln"> 181 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> "Error message:\n"</span></div><div class="L2"><span class="pp-ln"> 182 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> err.message + "\n"</span></div><div class="L3"><span class="pp-ln"> 183 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> "Error details:\n"</span></div><div class="L4"><span class="pp-ln"> 184 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> err + "\n"</span></div><div class="L5"><span class="pp-ln"> 185 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> "FATAL ERROR - END\n"</span></div><div class="L6"><span class="pp-ln"> 186 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> "====================================================================================================\n"</span></div><div class="L7"><span class="pp-ln"> 187 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> "\n"</span></div><div class="L8"><span class="pp-ln"> 188 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> process.exit(999)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_154">
                    <div class="code-panel" id="d_154">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/index/wizzi_modelTypes.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> PARAMS</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { request</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string user</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> default stefi</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string role</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> default admin</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string storeKind</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> default filesystem</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { configOptions</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { wfschema</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string name</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string ittfDocumentUri</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string outputPackageFolder</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.generateWizziModelTypes</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> request</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_164">check_cb(</span><span class="pp-arg"> callback</span><span class="pp-pln">,</span><span class="pp-arg">  generateWizziModelTypes </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_163">check_cb_object(</span><span class="pp-arg"> request</span><span class="pp-pln">,</span><span class="pp-arg">  generateWizziModelTypes </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_163">check_cb_object(</span><span class="pp-arg"> request.configOptions</span><span class="pp-pln">,</span><span class="pp-arg">  generateWizziModelTypes </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_163">check_cb_object(</span><span class="pp-arg"> request.wfschema</span><span class="pp-pln">,</span><span class="pp-arg">  generateWizziModelTypes </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> TODO implement jsWizzi : _.toIdentifier(varName)</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> TODO check_cb_not_empty( request.wfschema.name, generateWizziModelTypes )</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> TODO check_cb_not_empty( request.wfschema.ittfDocumentUri, generateWizziModelTypes )</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> TODO check_cb_not_empty( request.wfschema.outputPackageFolder, generateWizziModelTypes )</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> user = request.user || 'stefi'</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> role = request.role || 'admin'</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> storeKind = request.storeKind || 'filesystem'</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> request.wfschema.mTreeBuildUpContext = Object.assign({}, request.wfschema.mTreeBuildUpContext)</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> request.globalContext = Object.assign({}, request.globalContext)</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'generateWizziModelTypes'</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> '- user', user +'/' + role</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> '- storeKind', storeKind</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> '- configOptions', request.configOptions</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> '- wfschema.name', request.wfschema.name</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> '- wfschema.ittfDocumentUri', request.wfschema.ittfDocumentUri</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> '- wfschema.outputPackageFolder', request.wfschema.outputPackageFolder</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> repoUri = request.configOptions.repoUri</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> repoBaseFolder = request.configOptions.repoBaseFolder</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> plugins</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'wizzi-core'</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> request.configOptions.plugins</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">foreach</span><span class="pp-pln"> item in request.configOptions.plugins</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> plugins.indexOf(item) &lt; 0</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> plugins.push(item)</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> '- plugins', plugins</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">for</span><span class="pp-pln"> var k in request.wfschema.mTreeBuildUpContext</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> '- wfschemaContext property', k</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">for</span><span class="pp-pln"> var k in request.globalContext</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> '- globalContext property', k</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactory.createFactory</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> user</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> role</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> repo</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind storeKind</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> plugins</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> items plugins</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> pluginsBaseFolder request.configOptions.pluginsBaseFolder || process.cwd()</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> globalContext request.globalContext</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> wizziFactory </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> Now we can generate the wizzi model types</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                    </span><span class="pp-tag">#</span><span class="pp-pln"> They will be written in the folder passed as second parameter.</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                    </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.yellow('STARTING WIZZI MODEL TYPES GENERATION FOR SCHEMA ' + request.wfschema.name)</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactory.generateModelTypes</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> request.wfschema.ittfDocumentUri</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> request.wfschema.outputPackageFolder</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> request.wfschema.name</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> request.wfschema.mTreeBuildUpContext</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                            </span><span class="pp-tag">log</span><span class="pp-pln"> chalk.green('WIZZI MODEL TYPES GENERATED FOR SCHEMA ' + request.wfschema.name)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_155">
                    <div class="code-panel" id="d_155">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/t/readme_content.md.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_156">
                    <div class="code-panel" id="d_156">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/.gitignore.text.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a" data-frag-id="d_246">common/proj_gitignore(</span><span class="pp-mix">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_157">
                    <div class="code-panel" id="d_157">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/index.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span><span class="pp-pln"> wizzi</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> util</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> path</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> chalk</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> async</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> file = require('wizzi-utils').file</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> config = require('wizzi-utils').config</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> log = require('./lib/util/log')(module)</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> acl = require('./lib/acl')</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> genContext = require('./lib/artifact/genContext')</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> productionOptions = require('./lib/production/options')</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> ProductionManager = require('./lib/production/manager')</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> Filesystem = require('./lib/io/filesystem')</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> wizziFactory = require('./lib/services/wizziFactory')</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.file = require('wizzi-utils').file</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.verify = verify</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.config = config</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.genContext = genContext</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.acl = acl</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.productionOptions = productionOptions</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.Filesystem = Filesystem</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.JsonComponents = require('wizzi-repo').JsonComponents</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string userid</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string role</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { options</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { repo</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string storeKind</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> oneOf filesystem, mongodb, localstorage</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { plugins</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> [ items</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string pluginName</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { globalContext</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { dumps</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string dumpsBaseFolder</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { mTreeBuildUpScript</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> boolean dump</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string dumpsBaseFolder</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.createFactory</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">function</span><span class="pp-pln"> createFactory</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">string</span><span class="pp-pln"> userid</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">string</span><span class="pp-pln"> role</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">callback</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> check_cb( callback, createFactory )</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> check_cb_object( options, createFactory )</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactory.createFactory</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> userid</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> role</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.fsnoaclFactory</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> typeof(callback) === 'undefined'</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> callback = options</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> options = {}</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_164">check_cb(</span><span class="pp-arg"> callback</span><span class="pp-pln">,</span><span class="pp-arg">  createFactory </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_163">check_cb_object(</span><span class="pp-arg"> options</span><span class="pp-pln">,</span><span class="pp-arg">  createFactory </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> options.repo</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind 'filesystem'</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> md.createFactory</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'stefi'</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'admin'</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.dbnoaclFactory</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">            </span><span class="pp-tag">string</span><span class="pp-pln"> storeUri</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">            </span><span class="pp-tag">string</span><span class="pp-pln"> storeBaseFolder</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">            </span><span class="pp-tag">callback</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.index.dbnoaclFactory.storeUri,storeBaseFolder', storeUri, storeBaseFolder</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> options.repo</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind 'mongodb'</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> storeUri storeUri</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> storeBaseFolder storeBaseFolder</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> md.createFactory</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'stefi'</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'admin'</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.jsonnoaclFactory</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">            </span><span class="pp-tag">{</span><span class="pp-pln"> options</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                </span><span class="pp-tag">{</span><span class="pp-pln"> jsonFsData</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">            </span><span class="pp-tag">callback</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.index.jsonnoaclFactory.jsonFsData', options.jsonFsData</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">            </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> options.repo</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind 'json'</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> storeJsonFsData options.jsonFsData</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> md.createFactory</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'stefi'</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'admin'</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_151"> index/start_runnerServer</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_153"> index/wizzi_job</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">    </span><span class="pp-kwd">$$</span><span class="pp-pln"> OLD VIA $include index/wizzi_instance</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">    </span><span class="pp-kwd">$$</span><span class="pp-pln"> OLD VIA $include index/wizzi_instance_job</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_154"> index/wizzi_modelTypes</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_144"> index/defaultFactory</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_158">
                    <div class="code-panel" id="d_158">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/license.text.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a" data-frag-id="d_247">common/mit_license(</span><span class="pp-arg"> 1982 - 2018 The Wizzi Team </span><span class="pp-mix">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_159">
                    <div class="code-panel" id="d_159">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/package.json.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a" data-frag-id="d_248">common/kernel_package(</span><span class="pp-arg"> wizzi</span><span class="pp-pln">,</span><span class="pp-arg">  ${wfpackage.version}</span><span class="pp-pln">,</span><span class="pp-arg">  ${wfpackage.title}.</span><span class="pp-pln">,</span><span class="pp-arg">  ${wfpackage.license}  </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">extsprintf</span><span class="pp-pln"> "^1.2.0"</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">wizzi-mtree</span><span class="pp-pln"> "latest"</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">wizzi-repo</span><span class="pp-pln"> "latest"</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">wizzi-core</span><span class="pp-pln"> "latest"</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">wizzi-js</span><span class="pp-pln"> "latest"</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">wizzi-web</span><span class="pp-pln"> "latest"</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-kwd">$append</span><span class="pp-pln"> devDependencies</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_160">
                    <div class="code-panel" id="d_160">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/root/readme.md.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a" data-frag-id="d_249">common/kernel(</span><span class="pp-arg"> wizzi</span><span class="pp-pln">,</span><span class="pp-arg">  ${wfpackage.title}  </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">h2</span><span class="pp-pln"> Features</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Exposes the main wizzi factory service components:</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">ul</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> WizziFactory class</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> PluginsManager class</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> RunnerServer class</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">h2</span><span class="pp-pln"> The WizziFactory class</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Is the main access point to wizzi factory services. Can be</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> used to</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">ul</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> Execute</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">a</span><span class="pp-pln"> wizzi model types generations</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">href</span><span class="pp-pln"> #</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">span</span><span class="pp-pln"> .</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> Execute artifact generations</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> Execute</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">a</span><span class="pp-pln"> wizzi jobs</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">href</span><span class="pp-pln"> #</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">span</span><span class="pp-pln"> .</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Instance creation</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">    </span><span class="pp-tag">js</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> wizzi.createFactory(</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> userid,</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> role,</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> options,</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> );</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Methods</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">    </span><span class="pp-tag">js</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> wizziFactoryInstance.generateModelTypes(</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> );</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> wizziFactoryInstance.generateMTree(</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> );</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> wizziFactoryInstance.generateWizziModel(</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> );</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> wizziFactoryInstance.generateArtifact(</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> );</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> wizziFactoryInstance.executeWizziJob(</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> );</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">    </span><span class="pp-tag">h2</span><span class="pp-pln"> The PluginsManager class</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> The RunnerServer class</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">    </span><span class="pp-tag">h2</span><span class="pp-pln"> Default factory (quick starter)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Loads a wizzi magical tree (mTree)</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">    </span><span class="pp-tag">js</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> var wizzi = require('wizzi');</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> var ittfSourcePath = '...';</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> var context = {</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> ...</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> };</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> var options = {</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> ...</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> };</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> wizzi.mtree(</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> ittfSourcePath,</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> context,</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> options,</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> function(err, mTree) {</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> ...</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> });</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Loads a wizzi model</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">    </span><span class="pp-tag">js</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> var wizzi = require('wizzi');</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> var ittfSourcePath = '...';</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> var context = {</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> ...</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> };</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> var options = {</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> ...</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> };</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> wizzi.model(</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> ittfSourcePath,</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> context,</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> options,</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> function(err, wizziModel) {</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> ...</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> });</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">    </span><span class="pp-tag">h3</span><span class="pp-pln"> Generates an artifact</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">    </span><span class="pp-tag">js</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> var wizzi = require('wizzi');</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> var ittfSourcePath = '...';</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> var artifactName = '...';</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> var modelContext = {</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> ...</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> };</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> var artifactContext = {</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> ...</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> };</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> var options = {</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> ...</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> };</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">        </span><span class="pp-tag">+</span><span class="pp-pln"> wizzi.model(</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> ittfSourcePath,</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> artifactName,</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> context,</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> options,</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> function(err, artifactText) {</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> ...</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> });</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_161">
                    <div class="code-panel" id="d_161">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/check_cb_function.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> varName, method|@@null, type|Parameter</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isFunction(</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">) == false</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 101</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">method</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> "</span><span class="pp-kwd">${</span><span class="pp-expr">type</span><span class="pp-kwd">}</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">' must be a function. Received: " + util.inspect(</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">, { depth: null })</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_162">
                    <div class="code-panel" id="d_162">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/check_cb_not_empty.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> varName, method|@@null, type|Parameter</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> resolved_</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln"> = verify.resolveToString(</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">)</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'resolved_</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">', resolved_</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">if</span><span class="pp-pln"> resolved_</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln"> == null</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 101</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">method</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> "</span><span class="pp-kwd">${</span><span class="pp-expr">type</span><span class="pp-kwd">}</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">' must be a not empty string. Received: " + util.inspect(</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">, { depth: null })</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-kwd"> ${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln"> = resolved_</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_163">
                    <div class="code-panel" id="d_163">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/check_cb_object.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> varName, method|@@null, type|Parameter</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isObject(</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">) == false</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 101</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">method</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> "</span><span class="pp-kwd">${</span><span class="pp-expr">type</span><span class="pp-kwd">}</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">' must be an object. Received: " + util.inspect(</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">, { depth: null })</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_164">
                    <div class="code-panel" id="d_164">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/check_cb.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> varName, method|@@null, type|Parameter</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isFunction(</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">) == false</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">throw</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">new</span><span class="pp-pln"> Error</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 101</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">method</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> "</span><span class="pp-kwd">${</span><span class="pp-expr">type</span><span class="pp-kwd">}</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">' must be a function. Received: " + util.inspect(</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">, { depth: null })</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_165">
                    <div class="code-panel" id="d_165">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/check_r_not_empty.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> varName, method|@@null, type|Parameter</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> resolved_</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln"> = verify.resolveToString(</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">)</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'resolved_</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">', resolved_</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">if</span><span class="pp-pln"> resolved_</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln"> == null</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 101</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">method</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> "</span><span class="pp-kwd">${</span><span class="pp-expr">type</span><span class="pp-kwd">}</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">' must be a not empty string. Received: " + util.inspect(</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">, { depth: null })</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">else</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-kwd"> ${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln"> = resolved_</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_166">
                    <div class="code-panel" id="d_166">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/check_wz_callback.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> method</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">if</span><span class="pp-pln"> typeof(callback) !== 'function'</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">throw</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">new</span><span class="pp-pln"> Error</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'InvalidArgument'</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">method</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'The callback parameter must be a function. Received: ' + callback</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_167">
                    <div class="code-panel" id="d_167">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/check_wz_not_empty.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> varName, method</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> resolved_</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln"> = verify.resolveToString(</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">)</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> log 'resolved_</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">', resolved_</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">if</span><span class="pp-pln"> verify.isNotEmpty(resolved_</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">) === false</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'InvalidArgument'</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">method</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> parameter '</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> message "'</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">' must be a not empty string. Received: " + util.inspect(</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">, { depth: null })</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">else</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-kwd"> ${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln"> = resolved_</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_168">
                    <div class="code-panel" id="d_168">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/checked_call_r_set.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> varName</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-kwd"> ${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">if</span><span class="pp-kwd"> ${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln"> && </span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">.__is_error</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-kwd"> ${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_169">
                    <div class="code-panel" id="d_169">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/checked_call_r.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> varName</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-kwd"> ${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">if</span><span class="pp-kwd"> ${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln"> && </span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">.__is_error</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-kwd"> ${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_170">
                    <div class="code-panel" id="d_170">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/checked_call_set.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> varName, message|@@null</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-kwd"> ${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">if</span><span class="pp-kwd"> ${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln"> && </span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">.__is_error</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> log 'wizzi.checked_call_set.__is_error </span><span class="pp-kwd">${</span><span class="pp-expr">message</span><span class="pp-kwd">}</span><span class="pp-pln">', </span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> callback(</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_171">
                    <div class="code-panel" id="d_171">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/checked_call.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> varName, message|@@null</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-kwd"> ${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">if</span><span class="pp-kwd"> ${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln"> && </span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">.__is_error</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> '__is_error </span><span class="pp-kwd">${</span><span class="pp-expr">message</span><span class="pp-kwd">}</span><span class="pp-pln">', </span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> callback(</span><span class="pp-kwd">${</span><span class="pp-expr">varName</span><span class="pp-kwd">}</span><span class="pp-pln">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_172">
                    <div class="code-panel" id="d_172">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/error.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> name, arg1|@@null, arg2|@@null, arg3|@@null, arg4|@@null</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-kwd"> ${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">Error</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg1 != null</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg1</span><span class="pp-kwd">}</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg2 != null</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg2</span><span class="pp-kwd">}</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg3 != null</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg3</span><span class="pp-kwd">}</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg4 != null</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg4</span><span class="pp-kwd">}</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> this.name = '</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">Error'</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> 5/10/17 set this.stack = (new Error()).stack</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-kwd"> ${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">Error.prototype.toString</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.message</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-kwd"> ${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">Error.prototype = Object.create(Error.prototype)</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-kwd"> ${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">Error.prototype.constructor = </span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">Error</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">Error = </span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">Error</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_173">
                    <div class="code-panel" id="d_173">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/f_cb_no_err.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> result|notUsed</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-kwd"> ${</span><span class="pp-expr">result</span><span class="pp-kwd">}</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_174">
                    <div class="code-panel" id="d_174">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/f_cb_test.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> result|notUsed</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-kwd"> ${</span><span class="pp-expr">result</span><span class="pp-kwd">}</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'err', err</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error(err.message)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_175">
                    <div class="code-panel" id="d_175">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/f_cb.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> result|notUsed</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-kwd"> ${</span><span class="pp-expr">result</span><span class="pp-kwd">}</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> err</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_176">
                    <div class="code-panel" id="d_176">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/f_error.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> module, kind|code_method_message</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> params</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string code</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # the error name or number</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string method</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> string message</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # optional</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> { innerError</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> # optional</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> error</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-kwd">$if</span><span class="pp-expr"> kind === 'code_method_message'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> code</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> method</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> message</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> innerError</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> verify.error</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-kwd">$if</span><span class="pp-expr"> kind === 'code_method_message'</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> innerError</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> name ( verify.isNumber(code) ? 'Err-' + code : code )</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> method '</span><span class="pp-kwd">${</span><span class="pp-expr">module</span><span class="pp-kwd">}</span><span class="pp-pln">.' + method</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> sourcePath __filename</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> message || 'Error message unavailable'</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_177">
                    <div class="code-panel" id="d_177">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/r_cb_err.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> callback(err)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_178">
                    <div class="code-panel" id="d_178">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/r_cb_error.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> code|@@null, method|@@null</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-kwd">$if</span><span class="pp-expr"> code != null</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">code</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-kwd">$if</span><span class="pp-expr"> method != null</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">method</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_179">
                    <div class="code-panel" id="d_179">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/r_cb_wz_err.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> errorCode, method, inner|@@null</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">errorCode</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">method</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-kwd">$hook</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-kwd">$if</span><span class="pp-expr"> inner != null</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-kwd"> ${</span><span class="pp-expr">inner</span><span class="pp-kwd">}</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_180">
                    <div class="code-panel" id="d_180">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/r_cb.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> result|@@null</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-kwd">$if</span><span class="pp-expr"> result !== null</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-kwd"> ${</span><span class="pp-expr">result</span><span class="pp-kwd">}</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_181">
                    <div class="code-panel" id="d_181">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/r_error.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> code|@@null, method|@@null</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-kwd">$if</span><span class="pp-expr"> code != null</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">code</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-kwd">$if</span><span class="pp-expr"> method != null</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">method</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_182">
                    <div class="code-panel" id="d_182">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/r_wz_err.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> errorCode, method, inner|@@null</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> error</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">errorCode</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">method</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-kwd">$hook</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-kwd">$if</span><span class="pp-expr"> inner != null</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-kwd"> ${</span><span class="pp-expr">inner</span><span class="pp-kwd">}</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_183">
                    <div class="code-panel" id="d_183">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/readme.md.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">mdx</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">h2</span><span class="pp-pln"> Implicit assumptions in this t-folder</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">ul</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> check_* fragments are input argument validations</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> checked_call_* fragments are checks on the returned value of a function or method call</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">li</span><span class="pp-pln"> check_r_* and checked_call_r_* imply that the error is returned (inside sync functions),</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">+</span><span class="pp-pln"> otherwise a callback is the default behaviour (inside async functions)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_184">
                    <div class="code-panel" id="d_184">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/var_cb_error.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> errorName</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> error</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">new</span><span class="pp-pln"> errors.</span><span class="pp-kwd">${</span><span class="pp-expr">errorName</span><span class="pp-kwd">}</span><span class="pp-pln">Error</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-kwd">$hook</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> error</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_185">
                    <div class="code-panel" id="d_185">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/t/var_error.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> errorName</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> error</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">new</span><span class="pp-pln"> errors.</span><span class="pp-kwd">${</span><span class="pp-expr">errorName</span><span class="pp-kwd">}</span><span class="pp-pln">Error</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_186">
                    <div class="code-panel" id="d_186">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests_stop/artifact/ittf__copy/gc_one.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">first</span><span class="pp-pln"> one</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">second</span><span class="pp-pln"> one</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_187">
                    <div class="code-panel" id="d_187">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests_stop/artifact/artifactInfo.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a">base_test(</span><span class="pp-arg"> artifactInfo</span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$append</span><span class="pp-pln"> imports</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ArtifactInfo = require('../../lib/artifact/ArtifactInfo').ArtifactInfo</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> asyncArtifactGenerator = require('../../lib/artifact/asyncArtifactGenerator')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> mocks = require('../mocks/misc')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> modelPaths = {}</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> moodel_path_1</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'simple.tests.ittf'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> moodel_path_2</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'complex.tests.ittf'</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> modelPaths[moodel_path_1]  = true</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> modelPaths[moodel_path_2]  = true</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> ai</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> shoul create an artifact info</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> ai</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">new</span><span class="pp-pln"> ArtifactInfo</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> name 'test_1'</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> basedir __dirname</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> dotgExtensionPrefix false</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> model mocks.getModelInfo('mock1')</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> contexts null</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> isWfJob false</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> transformers []</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> gen</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> generator 'js/module'</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> dest</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> fullpath null</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> folder null</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> baseFolder null</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> path null</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> extension null</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> shoul check properties</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_false(</span><span class="pp-arg"> ai.isWizziFactoryJob() </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_true(</span><span class="pp-arg"> ai.isWizziModelArtifact() </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_false(</span><span class="pp-arg"> ai.isModelCollectionArtifact() </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_false(</span><span class="pp-arg"> ai.isCodeWriteArtifact() </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_false(</span><span class="pp-arg"> ai.isFinalArtifact() </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> shoul get items to persist to file</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> ai.getItemsToPersistToFile</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> items </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_array(</span><span class="pp-arg"> items</span><span class="pp-pln">,</span><span class="pp-arg">  1</span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> shoul interpolate the path of an item of a model collection artifact</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ipname</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ai.getInterpolatePathNameContext</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_true(</span><span class="pp-arg"> ipname.__is_error </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> shoul build the destination uri of the generated artifact</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> dest_uri</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ai.getDestinationUri</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'srcPath'</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_188">
                    <div class="code-panel" id="d_188">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests_stop/artifact/asyncArtifactGenerator.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a">base_test(</span><span class="pp-arg"> asyncArtifactGenerator </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$append</span><span class="pp-pln"> imports</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> asyncArtifactGenerator = require('../../lib/artifact/asyncArtifactGenerator')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> mocks = require('../mocks/misc')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> shoul generate ...</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> asyncArtifactGenerator.generate</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> artifactInfo</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> generator</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfos</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> contextModelsCollection</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> shoul generate ... from collection contexts</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> asyncArtifactGenerator.generateModelCollection</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> artifactInfo</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> generator</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> modelInfos</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> contextModelsCollectionCollection</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> shoul generate ... by code write</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> asyncArtifactGenerator.generateCodeWrite</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> artifactInfo</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> generator</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> contextModelsCollection</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> shoul generate ... an item</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">#</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> asyncArtifactGenerator._gen_item</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> genInfo</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_189">
                    <div class="code-panel" id="d_189">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests_stop/artifact/genContext.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> path</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> del</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> expect = require('expect.js')</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> genContext = require('../../lib/artifact/genContext')</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> StringWriter = require('../../lib/util/stringwriter')</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> mocks = require('../mocks/misc')</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">describe</span><span class="pp-pln"> genContext</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">it</span><span class="pp-pln"> should write a simple interpolated text</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ctx</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">new</span><span class="pp-pln"> genContext</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> data</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> indentSpaces 4</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> CRLF '\n'</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> isDebugLine false</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> indent 0</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> model null</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> srcPath null</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> pman null</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.write('alfa')</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.w(' beta')</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.a('x', 'gamma')</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.w('{x}')</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.a('YYY', 'tau')</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.w('{YYY}')</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> result = ctx.getContent()</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> result</span><span class="pp-pln">,</span><span class="pp-arg">  alfa beta\ngamma\ntau\n </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">it</span><span class="pp-pln"> should write an indented interpolated text</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ctx</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                </span><span class="pp-tag">new</span><span class="pp-pln"> genContext</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> data</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> indentSpaces 4</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> CRLF '\n'</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> isDebugLine false</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> indent 0</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> model null</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> srcPath null</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> pman null</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.write('alfa')</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.w(' beta')</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.a('x', 'gamma')</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.indent()</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.w('{x}')</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.a('YYY', 'tau')</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.deindent()</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.w('{YYY}')</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.indent(2)</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.w('sigma')</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.deindent(2)</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.w('lambda')</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> result = ctx.getContent()</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> result</span><span class="pp-pln">,</span><span class="pp-arg">  alfa beta\n    gamma\ntau\n        sigma\nlambda\n </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">        </span><span class="pp-tag">it</span><span class="pp-pln"> should write an indented interpolated text with a file append</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ctx</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                </span><span class="pp-tag">new</span><span class="pp-pln"> genContext</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> data</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> indentSpaces 4</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> CRLF '\n'</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> isDebugLine false</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> indent 0</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> model null</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> srcPath null</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> pman null</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.write('alfa')</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.w(' beta')</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.a('x', 'gamma')</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.indent()</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.w('{x}')</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.a('YYY', 'tau')</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.deindent()</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.w('{YYY}')</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.indent(2)</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.w('sigma')</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.appendFile</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'gc_one.ittf'</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.deindent(2)</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.w('lambda')</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> result = ctx.getContent()</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> result</span><span class="pp-pln">,</span><span class="pp-arg">  alfa beta\n    gamma\ntau\n        sigma\n        first one\n            second one\nlambda\n </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">        </span><span class="pp-tag">it</span><span class="pp-pln"> should write a file</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ctx</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                </span><span class="pp-tag">new</span><span class="pp-pln"> genContext</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> data</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> indentSpaces 4</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> CRLF '\n'</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> isDebugLine false</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> indent 0</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> model null</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> srcPath null</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> pman null</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.writeFile</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'gc_one.ittf'</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> sw = new StringWriter()</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.toStream(sw)</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> result = sw.toString()</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> result</span><span class="pp-pln">,</span><span class="pp-arg">  first one\n\tsecond one\n </span><span class="pp-mix">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_190">
                    <div class="code-panel" id="d_190">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests_stop/production/asyncRecurseWfjobLoad.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a">base_test(</span><span class="pp-arg"> asyncRecurseWfjobLoad</span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$append</span><span class="pp-pln"> imports</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> WfjobLoader = require('../../lib/production/wfjobLoader').WfjobLoader</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> AsyncRecurseWfjobLoad = require('../../lib/production/wfjobLoader').AsyncRecurseWfjobLoad</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> mocks = require('../mocks/misc')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> _wizziFactory = null</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> _productionManager = null</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">before-async</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mocks.getWizziFactory</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind 'filesystem'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> testOnlyMockBaseDir __dirname</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> wf </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> _wizziFactory = wf</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> _productionManager</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> wf.createProductionManager</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> indentSpaces 4</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> basedir __dirname</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> dumps {}</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> shoul load a wfjob (AsyncRecurseWfjobLoad)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> wfjobLoader</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">new</span><span class="pp-pln"> WfjobLoader</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> _productionManager</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> jobRequest</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> model</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> cwd</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> src 'mock1.wfjob.ittf'</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> wfjobLoader wfjobLoader</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> AsyncRecurseWfjobLoad</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> jobRequest</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'shoul load a wfjob (AsyncRecurseWfjobLoad) : seenWfjobRequests, pendingWfjobRequests, artifactInfoConfigs', result.seenWfjobRequests, result.pendingWfjobRequests, result.artifactInfoConfigs</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_array(</span><span class="pp-arg"> result.pendingWfjobRequests</span><span class="pp-pln">,</span><span class="pp-arg">  0</span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_array(</span><span class="pp-arg"> result.seenWfjobRequests</span><span class="pp-pln">,</span><span class="pp-arg">  2</span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_array(</span><span class="pp-arg"> result.artifactInfoConfigs</span><span class="pp-pln">,</span><span class="pp-arg">  2</span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> result.artifactInfoConfigs[0].name</span><span class="pp-pln">,</span><span class="pp-arg">  artifactMock1 </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> result.artifactInfoConfigs[0].model.src</span><span class="pp-pln">,</span><span class="pp-arg">  mock1.tests.ittf </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> result.artifactInfoConfigs[1].name</span><span class="pp-pln">,</span><span class="pp-arg">  artifactMock2 </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> result.artifactInfoConfigs[1].model.src</span><span class="pp-pln">,</span><span class="pp-arg">  mock2.tests.ittf </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_191">
                    <div class="code-panel" id="d_191">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests_stop/production/productionManager.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a">base_test(</span><span class="pp-arg"> productionManager</span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$append</span><span class="pp-pln"> imports</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> wizziFactory = require('../../lib/services/wizziFactory')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> mocks = require('../mocks/misc')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> pman = null</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">before-async</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactory.createFactory</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> repo</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind 'filesystem'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> plugins</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> items</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                            </span><span class="pp-tag">[</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> '../mocks/plugin'</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> pluginsBaseFolder __dirname</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> test</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> testOnlyMockBaseDir __dirname</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> wf </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> pman</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> wf.createProductionManager</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> indentSpaces 4</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> basedir __dirname</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> myvar1 'inter'</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> myvar2 'milan'</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should retrieve a loadModel function</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> loadModel</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> pman.getLoadModel</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests'</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> TODO the loadModel should apply the global context passed</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> to the wizzi factory constructor.</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_function(</span><span class="pp-arg"> loadModel </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should retrieve a schema definition</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> schemaDefinition</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> pman.getSchemaDefinition</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests'</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_object(</span><span class="pp-arg"> schemaDefinition </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should retrieve a model transformer</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> modelTransformer</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> pman.getModelTransformer</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests/trans1'</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_object(</span><span class="pp-arg"> modelTransformer </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_function(</span><span class="pp-arg"> modelTransformer.trans </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should retrieve an artifact generator</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> artifactGenerator</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> pman.getArtifactGenerator</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests/gen1'</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_object(</span><span class="pp-arg"> artifactGenerator </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_function(</span><span class="pp-arg"> artifactGenerator.gen </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should load a wfjob</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> pman.loadWfjob</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'mock1.wfjob.ittf'</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> wfjobModel </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_object(</span><span class="pp-arg"> wfjobModel </span><span class="pp-mix">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_192">
                    <div class="code-panel" id="d_192">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests_stop/production/wfjobLoader.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a">base_test(</span><span class="pp-arg"> wfjobLoader</span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$append</span><span class="pp-pln"> imports</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> WfjobLoader = require('../../lib/production/wfjobLoader').WfjobLoader</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> mocks = require('../mocks/misc')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> _wizziFactory = null</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> _productionManager = null</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">before-async</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mocks.getWizziFactory</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind 'filesystem'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> testOnlyMockBaseDir __dirname</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> wf </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> _wizziFactory = wf</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> _productionManager</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> wf.createProductionManager</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> indentSpaces 4</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> basedir __dirname</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> dumps {}</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> shoul load a wfjob</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> wfjobLoader</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">new</span><span class="pp-pln"> WfjobLoader</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> _productionManager</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wfjobLoader.load</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> model</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> cwd</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> src 'mock1.wfjob.ittf'</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'shoul load a wfjob: seenWfjobRequests', result.seenWfjobRequests</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'shoul load a wfjob: pendingWfjobRequests', result.pendingWfjobRequests</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'shoul load a wfjob: artifactInfoConfigs', result.artifactInfoConfigs</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_array(</span><span class="pp-arg"> result.pendingWfjobRequests</span><span class="pp-pln">,</span><span class="pp-arg">  1</span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_array(</span><span class="pp-arg"> result.seenWfjobRequests</span><span class="pp-pln">,</span><span class="pp-arg">  1</span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_array(</span><span class="pp-arg"> result.artifactInfoConfigs</span><span class="pp-pln">,</span><span class="pp-arg">  1</span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> result.artifactInfoConfigs[0].name</span><span class="pp-pln">,</span><span class="pp-arg">  artifactMock1 </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> result.artifactInfoConfigs[0].model.src</span><span class="pp-pln">,</span><span class="pp-arg">  mock1.tests.ittf </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_193">
                    <div class="code-panel" id="d_193">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests_stop/services/ittf__copy/css/simple.css.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">css</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">.</span><span class="pp-pln"> home</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">color</span><span class="pp-pln"> blue</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_194">
                    <div class="code-panel" id="d_194">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests_stop/services/ittf__copy/html/simple.html.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">html</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">head</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">title</span><span class="pp-pln"> from </span><span class="pp-kwd">${</span><span class="pp-expr">from</span><span class="pp-kwd">}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">body</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_195">
                    <div class="code-panel" id="d_195">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests_stop/services/ittf__copy/wfschema/simple.wfschema.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">wfschema</span><span class="pp-pln"> rdbms</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">e</span><span class="pp-pln"> rdbms</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">r</span><span class="pp-pln"> table/s</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">e</span><span class="pp-pln"> table</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">r</span><span class="pp-pln"> column/s</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">e</span><span class="pp-pln"> column</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">a</span><span class="pp-pln"> type</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_196">
                    <div class="code-panel" id="d_196">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests_stop/services/pluginsManager_internal_1.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a">base_test(</span><span class="pp-arg"> pluginsManager internals 1 </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$append</span><span class="pp-pln"> imports</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> pluginsManager = require('../../lib/services/pluginsManager')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> pluginsManagerInstance = null</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">before</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">set</span><span class="pp-pln"> pluginsManagerInstance</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">new</span><span class="pp-pln"> pluginsManager.PluginsManager</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should resolve a plugin module</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> pkgPath</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.resolve</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> '../mocks/plugin.js'</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> pluginsManager.resolveModule</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> '../mocks/plugin'</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> pmod </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">#</span><span class="pp-pln"> log 'pluginsManager internals 1 pmod', pmod</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_object(</span><span class="pp-arg"> pmod </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_function(</span><span class="pp-arg"> pmod.createFactoryPlugin </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string_value(</span><span class="pp-arg"> pmod.packagePath</span><span class="pp-pln">,</span><span class="pp-arg">  pkgPath </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should give an error trying to resolve a plugin package</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> pluginsManager.resolvePackage</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> '../mocks/plugin/package.json'</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_173">f_cb_no_err(</span><span class="pp-arg"> pkg </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'pluginsManager internals 1 err, pkg', err, pkg</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_true(</span><span class="pp-arg"> err.__is_error </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> err.name</span><span class="pp-pln">,</span><span class="pp-arg">  ENOENT </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should resolve a plugin package</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> pkgPathExpected</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.resolve</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> '../mocks/plugin_ex/package.json'</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> pluginsManager.resolvePackage</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> '../mocks/plugin_ex/package.json'</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> pkgpath </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string_value(</span><span class="pp-arg"> pkgpath</span><span class="pp-pln">,</span><span class="pp-arg">  pkgPathExpected </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_197">
                    <div class="code-panel" id="d_197">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests_stop/services/pluginsManager.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a">base_test(</span><span class="pp-arg"> pluginsManager </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$append</span><span class="pp-pln"> imports</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> pluginsManager = require('../../lib/services/pluginsManager')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> pluginsManagerInstance = null</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">before-async</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> pluginsManager.createManager</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> items</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> '../mocks/plugin'</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> pluginsBaseFolder __dirname</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> pm </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> pluginsManagerInstance = pm</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should retrieve the loadModel function for a 'tests' wizzi model</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> modelFactory</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> pluginsManagerInstance.getModelFactory</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests'</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_object(</span><span class="pp-arg"> modelFactory </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_function(</span><span class="pp-arg"> modelFactory.createLoadModel </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should retrieve a model transformer</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> transformModel</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> pluginsManagerInstance.getModelTransformer</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests/trans1'</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_function(</span><span class="pp-arg"> transformModel.trans </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should retrieve an artifact generator</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> artifactGenerator</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> pluginsManagerInstance.getArtifactGenerator</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests/gen1'</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_function(</span><span class="pp-arg"> artifactGenerator.gen </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should retrieve the 'tests' schema definition</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> schemaDefinition</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> pluginsManagerInstance.getSchemaDefinition</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests'</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_object(</span><span class="pp-arg"> schemaDefinition </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> schemaDefinition.name</span><span class="pp-pln">,</span><span class="pp-arg">  tests </span><span class="pp-mix">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_198">
                    <div class="code-panel" id="d_198">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests_stop/services/runnerServer.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a">base_test(</span><span class="pp-arg"> runnerServer </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$append</span><span class="pp-pln"> imports</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> runnerServer = require('../../lib/services/runnerServer')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> mocks = require('../mocks/misc')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> _wizziFactory = null</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">before-async</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> runnerServer.init</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> runnerServer.instance.registerApi</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'SUM'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">function</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> a</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> b</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> a + b</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> runnerServer.instance.registerPlugin</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> '../mocks/plugin'</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> runnerServer.instance.registerGlobalContext</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> myname 'stefi'</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> runnerServer.instance.registerGlobalContext</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> hername 'annie'</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> runnerServer.instance.registerGlobalContext</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> runnerServer.instance.initializeFactory</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'stefi'</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'admin'</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind 'filesystem'</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> test</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> testOnlyMockBaseDir __dirname</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> wf </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> _wizziFactory = wf</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should use the runnerServer to load a model</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> runnerServer.instance.loadModel</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests'</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'mock1.tests.ittf'</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> wizziModel </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_object(</span><span class="pp-arg"> wizziModel </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> wizziModel.wzName</span><span class="pp-pln">,</span><span class="pp-arg">  mock1 </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should call a SUM api function on the runnerServer</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> tot</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> runnerServer.instance.callApi</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'SUM'</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 2</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 2</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_number(</span><span class="pp-arg"> tot</span><span class="pp-pln">,</span><span class="pp-arg">  4 </span><span class="pp-mix">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_199">
                    <div class="code-panel" id="d_199">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests_stop/services/wizziFactory.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a">base_test(</span><span class="pp-arg"> wizziFactory </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$append</span><span class="pp-pln"> imports</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> wizziFactory = require('../../lib/services/wizziFactory')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> mocks = require('../mocks/misc')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> wizziFactoryInstance = null</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> testsMock1Model = null</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">before-async</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactory.createFactory</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> repo</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind 'filesystem'</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> plugins</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> items</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                            </span><span class="pp-tag">[</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> '../mocks/plugin'</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> pluginsBaseFolder __dirname</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> test</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> testOnlyMockBaseDir __dirname</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> wf </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'wf.__loadMTree', wf.__loadMTree</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> wizziFactoryInstance = wf</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should load a wizzi model</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> pman = wizziFactoryInstance.createProductionManager()</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactoryInstance.loadModel</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests'</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'mock1.tests.ittf'</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __productionManager pman</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> wizziModel </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizziModel', wizziModel</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> testsMock1Model = wizziModel</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_object(</span><span class="pp-arg"> wizziModel </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> wizziModel.wzName</span><span class="pp-pln">,</span><span class="pp-arg">  mock1 </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should retrieve the loadModel function for a 'tests' wizzi model</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> loadModel</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactoryInstance.getLoadModel</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests'</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_function(</span><span class="pp-arg"> loadModel </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should retrieve a model transformer</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> transformModel</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactoryInstance.getModelTransformer</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests/trans1'</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> 'should retrieve a model transformer. transformModel', transformModel</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_function(</span><span class="pp-arg"> transformModel.trans </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should transform a model from a pre loaded wizzimodel</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactoryInstance.transformModel</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> testsMock1Model</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests/trans1'</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> from 'stefi'</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> transformedModel </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_object(</span><span class="pp-arg"> transformedModel </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> transformedModel.testsName</span><span class="pp-pln">,</span><span class="pp-arg">  mock1 </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> transformedModel.contextFrom</span><span class="pp-pln">,</span><span class="pp-arg">  stefi </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should retrieve an artifact generator</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> artifactGenerator</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactoryInstance.getArtifactGenerator</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests/gen1'</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_function(</span><span class="pp-arg"> artifactGenerator.gen </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should generate an artifact from a pre loaded wizzimodel</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactoryInstance.generateArtifact</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> testsMock1Model</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'mock1.tests.ittf'</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests/gen1'</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> from 'stefi'</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> artifact </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> artifact</span><span class="pp-pln">,</span><span class="pp-arg">  Hello I am mock1 artifact from stefi\n </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should load a wizzi model and generate an artifact</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactoryInstance.loadModelAndGenerateArtifact</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'mock1.tests.ittf'</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> modelContext {}</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> artifactContext</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> from 'stefi'</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests/gen1'</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_174">f_cb_test(</span><span class="pp-arg"> artifact </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> artifact</span><span class="pp-pln">,</span><span class="pp-arg">  Hello I am mock1 artifact from stefi\n </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should retrieve the 'tests' schema definition</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> schemaDefinition</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactoryInstance.getSchemaDefinition</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests'</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_object(</span><span class="pp-arg"> schemaDefinition </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> schemaDefinition.name</span><span class="pp-pln">,</span><span class="pp-arg">  tests </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should load an mTree</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizziFactoryInstance.__loadMTree', wizziFactoryInstance.__loadMTree</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactoryInstance.loadMTree</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'html'</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'simple.html.ittf'</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> from 'stefi'</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> mTree </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'mTree', mTree</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_object(</span><span class="pp-arg"> mTree </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> mTree.nodes[0].n</span><span class="pp-pln">,</span><span class="pp-arg">  html </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> mTree.nodes[0].children[0].n</span><span class="pp-pln">,</span><span class="pp-arg">  head </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> mTree.nodes[0].children[0].children[0].n</span><span class="pp-pln">,</span><span class="pp-arg">  title </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a">tobe_string(</span><span class="pp-arg"> mTree.nodes[0].children[0].children[0].v</span><span class="pp-pln">,</span><span class="pp-arg">  from stefi </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_200">
                    <div class="code-panel" id="d_200">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/plugin_ex/plugin_ex.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a" data-frag-id="d_209">v3-package-index(</span><span class="pp-arg"> mock1-plugin </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">@</span><span class="pp-pln"> provides</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> schemas</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests'</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> modelTransformers</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests/trans1'</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> artifactGenerators</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests/gen1'</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_201">
                    <div class="code-panel" id="d_201">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/t/wizziModels/tests_mock1.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> tests_mock1</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ret</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> wzElement 'tests'</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> wzName 'mock1'</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> items</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wzElement 'item'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wzName 'item1'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wzElement 'item'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wzName 'item2'</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_202">
                    <div class="code-panel" id="d_202">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/t/wizziModels/tests_mock2.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> tests_mock2</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ret</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> wzElement 'tests'</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> wzName 'mock2'</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> items</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wzElement 'item'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wzName 'item2_1'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wzElement 'item'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wzName 'item2_2'</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_203">
                    <div class="code-panel" id="d_203">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/t/wizziModels/wfjob_mock1.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> wfjob_mock1</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ret</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> destBaseFolder</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'result'</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> models</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> productions</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> lines</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                                </span><span class="pp-tag">[</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> wzName 'lib'</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> cwdFolder</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> path.resolve</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> '../production/ittf'</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> destFolder</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'result'</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> artifacts</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                                            </span><span class="pp-tag">[</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> wzName 'wfjobMock2'</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> src 'mock2.wfjob.ittf'</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> isWfJob true</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelRefs</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                                                        </span><span class="pp-tag">[</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> transformers</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                                                        </span><span class="pp-tag">[</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> wzName 'artifactMock1'</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> src 'mock1.tests.ittf'</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> generator</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                                                        </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                                                            </span><span class="pp-tag">@</span><span class="pp-pln"> gen 'tests/gen1'</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelRefs</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                                                        </span><span class="pp-tag">[</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> transformers</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                                                        </span><span class="pp-tag">[</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_204">
                    <div class="code-panel" id="d_204">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/t/wizziModels/wfjob_mock2.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> wfjob_mock2</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ret</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> destBaseFolder</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'result2'</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> models</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> productions</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> lines</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                                </span><span class="pp-tag">[</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> wzName 'lib'</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> cwdFolder __dirname</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> destFolder</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'result2'</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> artifacts</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                                            </span><span class="pp-tag">[</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> wzName 'artifactMock2'</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> src 'mock2.tests.ittf'</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> generator</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                                                        </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                                                            </span><span class="pp-tag">@</span><span class="pp-pln"> gen 'tests/gen1'</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelRefs</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                                                        </span><span class="pp-tag">[</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> transformers</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                                                        </span><span class="pp-tag">[</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_205">
                    <div class="code-panel" id="d_205">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/t/wizziModels/wfjob_mock3.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> WizziModelTypesArtifact</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> wfjob_mock3</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> ret</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> destBaseFolder</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'result3'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> models</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> productions</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                    </span><span class="pp-tag">[</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> lines</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                                </span><span class="pp-tag">[</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                                    </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> wzName 'wizzi'</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> cwdFolder __dirname</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> destFolder</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                                            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                                                </span><span class="pp-tag">@</span><span class="pp-pln"> 'result3'</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> artifacts</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                                            </span><span class="pp-tag">[</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                                                </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> wzName 'artifactMock2'</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> src 'mock2.tests.ittf'</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> generator</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                                                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                                                            </span><span class="pp-tag">@</span><span class="pp-pln"> gen 'tests/gen1'</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> modelRefs</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                                                        </span><span class="pp-tag">[</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                                                    </span><span class="pp-tag">@</span><span class="pp-pln"> transformers</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                                                        </span><span class="pp-tag">[</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_206">
                    <div class="code-panel" id="d_206">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/t/v3-artifact-generation.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Retrieve an ArtifactGenerator by its name</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Generators are searched in this WizziPackage</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> No search up in "node_modules" folders.</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getArtifactGenerator</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> generationName</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> generator = this.artifactGenerators[generationName] || null</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> generator == null</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> generators = require('./generators')</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> generator</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> generators.getGenerator</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> generationName</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.artifactGenerators[generationName] = generator</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> generator</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_207">
                    <div class="code-panel" id="d_207">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/t/v3-model-factory.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Retrieve a WizziModelFactory by its wfschema name</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> searching the loader in this WizziPackage.</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> No search up in "node_modules" folders.</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getModelFactory</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> schemaName</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> mockBaseDir</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.tests.plugin.getModelFactory: schemaName, mockBaseDir', schemaName, mockBaseDir</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> factory = this.modelFactories[schemaName] || null</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> factory == null</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> models = require('./wizziModels')</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> factory</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> this.getMockFactory</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> schemaName</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> mockBaseDir</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.modelFactories[schemaName] = factory</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> factory</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getMockFactory</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> schemaName</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> mockBaseDir</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> createLoadModel</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> mockWizziModels = require('./wizziModels')</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                        </span><span class="pp-tag">var</span><span class="pp-pln"> models</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> mockWizziModels.getModels</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> schemaName</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> mockBaseDir</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                        </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                            </span><span class="pp-tag">function</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> context</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                                </span><span class="pp-tag">if</span><span class="pp-pln"> models[ittfDocumentUri]</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> models[ittfDocumentUri]</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                                </span><span class="pp-tag">else</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                                    </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.tests.plugin.createLoadModel', ittfDocumentUri, models</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                                        </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                                            </span><span class="pp-tag">@</span><span class="pp-pln"> message 'Wizzi model not found. IttfDocumentUri: ' + ittfDocumentUri</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_208">
                    <div class="code-panel" id="d_208">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/t/v3-model-transformation.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> retrieve a ModelTransformer by its name</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> searching the loader in this WizziPackage</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> No search up in "node_modules" folders.</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getModelTransformer</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> transformerName</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.tests.plugin.getModelTransformer transformerName: ' + transformerName</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> transformer = this.modelTransformers[transformerName] || null</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> transformer == null</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> transformers = require('./transformers')</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.tests.plugin.getModelTransformer transformers: ' + transformers</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> transformer</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> transformers.getTransformer</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> transformerName</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.tests.plugin.getModelTransformer transformer: ' + transformer</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.modelTransformers[transformerName] = transformer</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> transformer</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_209">
                    <div class="code-panel" id="d_209">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/t/v3-package-index.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> pkgname</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> util = require('util')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> stringify = require('json-stringify-safe')</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.name = '</span><span class="pp-kwd">${</span><span class="pp-expr">pkgname</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> FactoryPlugin class</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">class</span><span class="pp-pln"> FactoryPlugin</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">ctor</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> wizziPackage</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> provides</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.file = wizziPackage.file</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.provides = provides</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.modelFactories = {}</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.modelTransformers = {}</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.artifactGenerators = {}</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.schemaDefinitions = {}</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> initialize</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> TODO</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null)</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getName</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> '</span><span class="pp-kwd">${</span><span class="pp-expr">pkgname</span><span class="pp-kwd">}</span><span class="pp-pln">'</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getFilename</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> __filename</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">m</span><span class="pp-pln"> getProvides</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> this.provides</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_207"> ./v3-model-factory</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_208"> ./v3-model-transformation</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_206"> ./v3-artifact-generation</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_210"> ./v3-schema-definition</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">    </span><span class="pp-tag">function</span><span class="pp-pln"> error</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> code</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> message</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> source '</span><span class="pp-kwd">${</span><span class="pp-expr">pkgname</span><span class="pp-kwd">}</span><span class="pp-pln">/FactoryPlugin'</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> code code</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> message message</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> module.exports</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-kwd">$hook</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> createFactoryPlugin</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> wizziPackage</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                    </span><span class="pp-tag">var</span><span class="pp-pln"> plugin</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                        </span><span class="pp-tag">new</span><span class="pp-pln"> FactoryPlugin</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wizziPackage</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> this.provides</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> plugin.initialize</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> options</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_175">f_cb(</span><span class="pp-arg"> notUsed </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                            </span><span class="pp-tag">return</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> plugin</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_210">
                    <div class="code-panel" id="d_210">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/t/v3-schema-definition.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> Retrieve a WizziSchema definition in JSON format</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> searching the loader in this WizziPackage.</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> No search up in "node_modules" folders.</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> getSchemaDefinition</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> schemaName</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> definition = this.schemaDefinitions[schemaName] || null</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> definition == null</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> definitions = require('./definitions')</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> definition</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> definitions.getSchemaDefinition</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> schemaName</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> this.schemaDefinitions[schemaName] = definition</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">return</span><span class="pp-pln"> definition</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_211">
                    <div class="code-panel" id="d_211">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/definitions.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.getSchemaDefinition</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> schemaName</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> schemaName === 'tests'</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> name 'tests'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> null</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_212">
                    <div class="code-panel" id="d_212">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/generators.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.getGenerator</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> generationName</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> generationName === 'tests/gen1'</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> gen</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                            </span><span class="pp-tag">function</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> model</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> genContext</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> genContext.write</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'Hello I am ' + model.wzName + ' artifact from {from}'</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> genContext</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> null</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_213">
                    <div class="code-panel" id="d_213">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/misc.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> wizziFactory = require('../../lib/services/wizziFactory')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> ProductionManager = require('../../lib/production/manager')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> acl = require('../../lib/acl')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> mockModels = require('./wizziModels')</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.getWizziFactory</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> options</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactory.createFactory</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'stefi'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'admin'</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> repo</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind (options.storeKind || 'filesystem')</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> plugins</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> items</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                                </span><span class="pp-tag">[</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> './plugin'</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> pluginsBaseFolder __dirname</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> test</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> testOnlyMockBaseDir options.testOnlyMockBaseDir</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> wf </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> wf</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.getProductionManager</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> basedir</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> modelPaths</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> aclStat = new acl.AclStat('stefi', 'admin')</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> pman</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">new</span><span class="pp-pln"> ProductionManager</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> __type 'WizziFactory'</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> basedir basedir</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> pman.getLoadModel</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> schema</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                    </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> md.getLoadModel</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> modelPaths</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> pman.aclStat(aclStat);</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> pman.globalContext</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> pman</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.getLoadModel</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> modelPaths</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> context</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> modelPaths[ittfDocumentUri]</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> wzElement 'source'</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> wzName ittfDocumentUri</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> message 'Not found'</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.getLoadModel2</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> mockBaseDir</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> models = mockModels.getModels(mockBaseDir)</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> ittfDocumentUri</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> context</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> models[ittfDocumentUri]</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> models[ittfDocumentUri]</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                            </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> __is_error true</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> message 'Not found'</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.getModelInfo</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> mockModelName</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> mockModelName === 'mock1'</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> cwd __dirname</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> src 'mock1.tests.ittf'</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_214">
                    <div class="code-panel" id="d_214">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/plugin.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a" data-frag-id="d_209">v3-package-index(</span><span class="pp-arg"> mock1-plugin </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">@</span><span class="pp-pln"> provides</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> schemas</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests'</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> modelTransformers</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests/trans1'</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> artifactGenerators</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">[</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests/gen1'</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_215">
                    <div class="code-panel" id="d_215">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/transformers.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.getTransformer</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> transformerName</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> transformerName === 'tests/trans1'</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> trans</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                            </span><span class="pp-tag">function</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> model</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> context</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                                </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                                </span><span class="pp-tag">set</span><span class="pp-pln"> model.__transformed = true</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                                </span><span class="pp-tag">set</span><span class="pp-pln"> model.testsName = model.wzName</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                                </span><span class="pp-tag">set</span><span class="pp-pln"> model.contextFrom = context.from</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                                </span><span class="pp-tag">return</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                                    </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> null</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                                        </span><span class="pp-tag">@</span><span class="pp-pln"> model</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">return</span><span class="pp-pln"> null</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_216">
                    <div class="code-panel" id="d_216">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/mocks/wizziModels.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.getModels</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> schema</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> mockBaseDir</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.tests.wizziModels.getModels: schema, mockBaseDir', schema, mockBaseDir</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">var</span><span class="pp-pln"> ret = {}</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> schema === 'wfjob'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> wfjob_mock1_path</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> mockBaseDir</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'mock1.wfjob.ittf'</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> ret[wfjob_mock1_path] = wfjob_mock1()</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> wfjob_mock2_path</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> mockBaseDir</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'mock2.wfjob.ittf'</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> ret[wfjob_mock2_path] = wfjob_mock2()</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> schema === 'tests'</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> tests_mock1_path</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> mockBaseDir</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'mock1.tests.ittf'</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> ret[tests_mock1_path] = tests_mock1()</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> tests_mock2_path</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> mockBaseDir</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'mock2.tests.ittf'</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> ret[tests_mock2_path] = tests_mock2()</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-tag">return</span><span class="pp-pln"> ret</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_203"> wizziModels/wfjob_mock1</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_204"> wizziModels/wfjob_mock2</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_201"> wizziModels/tests_mock1</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_202"> wizziModels/tests_mock2</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_217">
                    <div class="code-panel" id="d_217">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/model/ittf/folder1/mock2.tests.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">tests</span><span class="pp-pln"> mock2</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_218">
                    <div class="code-panel" id="d_218">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/model/ittf/folder1/mock3.tests.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">tests</span><span class="pp-pln"> mock3</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_219">
                    <div class="code-panel" id="d_219">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/model/ittf/mock1.tests.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">tests</span><span class="pp-pln"> mock1</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_220">
                    <div class="code-panel" id="d_220">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/model/asyncModelLoader.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a" data-frag-id="d_224">base_test(</span><span class="pp-arg"> asyncModelLoader</span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$append</span><span class="pp-pln"> imports</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> modelInfo = require('../../lib/model/modelInfo').ModelInfo</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> asyncModelLoader = require('../../lib/model/asyncModelLoader')</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> mocks = require('../mocks/misc')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> modelPaths = {}</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> moodel_path_1</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'simple.tests.ittf'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> moodel_path_2</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'complex.tests.ittf'</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> modelPaths[moodel_path_1]  = true</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> modelPaths[moodel_path_2]  = true</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> shoul load a simple wizzi model</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> mi</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">new</span><span class="pp-pln"> modelInfo</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> cwd</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> src 'simple.tests.ittf'</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> schema 'tests'</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.productionManager</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> mocks.getProductionManager</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> modelPaths</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> asyncModelLoader.load</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> mi</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'result.keys()', Object.keys(result)</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_239">tobe_object(</span><span class="pp-arg"> result</span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> shoul load a simple json format model</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> mi</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">new</span><span class="pp-pln"> modelInfo</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> cwd</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> 'data'</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> src 'simple.tests.json'</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> format 'json'</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.productionManager</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> mocks.getProductionManager</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> modelPaths</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> asyncModelLoader.load</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> mi</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> result </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'result.keys()', Object.keys(result)</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_239">tobe_object(</span><span class="pp-arg"> result</span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_241">tobe_string(</span><span class="pp-arg"> result.alfa</span><span class="pp-pln">,</span><span class="pp-arg"> stefi</span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_221">
                    <div class="code-panel" id="d_221">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/model/modelInfo_folder.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a" data-frag-id="d_224">base_test(</span><span class="pp-arg"> modelInfo</span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$append</span><span class="pp-pln"> imports</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> wizziFactory = require('../../lib/services/wizziFactory')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> modelInfo = require('../../lib/model/modelInfo').ModelInfo</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> mocks = require('../mocks/misc')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> mi = null</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">before-async</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactory.createFactory</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> repo</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind 'filesystem'</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> plugins</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> items</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                            </span><span class="pp-tag">[</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> '../mocks/plugin'</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> pluginsBaseFolder __dirname</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> test</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> testOnlyMockBaseDir __dirname</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> wf </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> pman</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> wf.createProductionManager</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> indentSpaces 4</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> basedir __dirname</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> mi</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                    </span><span class="pp-tag">new</span><span class="pp-pln"> modelInfo</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> cwd</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'folder1'</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> src './**/*.tests.ittf'</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> schema 'tests'</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> mi.productionManager</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> pman</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should get a single source</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.getSource</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_229">f_cb_no_err(</span><span class="pp-arg"> source </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_242">tobe_true(</span><span class="pp-arg"> err.__is_error </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should get sources</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> s1Path</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'folder1'</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'mock2.tests.ittf'</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                </span><span class="pp-tag">._</span><span class="pp-pln"> replace(/\\/g, '/')</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.getSources</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> sources </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_233">tobe_array(</span><span class="pp-arg"> sources</span><span class="pp-pln">,</span><span class="pp-arg">  2</span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> s1 = sources[0]</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_240">tobe_string_value(</span><span class="pp-arg"> s1.fullpath</span><span class="pp-pln">,</span><span class="pp-arg">  s1Path </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_241">tobe_string(</span><span class="pp-arg"> s1.relpath</span><span class="pp-pln">,</span><span class="pp-arg">  mock2.tests.ittf </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_241">tobe_string(</span><span class="pp-arg"> s1.content</span><span class="pp-pln">,</span><span class="pp-arg">  tests mock2 </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should get source files</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> s1Path</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'folder1'</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'mock2.tests.ittf'</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                </span><span class="pp-tag">._</span><span class="pp-pln"> replace(/\\/g, '/')</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.getFiles</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> final false</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> files </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_233">tobe_array(</span><span class="pp-arg"> files</span><span class="pp-pln">,</span><span class="pp-arg">  2</span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> f1 = files[0]</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_240">tobe_string_value(</span><span class="pp-arg"> f1.fullpath</span><span class="pp-pln">,</span><span class="pp-arg">  s1Path </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should check if the source exists</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.exists</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> exists </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_242">tobe_true(</span><span class="pp-arg"> exists </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should check if the source is a directory</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.isDirectory</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> isDirectory </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_242">tobe_true(</span><span class="pp-arg"> isDirectory </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should check if the source is a file</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.isFile</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> isFile </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_235">tobe_false(</span><span class="pp-arg"> isFile </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_222">
                    <div class="code-panel" id="d_222">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/model/modelInfo.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-mix frag-to-link-a" data-frag-id="d_224">base_test(</span><span class="pp-arg"> modelInfo</span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$append</span><span class="pp-pln"> imports</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> wizziFactory = require('../../lib/services/wizziFactory')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> modelInfo = require('../../lib/model/modelInfo').ModelInfo</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> mocks = require('../mocks/misc')</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> mi = null</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">before-async</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> wizziFactory.createFactory</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> repo</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> storeKind 'filesystem'</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> plugins</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> items</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                            </span><span class="pp-tag">[</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                                </span><span class="pp-tag">@</span><span class="pp-pln"> '../mocks/plugin'</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> pluginsBaseFolder __dirname</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> test</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">{</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> testOnlyMockBaseDir __dirname</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> wf </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                </span><span class="pp-tag">var</span><span class="pp-pln"> pman</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> wf.createProductionManager</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> indentSpaces 4</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> basedir __dirname</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">set</span><span class="pp-pln"> mi</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                    </span><span class="pp-tag">new</span><span class="pp-pln"> modelInfo</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> cwd</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                                </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> src 'mock1.tests.ittf'</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                            </span><span class="pp-tag">@</span><span class="pp-pln"> schema 'tests'</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> mi.productionManager</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> pman</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should check some properties</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> s1Path</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'mock1.tests.ittf'</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">                </span><span class="pp-kwd">$$</span><span class="pp-pln"> ._ replace(/\\/g, '/')</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> s1PathIgnore</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                </span><span class="pp-kwd">$$</span><span class="pp-pln"> ._ replace(/\\/g, '/')</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> s1GlobPath</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'mock1.tests.ittf'</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> '**/*.*'</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                </span><span class="pp-tag">._</span><span class="pp-pln"> replace(/\\/g, '/')</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_241">tobe_string(</span><span class="pp-arg"> mi.src()</span><span class="pp-pln">,</span><span class="pp-arg">  'mock1.tests.ittf' </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_240">tobe_string_value(</span><span class="pp-arg"> mi.srcFullPath()</span><span class="pp-pln">,</span><span class="pp-arg">  s1Path </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  62 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_237">tobe_null(</span><span class="pp-arg"> mi.ignoreFullPath() </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  63 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> misrcGlobPath = mi.srcGlobPath().replace(/\\/g, '/')</span></div><div class="L4"><span class="pp-ln">  64 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_240">tobe_string_value(</span><span class="pp-arg"> misrcGlobPath</span><span class="pp-pln">,</span><span class="pp-arg">  s1GlobPath </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln">  65 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_239">tobe_object(</span><span class="pp-arg"> mi.srcGlobOptions() </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  66 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_243">tobe_undefined(</span><span class="pp-arg"> mi.srcGlobOptions().ignore </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  67 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_239">tobe_object(</span><span class="pp-arg"> mi.productionManagerInstance </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  68 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> mi.hasContext()</span></div><div class="L9"><span class="pp-ln">  69 </span><span class="pp-pln">            </span><span class="pp-tag">foreach</span><span class="pp-pln"> ctxMi in this.contexts</span></div><div class="L0"><span class="pp-ln">  70 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_239">tobe_object(</span><span class="pp-arg"> ctxMi.productionManagerInstance </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  71 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_235">tobe_false(</span><span class="pp-arg"> mi.hasContext() </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  72 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_237">tobe_null(</span><span class="pp-arg"> mi.getModelCollectionInfo() </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  73 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should retrieve a loadModel function</span></div><div class="L4"><span class="pp-ln">  74 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.getLoadModel</span></div><div class="L5"><span class="pp-ln">  75 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> loadModel </span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  76 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_236">tobe_function(</span><span class="pp-arg"> loadModel </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln">  77 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L8"><span class="pp-ln">  78 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should retrieve a model transformer</span></div><div class="L9"><span class="pp-ln">  79 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.getModelTransformer</span></div><div class="L0"><span class="pp-ln">  80 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests/trans1'</span></div><div class="L1"><span class="pp-ln">  81 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> transformModel </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  82 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_236">tobe_function(</span><span class="pp-arg"> transformModel.trans </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  83 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L4"><span class="pp-ln">  84 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should retrieve an artifact generator</span></div><div class="L5"><span class="pp-ln">  85 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.getArtifactGenerator</span></div><div class="L6"><span class="pp-ln">  86 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'tests/gen1'</span></div><div class="L7"><span class="pp-ln">  87 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> artifactGenerator </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  88 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_236">tobe_function(</span><span class="pp-arg"> artifactGenerator.gen </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln">  89 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L0"><span class="pp-ln">  90 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should get a single source</span></div><div class="L1"><span class="pp-ln">  91 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.getSource</span></div><div class="L2"><span class="pp-ln">  92 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> source </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  93 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_238">tobe_number(</span><span class="pp-arg"> source.length</span><span class="pp-pln">,</span><span class="pp-arg">  11 </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  94 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L5"><span class="pp-ln">  95 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should get an error trying to ges sources (not a directory)</span></div><div class="L6"><span class="pp-ln">  96 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.getSources</span></div><div class="L7"><span class="pp-ln">  97 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_229">f_cb_no_err(</span><span class="pp-arg"> sources </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">  98 </span><span class="pp-pln">                </span><span class="pp-tag">log</span><span class="pp-pln"> 'should get sources.sources', err, sources</span></div><div class="L9"><span class="pp-ln">  99 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_242">tobe_true(</span><span class="pp-arg"> err.__is_error </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln"> 100 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_241">tobe_string(</span><span class="pp-arg"> err.name</span><span class="pp-pln">,</span><span class="pp-arg">  InvalidOperation </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln"> 101 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L2"><span class="pp-ln"> 102 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should get source files</span></div><div class="L3"><span class="pp-ln"> 103 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.getFiles</span></div><div class="L4"><span class="pp-ln"> 104 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln"> 105 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> final false</span></div><div class="L6"><span class="pp-ln"> 106 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_229">f_cb_no_err(</span><span class="pp-arg"> files </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln"> 107 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_242">tobe_true(</span><span class="pp-arg"> err.__is_error </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln"> 108 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L9"><span class="pp-ln"> 109 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should get modelInfos</span></div><div class="L0"><span class="pp-ln"> 110 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.getModelInfos</span></div><div class="L1"><span class="pp-ln"> 111 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln"> 112 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> final false</span></div><div class="L3"><span class="pp-ln"> 113 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> modelInfos </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln"> 114 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_233">tobe_array(</span><span class="pp-arg"> modelInfos</span><span class="pp-pln">,</span><span class="pp-arg">  1 </span><span class="pp-mix">)</span></div><div class="L5"><span class="pp-ln"> 115 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L6"><span class="pp-ln"> 116 </span><span class="pp-pln">    </span><span class="pp-tag">it</span><span class="pp-pln"> should clone a modelInfo</span></div><div class="L7"><span class="pp-ln"> 117 </span><span class="pp-pln">        </span><span class="pp-tag">var</span><span class="pp-pln"> cloned</span></div><div class="L8"><span class="pp-ln"> 118 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> mi.clone</span></div><div class="L9"><span class="pp-ln"> 119 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_234">tobe_equal(</span><span class="pp-arg"> cloned.cwd</span><span class="pp-pln">,</span><span class="pp-arg">  mi.cwd </span><span class="pp-mix">)</span></div><div class="L0"><span class="pp-ln"> 120 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_234">tobe_equal(</span><span class="pp-arg"> cloned.src()</span><span class="pp-pln">,</span><span class="pp-arg">  mi.src() </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln"> 121 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_234">tobe_equal(</span><span class="pp-arg"> cloned.schema</span><span class="pp-pln">,</span><span class="pp-arg">  mi.schema </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln"> 122 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_234">tobe_equal(</span><span class="pp-arg"> cloned.format</span><span class="pp-pln">,</span><span class="pp-arg">  mi.format </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln"> 123 </span><span class="pp-pln">        </span><span class="pp-tag">#</span><span class="pp-pln"> TODO check cloned collections</span></div><div class="L4"><span class="pp-ln"> 124 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should read a JSON file</span></div><div class="L5"><span class="pp-ln"> 125 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.readJSON</span></div><div class="L6"><span class="pp-ln"> 126 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L7"><span class="pp-ln"> 127 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L8"><span class="pp-ln"> 128 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'data'</span></div><div class="L9"><span class="pp-ln"> 129 </span><span class="pp-pln">                </span><span class="pp-tag">@</span><span class="pp-pln"> 'simple.tests.json'</span></div><div class="L0"><span class="pp-ln"> 130 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> json </span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln"> 131 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_239">tobe_object(</span><span class="pp-arg"> json </span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln"> 132 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L3"><span class="pp-ln"> 133 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should read an xml file</span></div><div class="L4"><span class="pp-ln"> 134 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.readXml</span></div><div class="L5"><span class="pp-ln"> 135 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-pln"> 'c:\\TODO.xml'</span></div><div class="L6"><span class="pp-ln"> 136 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_229">f_cb_no_err(</span><span class="pp-arg"> xml </span><span class="pp-mix">)</span></div><div class="L7"><span class="pp-ln"> 137 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_242">tobe_true(</span><span class="pp-arg"> err.__is_error </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln"> 138 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_241">tobe_string(</span><span class="pp-arg"> err.name</span><span class="pp-pln">,</span><span class="pp-arg">  NotFound </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln"> 139 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L0"><span class="pp-ln"> 140 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should check if the source exists</span></div><div class="L1"><span class="pp-ln"> 141 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.exists</span></div><div class="L2"><span class="pp-ln"> 142 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> exists </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln"> 143 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_242">tobe_true(</span><span class="pp-arg"> exists </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln"> 144 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L5"><span class="pp-ln"> 145 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should check if the source is a directory</span></div><div class="L6"><span class="pp-ln"> 146 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.isDirectory</span></div><div class="L7"><span class="pp-ln"> 147 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> isDirectory </span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln"> 148 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_235">tobe_false(</span><span class="pp-arg"> isDirectory </span><span class="pp-mix">)</span></div><div class="L9"><span class="pp-ln"> 149 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div><div class="L0"><span class="pp-ln"> 150 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-pln"> should check if the source is a file</span></div><div class="L1"><span class="pp-ln"> 151 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> mi.isFile</span></div><div class="L2"><span class="pp-ln"> 152 </span><span class="pp-pln">            </span><span class="pp-mix frag-to-link-a" data-frag-id="d_230">f_cb_test(</span><span class="pp-arg"> isFile </span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln"> 153 </span><span class="pp-pln">                </span><span class="pp-mix frag-to-link-a" data-frag-id="d_242">tobe_true(</span><span class="pp-arg"> isFile </span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln"> 154 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_223">
                    <div class="code-panel" id="d_223">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/async.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> call, arg1|@@null, arg2|@@null, arg3|@@null, arg4|@@null, arg5|@@null, arg6|@@null</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-kwd"> ${</span><span class="pp-expr">call</span><span class="pp-kwd">}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg1 != null</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg1</span><span class="pp-kwd">}</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg2 != null</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg2</span><span class="pp-kwd">}</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg3 != null</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg3</span><span class="pp-kwd">}</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg4 != null</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg4</span><span class="pp-kwd">}</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg5 != null</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg5</span><span class="pp-kwd">}</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg6 != null</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">@</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg6</span><span class="pp-kwd">}</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> result</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error()</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_224">
                    <div class="code-panel" id="d_224">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/base_test.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> name</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> path</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">import</span><span class="pp-pln"> util</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> del = require('del')</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> expect = require('expect.js')</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> _ = require('lodash')</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> file = require('wizzi-utils').file</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">var</span><span class="pp-pln"> verify = require('wizzi-utils').verify</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-kwd">$hook</span><span class="pp-pln"> imports</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">+</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">describe</span><span class="pp-kwd"> ${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_225">
                    <div class="code-panel" id="d_225">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/co_run_test.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> method</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">it-async</span><span class="pp-kwd"> ${</span><span class="pp-expr">method</span><span class="pp-kwd">}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> co</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">function*</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">                </span><span class="pp-kwd">$hook</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">._</span><span class="pp-pln"> then</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> done()</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">            </span><span class="pp-tag">._</span><span class="pp-pln"> catch</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> done()</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> console.log</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> 'catched in </span><span class="pp-kwd">${</span><span class="pp-expr">method</span><span class="pp-kwd">}</span><span class="pp-pln">.co'</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                        </span><span class="pp-tag">@</span><span class="pp-pln"> err.message</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">throw</span><span class="pp-pln"> err</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_226">
                    <div class="code-panel" id="d_226">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/co_run.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> method</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> co</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">function*</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-kwd">$hook</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">._</span><span class="pp-pln"> catch</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> console.log</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> 'catched in </span><span class="pp-kwd">${</span><span class="pp-expr">method</span><span class="pp-kwd">}</span><span class="pp-pln">.co'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> err.message</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> err.stack</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                </span><span class="pp-kwd">$hook</span><span class="pp-pln"> oncatch</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-tag">throw</span><span class="pp-pln"> err</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_227">
                    <div class="code-panel" id="d_227">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/expect_throw_error.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> error</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">function</span><span class="pp-pln"> fn</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-kwd">$hook</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">.</span><span class="pp-pln"> to</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">._</span><span class="pp-pln"> throwException</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">param</span><span class="pp-pln"> e</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> expect(e).to.be.a(errors.</span><span class="pp-kwd">${</span><span class="pp-expr">error</span><span class="pp-kwd">}</span><span class="pp-pln">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_228">
                    <div class="code-panel" id="d_228">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/f_cb_done.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> result|notUsed</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-kwd"> ${</span><span class="pp-expr">result</span><span class="pp-kwd">}</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'err', err</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error(err.message)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> done</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_229">
                    <div class="code-panel" id="d_229">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/f_cb_no_err.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> result|notUsed</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-kwd"> ${</span><span class="pp-expr">result</span><span class="pp-kwd">}</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_230">
                    <div class="code-panel" id="d_230">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/f_cb_test.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> result|notUsed</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">param</span><span class="pp-kwd"> ${</span><span class="pp-expr">result</span><span class="pp-kwd">}</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'err', err</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">throw</span><span class="pp-pln"> new Error(err)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_231">
                    <div class="code-panel" id="d_231">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/itasync.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> title, call, arg1|@@null, arg2|@@null, arg3|@@null, arg4|@@null, arg5|@@null, arg6|@@null</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> it</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">@</span><span class="pp-pln"> "</span><span class="pp-kwd">${</span><span class="pp-expr">title</span><span class="pp-kwd">}</span><span class="pp-pln">"</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> done</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-kwd"> ${</span><span class="pp-expr">call</span><span class="pp-kwd">}</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg1 != null</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg1</span><span class="pp-kwd">}</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg2 != null</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg2</span><span class="pp-kwd">}</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg3 != null</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg3</span><span class="pp-kwd">}</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg4 != null</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg4</span><span class="pp-kwd">}</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg5 != null</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg5</span><span class="pp-kwd">}</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                </span><span class="pp-kwd">$if</span><span class="pp-expr"> arg6 != null</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-kwd"> ${</span><span class="pp-expr">arg6</span><span class="pp-kwd">}</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> result</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                    </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_232">
                    <div class="code-panel" id="d_232">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/mongo_before_async.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">before-async</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> MongoClient.connect</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">@</span><span class="pp-pln"> 'mongodb://localhost:27017/test'</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> db</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> fsdb = new FsDb(db)</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">set</span><span class="pp-pln"> doc = new Document(fsdb)</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">_</span><span class="pp-pln"> db.collection(FSITEMS).drop</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                </span><span class="pp-tag">function</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-tag">param</span><span class="pp-pln"> result</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                    </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                        </span><span class="pp-tag">log</span><span class="pp-pln"> 'FSITEMS.drop failed'</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                    </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                        </span><span class="pp-tag">log</span><span class="pp-pln"> 'FSITEMS.drop result', result</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">_</span><span class="pp-pln"> db.collection(DOCUMENTS).drop</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                        </span><span class="pp-tag">function</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                            </span><span class="pp-tag">param</span><span class="pp-pln"> result</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                            </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                                </span><span class="pp-tag">log</span><span class="pp-pln"> 'DOCUMENTS.drop failed'</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">                            </span><span class="pp-tag">else</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">                                </span><span class="pp-tag">log</span><span class="pp-pln"> 'DOCUMENTS.drop result', result</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">                            </span><span class="pp-tag">_</span><span class="pp-pln"> done()</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_233">
                    <div class="code-panel" id="d_233">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/tobe_array.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> name, length</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect(</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">).to.be.an('array')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect(</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">.length).to.be(</span><span class="pp-kwd">${</span><span class="pp-expr">length</span><span class="pp-kwd">}</span><span class="pp-pln">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_234">
                    <div class="code-panel" id="d_234">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/tobe_equal.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> a, b</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect(</span><span class="pp-kwd">${</span><span class="pp-expr">a</span><span class="pp-kwd">}</span><span class="pp-pln">).to.be.equal(</span><span class="pp-kwd">${</span><span class="pp-expr">b</span><span class="pp-kwd">}</span><span class="pp-pln">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_235">
                    <div class="code-panel" id="d_235">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/tobe_false.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> name</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect(</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">).to.be(false)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_236">
                    <div class="code-panel" id="d_236">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/tobe_function.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> name</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect(</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">).to.be.a('function')</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_237">
                    <div class="code-panel" id="d_237">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/tobe_null.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> name</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect(</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">).to.be(null)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_238">
                    <div class="code-panel" id="d_238">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/tobe_number.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> name, value</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect(</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">).to.be.a('number')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect(</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">).to.be(</span><span class="pp-kwd">${</span><span class="pp-expr">value</span><span class="pp-kwd">}</span><span class="pp-pln">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_239">
                    <div class="code-panel" id="d_239">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/tobe_object.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> name</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect(</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">).to.be.an('object')</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_240">
                    <div class="code-panel" id="d_240">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/tobe_string_value.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> name, value</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect(</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">).to.be.a('string')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect(</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">).to.be(</span><span class="pp-kwd">${</span><span class="pp-expr">value</span><span class="pp-kwd">}</span><span class="pp-pln">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_241">
                    <div class="code-panel" id="d_241">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/tobe_string.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> name, value</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect(</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">).to.be.a('string')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect(</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">).to.be('</span><span class="pp-kwd">${</span><span class="pp-expr">value</span><span class="pp-kwd">}</span><span class="pp-pln">')</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_242">
                    <div class="code-panel" id="d_242">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/tobe_true.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> name</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect(</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">).to.be(true)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_243">
                    <div class="code-panel" id="d_243">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/tests/t/tobe_undefined.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> name</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">_</span><span class="pp-pln"> expect(</span><span class="pp-kwd">${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln">).to.be(undefined)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_244">
                    <div class="code-panel" id="d_244">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/generate.wfjob.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">wfjob</span><span class="pp-pln"> wizzi</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-expr">var</span><span class="pp-expr"> ittf_meta_folder      = path.join(__dirname, 'ittf', 'meta');</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-expr">var</span><span class="pp-expr"> ittf_lib_folder       = path.join(__dirname, 'ittf', 'lib');</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-expr">var</span><span class="pp-expr"> ittf_root_folder      = path.join(__dirname, 'ittf', 'root');</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-expr">var</span><span class="pp-expr"> ittf_tests_folder     = path.join(__dirname, 'ittf', 'tests');</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-expr">var</span><span class="pp-expr"> ittf_examples_folder  = path.join(__dirname, 'ittf', 'examples');</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">        </span><span class="pp-expr">var</span><span class="pp-expr"> dest_folder           = path.join(__dirname, '..', 'dist');</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">model</span><span class="pp-pln"> meta</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-tag">schema</span><span class="pp-pln"> json</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">src</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_meta_folder</span><span class="pp-kwd">}</span><span class="pp-pln">/index.json.ittf</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">line</span><span class="pp-pln"> ittf-lib</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">cwd-folder</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_lib_folder</span><span class="pp-kwd">}</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">dest-folder</span><span class="pp-kwd"> ${</span><span class="pp-expr">dest_folder</span><span class="pp-kwd">}</span><span class="pp-pln">/lib</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_253">wfjob/any_js(</span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">ignore</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_lib_folder</span><span class="pp-kwd">}</span><span class="pp-pln">/**/*__copy/**/*.js.ittf</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">artifact</span><span class="pp-pln"> any_ittf_inside___copy</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">src</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_lib_folder</span><span class="pp-kwd">}</span><span class="pp-pln">/**/*__copy/**/*.ittf</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">extension</span><span class="pp-pln"> ittf</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">    </span><span class="pp-tag">line</span><span class="pp-pln"> ittf-examples</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">        </span><span class="pp-tag">cwd-folder</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_examples_folder</span><span class="pp-kwd">}</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">dest-folder</span><span class="pp-kwd"> ${</span><span class="pp-expr">dest_folder</span><span class="pp-kwd">}</span><span class="pp-pln">/examples</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_253">wfjob/any_js(</span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">ignore</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_examples_folder</span><span class="pp-kwd">}</span><span class="pp-pln">/**/*__copy/**/*.js.ittf</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">        </span><span class="pp-tag">artifact</span><span class="pp-pln"> any_ittf_inside___copy</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">src</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_examples_folder</span><span class="pp-kwd">}</span><span class="pp-pln">/**/*__copy/**/*.ittf</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">extension</span><span class="pp-pln"> ittf</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">        </span><span class="pp-tag">artifact</span><span class="pp-pln"> any_plain_js_inside___copy</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">            </span><span class="pp-tag">src</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_examples_folder</span><span class="pp-kwd">}</span><span class="pp-pln">/**/*__copy/**/*.js</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">extension</span><span class="pp-pln"> js</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">artifact</span><span class="pp-pln"> any_plain_html_inside___copy</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">src</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_examples_folder</span><span class="pp-kwd">}</span><span class="pp-pln">/**/*__copy/**/*.html</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">extension</span><span class="pp-pln"> html</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">artifact</span><span class="pp-pln"> any_plain_css_inside___copy</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">src</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_examples_folder</span><span class="pp-kwd">}</span><span class="pp-pln">/**/*__copy/**/*.css</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">extension</span><span class="pp-pln"> css</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">    </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_254"> wfjob/root</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">    </span><span class="pp-tag">line</span><span class="pp-pln"> ittf-tests</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">        </span><span class="pp-tag">cwd-folder</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_tests_folder</span><span class="pp-kwd">}</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">        </span><span class="pp-tag">dest-folder</span><span class="pp-kwd"> ${</span><span class="pp-expr">dest_folder</span><span class="pp-kwd">}</span><span class="pp-pln">/tests</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_253">wfjob/any_js(</span><span class="pp-mix">)</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">            </span><span class="pp-tag">ignore</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_tests_folder</span><span class="pp-kwd">}</span><span class="pp-pln">/**/*__copy/**/*.js.ittf</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">        </span><span class="pp-tag">artifact</span><span class="pp-pln"> any_ittf_inside___copy</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">            </span><span class="pp-tag">src</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_tests_folder</span><span class="pp-kwd">}</span><span class="pp-pln">/**/*__copy/**/*.ittf</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">            </span><span class="pp-tag">extension</span><span class="pp-pln"> ittf</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">        </span><span class="pp-tag">artifact</span><span class="pp-pln"> any_json_inside___copy</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">src</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_tests_folder</span><span class="pp-kwd">}</span><span class="pp-pln">/**/*__copy/**/*.json</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">extension</span><span class="pp-pln"> json</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">        </span><span class="pp-kwd">$include</span><span class="pp-mix frag-to-link-a" data-frag-id="d_260"> wfjob/any_tests_ittf</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">    </span><span class="pp-tag">production</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">        </span><span class="pp-tag">dest-folder</span><span class="pp-kwd"> ${</span><span class="pp-expr">dest_folder</span><span class="pp-kwd">}</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">        </span><span class="pp-tag">line-ref</span><span class="pp-pln"> ittf-lib</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">        </span><span class="pp-tag">line-ref</span><span class="pp-pln"> ittf-examples</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">        </span><span class="pp-tag">line-ref</span><span class="pp-pln"> ittf-root</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">        </span><span class="pp-tag">line-ref</span><span class="pp-pln"> ittf-tests</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_245">
                    <div class="code-panel" id="d_245">
                        <div class="modal-view-container">
                            <h4 class="d-h2">src/ittf/lib/io/t/filesystem/fsitem.js.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.copyFsItem</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> action</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> action.itemKind == 0</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> md.copyFolder</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceProjectId</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceItemPath</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destProjectId</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destItemPath</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> md.copyFile</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceProjectId</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceItemPath</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destProjectId</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destItemPath</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.moveFsItem</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> action</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> action.itemKind == 0</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> md.moveFolder</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceProjectId</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceItemPath</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destProjectId</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destItemPath</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> md.moveFile</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> userId</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceProjectId</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.sourceItemPath</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destProjectId</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.destItemPath</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">    </span><span class="pp-tag">set</span><span class="pp-pln"> md.deleteFsItem</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L6"><span class="pp-ln">  46 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> userId</span></div><div class="L7"><span class="pp-ln">  47 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> action</span></div><div class="L8"><span class="pp-ln">  48 </span><span class="pp-pln">            </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L9"><span class="pp-ln">  49 </span><span class="pp-pln">            </span><span class="pp-tag">log</span><span class="pp-pln"> 'wizzi.FileSystem.deleteFsItem.action', action</span></div><div class="L0"><span class="pp-ln">  50 </span><span class="pp-pln">            </span><span class="pp-tag">if</span><span class="pp-pln"> action.itemKind == 0</span></div><div class="L1"><span class="pp-ln">  51 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> md.deleteFolder</span></div><div class="L2"><span class="pp-ln">  52 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.userId || userId</span></div><div class="L3"><span class="pp-ln">  53 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.projectId</span></div><div class="L4"><span class="pp-ln">  54 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.itemPath</span></div><div class="L5"><span class="pp-ln">  55 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div><div class="L6"><span class="pp-ln">  56 </span><span class="pp-pln">            </span><span class="pp-tag">else</span></div><div class="L7"><span class="pp-ln">  57 </span><span class="pp-pln">                </span><span class="pp-tag">_</span><span class="pp-pln"> md.deleteFile</span></div><div class="L8"><span class="pp-ln">  58 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.userId || userId</span></div><div class="L9"><span class="pp-ln">  59 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.projectId</span></div><div class="L0"><span class="pp-ln">  60 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> action.itemPath</span></div><div class="L1"><span class="pp-ln">  61 </span><span class="pp-pln">                    </span><span class="pp-tag">@</span><span class="pp-pln"> callback</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_246">
                    <div class="code-panel" id="d_246">
                        <div class="modal-view-container">
                            <h4 class="d-h2">../t/common/proj_gitignore.text.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">text</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">.DS_Store</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">.nodemonignore</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">.sass-cache/</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">npm-debug.log</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">node_modules/</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">public/lib</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">app/tests/coverage/</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">.bower-*/</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">.idea/</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">.bin/</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">.obj/</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">obj/</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">bin/</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">Properties/</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">private/</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_247">
                    <div class="code-panel" id="d_247">
                        <div class="modal-view-container">
                            <h4 class="d-h2">../t/common/mit_license.text.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">text</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> copy</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">MIT</span><span class="pp-pln"> License</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">br</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">Copyright</span><span class="pp-pln"> (c) </span><span class="pp-kwd">${</span><span class="pp-expr">copy</span><span class="pp-kwd">}</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">br</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">Permission</span><span class="pp-pln"> is hereby granted, free of charge, to any person obtaining a copy</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">of</span><span class="pp-pln"> this software and associated documentation files (the "Software"), to deal</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">in</span><span class="pp-pln"> the Software without restriction, including without limitation the rights</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">to</span><span class="pp-pln"> use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">copies</span><span class="pp-pln"> of the Software, and to permit persons to whom the Software is</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">furnished</span><span class="pp-pln"> to do so, subject to the following conditions:</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">br</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">The</span><span class="pp-pln"> above copyright notice and this permission notice shall be included in</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">all</span><span class="pp-pln"> copies or substantial portions of the Software.</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">    </span><span class="pp-tag">br</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">THE</span><span class="pp-pln"> SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-tag">IMPLIED,</span><span class="pp-pln"> INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">    </span><span class="pp-tag">FITNESS</span><span class="pp-pln"> FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">    </span><span class="pp-tag">AUTHORS</span><span class="pp-pln"> OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">    </span><span class="pp-tag">LIABILITY,</span><span class="pp-pln"> WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">    </span><span class="pp-tag">OUT</span><span class="pp-pln"> OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">    </span><span class="pp-tag">THE</span><span class="pp-pln"> SOFTWARE.</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_248">
                    <div class="code-panel" id="d_248">
                        <div class="modal-view-container">
                            <h4 class="d-h2">../t/common/kernel_package.json.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> pkgName, version, description, license|MIT</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">name</span><span class="pp-pln"> "</span><span class="pp-kwd">${</span><span class="pp-expr">pkgName</span><span class="pp-kwd">}</span><span class="pp-pln">"</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">version</span><span class="pp-pln"> "</span><span class="pp-kwd">${</span><span class="pp-expr">version</span><span class="pp-kwd">}</span><span class="pp-pln">"</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">description</span><span class="pp-pln"> "</span><span class="pp-kwd">${</span><span class="pp-expr">description</span><span class="pp-kwd">}</span><span class="pp-pln">"</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">author</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">name</span><span class="pp-pln"> "Stefano Bassoli"</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">email</span><span class="pp-pln"> "wizzi.team@gmail.com"</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">private</span><span class="pp-pln"> false</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">licenses</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">        </span><span class="pp-tag">[</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-kwd">$if</span><span class="pp-expr"> license == 'MIT'</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">{</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">type</span><span class="pp-pln"> "MIT"</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">                </span><span class="pp-tag">url</span><span class="pp-pln"> "https://github.com/wizzifactory/wizzi/tree/master/license.txt"</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">repository</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">type</span><span class="pp-pln"> "git"</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">url</span><span class="pp-pln"> "https://github.com/wizzifactory/wizzi/tree/master/packages/</span><span class="pp-kwd">${</span><span class="pp-expr">pkgName</span><span class="pp-kwd">}</span><span class="pp-pln">"</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">    </span><span class="pp-tag">engines</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">            </span><span class="pp-tag">node</span><span class="pp-pln"> "&gt;=0.10.28"</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">            </span><span class="pp-tag">npm</span><span class="pp-pln"> "&gt;=1.4.28"</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">    </span><span class="pp-tag">scripts</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">            </span><span class="pp-tag">test</span><span class="pp-pln"> "mocha tests/**/*.js --full-trace"</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">    </span><span class="pp-tag">dependencies</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">            </span><span class="pp-tag">async</span><span class="pp-pln"> "^2.1.5"</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">            </span><span class="pp-tag">chalk</span><span class="pp-pln"> "^1.1.3"</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">            </span><span class="pp-tag">iconv-lite</span><span class="pp-pln"> "^0.4.15"</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">            </span><span class="pp-tag">json-stringify-safe</span><span class="pp-pln"> "^5.0.1"</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">            </span><span class="pp-tag">lodash</span><span class="pp-pln"> "^4.17.4"</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">            </span><span class="pp-tag">wizzi-utils</span><span class="pp-pln"> "latest"</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">            </span><span class="pp-kwd">$hook</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">    </span><span class="pp-tag">devDependencies</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-kwd">$hook</span><span class="pp-pln"> devDependencies</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_249">
                    <div class="code-panel" id="d_249">
                        <div class="modal-view-container">
                            <h4 class="d-h2">../t/common/kernel.md.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">mdx</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> name, title</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">h1</span><span class="pp-kwd"> ${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln"> - ver 0.5 - kernel package</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">br</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-kwd"> ${</span><span class="pp-expr">title</span><span class="pp-kwd">}</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">br</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_250">workinprogress(</span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-kwd">$hook</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">h2</span><span class="pp-pln"> Source and generation</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-kwd"> ${</span><span class="pp-expr">name</span><span class="pp-kwd">}</span><span class="pp-pln"> is generated using the wizzi factory ver 0.4.</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">br</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_251">wf(</span><span class="pp-mix">)</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">h2</span><span class="pp-pln"> Built With</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">    </span><span class="pp-tag">ul</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">        </span><span class="pp-tag">li</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">            </span><span class="pp-tag">a</span><span class="pp-pln"> Nodejs</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">                </span><span class="pp-tag">href</span><span class="pp-pln"> https://nodejs.org</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">li</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">a</span><span class="pp-pln"> Wizzi Factory</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">                </span><span class="pp-tag">href</span><span class="pp-pln"> https://github.com/wizzifactory</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">    </span><span class="pp-tag">br</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">    </span><span class="pp-mix frag-to-link-a" data-frag-id="d_252">license(</span><span class="pp-mix">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_250">
                    <div class="code-panel" id="d_250">
                        <div class="modal-view-container">
                            <h4 class="d-h2">../t/common/workinprogress.md.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">h2</span><span class="pp-pln"> Work still in progress</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">br</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> Availability of features will be announced</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> on [Twitter](https://twitter.com/wizziteam) and [Facebook](https://www.facebook.com/wizzifactory)</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">br</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_251">
                    <div class="code-panel" id="d_251">
                        <div class="modal-view-container">
                            <h4 class="d-h2">../t/common/wf.md.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">h2</span><span class="pp-pln"> The Wizzi Factory - Ver 0.5</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">br</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> A set of tools for model driven development.</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">br</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">p</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">a</span><span class="pp-pln"> Project page</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">href</span><span class="pp-pln"> https://wizzifactory.github.io/</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_252">
                    <div class="code-panel" id="d_252">
                        <div class="modal-view-container">
                            <h4 class="d-h2">../t/common/license.md.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">h2</span><span class="pp-pln"> License</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">p</span><span class="pp-pln"> This project is licensed under the MIT License - see the</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">a</span><span class="pp-pln"> license.txt</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">            </span><span class="pp-tag">href</span><span class="pp-pln"> license.txt</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">p</span><span class="pp-pln"> for details.</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_253">
                    <div class="code-panel" id="d_253">
                        <div class="modal-view-container">
                            <h4 class="d-h2">../t/wfjob/any_js.wfjob.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">artifact</span><span class="pp-pln"> any_js</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">src</span><span class="pp-pln"> ./**/*.js.ittf</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">schema</span><span class="pp-pln"> js</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">generator</span><span class="pp-pln"> js/module</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">extension</span><span class="pp-pln"> js</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_254">
                    <div class="code-panel" id="d_254">
                        <div class="modal-view-container">
                            <h4 class="d-h2">../../t/wfjob/root.wfjob.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">line</span><span class="pp-pln"> ittf-root</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">cwd-folder</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_root_folder</span><span class="pp-kwd">}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">dest-folder</span><span class="pp-kwd"> ${</span><span class="pp-expr">dest_folder</span><span class="pp-kwd">}</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_255">any_js(</span><span class="pp-mix">)</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">            </span><span class="pp-tag">ignore</span><span class="pp-kwd"> ${</span><span class="pp-expr">ittf_root_folder</span><span class="pp-kwd">}</span><span class="pp-pln">/**/*__copy.*/**/*.js.ittf</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_256">any_json(</span><span class="pp-mix">)</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">            </span><span class="pp-tag">model-ref</span><span class="pp-pln"> meta</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">                </span><span class="pp-tag">export-name</span><span class="pp-pln"> wfpackage</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_257">any_md(</span><span class="pp-mix">)</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">            </span><span class="pp-tag">model-ref</span><span class="pp-pln"> meta</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">                </span><span class="pp-tag">export-name</span><span class="pp-pln"> wfpackage</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_258">any_text(</span><span class="pp-mix">)</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">            </span><span class="pp-tag">model-ref</span><span class="pp-pln"> meta</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">                </span><span class="pp-tag">export-name</span><span class="pp-pln"> wfpackage</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">        </span><span class="pp-tag">artifact</span><span class="pp-pln"> .gitignore</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">            </span><span class="pp-tag">src</span><span class="pp-pln"> .gitignore.text.ittf</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">            </span><span class="pp-tag">schema</span><span class="pp-pln"> text</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">            </span><span class="pp-tag">generator</span><span class="pp-pln"> text/document</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">            </span><span class="pp-tag">dest-path</span><span class="pp-pln"> .gitignore</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">            </span><span class="pp-tag">extension</span><span class="pp-pln"> gitignore</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">        </span><span class="pp-mix frag-to-link-a" data-frag-id="d_259">any_plain(</span><span class="pp-arg"> ps1</span><span class="pp-mix">)</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_255">
                    <div class="code-panel" id="d_255">
                        <div class="modal-view-container">
                            <h4 class="d-h2">../../t/wfjob/t/any_js.wfjob.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">artifact</span><span class="pp-pln"> any_js</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">src</span><span class="pp-pln"> ./**/*.js.ittf</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">schema</span><span class="pp-pln"> js</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">generator</span><span class="pp-pln"> js/module</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">extension</span><span class="pp-pln"> js</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_256">
                    <div class="code-panel" id="d_256">
                        <div class="modal-view-container">
                            <h4 class="d-h2">../../t/wfjob/t/any_json.wfjob.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">artifact</span><span class="pp-pln"> any_json</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">src</span><span class="pp-pln"> ./**/*.json.ittf</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">schema</span><span class="pp-pln"> json</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">generator</span><span class="pp-pln"> json/document</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">extension</span><span class="pp-pln"> json</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_257">
                    <div class="code-panel" id="d_257">
                        <div class="modal-view-container">
                            <h4 class="d-h2">../../t/wfjob/t/any_md.wfjob.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">artifact</span><span class="pp-pln"> any_md</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">src</span><span class="pp-pln"> ./**/*.md.ittf</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">schema</span><span class="pp-pln"> md</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">generator</span><span class="pp-pln"> md/document</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">extension</span><span class="pp-pln"> md</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_258">
                    <div class="code-panel" id="d_258">
                        <div class="modal-view-container">
                            <h4 class="d-h2">../../t/wfjob/t/any_text.wfjob.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">artifact</span><span class="pp-pln"> any_text</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">src</span><span class="pp-pln"> ./**/*.text.ittf</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">schema</span><span class="pp-pln"> text</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">generator</span><span class="pp-pln"> text/document</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">        </span><span class="pp-tag">extension</span><span class="pp-pln"> txt</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-kwd">$hook</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_259">
                    <div class="code-panel" id="d_259">
                        <div class="modal-view-container">
                            <h4 class="d-h2">../../t/wfjob/t/any_plain.wfjob.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-kwd">$params</span><span class="pp-pln"> ext</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">artifact</span><span class="pp-pln"> any_plain_</span><span class="pp-kwd">${</span><span class="pp-expr">ext</span><span class="pp-kwd">}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">src</span><span class="pp-pln"> ./**/*.</span><span class="pp-kwd">${</span><span class="pp-expr">ext</span><span class="pp-kwd">}</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">        </span><span class="pp-tag">extension</span><span class="pp-kwd"> ${</span><span class="pp-expr">ext</span><span class="pp-kwd">}</span></div></pre>
                        </div>
                    </div>
                </div>
                <div class="mc-pane mc-pane-code-d_260">
                    <div class="code-panel" id="d_260">
                        <div class="modal-view-container">
                            <h4 class="d-h2">../t/wfjob/any_tests_ittf.wfjob.ittf</h4>
                            <pre class="prettyprint">

<div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-kwd">$group</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">    </span><span class="pp-tag">artifact</span><span class="pp-pln"> any_tests_ittf</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">        </span><span class="pp-tag">src</span><span class="pp-pln"> ./**/*.tests.ittf</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">        </span><span class="pp-tag">extension</span><span class="pp-pln"> ittf</span></div></pre>
                        </div>
                    </div>
                </div>
                <div id="frag-modal" class="modal">
                    <div id="frag-modal-content" class="modal-content">
                        <span class="modal-close">&times;</span>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script>
        /*
            artifact generator: C:\my\wizzi\v6\node_modules\wizzi-js\lib\artifacts\js\module\gen\main.js
            primary source IttfDocument: c:\my\wizzi\v6\test\wizzi-docs\jobs\ittf\code\html\package\package.html.ittf
            utc time: Sun, 30 Sep 2018 09:39:32 GMT
        */
        'use strict';
        function m_toggleChanged() {
            var el_toc = document.querySelector("input[id='mc-toggle-toc']");
            var el_contents = document.querySelectorAll("input[id^='mc-toggle-code-']");
            var seenTrue = false;
            var i, i_items=el_contents, i_len=el_contents.length, el;
            for (i=0; i<i_len; i++) {
                el = el_contents[i];
                if (el.checked) {
                    seenTrue = true;
                }
            }
            el_toc.checked = seenTrue;
        }
        function mc_toggle_toc_Close() {
            var el_toc = document.querySelector("input[id='mc-toggle-toc']");
            var el_contents = document.querySelectorAll("input[id^='mc-toggle-code-']");
            var i, i_items=el_contents, i_len=el_contents.length, el;
            for (i=0; i<i_len; i++) {
                el = el_contents[i];
                el.checked = false;
            }
            el_toc.checked = false;
        }
    </script>
    <script src="../wizzifactory.js"></script>
</body>

</html>
