<!doctype html>
<html VERSION-5="5" VERSION-4="4" version="5">
    <head>
        <title>The Wizzi Factory</title>
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link href="../normalize.css" rel="stylesheet">
        <link href="../wizzifactory.css" rel="stylesheet">
    </head>
    <body class="docs-models">
        <div class="site">
            <header class="navigation">
                <div class="container navigation__inner">
                    <div class="logo">
                        <span class="logo-w">W</span>
                        <span class="logo-i1">i</span>
                        <span class="logo-z1">z</span>
                        <span class="logo-z2">z</span>
                        <span class="logo-i2">i</span>
                        <span>&nbsp;</span>
                        <span class="logo-f">f</span>
                        <span class="logo-a">a</span>
                        <span class="logo-c">c</span>
                        <span class="logo-t">t</span>
                        <span class="logo-o">o</span>
                        <span class="logo-r">r</span>
                        <span class="logo-y">y</span>
                    </div>
                    <nav class="navigation__links">
                        <a title="docs concepts" href="../concepts.html" class="navigation__link">Concepts</a>
                        <a title="docs docs" href="../docs/intro.html" class="navigation__link navigation__link--active">Docs</a>
                        <a title="docs api" href="../api.html" class="navigation__link">Api</a>
                        <a title="docs code" href="../code/intro.html" class="navigation__link">Code</a>
                        <a title="docs starters" href="../starters.html" class="navigation__link">Starters</a>
                        <a title="docs project" href="../project.html" class="navigation__link">Project</a>
                    </nav>
                    <div class="navigation__search">
                        <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;">
                            <input type="text" class="navigation__search-input ds-input" placeholder="Search documentationâ€¦" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="position: relative; vertical-align: top;">
                            <pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; word-spacing: 0px; letter-spacing: normal; text-indent: 7px; text-rendering: auto; text-transform: none;"></pre>
                            <span class="ds-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="position: absolute; top: 100%; z-index: 100; display: none; left: 0px; right: auto;">
                                <div class="ds-dataset-1"></div>
                            </span>
                        </span>
                        <button class="navigation__search-icon icon-search"></button>
                        <button class="navigation__search-icon icon-cross"></button>
                    </div>
                    <a href="https://github.com/wizzifactory" target="_blank" class="navigation__icon" title="GitHub Repository"><i class="sidecar__icon icon-github"></i>
                    </a>
                    <a href="https://stackoverflow.com/questions/tagged/wizzifactory" target="_blank" class="navigation__icon" title="See Questions on Stack Overflow"><i class="sidecar__icon icon-stackoverflow"></i>
                    </a>
                    <a href="#" target="_blank" class="navigation__icon" title="Follow on twitter"><i class="sidecar__icon icon-twitter"></i>
                    </a>
                    <a href="#" target="_blank" class="navigation__icon" title="Follow on facebook"><i class="sidecar__icon icon-facebook"></i>
                    </a>
                </div>
                <div class="navigation__bottom">
                    <div class="container navigation__inner">
                        <a class="navigation__child" title="intro ittf source code" href="intro.html">intro</a>
                        <a class="navigation__child" title="ittf ittf source code" href="ittf.html">ittf</a>
                        <a class="navigation__child" title="jswizzi ittf source code" href="jswizzi.html">jswizzi</a>
                        <a class="navigation__child navigation__child--active" title="models ittf source code" href="models.html">models</a>
                        <a class="navigation__child" title="artifacts ittf source code" href="artifacts.html">artifacts</a>
                        <a class="navigation__child" title="jobs ittf source code" href="jobs.html">jobs</a>
                        <a class="navigation__child" title="plugins ittf source code" href="plugins.html">plugins</a>
                        <a class="navigation__child" title="wfschema ittf source code" href="wfschema.html">wfschema</a>
                        <a class="navigation__child" title="wfjob ittf source code" href="wfjob.html">wfjob</a>
                        <a class="navigation__child" title="wfpackage ittf source code" href="wfpackage.html">wfpackage</a>
                    </div>
                </div>
            </header>
            <main id="main-content">
                <nav class="main-sidebar-left" style="max-height: 648px; position: fixed; top: 90px; width: 280px;">
                    <img src="../workinprogress.jpg">
                    <section id="main-toc" class="toc toc sidebar__inner">
                        <h3>Contents:</h3>
                        <ol>
                            <li><a href="#concept-1">Wizzi models</a>
                            </li>
                            <li><a href="#concept-2">Wizzi models generation</a>
                            </li>
                            <li><a href="#concept-3">The wizzi model javascript module</a>
                            </li>
                            <li><a href="#concept-4">The wizzi model factory javascript module</a>
                            </li>
                            <li><a href="#concept-5">Wizzi schema</a>
                            </li>
                            <li><a href="#concept-6">The 'wfschema' schema</a>
                            </li>
                            <li><a href="#concept-7">Internal schemas</a>
                            </li>
                            <li><a href="#concept-8">Json pseudo schema</a>
                            </li>
                            <li><a href="#concept-9">Xml pseudo schema</a>
                            </li>
                            <li><a href="#concept-10">Text pseudo schema</a>
                            </li>
                            <li><a href="#concept-11">Ittf pseudo schema</a>
                            </li>
                        </ol>
                    </section>
                </nav>
                <div class="main-content">
                    <h2 id="concept-1" class="concept">Wizzi models</h2>
                    <div class="summary">
                        <p>Wizzi models are javascript document objects, inspired by Xml document objects, that can load mTrees, applying a type to their nodes, that are trasformed in instances of classes and typed instance properties.</p><p>To be loaded in a wizzi model an mTree node structure must be conformant to the wizzi model type, otherwise an mTreeLoadError is thrown.</p><p>Wizzi model types are described using a meta wizzi model, of type 'wfschema', implemented by the    <span>        <a href="https://github.com/wizzifactory/wizzi-core">'wizzi-core'        </a>    </span><span>plugin.    </span></p><p>Wizzi models are themself software artifacts generated by artifact generators of the wizzi-core plugin. They receive, as source model, a wizzi model of type 'wfschema' and, from its definitions, generate:    <ul>        <li>the wizzi model javascript module        </li><li>the model factory javascript module        </li><li>a json documentation file        </li><li>a html documentation file.        </li>    </ul></p><h4>Table of wizzi model artifact generators and links to source code</h4><table class="pretty-table">    <tr>        <th>artifact        </th><th>file name        </th><th>language        </th><th>plugin ittf        </th><th>plugin js        </th>    </tr><tr>        <td>wfschema/factory        </td><td>`schema-name`-factory.g.js        </td><td>javascript        </td><td>            <a href="https://github.com/wizzifactory/v3-plugins/tree/master/v3-wizzi-core/ittf/lib/artifacts/wfschema/factory/gen">v3            </a>        </td><td>            <a href="https://github.com/wizzifactory/wizzi-core/tree/master/lib/artifacts/wfschema/factory/gen">v3            </a>        </td>    </tr><tr>        <td>wfschema/model        </td><td>`schema-name`-model.g.js        </td><td>javascript        </td><td>            <a href="https://github.com/wizzifactory/v3-plugins/tree/master/v3-wizzi-core/ittf/lib/artifacts/wfschema/model/gen">v3            </a>        </td><td>            <a href="https://github.com/wizzifactory/wizzi-core/tree/master/lib/artifacts/wfschema/model/gen">v3            </a>        </td>    </tr><tr>        <td>wfschema/html_docs        </td><td>`schema-name`-schema.g.html        </td><td>html        </td><td>            <a href="https://github.com/wizzifactory/v3-plugins/tree/master/v3-wizzi-core/ittf/lib/artifacts/wfschema/html_docs/gen">v3            </a>        </td><td>            <a href="https://github.com/wizzifactory/wizzi-core/tree/master/lib/artifacts/wfschema/html_docs/gen">v3            </a>        </td>    </tr><tr>        <td>wfschema/json_docs        </td><td>`schema-name`-schema.g.json        </td><td>json        </td><td>            <a href="https://github.com/wizzifactory/v3-plugins/tree/master/v3-wizzi-core/ittf/lib/artifacts/wfschema/json_docs/gen">v3            </a>        </td><td>            <a href="https://github.com/wizzifactory/wizzi-core/tree/master/lib/artifacts/wfschema/json_docs/gen">v3            </a>        </td>    </tr></table></div>
                    <h2 id="concept-2" class="concept">Wizzi models generation</h2>
                    <div class="summary">
                        <p>Wizzi models can be generated calling the 'generateModelTypes' method of an instance of the wizzi.WizziFactory class, initizialized with the 'wizzi-core', 'wizzi-js' and 'wizzi-html' plugins.</p><p>This is the api of the wizzi.WizziFactory.generateModelTypes method.</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="tag">m</span><span class="pln"> generateModelTypes</span></li><li class="L3"><span class="pnl">    </span><span class="tag">string</span><span class="pln"> wfschemaIttfDocumentUri</span></li><li class="L4"><span class="pnl">      </span><span class="tag">#</span><span class="pln"> The full path to the primary ittf document of the schema description</span></li><li class="L5"><span class="pnl">    </span><span class="tag">string</span><span class="pln"> outputPackagePath</span></li><li class="L6"><span class="pnl">      </span><span class="tag">#</span><span class="pln"> The full path of the package folder where the generated artifacts will be written</span></li><li class="L7"><span class="pnl">    </span><span class="tag">string</span><span class="pln"> wfschemaName</span></li><li class="L8"><span class="pnl">      </span><span class="tag">#</span><span class="pln"> The schema name, for composing the names of the generated artifacts</span></li><li class="L9"><span class="pnl">    </span><span class="tag">{</span><span class="pln"> mTreeBuildUpContext</span></li><li class="L0"><span class="pnl">      </span><span class="tag">#</span><span class="pln"> A context object which properties will inserted in the global</span></li><li class="L1"><span class="pnl">      </span><span class="tag">#</span><span class="pln"> evaluation context during the mTree loading of the schema</span></li><li class="L2"><span class="pnl">    </span><span class="tag">callback</span><span class="pln"> </span></li></ol></pre></div>
                    <h2 id="concept-3" class="concept">The wizzi model javascript module</h2>
                    <div class="summary">
                        <p>A wizzi model is a javascript module containg a javascript class for each element defined in its 'wfschema' and some standard base and helper classes.</p><h4>Wizzi model classes</h4><table>    <tr>        <td>wzSourceLineInfo        </td><td>source map item with source file path, row, col of a node        </td>    </tr><tr>        <td>`schema-name`Exception        </td><td>exception object for this wizzi model        </td>    </tr><tr>        <td>`schema-name`Context        </td><td>context object for the methods wzInitialize and wzVerify        </td>    </tr><tr>        <td>`schema-name`Base        </td><td>base class for all element classes        </td>    </tr><tr>        <td>`element-name`        </td><td>one class for each element of the schema        </td>    </tr></table><h4>The wzSourceLineInfo API</h4><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">class</span><span class="pln"> wzSourceLineInfo</span></li><li class="L2"><span class="pnl">  </span><span class="tag">ctor</span><span class="pln"> </span></li><li class="L3"><span class="pnl">    </span><span class="tag">integer</span><span class="pln"> row</span></li><li class="L4"><span class="pnl">      </span><span class="tag">#</span><span class="pln"> 1-based row position of the source ittf node</span></li><li class="L5"><span class="pnl">    </span><span class="tag">integer</span><span class="pln"> col</span></li><li class="L6"><span class="pnl">      </span><span class="tag">#</span><span class="pln"> 1-based column position position of the source ittf node</span></li><li class="L7"><span class="pnl">    </span><span class="tag">string</span><span class="pln"> sourceKey</span></li><li class="L8"><span class="pnl">      </span><span class="tag">#</span><span class="pln"> Key to the source ittf document infos stored in the 'loadContext' object</span></li><li class="L9"><span class="pnl">      </span><span class="tag">#</span><span class="pln"> The 'loadContext' is a property of the root element</span></li><li class="L0"><span class="pnl">  </span><span class="tag">m</span><span class="pln"> toString</span></li><li class="L1"><span class="pnl">    </span><span class="tag">{</span><span class="pln"> elementInstance?</span></li></ol></pre><h4>The `schema-name`Exception API</h4><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">class</span><span class="pln"> `schema-name`Exception</span></li><li class="L2"><span class="pnl">  </span><span class="tag">ctor</span><span class="pln"> </span></li><li class="L3"><span class="pnl">    </span><span class="tag">string</span><span class="pln"> message</span></li><li class="L4"><span class="pnl">    </span><span class="tag">{</span><span class="pln"> ittfNode</span></li><li class="L5"><span class="pnl">    </span><span class="tag">{</span><span</span><span class="pln"> elementInstance</span></li></ol></pre><h4>The `schema-name`Context API</h4><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">class</span><span class="pln"> `schema-name`Context</span></li><li class="L2"><span class="pnl">  </span><span class="tag">boolean</span><span class="pln"> schemaIsValid</span></li><li class="L3"><span class="pnl">  </span><span class="tag">m</span><span class="pln"> addError</span></li><li class="L4"><span class="pnl">    </span><span class="tag">string</span><span class="pln"> message</span></li><li class="L5"><span class="pnl">    </span><span class="tag">{</span><span class="pln"> mTreeNode</span></li><li class="L6"><span class="pnl">  </span><span class="tag">m</span><span class="pln"> verifyEnum</span></li><li class="L7"><span class="pnl">    </span><span class="tag">string</span><span class="pln"> valueType</span></li><li class="L8"><span class="pnl">    </span><span class="tag">string</span><span class="pln"> valueName</span></li><li class="L9"><span class="pnl">    </span><span class="tag">string</span><span class="pln"> value</span></li><li class="L0"><span class="pnl">    </span><span class="tag">[</span><span class="pln"> allowed</span></li><li class="L1"><span class="pnl">      </span><span class="tag">string</span><span class="pln"> allowedValue</span></li><li class="L2"><span class="pnl">    </span><span class="tag">{</span><span</span><span class="pln"> mTreeNode</span></li></ol></pre><h4>The `schema-name`Base API</h4><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">class</span><span class="pln"> `schema-name`Base</span></li><li class="L2"><span class="pnl">  </span><span class="tag">string</span><span class="pln"> wzName</span></li><li class="L3"><span class="pnl">  </span><span class="tag">string</span><span class="pln"> wzTag</span></li><li class="L4"><span class="pnl">  </span><span class="tag">[</span><span class="pln"> wzChildren</span></li><li class="L5"><span class="pnl">  </span><span class="tag">ctor</span><span class="pln"> </span></li><li class="L6"><span class="pnl">    </span><span class="tag">string</span><span class="pln"> name</span></li><li class="L7"><span class="pnl">      </span><span class="tag">#</span><span class="pln"> the node-value of the source mTreeNode</span></li><li class="L8"><span class="pnl">      </span><span class="tag">#</span><span class="pln"> that becomes the 'wzName' of the newly created element</span></li><li class="L9"><span class="pnl">    </span><span class="tag">{</span><span class="pln"> sourceLineInfo</span></li><li class="L0"><span class="pnl">      </span><span class="tag">api-ref</span><span class="pln"> wizzimodel.wzSourceLineInfo</span></li><li class="L1"><span class="pnl">  </span><span class="tag">m</span><span class="pln"> wzRoot</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Return the model root element instance</span></li><li class="L3"><span class="pnl">  </span><span class="tag">m</span><span class="pln"> wzSourceFilepath</span></li><li class="L4"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Returns the filepath of an ittf source document given its 'sourceKey'</span></li><li class="L5"><span class="pnl">    </span><span class="tag">string</span><span class="pln"> sourceKey</span></li><li class="L6"><span class="pnl">  </span><span class="tag">m</span><span class="pln"> wzAddChild</span></li><li class="L7"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Add a child node to the wzChildren collection</span></li><li class="L8"><span class="pnl">    </span><span class="tag">{</span><span</span><span class="pln"> elementInstance</span></li><li class="L9"><span class="pnl">  </span><span class="tag">m</span><span class="pln"> wzLoadToChildColl</span></li><li class="L0"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Creates a new element instance given the type of its source mTreeNode</span></li><li class="L1"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Append it to the collection passed as parameter.</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Call the loadFromNode method of the newly created element</span></li><li class="L3"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> with the source mTreeNode as argument.</span></li><li class="L4"><span class="pnl">    </span><span class="tag">{</span><span</span><span</span><span class="pln"> mTreeNode</span></li><li class="L5"><span class="pnl">      </span><span class="tag">#</span><span class="pln"> the mTreeNode that we are loading</span></li><li class="L6"><span class="pnl">    </span><span class="tag">{</span><span</span><span</span><span</span><span class="pln"> type</span></li><li class="L7"><span class="pnl">      </span><span class="tag">#</span><span class="pln"> the javascript class of the wizzi model element</span></li><li class="L8"><span class="pnl">      </span><span class="tag">#</span><span class="pln"> that is the type for mTreeNode given its node-name</span></li><li class="L9"><span class="pnl">    </span><span class="tag">{</span><span</span><span</span><span</span><span</span><span class="pln"> coll</span></li><li class="L0"><span class="pnl">      </span><span class="tag">#</span><span class="pln"> the collection to which the newly created element should be appended</span></li><li class="L1"><span class="pnl">  </span><span class="tag">m</span><span class="pln"> wzLoadToChildren</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Creates a new element instance given the type of its source mTreeNode</span></li><li class="L3"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Append it to the wzChildren collection.</span></li><li class="L4"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Call the loadFromNode method of the newly created element</span></li><li class="L5"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> with the source mTreeNode as argument.</span></li><li class="L6"><span class="pnl">    </span><span class="tag">{</span><span</span><span</span><span</span><span</span><span</span><span class="pln"> mTreeNode</span></li><li class="L7"><span class="pnl">    </span><span class="tag">{</span><span</span><span</span><span</span><span</span><span</span><span</span><span class="pln"> type</span></li><li class="L8"><span class="pnl">  </span><span class="tag">m</span><span class="pln"> wzLoadOneToOne</span></li><li class="L9"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Creates a new element instance given the type of its source mTreeNode</span></li><li class="L0"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Assign it to the `fieldName` property.</span></li><li class="L1"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Call the loadFromNode method of the newly created element</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> with the source mTreeNode as argument.</span></li><li class="L3"><span class="pnl">    </span><span class="tag">{</span><span</span><span</span><span</span><span</span><span</span><span</span><span</span><span class="pln"> mTreeNode</span></li><li class="L4"><span class="pnl">    </span><span class="tag">{</span><span</span><span</span><span</span><span</span><span</span><span</span><span</span><span</span><span class="pln"> type</span></li><li class="L5"><span class="pnl">    </span><span class="tag">string</span><span class="pln"> fieldName</span></li><li class="L6"><span class="pnl">  </span><span class="tag">m</span><span class="pln"> error</span></li><li class="L7"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> throw a `schema-name`Exception</span></li><li class="L8"><span class="pnl">    </span><span class="tag">string</span><span class="pln"> message</span></li><li class="L9"><span class="pnl">    </span><span class="tag">{</span><span</span><span</span><span</span><span</span><span</span><span</span><span</span><span</span><span</span><span class="pln"> mTreeNode</span></li></ol></pre><h4>The `element-name` API</h4><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">class</span><span class="pln"> `element-name`</span></li><li class="L2"><span class="pnl">  </span><span class="tag">m</span><span class="pln"> loadChild</span></li><li class="L3"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Tests if the mTreeNode name is a valid child element or attribute.</span></li><li class="L4"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> If yes call the proper add method and return true.</span></li><li class="L5"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> If no return false.</span></li><li class="L6"><span class="pnl">    </span><span class="tag">{</span><span class="pln"> mTreeNode</span></li><li class="L7"><span class="pnl">  </span><span class="tag">m</span><span class="pln"> loadFromNode</span></li><li class="L8"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Calls the loadChild method on this element</span></li><li class="L9"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> for each child node of the mTreeNode to load.</span></li><li class="L0"><span class="pnl">    </span><span class="tag">{</span><span</span><span class="pln"> mTreeNode</span></li><li class="L1"><span class="pnl">  </span><span class="tag">m</span><span class="pln"> wzInitialize</span></li><li class="L2"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Initialize the element</span></li><li class="L3"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Called after the source mTree has been succesfully loaded.</span></li><li class="L4"><span class="pnl">    </span><span class="tag">param</span><span class="pln"> ctx</span></li><li class="L5"><span class="pnl">      </span><span class="tag">api-ref</span><span class="pln"> `schema-name`Context</span></li><li class="L6"><span class="pnl">  </span><span class="tag">m</span><span class="pln"> wzVerify</span></li><li class="L7"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Verify if the element is valid</span></li><li class="L8"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Called after the wzInitialize method.</span></li><li class="L9"><span class="pnl">    </span><span class="tag">{</span><span</span><span</span><span class="pln"> ctx</span></li><li class="L0"><span class="pnl">      </span><span class="tag">api-ref</span><span class="pln"> `schema-name`Context</span></li></ol></pre></div>
                    <h2 id="concept-4" class="concept">The wizzi model factory javascript module</h2>
                    <div class="summary">
                        <p>The javascript module `schema-name`-factory.g.js exports the method 'createLoadModel', that is an HOF that returns the 'loadModel' function. It must be called passing the 'wizzi' object.</p><h4>The `schema-name`-factory.g.js API</h4><p>We have seen already this api in the 'plugin' documentation. Repetita juvant.</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">{</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="tag">func</span><span class="pln"> createLoadModel</span></li><li class="L3"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> HOF : returns the loadModel function for the given factory</span></li><li class="L4"><span class="pnl">    </span><span class="tag">{</span><span</span><span class="pln"> wizziObject</span></li><li class="L5"><span class="pnl">      </span><span class="tag">func</span><span class="pln"> loadMTree</span></li><li class="L6"><span class="pnl">        </span><span class="tag">api-ref</span><span class="pln"> wizzi-mtree.loader.loadMTree</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> This function is prepared by the wizzi.wizziFactory instance class</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> and has repository access functions and load options in its closure.</span></li><li class="L9"><span class="pnl">      </span><span class="tag">{</span><span</span><span</span><span class="pln"> file</span></li><li class="L0"><span class="pnl">        </span><span class="tag">api-ref</span><span class="pln"> wizzi.util.file</span></li><li class="L1"><span class="pnl">      </span><span class="tag">{</span><span</span><span</span><span</span><span class="pln"> errors</span></li><li class="L2"><span class="pnl">        </span><span class="tag">api-ref</span><span class="pln"> wizzi.errors</span></li><li class="L3"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> </span></li><li class="L4"><span class="pnl">    </span><span class="tag">return</span><span class="pln"> </span></li><li class="L5"><span class="pnl">      </span><span class="tag">func</span><span class="pln"> loadModel</span></li><li class="L6"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> This returned function require a complex 'loadContext'</span></li><li class="L7"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> parameter with a lot of interfaces passed.</span></li><li class="L8"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> It will be called by the wizzi.wizziFactory instance and</span></li><li class="L9"><span class="pnl">        </span><span class="tag">#</span><span class="pln"> not directly from client code.</span></li><li class="L0"><span class="pnl">        </span><span class="tag">string</span><span class="pln"> ittfDocumentUri</span></li><li class="L1"><span class="pnl">          </span><span class="tag">#</span><span class="pln"> The path to the primary ittf document from which</span></li><li class="L2"><span class="pnl">          </span><span class="tag">#</span><span class="pln"> the mTree will be loaded</span></li><li class="L3"><span class="pnl">        </span><span class="tag">{</span><span</span><span</span><span</span><span</span><span class="pln"> loadContext</span></li><li class="L4"><span class="pnl">          </span><span class="tag">{</span><span</span><span</span><span</span><span</span><span</span><span class="pln"> __productionManager</span></li><li class="L5"><span class="pnl">            </span><span class="tag">api-ref</span><span class="pln"> wizzi.production.productionManager</span></li><li class="L6"><span class="pnl">            </span><span class="tag">{</span><span</span><span</span><span</span><span</span><span</span><span</span><span class="pln"> productionContext</span></li><li class="L7"><span class="pnl">              </span><span class="tag">api-ref</span><span class="pln"> wizzi.production.productionContext</span></li><li class="L8"><span class="pnl">              </span><span class="tag">{</span><span</span><span</span><span</span><span</span><span</span><span</span><span</span><span class="pln"> aclstat</span></li><li class="L9"><span class="pnl">                </span><span class="tag">api-ref</span><span class="pln"> wizzi.production.aclstat</span></li><li class="L0"><span class="pnl">          </span><span class="tag">{</span><span</span><span</span><span</span><span</span><span</span><span</span><span</span><span</span><span class="pln"> __ittfDocumentStore</span></li><li class="L1"><span class="pnl">            </span><span class="tag">api-ref</span><span class="pln"> wizzi-repo.ittfDocumentStore</span></li><li class="L2"><span class="pnl">          </span><span class="tag">{</span><span</span><span</span><span</span><span</span><span</span><span</span><span</span><span</span><span</span><span class="pln"> mTreeBuildUpContext</span></li><li class="L3"><span class="pnl">            </span><span class="tag">optional</span><span class="pln"> </span></li><li class="L4"><span class="pnl">            </span><span class="tag">|</span><span class="pln"> api-ref wizzi-plugin.wizziModel</span></li><li class="L5"><span class="pnl">            </span><span class="tag">|</span><span class="pln"> POJO</span></li><li class="L6"><span class="pnl">        </span><span class="tag">callback</span><span class="pln"> </span></li></ol></pre></div>
                    <h2 id="concept-5" class="concept">Wizzi schema</h2>
                    <div class="summary">
                        <p>A wizzi schema describes a valid tree structure for mTrees of a specific domain of interest. It is the core modeling tool of the wizzi factory.</p><p>Schemas are modeled using ittf documents like any other wizzi model.</p><h4>Sample 'rdbms' wizzi schema</h4><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">wfschema</span><span class="pln"> rdbms</span></li><li class="L2"><span class="pnl">  </span><span class="tag">e</span><span class="pln"> catalog</span></li><li class="L3"><span class="pnl">    </span><span class="tag">r</span><span class="pln"> table/s</span></li><li class="L4"><span class="pnl">  </span><span class="tag">e</span><span class="pln"> table</span></li><li class="L5"><span class="pnl">    </span><span class="tag">r</span><span class="pln"> column/s</span></li><li class="L6"><span class="pnl">    </span><span class="tag">r</span><span class="pln"> index/es</span></li><li class="L7"><span class="pnl">  </span><span class="tag">e</span><span class="pln"> column</span></li><li class="L8"><span class="pnl">    </span><span class="tag">a</span><span class="pln"> type</span></li><li class="L9"><span class="pnl">    </span><span class="tag">a</span><span class="pln"> caption</span></li><li class="L0"><span class="pnl">    </span><span class="tag">a</span><span class="pln"> defaultValue</span></li><li class="L1"><span class="pnl">      </span><span class="tag">tag</span><span class="pln"> default</span></li><li class="L2"><span class="pnl">  </span><span class="tag">e</span><span class="pln"> index</span></li><li class="L3"><span class="pnl">    </span><span class="tag">a</span><span class="pln"> primary</span></li><li class="L4"><span class="pnl">      </span><span class="tag">type</span><span class="pln"> boolean</span></li><li class="L5"><span class="pnl">    </span><span class="tag">a</span><span class="pln"> unique</span></li><li class="L6"><span class="pnl">      </span><span class="tag">type</span><span class="pln"> boolean</span></li><li class="L7"><span class="pnl">    </span><span class="tag">r</span><span class="pln"> column/s</span></li></ol></pre><h4>Sample ittf document conformant to the 'rdbms' wfschema that may be loaded in a 'rdbms' wizzi model.</h4><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">rdbms</span><span class="pln"> School</span></li><li class="L2"><span class="pnl">  </span><span class="tag">table</span><span class="pln"> Student</span></li><li class="L3"><span class="pnl">    </span><span class="tag">column</span><span class="pln"> Id</span></li><li class="L4"><span class="pnl">      </span><span class="tag">type</span><span class="pln"> integer</span></li><li class="L5"><span class="pnl">    </span><span class="tag">column</span><span class="pln"> Name</span></li><li class="L6"><span class="pnl">      </span><span class="tag">type</span><span class="pln"> string</span></li><li class="L7"><span class="pnl">    </span><span class="tag">index</span><span class="pln"> Student-PK</span></li><li class="L8"><span class="pnl">      </span><span class="tag">primary</span><span class="pln"> true</span></li><li class="L9"><span class="pnl">      </span><span class="tag">column</span><span class="pln"> Id</span></li><li class="L0"><span class="pnl">  </span><span class="tag">table</span><span class="pln"> Course</span></li><li class="L1"><span class="pnl">    </span><span class="tag">column</span><span class="pln"> Id</span></li><li class="L2"><span class="pnl">      </span><span class="tag">type</span><span class="pln"> integer</span></li><li class="L3"><span class="pnl">    </span><span class="tag">column</span><span class="pln"> Title</span></li><li class="L4"><span class="pnl">      </span><span class="tag">type</span><span class="pln"> string</span></li><li class="L5"><span class="pnl">    </span><span class="tag">index</span><span class="pln"> Student-PK</span></li><li class="L6"><span class="pnl">      </span><span class="tag">primary</span><span class="pln"> true</span></li><li class="L7"><span class="pnl">      </span><span class="tag">column</span><span class="pln"> Id</span></li></ol></pre><p>Wizzi schemas are wizzi models of type 'wfschema' implemented by the wizzi-core plugin.</p></div>
                    <h2 id="concept-6" class="concept">The 'wfschema' schema</h2>
                    <div class="summary">
                        <p>The wfschema, implemented by the wizzi-core plugin, is the meta model of a wizzi schema. It models a wizzi schema with the same semantic with which a wizzi schema models a wizzi model.</p><p>This documentation section has a circularity that may give an headache. It documents a schema that describe a schema using the same schema notation of the documented schema.</p><p>Some hints may help.</p><ul>    <li>A wizzi schema describes a model in terms of element types, with attributes, and relations between elements. Elements can extend super elements. Relations, that do not have attributes, can be of kind parent-children (one-to-many, the default) or parent-singlechild (one-to-one).    </li><li>Elements are described in a flat list. Relations hierarchy and element derivations are inferred from definitions.    </li><li>The root element can be declared using the element attribute 'isRoot'. If not declared the root element is the first of the list.    </li><li>Elements and attributes may have an optional tag attribute that defines a name alias shorter or with an easier mnemonic. wfschema examples:        <ul>            <li>'e' for 'element'            </li><li>'a' for 'attribute'            </li><li>'r' for 'relation'            </li>        </ul>    </li><li>Node names of mTree nodes simply map to an element or attribute tag (or name, if a tag is not declared).    </li></ul><h4>The wfschema elements are</h4><ul>    <li>wfschema    </li><li>exportTo    </li><li>require    </li><li>element    </li><li>attribute, string, boolean, integer, float, date    </li><li>relation    </li><li>restrict, enum, minLength, maxLength, minValue, maxValue, regexp    </li><li>method, function    </li><li>parameter    </li></ul><h3>wfschema element</h3><p>The root element of a 'wfschema'.</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> wfschema `name`</span></li><li class="L2"><span class="pnl">  </span><span class="tag">r</span><span class="pln"> require/s</span></li><li class="L3"><span class="pnl">  </span><span class="tag">r</span><span class="pln"> exportTo/s</span></li><li class="L4"><span class="pnl">  </span><span class="tag">r</span><span class="pln"> element/s</span></li></ol></pre><h3>exportTo element</h3><p>An exportTo element causes the insertion in the wizzi model classes of the prototype functions for exporting the tree data structure of the model in the requested format    <ul>        <li>toJson()        </li><li>toXml()        </li>    </ul></p><p>The entire wizzi model can be exported calling this methods on the root element.</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="tag">e</span><span class="pln"> export-to [json|xml]</span></li></ol></pre><h3>require element</h3><p>A wizzi model can contain user defined methods and functions, that could need to import objects from other modules. This element allow to insert require statements in the generated wizzi model module.</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> require `import-name`</span></li><li class="L2"><span class="pnl">  </span><span class="tag">string</span><span class="pln"> declareVar `name`</span></li><li class="L3"><span class="pnl">    </span><span class="tag">tag</span><span class="pln"> declare-var</span></li><li class="L4"><span class="pnl">    </span><span class="tag">optional</span><span class="pln"> </span></li><li class="L5"><span class="pnl">    </span><span class="tag">default</span><span class="pln"> `import-name`</span></li><li class="L6"><span class="pnl">  </span><span class="tag">string</span><span class="pln"> invoke `invoke-string`</span></li><li class="L7"><span class="pnl">    </span><span class="tag">optional</span><span class="pln"> </span></li><li class="L8"><span class="pnl">  </span><span class="tag">string</span><span class="pln"> kind [module]</span></li><li class="L9"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> At now we have only one kind, and this attribute is superflous.</span></li><li class="L0"><span class="pnl">    </span><span class="tag">#</span><span class="pln"> Other kinds could be added in the future.</span></li><li class="L1"><span class="pnl">    </span><span class="tag">optional</span><span class="pln"> </span></li><li class="L2"><span class="pnl">    </span><span class="tag">default</span><span class="pln"> module</span></li></ol></pre><p>The generated statement is built in this way:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">var</span><span class="pln"> `declareVar` = require('`import-name`')[`invoke`]</span></li></ol></pre><p>Example</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="tag">require</span><span class="pln"> wizzi-utils</span></li><li class="L3"><span class="pnl">    </span><span class="tag">declare-var</span><span class="pln"> verify</span></li><li class="L4"><span class="pnl">    </span><span class="tag">invoke</span><span class="pln"> .verify</span></li><li class="L5"><span class="pnl">  </span><span class="tag">generates:</span><span class="pln"> </span></li><li class="L6"><span class="pnl">    </span><span class="tag">var</span><span class="pln"> verify = require('wizzi-utils').verify</span></li></ol></pre><h3>Element element</h3><p>Describes an element type of the schema.</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> element `name` [: `super-element-name`]</span></li><li class="L2"><span class="pnl">  </span><span class="tag">tag</span><span class="pln"> e</span></li><li class="L3"><span class="pnl">  </span><span class="tag">string</span><span class="pln"> super `super-element-name`</span></li><li class="L4"><span class="pnl">  </span><span class="tag">string</span><span class="pln"> tag `tag`</span></li><li class="L5"><span class="pnl">  </span><span class="tag">string</span><span class="pln"> xmlTag `tag`</span></li><li class="L6"><span class="pnl">    </span><span class="tag">tag</span><span class="pln"> xml-tag</span></li><li class="L7"><span class="pnl">  </span><span class="tag">boolean</span><span class="pln"> isAbstract</span></li><li class="L8"><span class="pnl">    </span><span class="tag">tag</span><span class="pln"> is-abstract</span></li><li class="L9"><span class="pnl">    </span><span class="tag">default-when-declared</span><span class="pln"> true</span></li><li class="L0"><span class="pnl">  </span><span class="tag">boolean</span><span class="pln"> isRoot</span></li><li class="L1"><span class="pnl">    </span><span class="tag">tag</span><span class="pln"> is-root</span></li><li class="L2"><span class="pnl">    </span><span class="tag">default-when-declared</span><span class="pln"> true</span></li><li class="L3"><span class="pnl">  </span><span class="tag">boolean</span><span class="pln"> nameIsRequired</span></li><li class="L4"><span class="pnl">    </span><span class="tag">tag</span><span class="pln"> name-is-required</span></li><li class="L5"><span class="pnl">    </span><span class="tag">default-when-declared</span><span class="pln"> true</span></li><li class="L6"><span class="pnl">  </span><span class="tag">boolean</span><span class="pln"> addToChildren</span></li><li class="L7"><span class="pnl">    </span><span class="tag">tag</span><span class="pln"> add-to-children</span></li><li class="L8"><span class="pnl">    </span><span class="tag">default-when-declared</span><span class="pln"> true</span></li><li class="L9"><span class="pnl">  </span><span class="tag">r</span><span class="pln"> attribute/s</span></li><li class="L0"><span class="pnl">  </span><span class="tag">r</span><span class="pln"> relation/s</span></li><li class="L1"><span class="pnl">  </span><span class="tag">r</span><span class="pln"> method/s</span></li></ol></pre><h3>Relation element</h3><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> relation `related-element-name`[-`plural-suffix-a`]/`plural-suffix-b`</span></li><li class="L2"><span class="pnl">  </span><span class="tag">#</span><span class="pln"> Examples</span></li><li class="L3"><span class="pnl">  </span><span class="tag">#</span><span class="pln">   r column/s (element: column, collection: columns)</span></li><li class="L4"><span class="pnl">  </span><span class="tag">#</span><span class="pln">   r propert-y/ies (element: property, collection: properties)</span></li><li class="L5"><span class="pnl">  </span><span class="tag">tag</span><span class="pln"> r</span></li><li class="L6"><span class="pnl">  </span><span class="tag">boolean</span><span class="pln"> oneToOne</span></li><li class="L7"><span class="pnl">    </span><span class="tag">tag</span><span class="pln"> one-to-one</span></li><li class="L8"><span class="pnl">    </span><span class="tag">default-when-declared</span><span class="pln"> true</span></li><li class="L9"><span class="pnl">  </span><span class="tag">boolean</span><span class="pln"> noGet</span></li><li class="L0"><span class="pnl">    </span><span class="tag">tag</span><span class="pln"> no-get</span></li><li class="L1"><span class="pnl">    </span><span class="tag">default-when-declared</span><span class="pln"> true</span></li></ol></pre><p>Example:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="tag">e</span><span class="pln"> table : dbitem</span></li><li class="L3"><span class="pnl">    </span><span class="tag">r</span><span class="pln"> column/s</span></li><li class="L4"><span class="pnl">    </span><span class="tag">r</span><span class="pln"> propert-y/ies</span></li><li class="L5"><span class="pnl">    </span><span class="tag">r</span><span class="pln"> displayLayout</span></li><li class="L6"><span class="pnl">      </span><span class="tag">one-to-one</span><span class="pln"> </span></li></ol></pre><p>related-element-name plus the eventual plural-suffix-a must give the name of an element defined in the schema (that is the related element); in the example: column, property, displayLayout.</p><h3>attribute element</h3><p>Describes an attribute of an element</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> attribute `name`</span></li><li class="L2"><span class="pnl">  </span><span class="tag">tag</span><span class="pln"> a</span></li><li class="L3"><span class="pnl">  </span><span class="tag">string</span><span class="pln"> tag `tag`</span></li><li class="L4"><span class="pnl">  </span><span class="tag">string</span><span class="pln"> xmlTag `tag`</span></li><li class="L5"><span class="pnl">    </span><span class="tag">tag</span><span class="pln"> xml-tag</span></li><li class="L6"><span class="pnl">  </span><span class="tag">string</span><span class="pln"> type [string|integer|float|boolean|date]</span></li><li class="L7"><span class="pnl">    </span><span class="tag">default</span><span class="pln"> string</span></li><li class="L8"><span class="pnl">  </span><span class="tag">string</span><span class="pln"> default `default-value`</span></li><li class="L9"><span class="pnl">  </span><span class="tag">string</span><span class="pln"> defaultWhenDeclared `default-value`</span></li><li class="L0"><span class="pnl">    </span><span class="tag">tag</span><span class="pln"> default-when-declared</span></li><li class="L1"><span class="pnl">  </span><span class="tag">boolean</span><span class="pln"> isDatatype</span></li><li class="L2"><span class="pnl">    </span><span class="tag">tag</span><span class="pln"> is-datatype</span></li><li class="L3"><span class="pnl">    </span><span class="tag">default-when-declared</span><span class="pln"> true</span></li><li class="L4"><span class="pnl">  </span><span class="tag">boolean</span><span class="pln"> isRequired</span></li><li class="L5"><span class="pnl">    </span><span class="tag">tag</span><span class="pln"> is-required</span></li><li class="L6"><span class="pnl">    </span><span class="tag">default-when-declared</span><span class="pln"> true</span></li><li class="L7"><span class="pnl">  </span><span class="tag">r</span><span class="pln"> restrict/s</span></li></ol></pre><h3>string element</h3><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> string `attribut-name` : attribute</span></li></ol></pre><h3>boolean element</h3><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> boolean `attribut-name` : attribute</span></li></ol></pre><h3>integer element</h3><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> integer `attribut-name` : attribute</span></li></ol></pre><h3>float element</h3><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> float `attribut-name` : attribute</span></li></ol></pre><h3>date element</h3><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> date `attribut-name` : attribute</span></li></ol></pre><h3>restrict element</h3><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> restrict</span></li><li class="L2"><span class="pnl">  </span><span class="tag">is-abstract</span><span class="pln"> </span></li></ol></pre><h3>enum element</h3><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> enum `enum-value` : restrict</span></li></ol></pre><h3>maxLength element</h3><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> maxLength `value` : restrict</span></li><li class="L2"><span class="pnl">  </span><span class="tag">tag</span><span class="pln"> max-length</span></li></ol></pre><h3>minLength element</h3><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> minLength `value` : restrict</span></li><li class="L2"><span class="pnl">  </span><span class="tag">tag</span><span class="pln"> min-length</span></li></ol></pre><h3>maxValue element</h3><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> maxValue `value` : restrict</span></li><li class="L2"><span class="pnl">  </span><span class="tag">tag</span><span class="pln"> max-value</span></li></ol></pre><h3>minValue element</h3><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> minValue `value` : restrict</span></li><li class="L2"><span class="pnl">  </span><span class="tag">tag</span><span class="pln"> min-value</span></li></ol></pre><h3>regexp element</h3><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> regexp `value` : restrict</span></li></ol></pre><h3>method element</h3><p>Declares a method that will be added to the element class. A method can access and manipulate the entire wizzi model, having access to the 'this.wzRoot()' method of the `schema-name`Base class.</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> method `name`</span></li><li class="L2"><span class="pnl">  </span><span class="tag">tag</span><span class="pln"> m</span></li><li class="L3"><span class="pnl">  </span><span class="tag">r</span><span class="pln"> param/s</span></li><li class="L4"><span class="pnl">  </span><span class="tag">r</span><span class="pln"> statement/s</span></li></ol></pre><h3>param element</h3><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> param `name`</span></li></ol></pre><h3>statement element</h3><p>The statement element uses a subset of the schema 'js' implemented by the plugin wizzi-js.</p><h3>function element</h3><p>Declares a method that will be added to the module and will be a private function for methods of the model instances.</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">e</span><span class="pln"> function `name`</span></li><li class="L2"><span class="pnl">  </span><span class="tag">tag</span><span class="pln"> m</span></li><li class="L3"><span class="pnl">  </span><span class="tag">r</span><span class="pln"> param/s</span></li><li class="L4"><span class="pnl">  </span><span class="tag">r</span><span class="pln"> statement/s</span></li></ol></pre></div>
                    <h2 id="concept-7" class="concept">Internal schemas</h2>
                    <div class="summary">
                        <p>There are some common document types that have great flexibility for the definition of context data, and would be usefull to apply to those documents the templating power of mTrees without the hassle of a wizzi schema.</p><ul>    <li>Text    </li><li>Xml    </li><li>Json    </li><li>Ittf itself.    </li></ul><p>Respecting a few coding rules these type of documents can be built using the composition and template commands of ittf documents.</p><p>The production manager of the wizzi factory recognizes the following internal schemas    <ul>        <li>text        </li><li>xml        </li><li>json        </li><li>ittf        </li>    </ul></p><p>A wizzi job or a an api call to the wizzi factory may use these schema names in any place where a wizzi schema can be used.</p></div>
                    <h2 id="concept-8" class="concept">Json pseudo schema</h2>
                    <div class="summary">
                        <h4>Sample json ittf document</h4><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">{</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="tag">name</span><span class="pln"> "v3-docs"</span></li><li class="L3"><span class="pnl">  </span><span class="tag">version</span><span class="pln"> "0.0.1"</span></li><li class="L4"><span class="pnl">  </span><span class="tag">description</span><span class="pln">  "Wizzi factory documentation."</span></li><li class="L5"><span class="pnl">  </span><span class="tag">scripts</span><span class="pln"> </span></li><li class="L6"><span class="pnl">    </span><span class="tag">{</span><span</span><span class="pln"> </span></li><li class="L7"><span class="pnl">      </span><span class="tag">test</span><span class="pln"> "mocha tests/**/*.js"</span></li><li class="L8"><span class="pnl">      </span><span class="tag">start</span><span class="pln"> "node index"</span></li><li class="L9"><span class="pnl">  </span><span class="tag">dependencies</span><span class="pln"> </span></li><li class="L0"><span class="pnl">    </span><span class="tag">{</span><span</span><span</span><span class="pln"> </span></li><li class="L1"><span class="pnl">      </span><span class="tag">async</span><span class="pln"> "^2.4.0"</span></li><li class="L2"><span class="pnl">      </span><span class="tag">json-stringify-safe</span><span class="pln"> "^5.0.1"</span></li><li class="L3"><span class="pnl">      </span><span class="tag">...</span><span class="pln"> </span></li><li class="L4"><span class="pnl">  </span><span class="tag">sampleArray</span><span class="pln"> </span></li><li class="L5"><span class="pnl">    </span><span class="tag">[</span><span class="pln"> </span></li><li class="L6"><span class="pnl">      </span><span class="tag">'alfa'</span><span class="pln"> </span></li><li class="L7"><span class="pnl">      </span><span class="tag">'beta'</span><span class="pln"> </span></li></ol></pre><h4>Coding rules</h4><ul>    <li>The root node must be an open graph.    </li><li>Ittf node names may contain        <ul>            <li>Property names.            </li><li>Open graph for start of object.            </li><li>Open bracket for start of array.            </li><li>Array elements primitive values.            </li>        </ul>    </li><li>Ittf node values must contain property values when the node name is a property name, nothing in the other cases.    </li></ul><p>( It is assumed that one knows    <a href="http://www.json.org/">json format rules    </a><span>)    </span></p></div>
                    <h2 id="concept-9" class="concept">Xml pseudo schema</h2>
                    <div class="summary">
                        <h4>Sample xml ittf document</h4><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">profile</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="tag">@</span><span class="pln"> name ${user.name}</span></li><li class="L3"><span class="pnl">  </span><span class="tag">@</span><span class="pln"> age ${user.age}</span></li><li class="L4"><span class="pnl">  </span><span class="tag">friends</span><span class="pln"> </span></li><li class="L5"><span class="pnl">    </span><span class="kwd">$foreach</span><span class="pln"> friend in user.friends</span></li><li class="L6"><span class="pnl">      </span><span class="tag">friend</span><span class="pln"> </span></li><li class="L7"><span class="pnl">        </span><span class="tag">@</span><span class="pln"> name ${friend.name}</span></li><li class="L8"><span class="pnl">        </span><span class="tag">@</span><span class="pln"> age ${friend.age}</span></li><li class="L9"><span class="pnl">  </span><span class="tag">address</span><span class="pln"> </span></li><li class="L0"><span class="pnl">    </span><span class="tag">@</span><span class="pln"> street ${user.street}</span></li><li class="L1"><span class="pnl">    </span><span class="tag">@</span><span class="pln"> city ${user.city}</span></li></ol></pre><h4>Rules</h4><ul>    <li>Ittf node names may contain        <ul>            <li>element names for elements            </li><li>simbol @ for attributes            </li>        </ul>    </li><li>Ittf node values may contain        <ul>            <li>nothing for elements            </li><li>name and value separated by a blank for attributes            </li>        </ul>    </li></ul><p>( It is assumed that one knows    <a href="https://google.github.io/styleguide/xmlstyle.html">xml format rules    </a><span>)    </span></p></div>
                    <h2 id="concept-10" class="concept">Text pseudo schema</h2>
                    <div class="summary">
                        <p>A text ittf document is a bit out of standard. It is a common text document that can break the rule of only one root node. It can use any node command or expression of an ittf document. A preprocessor transforms the text in a standard ittf tree structure. After the buildup of the mTree the 'text/document' artifact generator recreates the textual format.</p><h4>Example of text mixin for a license file</h4><pre class="prettyprint-js"><ol class="linenums"><li class="J1">$params copy, license</li><li class="J2">MIT License</li><li class="J3"></li><li class="J4">Copyright (c) ${copy}</li><li class="J5"></li><li class="J6">$if license === 'mit'</li><li class="J7">  $include mit_license_text</li><li class="J8">$elif ...</li></ol></pre><h4>The mixin transformed by the prepocessor in a standard format</h4><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">text</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="kwd">$params</span><span class="pln"> copy, license</span></li><li class="L3"><span class="pnl">  </span><span class="tag">+</span><span class="pln"> MIT License</span></li><li class="L4"><span class="pnl">  </span><span class="tag">+</span><span class="pln"> </span></li><li class="L5"><span class="pnl">  </span><span class="tag">+</span><span class="pln"> Copyright (c) 2015 The Wizzi Team</span></li><li class="L6"><span class="pnl">  </span><span class="tag">+</span><span class="pln"> </span></li><li class="L7"><span class="pnl">  </span><span class="kwd">$if</span><span class="expr"> license === 'mit'</span></li><li class="L8"><span class="pnl">    </span><span class="kwd">$include</span><span class="pln"> mit_license_text</span></li><li class="L9"><span class="pnl">  </span><span class="kwd">$elif</span><span class="expr"> ...</span></li></ol></pre></div>
                    <h2 id="concept-11" class="concept">Ittf pseudo schema</h2>
                    <div class="summary">
                        <p>Using the ittf pseudo schema may increases the plasticity of a generation process.</p><p>We can load complex untyped ittf documents into an mTree and obtain as a result an in-memory simple tree structure of nodes with a name, a value and a childs collection, that can generate a new ittf document.</p><p>We can chain complex mTrees buildups until we get the final ittf document to load into a wizzi model for artifact generation.</p></div>
                    <section></section>
                </div>
            </main>
        </div>
        <script src="jquery-3.2.1.js"></script>
        <script src="../wizzifactory.js"></script>
    </body>

</html>
