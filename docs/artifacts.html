<!doctype html>
<html>
<head>
    <link href="http://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext" rel="stylesheet" type="text/css" />
    <link href="../styles/article.css" rel="stylesheet" />
</head>
<body>
    <header>
        <div class="flexbox">
            <div class="center-on-mobiles">
                <h1>
                    <a href="/" class="logo"><img src="https://wizzifactory.github.io/images/logo.svg" width="140" height="65" alt="Wizzi Logo" />
                    </a>
                </h1>
            </div>
            <nav class="main-nav hide-on-mobiles">
                <ul>
                    <li><a href="https://wizzifactory.github.io/">Home</a>
                    </li>
                    <li class="current"><a href="https://wizzifactory.github.io/docs/concepts.html">Docs</a>
                    </li>
                    <li><a href="https://wizzifactory.github.io/resources/index.html">Resources</a>
                    </li>
                    <li><a href="https://wizzifactory.github.io/packy/index.html">Packy</a>
                    </li>
                    <li><a href="https://wizzifactory.github.io/news/index.html">News</a>
                    </li>
                </ul>
            </nav>
            <div class="search hide-on-mobiles">
                <form class="searchbox">
                        <svg xmlns='http://www.w3.org/2000/svg' id='sbx-icon-search-13' width='12' height='12' viewBox='0 0 40 40'>
                            <path d='M26.806 29.012a16.312 16.312 0 0 1-10.427 3.746C7.332 32.758 0 25.425 0 16.378 0 7.334 7.333 0 16.38 0c9.045 0 16.378 7.333 16.378 16.38 0 3.96-1.406 7.593-3.746 10.426L39.547 37.34c.607.608.61 1.59-.004 2.203a1.56 1.56 0 0 1-2.202.004L26.807 29.012zm-10.427.627c7.322 0 13.26-5.938 13.26-13.26 0-7.324-5.938-13.26-13.26-13.26-7.324 0-13.26 5.936-13.26 13.26 0 7.322 5.936 13.26 13.26 13.26z' style='fill-rule:evenodd;'></path>
                        </svg>
                    <input type="search" id="docsearch" name="search" placeholder="Search the docsâ€¦" autocomplete="off" class="searchbox__input ds-input" spellcheck="false" />
                </form>
            </div>
            <div class="meta hide-on-mobiles">
                <ul>
                    <li><a href="https://github.com/wizzifactory/wizzi">GitHub</a>
                    </li>
                </ul>
            </div>
        </div>
    </header>
    <div class="doc-container">
        <div class="w-4-5">
            <article>
                <div class="doc-title">
                    Artifact generators</div>
                <div class="doc-summary">
                    <p>Artifact generators are contained in Wizzi plugins and are exposed to the Wizzi factory implementing the wizzi-plugin.factoryPlugin API.</p>
                    <p>The wizzi-plugin.factoryPlugin.getArtifactGenerator(artifactKey) method returns a wizzi-plugin.artifactGenerator interface for generating the requested `artifactName`.</p>
                    <h4>wizzi-plugin.artifactGenerator API</h4>
                    <div class='ittf-panel'>
                    <pre class='prettyprint'><code>
                    <div><div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">  </span><span class="pp-tag">func</span><span class="pp-pln"> gen</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">{</span><span class="pp-pln"> model</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">      </span><span class="pp-tag">|</span><span class="pp-pln"> api-ref wizzi-plugin.wizziModel</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">      </span><span class="pp-tag">|</span><span class="pp-pln"> POJO</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">{</span><span class="pp-pln"> ctx</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">      </span><span class="pp-tag">api-ref</span><span class="pp-pln"> wizzi.artifact.genContext</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">callback</span></div></div>
                    </code></pre></div>
                    <p>Plugins authors are free to implement this interface with their preferred tools.</p>
                    <p>In this documentation section we describe solutions that the wizzi factory has taken for its own artifact generators.</p>
                    <h4>Wizzi factory standard location for artifact generators</h4>
                    <p>Artifact generators should have a standard location in the plugin package.</p>
                    <div class='ittf-panel'>
                    <pre class='prettyprint'><code>
                    <div><div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">...</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">  </span><span class="pp-tag">{package-name}</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">package.json</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">...</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">lib</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">      </span><span class="pp-tag">artifacts</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">        </span><span class="pp-tag">{wfschema-name}</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">          </span><span class="pp-tag">{artifact-name}</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">            </span><span class="pp-tag">gen</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">              </span><span class="pp-tag">main.js</span></div></div>
                    </code></pre></div>
                    <p>The file 'main.js' is the module that exposes the wizzi-plugin.artifactGenerator interface for the artifact of key: {wfschema-name}/{artifact-name}.</p>
                    <p>This artifact key must be unique in the plugins configuration of the wizzi.wizziFactory instance that is executing the generation.</p>
                    <h4>Example of 'generator' attribute in a 'wfjob'</h4>
                    <p>The {wfschema-name}/{artifact-name} artifact key is the value to be declared in the `generator` attribute of the `artifact` element of a 'wfjob' ITTF document.</p>
                    <div class='ittf-panel'>
                    <div class='ittf-panel-title'>Use of an artifact generator in a Wizzi job</div>
                    <pre class='prettyprint'><code>
                    <div><div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">wfjob</span><span class="pp-pln"> {job-name}</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">  </span><span class="pp-tag">...</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">  </span><span class="pp-tag">line</span><span class="pp-pln"> {line-name}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">artifact</span><span class="pp-pln"> {artifact-generation-description}</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">      </span><span class="pp-tag">...</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">      </span><span class="pp-tag">generator</span><span class="pp-pln"> {wfschema-name}/{artifact-name}</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">      </span><span class="pp-tag">...</span></div></div>
                    </code></pre></div>
                </div>
            </article>
            <article>
                <div class="doc-title">
                    Implementation</div>
                <div class="doc-summary">
                    <p>An artifact generator produces a buffer of text characters. The production is driven by models contained in the parameters passed to the generator.</p>
                    <p>An artifact generator receives three parameters:</p>
                    <div class='ittf-panel'>
                    <pre class='prettyprint'><code>
                    <div><div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">func</span><span class="pp-pln"> gen</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">  </span><span class="pp-tag">{</span><span class="pp-pln"> model</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">|</span><span class="pp-pln"> api-ref wizzi-plugin.wizziModel</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">|</span><span class="pp-pln"> POJO</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">  </span><span class="pp-tag">{</span><span class="pp-pln"> ctx</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">api-ref</span><span class="pp-pln"> wizzi.artifact.genContext</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">  </span><span class="pp-tag">callback</span></div></div>
                    </code></pre></div>
                    <ul>
                        <li>A model can be a Wizzi Model or a POJO, and represent the main context of the artifact generation.</li>
                        <li>An instance of the wizzi.artifact.genContext class that contains<ul>
                            <li>An in-memory buffer where the generated text is written sequentially using write and write line methods.</li>
                            <li>A data context that may contain zero or many secondary context models, Wizzi Models or POJO.</li>
                            <li>Some helper functions for text indentation, interpolation and error management.</li>
                        </ul>
                        </li>
                        <li>A callback function that a succesfull generation must call passing, as a second parameter, an instance of the wizzi.artifact.genContext with the text buffer containing the generated artifact</li>
                    </ul>
                    <p>Artifact generations are write based, using the write statements of the wizzi.artifact.genContext, or template based.</p>
                    <h3>Code generation by term rewriting</h3>
                    <p>The mTree loader, implemented by the wizzi-mtree.loader.loadMTree API, is a powerfull model composer and transformer. Model transformations can be chained: an output mTree can become the input context for the next mTree loading. A 'wfjob' model can orchestrate any number of cascading transformations. The models passed to the artifact generator are the final models, ready for generating the textual artifact.</p>
                    <p>A template based generation, that uses the mTree loader, can be, indeed, more a code generation by term rewriting than a textual code generation. When mTrees are loaded into Wizzi Models, that can apply types and validations, and can programmatically modify the model, we have a tool for efficiently enabling any extension of the target language, easily implementing partial classes or any other modular aspect or rewrite rule.</p>
                    <h3>Language schemas and language artifact generators</h3>
                    <p>Focusing on the generation of the textual content of an artifact, we must treat of a class of Wizzi Model types that is specific for the production of code targeting the synthax of a programming languages (PL).</p>
                    <p>A language schema defines a tree structure that an associated language artifact generator can transform in a targeting PL code. It can be viewd as a profile of a PL Grammar that can be implemented partially, with some of its symbols stereotyped. The schema developer should try to find the optimal balance between ease of use and completeness and define the proper approximation of the schema in respect to the PL grammar.</p>
                    <p>Must be said that language schema is a concept. A language schema is like any other wizzi schema and a language artifact is like any other artifact generator. The production of specific tools for creating language schemas and artifacts could be undertaken in the future.</p>
                    <p>The wizzi factory, that is generated by the wizzi factory, uses some language schemas for its generations:</p>
                    <ul>
                        <li>The `js` schema in the wizzi-js plugin.</li>
                        <li>The `html`, `css` and `md` schemas in the wizzi-html plugin.</li>
                    </ul>
                    <h3>Template based artifact generation</h3>
                    <p>Language schema Wizzi models are template formats for Wizzi factory template based artifact generations.</p>
                    <div class='ittf-panel'>
                    <div class='ittf-panel-title'>`js` ittf document</div>
                    <pre class='prettyprint'><code>
                    <div><div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">  </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">  </span><span class="pp-tag">class</span><span class="pp-pln"> Horse</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">super</span><span class="pp-pln"> Animal</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">ctor</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">      </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">      </span><span class="pp-tag">base</span><span class="pp-pln"> name</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> say</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">      </span><span class="pp-tag">log</span><span class="pp-pln"> 'Hiiii i am ', this.name</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">m</span><span class="pp-pln"> create</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">      </span><span class="pp-tag">static</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">      </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">      </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">        </span><span class="pp-tag">new</span><span class="pp-pln"> Horse</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">          </span><span class="pp-tag">@</span><span class="pp-pln"> name</span></div></div>
                    </code></pre></div>
                    <p>Almost every ittf node maps to a node type of the javascripts AST. And ittf nodes can be template node commands and can contain expressions.</p>
                    <h3>Example of template based implementation of the wizzi-plugin.artifactGenerator API</h3>
                    <p>In this dummy example, a 'js' ittf document template, named 'datalayer/adapters.js.ittf' is transformed in the javascript textual code of a fictitious datalayer adapter component.</p>
                    <p>This example artifact generator makes use internaly of a 'js' language artifact generator, named 'js/module'. The Wizzi model that it receives as first parameter, has been loaded in previous steps, and becomes the mTreeBuilUpContext object for loading the mTree of the `js` ITTF document template. It must be a Wizzi Model of type 'rdbms' otherwise an error is returned in the callback.</p>
                    <p>The `js` source ITTF document is loaded, and transformed in a textual artifact, calling the 'loadModelAndGenerateArtifact' method of the wizzi.wizziFactory class, exposed in the property 'wizziFactory' of the 'ctx' parameter (an instance of the wizzi.artifact.genContext class).</p>
                    <div class='ittf-panel'>
                    <pre class='prettyprint'><code>
                    <div><div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">  </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">  </span><span class="pp-tag">var</span><span class="pp-pln"> path = require('path')</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">  </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">  </span><span class="pp-tag">var</span><span class="pp-pln"> myname = 'artifact rdbms.adapters.main';</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">  </span><span class="pp-tag">set</span><span class="pp-pln"> md.gen</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">function</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">      </span><span class="pp-tag">{</span><span class="pp-pln"> model</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">      </span><span class="pp-tag">{</span><span class="pp-pln"> ctx</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">      </span><span class="pp-tag">callback</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">      </span><span class="pp-tag">#</span><span class="pp-pln"> check the model is a Wizzi Model of type 'rdbms'</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">      </span><span class="pp-tag">if</span><span class="pp-pln"> model.wzElement !== 'rdbms'</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">          </span><span class="pp-tag">callback</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">            </span><span class="pp-tag">_ctx.error</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">              </span><span class="pp-tag">@</span><span class="pp-pln"> myname + " error: the model paramater should be an 'rdbms' Wizzi Model"</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">              </span><span class="pp-tag">@</span><span class="pp-pln"> model</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">      </span><span class="pp-tag">#</span><span class="pp-pln"> build the artifact template path, it is a js ittf document in a sub folder</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">      </span><span class="pp-tag">var</span><span class="pp-pln"> ittfTemplatePath</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> path.join</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">          </span><span class="pp-tag">@</span><span class="pp-pln"> __dirname</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">          </span><span class="pp-tag">@</span><span class="pp-pln"> 'ittf'</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">          </span><span class="pp-tag">@</span><span class="pp-pln"> 'datalayer'</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">          </span><span class="pp-tag">@</span><span class="pp-pln"> 'adapters.js.ittf'</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">      </span><span class="pp-tag">#</span><span class="pp-pln"> call the wizzifactory method for loading a language Wizzi Model and</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">      </span><span class="pp-tag">#</span><span class="pp-pln"> generate a language artifact from it. Pass the input model in the</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">      </span><span class="pp-tag">#</span><span class="pp-pln"> mTreeBuildUpContext property of the request object argument.</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">      </span><span class="pp-tag">#</span><span class="pp-pln"> The 'js' schema of the template model is detected by its filename.</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">      </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.wizziFactory.loadModelAndGenerateArtifact</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">        </span><span class="pp-tag">@</span><span class="pp-pln"> ittfTemplatePath</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">        </span><span class="pp-tag">{</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">          </span><span class="pp-tag">@</span><span class="pp-pln"> mTreeBuildUpContext model</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">        </span><span class="pp-tag">@</span><span class="pp-pln"> 'js/module'</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">        </span><span class="pp-tag">function</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">          </span><span class="pp-tag">param</span><span class="pp-pln"> err</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">          </span><span class="pp-tag">param</span><span class="pp-pln"> artifactText</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">          </span><span class="pp-tag">if</span><span class="pp-pln"> err</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">            </span><span class="pp-tag">#</span><span class="pp-pln"> invoke the callback on error, passing back the loadModelAndGenerateArtifact error</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">            </span><span class="pp-tag">return</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">              </span><span class="pp-tag">_</span><span class="pp-pln"> callback</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">                </span><span class="pp-tag">err</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">          </span><span class="pp-tag">#</span><span class="pp-pln"> write the artifactText into the genContext buffer</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">          </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.write(artifactText)</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">          </span><span class="pp-tag">#</span><span class="pp-pln"> invoke the callback on success, passing back the genContext</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">          </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, ctx)</span></div></div>
                    </code></pre></div>
                </div>
            </article>
            <article>
                <div class="doc-title">
                    The genContext object</div>
                <div class="doc-summary">
                    <h4>The interface of the gencontext object</h4>
                    <div class='ittf-panel'>
                    <pre class='prettyprint'><code>
                    <div><div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">class</span><span class="pp-pln"> genContext</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">  </span><span class="pp-tag">#</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> Set line indentation to a given value</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">  </span><span class="pp-tag">m</span><span class="pp-pln"> forceIndent</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">  </span><span class="pp-tag">#</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> Increase line indentation</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">  </span><span class="pp-tag">m</span><span class="pp-pln"> indent</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">  </span><span class="pp-tag">#</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> Decrease line indentation</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">  </span><span class="pp-tag">m</span><span class="pp-pln"> deindent</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">    </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">  </span><span class="pp-tag">#</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> Add a named value to the interpolation context</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">  </span><span class="pp-tag">m</span><span class="pp-pln"> a</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">    </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">    </span><span class="pp-tag">param</span><span class="pp-pln"> value</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">  </span><span class="pp-tag">#</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> Add a named value from the interpolation context</span></div><div class="L1"><span class="pp-ln">  21 </span><span class="pp-pln">  </span><span class="pp-tag">m</span><span class="pp-pln"> g</span></div><div class="L2"><span class="pp-ln">  22 </span><span class="pp-pln">    </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L3"><span class="pp-ln">  23 </span><span class="pp-pln">  </span><span class="pp-tag">#</span></div><div class="L4"><span class="pp-ln">  24 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> Remove a named value from the interpolation context</span></div><div class="L5"><span class="pp-ln">  25 </span><span class="pp-pln">  </span><span class="pp-tag">m</span><span class="pp-pln"> r</span></div><div class="L6"><span class="pp-ln">  26 </span><span class="pp-pln">    </span><span class="pp-tag">param</span><span class="pp-pln"> name</span></div><div class="L7"><span class="pp-ln">  27 </span><span class="pp-pln">  </span><span class="pp-tag">#</span></div><div class="L8"><span class="pp-ln">  28 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> Write a text with interpolation and line feed</span></div><div class="L9"><span class="pp-ln">  29 </span><span class="pp-pln">  </span><span class="pp-tag">m</span><span class="pp-pln"> w</span></div><div class="L0"><span class="pp-ln">  30 </span><span class="pp-pln">    </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L1"><span class="pp-ln">  31 </span><span class="pp-pln">  </span><span class="pp-tag">#</span></div><div class="L2"><span class="pp-ln">  32 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> Write a text with interpolation without line feed</span></div><div class="L3"><span class="pp-ln">  33 </span><span class="pp-pln">  </span><span class="pp-tag">m</span><span class="pp-pln"> write</span></div><div class="L4"><span class="pp-ln">  34 </span><span class="pp-pln">    </span><span class="pp-tag">param</span><span class="pp-pln"> text</span></div><div class="L5"><span class="pp-ln">  35 </span><span class="pp-pln">  </span><span class="pp-tag">#</span></div><div class="L6"><span class="pp-ln">  36 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> throw a NodeError exception</span></div><div class="L7"><span class="pp-ln">  37 </span><span class="pp-pln">  </span><span class="pp-tag">m</span><span class="pp-pln"> error</span></div><div class="L8"><span class="pp-ln">  38 </span><span class="pp-pln">    </span><span class="pp-tag">param</span><span class="pp-pln"> message</span></div><div class="L9"><span class="pp-ln">  39 </span><span class="pp-pln">    </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div><div class="L0"><span class="pp-ln">  40 </span><span class="pp-pln">  </span><span class="pp-tag">#</span></div><div class="L1"><span class="pp-ln">  41 </span><span class="pp-pln">    </span><span class="pp-tag">#</span><span class="pp-pln"> throw an ArtifactGenerationError exception</span></div><div class="L2"><span class="pp-ln">  42 </span><span class="pp-pln">  </span><span class="pp-tag">m</span><span class="pp-pln"> artifactGenerationError</span></div><div class="L3"><span class="pp-ln">  43 </span><span class="pp-pln">    </span><span class="pp-tag">param</span><span class="pp-pln"> message</span></div><div class="L4"><span class="pp-ln">  44 </span><span class="pp-pln">    </span><span class="pp-tag">param</span><span class="pp-pln"> location</span></div><div class="L5"><span class="pp-ln">  45 </span><span class="pp-pln">    </span><span class="pp-tag">param</span><span class="pp-pln"> node</span></div></div>
                    </code></pre></div>
                </div>
            </article>
            <article>
                <div class="doc-title">
                    Sample artifact generator</div>
                <div class="doc-summary">
                    <h4>Code write artifact generator sample</h4>
                    <div class='ittf-panel'>
                    <pre class='prettyprint'><code>
                    <div><div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">module</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">  </span><span class="pp-tag">kind</span><span class="pp-pln"> jsfile</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">  </span><span class="pp-tag">var</span><span class="pp-pln"> md = module.exports = {}</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">  </span><span class="pp-tag">var</span><span class="pp-pln"> myname = 'artifact rdbms.sqltables.main';</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">  </span><span class="pp-tag">set</span><span class="pp-pln"> md.gen</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">function</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">      </span><span class="pp-tag">param</span><span class="pp-pln"> model</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">      </span><span class="pp-tag">param</span><span class="pp-pln"> ctx</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">      </span><span class="pp-tag">param</span><span class="pp-pln"> callback</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">      </span><span class="pp-tag">if</span><span class="pp-pln"> model.wzElement !== 'rdbms'</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">        </span><span class="pp-tag">return</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">          </span><span class="pp-tag">callback</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">            </span><span class="pp-tag">_ctx.error</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">              </span><span class="pp-tag">@</span><span class="pp-pln"> myname + " error: the model paramater should be an 'rdbms' Wizzi Model"</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">              </span><span class="pp-tag">@</span><span class="pp-pln"> model</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">      </span><span class="pp-kwd">$foreach</span><span class="pp-pln"> table in model.tables</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.a('TABLE', table.wzName)</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">        </span><span class="pp-tag">_</span><span class="pp-pln"> ctx.w('declare table TABLE')</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">        </span><span class="pp-tag">...</span></div><div class="L0"><span class="pp-ln">  20 </span><span class="pp-pln">      </span><span class="pp-tag">_</span><span class="pp-pln"> callback(null, ctx)</span></div></div>
                    </code></pre></div>
                </div>
            </article>
            <article>
                <div class="doc-title">
                    Internal artifacts</div>
                <div class="doc-summary">
                    <p>The wizzi-core plugin exports some useful artifacts.
                        We already have seen the artifacts for the psedo models<ul>
                            <li>Json</li>
                            <li>Xml</li>
                            <li>Text</li>
                        </ul>
                    </p>
                    <p>There are also these others core artifacts
                        <ul>
                            <li>json/export</li>
                            <li>xml/export</li>
                            <li>ittf/document</li>
                        </ul>
                    </p>
                </div>
            </article>
            <article>
                <div class="doc-title">
                    "json/export" builtin artifact</div>
                <div class="doc-summary">
                    <p>The json/export builtin artifact can be used in a Wizzi job,
                        to save the JSON representation ofa Wizzi model, when its Wizzi schemadeclares the `export-to json` element.</p>
                    <div class='ittf-panel'>
                    <div class='ittf-panel-title'>Sample wfjob artifact element using the json/export artifact.</div>
                    <pre class='prettyprint'><code>
                    <div><div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">wfjob</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">  </span><span class="pp-tag">...</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">  </span><span class="pp-tag">artifact</span><span class="pp-pln"> json export of model sample.form.ittf</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">src</span><span class="pp-pln"> sample.form.ittf</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">schema</span><span class="pp-pln"> form</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">generator</span><span class="pp-pln"> json/export</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">extension</span><span class="pp-pln"> json</span></div></div>
                    </code></pre></div>
                </div>
            </article>
            <article>
                <div class="doc-title">
                    "xml/export" builtin artifact</div>
                <div class="doc-summary">
                    <p>The xml/export builtin artifact can be used in a Wizzi job,
                        to save the xml representation ofa Wizzi Model when its Wizzi schemadeclares the `export-to xml` element.</p>
                    <div class='ittf-panel'>
                    <div class='ittf-panel-title'>Sample wfjob artifact element using the xml/export artifact.</div>
                    <pre class='prettyprint'><code>
                    <div><div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">wfjob</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">  </span><span class="pp-tag">...</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">  </span><span class="pp-tag">artifact</span><span class="pp-pln"> xml export of model sample.form.ittf</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">src</span><span class="pp-pln"> sample.form.ittf</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">    </span><span class="pp-tag">schema</span><span class="pp-pln"> form</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">generator</span><span class="pp-pln"> xml/export</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">extension</span><span class="pp-pln"> xml</span></div></div>
                    </code></pre></div>
                </div>
            </article>
            <article>
                <div class="doc-title">
                    "ittf/document" builtin artifact</div>
                <div class="doc-summary">
                    <p>The 'ittf/document' builtin artifact exports the ittf representation of a loaded mTree. This allow the buildup of ittf documents using the mTree loader for merging sources and contexts.</p>
                    <div class='ittf-panel'>
                    <div class='ittf-panel-title'>Sample wizzi job using the 'ittf/document' generator.</div>
                    <pre class='prettyprint'><code>
                    <div><div class="L1"><span class="pp-ln">   1 </span><span class="pp-pln"></span><span class="pp-tag">wfjob</span></div><div class="L2"><span class="pp-ln">   2 </span><span class="pp-pln">  </span><span class="pp-tag">model</span><span class="pp-pln"> styles</span></div><div class="L3"><span class="pp-ln">   3 </span><span class="pp-pln">    </span><span class="pp-tag">src</span><span class="pp-pln"> styles.json.ittf</span></div><div class="L4"><span class="pp-ln">   4 </span><span class="pp-pln">    </span><span class="pp-tag">schema</span><span class="pp-pln"> json</span></div><div class="L5"><span class="pp-ln">   5 </span><span class="pp-pln">  </span><span class="pp-tag">model</span><span class="pp-pln"> layout</span></div><div class="L6"><span class="pp-ln">   6 </span><span class="pp-pln">    </span><span class="pp-tag">src</span><span class="pp-pln"> layout.json.ittf</span></div><div class="L7"><span class="pp-ln">   7 </span><span class="pp-pln">    </span><span class="pp-tag">schema</span><span class="pp-pln"> json</span></div><div class="L8"><span class="pp-ln">   8 </span><span class="pp-pln">  </span><span class="pp-tag">model</span><span class="pp-pln"> optionsforms</span></div><div class="L9"><span class="pp-ln">   9 </span><span class="pp-pln">    </span><span class="pp-tag">src</span><span class="pp-pln"> options.form.ittf</span></div><div class="L0"><span class="pp-ln">  10 </span><span class="pp-pln">    </span><span class="pp-tag">schema</span><span class="pp-pln"> form</span></div><div class="L1"><span class="pp-ln">  11 </span><span class="pp-pln">  </span><span class="pp-tag">line</span><span class="pp-pln"> ui</span></div><div class="L2"><span class="pp-ln">  12 </span><span class="pp-pln">    </span><span class="pp-tag">artifact</span><span class="pp-pln"> ittf document of model options-page.html.ittf</span></div><div class="L3"><span class="pp-ln">  13 </span><span class="pp-pln">      </span><span class="pp-tag">src</span><span class="pp-pln"> options-page.html.ittf</span></div><div class="L4"><span class="pp-ln">  14 </span><span class="pp-pln">      </span><span class="pp-tag">schema</span><span class="pp-pln"> ittf</span></div><div class="L5"><span class="pp-ln">  15 </span><span class="pp-pln">      </span><span class="pp-tag">generator</span><span class="pp-pln"> ittf/document</span></div><div class="L6"><span class="pp-ln">  16 </span><span class="pp-pln">      </span><span class="pp-tag">extension</span><span class="pp-pln"> ittf</span></div><div class="L7"><span class="pp-ln">  17 </span><span class="pp-pln">      </span><span class="pp-tag">model-ref</span><span class="pp-pln"> styles</span></div><div class="L8"><span class="pp-ln">  18 </span><span class="pp-pln">      </span><span class="pp-tag">model-ref</span><span class="pp-pln"> layout</span></div><div class="L9"><span class="pp-ln">  19 </span><span class="pp-pln">      </span><span class="pp-tag">model-ref</span><span class="pp-pln"> optionsforms</span></div></div>
                    </code></pre></div>
                </div>
            </article>
        </div>
        <div class="w-1-5">
            <div class="aside-right">
                <div style="padding-top: 40px;"></div>
                <ul>
                    <li><a href="https://wizzifactory.github.io/docs/concepts.html">Concepts</a>
                    </li>
                    <li><a href="https://wizzifactory.github.io/docs/ittfdocuments.html">Ittf documents</a>
                    </li>
                    <li><a href="https://wizzifactory.github.io/docs/jswizzi.html">JsWizzi</a>
                    </li>
                    <li><a href="https://wizzifactory.github.io/docs/mtrees.html">mTrees</a>
                    </li>
                    <li><a href="https://wizzifactory.github.io/docs/wizzischemas.html">Wizzi schemas</a>
                    </li>
                    <li><a href="https://wizzifactory.github.io/docs/wizzimodels.html">Wizzi models</a>
                    </li>
                    <li class="current"><a href="https://wizzifactory.github.io/docs/artifacts.html">Artifacts</a>
                    </li>
                    <li><a href="https://wizzifactory.github.io/docs/wizzifactoryclass.html">Wizzi factory class</a>
                    </li>
                    <li><a href="https://wizzifactory.github.io/docs/wizzijobs.html">Wizzi jobs</a>
                    </li>
                    <li><a href="https://wizzifactory.github.io/docs/wizziplugins.html">Wizzi plugins</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</body>

</html>
