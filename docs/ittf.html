<!doctype html>
<html VERSION-5="5" VERSION-4="4" version="5">
    <head>
        <title>The Wizzi Factory</title>
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link href="../normalize.css" rel="stylesheet">
        <link href="../wizzifactory.css" rel="stylesheet">
    </head>
    <body class="docs-intro">
        <div class="site">
            <header class="navigation">
                <div class="container navigation__inner">
                    <div class="logo">
                        <span class="logo-w">W</span>
                        <span class="logo-i1">i</span>
                        <span class="logo-z1">z</span>
                        <span class="logo-z2">z</span>
                        <span class="logo-i2">i</span>
                        <span>&nbsp;</span>
                        <span class="logo-f">f</span>
                        <span class="logo-a">a</span>
                        <span class="logo-c">c</span>
                        <span class="logo-t">t</span>
                        <span class="logo-o">o</span>
                        <span class="logo-r">r</span>
                        <span class="logo-y">y</span>
                    </div>
                    <nav class="navigation__links">
                        <a title="docs concepts" href="../concepts.html" class="navigation__link">Concepts</a>
                        <a title="docs docs" href="../docs/intro.html" class="navigation__link navigation__link--active">Docs</a>
                        <a title="docs api" href="../api.html" class="navigation__link">Api</a>
                        <a title="docs code" href="../code/intro.html" class="navigation__link">Code</a>
                        <a title="docs starters" href="../starters.html" class="navigation__link">Starters</a>
                        <a title="docs project" href="../project.html" class="navigation__link">Project</a>
                    </nav>
                    <div class="navigation__search">
                        <span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;">
                            <input type="text" class="navigation__search-input ds-input" placeholder="Search documentationâ€¦" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="position: relative; vertical-align: top;">
                            <pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; word-spacing: 0px; letter-spacing: normal; text-indent: 7px; text-rendering: auto; text-transform: none;"></pre>
                            <span class="ds-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="position: absolute; top: 100%; z-index: 100; display: none; left: 0px; right: auto;">
                                <div class="ds-dataset-1"></div>
                            </span>
                        </span>
                        <button class="navigation__search-icon icon-search"></button>
                        <button class="navigation__search-icon icon-cross"></button>
                    </div>
                    <a href="https://github.com/wizzifactory" target="_blank" class="navigation__icon" title="GitHub Repository"><i class="sidecar__icon icon-github"></i>
                    </a>
                    <a href="https://stackoverflow.com/questions/tagged/wizzifactory" target="_blank" class="navigation__icon" title="See Questions on Stack Overflow"><i class="sidecar__icon icon-stackoverflow"></i>
                    </a>
                    <a href="#" target="_blank" class="navigation__icon" title="Follow on twitter"><i class="sidecar__icon icon-twitter"></i>
                    </a>
                    <a href="#" target="_blank" class="navigation__icon" title="Follow on facebook"><i class="sidecar__icon icon-facebook"></i>
                    </a>
                </div>
                <div class="navigation__bottom">
                    <div class="container navigation__inner">
                        <a class="navigation__child navigation__child--active" title="intro ittf source code" href="intro.html">intro</a>
                        <a class="navigation__child" title="ittf ittf source code" href="ittf.html">ittf</a>
                        <a class="navigation__child" title="jswizzi ittf source code" href="jswizzi.html">jswizzi</a>
                        <a class="navigation__child" title="models ittf source code" href="models.html">models</a>
                        <a class="navigation__child" title="schemas ittf source code" href="schemas.html">schemas</a>
                        <a class="navigation__child" title="jobs ittf source code" href="jobs.html">jobs</a>
                        <a class="navigation__child" title="wfschema ittf source code" href="wfschema.html">wfschema</a>
                        <a class="navigation__child" title="wfjob ittf source code" href="wfjob.html">wfjob</a>
                        <a class="navigation__child" title="wfpackage ittf source code" href="wfpackage.html">wfpackage</a>
                        <a class="navigation__child" title="docs ittf source code" href="docs.html">docs</a>
                        <a class="navigation__child" title="md ittf source code" href="md.html">md</a>
                    </div>
                </div>
            </header>
            <main id="main-content">
                <nav class="main-sidebar-left" style="max-height: 648px; position: fixed; top: 90px; width: 280px;">
                    <img src="../workinprogress.jpg">
                    <section id="main-toc" class="toc toc sidebar__inner">
                        <h3>Contents:</h3>
                        <ol>
                            <li><a href="#concept-1">Ittf command nodes</a>
                            </li>
                            <li><a href="#concept-2">Path resolution of mixin and include documents</a>
                            </li>
                            <li><a href="#concept-3">t-folders</a>
                            </li>
                        </ol>
                    </section>
                </nav>
                <div class="main-content">
                    <h2 id="concept-1" class="concept">Ittf command nodes</h2>
                    <div class="summary">
                        <h3>Mixin inclusion command</h3><p>Format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="mix">mixin-path(</span><span class="pln"> mixin-param-1 [mixin-param-2, [...]] ).</span></li><li class="L3"><span class="pnl">    </span><span class="tag">[</span><span class="pln"> optional ittf node branch ]</span></li></ol></pre><p>A mixin inclusion is recognized by the lexer when a node name ends with an open parenthesis. The chars before the parens are the relative path to the mixin. The base path is the current ittf document uri. No whitechar may separate the mixin path and the open paren.</p><p>The ittf of the mixin is inserted in the including ittf replacing the including command node. If the including node has children they, by default, are appended to the root node of the mixin. But if the mixin root has a descendant that is a default $hook command node, than the children of the including node replace the $hook node.</p><p>Example of mixin with an $hook command node where children of the includer node will be appended.</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">table</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="tag">tr</span><span class="pln"> </span></li><li class="L3"><span class="pnl">    </span><span class="kwd">$hook</span><span class="pln"> </span></li></ol></pre><p>Root nodes can be mixin inclusion command nodes:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="mix">mylayout(</span><span class="pln"> home )</span></li><li class="L2"><span class="pnl">  </span><span class="tag">div</span><span class="pln"> My content</span></li></ol></pre><h3>$include</h3><p>Format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="kwd">$include</span><span class="pln"> include-path</span></li></ol></pre><p>include-path is the relative path to an includeable ittf. The base path is the current ittf document uri.</p><p>The includeable is included as is replacing the $include command node.</p><p>An $include command node may not have children nodes.</p><h3>$params</h3><p>Format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">rootnode</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="kwd">$params</span><span class="pln"> name1[:type[|default]][, name2[...</span></li></ol></pre><p>Example:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">li</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="kwd">$params</span><span class="pln"> text, href</span></li><li class="L3"><span class="pnl">  </span><span class="tag">a</span><span class="pln"> ${text}</span></li><li class="L4"><span class="pnl">    </span><span class="tag">href</span><span class="pln"> ${href}</span></li></ol></pre><h3>$hook</h3><p>Format</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="kwd">$hook</span><span class="pln"> name</span></li></ol></pre><p>An $hook command node is a named insertion point where IttfNodeBranches can be appended. The name is optional, when missing its value is 'default'.</p><p>It has to be replaced and may not have child nodes.</p><p>See the statements MixinCall and AppendHookCall, for how to append IttfNodeBranches to an $hook node.</p><h3>$append</h3><p>Format</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="kwd">$append</span><span class="pln"> hook-name</span></li><li class="L3"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> nodeb ranch ...</span></li></ol></pre><p>An $append command node is the root of a node branch that should be appended to an ancestor $hook of name hook-name. The $append children nodes replace the $hook node.</p><h3>$group</h3><p>Format</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="kwd">$group</span><span class="pln"> empty-value</span></li><li class="L2"><span class="pnl">  </span><span class="tag">...</span><span class="pln"> node branch ...</span></li></ol></pre><p>An ittf document must have one and only one root node.</p><p>The $group command node is a convenience node that may be used as the root of an includeable or mixin with many root nodes.</p><p>The $group node disappear in the builded tree.</p><h3>$if, $elif, $else</h3><p>Format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="kwd">$if</span><span class="expr"> js-wizzi-conditional-expression</span></li><li class="L3"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> nodeb ranch ...</span></li><li class="L4"><span class="pnl">  </span><span class="kwd">$elif</span><span class="expr"> js-wizzi-conditional-expression</span></li><li class="L5"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> nodeb ranch ...</span></li><li class="L6"><span class="pnl">  </span><span class="kwd">$else</span><span class="pln"> empty-value</span></li><li class="L7"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> nodeb ranch ...</span></li></ol></pre><p>Children node are included/excluded depending on the value of the conditional-expression, written in Js-Wizzi.</p><h3>$foreach statement</h3><p>Format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="kwd">$foreach</span><span class="pln"> item-name in collection-name</span></li><li class="L3"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> node branch ...</span></li></ol></pre><p>This is a repeat template where item-name is user defined and collection-name is a Js-Wizzi expression that evaluates to an iterable.</p><p>The var statement that declares item-name is auto-generated.</p><p>Descendant nodes are repeated having item-name as a context value in scope.</p><h3>$break, $continue</h3><p>Format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="kwd">$break</span><span class="pln"> empty-value</span></li><li class="L3"><span class="pnl">  </span><span class="tag">...</span><span class="pln"> </span></li><li class="L4"><span class="pnl">  </span><span class="kwd">$continue</span><span class="pln"> empty-value</span></li></ol></pre><p>This statements have the same meaning than in javascript but operate breaking or continuing the template repetition.</p><p>Currently a label for continuation is not implemented.</p><h3>$while</h3><p>Format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="kwd">$while</span><span class="pln"> js-wizzi-conditional-expression</span></li><li class="L3"><span class="pnl">    </span><span class="tag">...</span><span class="pln"> node branch ...</span></li><li class="L4"><span class="pnl">    </span><span class="kwd">$</span><span class="expr"> js-wizzi-exit-condition-change</span></li></ol></pre><p>This is a repeat template statement where descendant nodes are repeated until the js-wizzi-conditional-expression evaluates to false.</p><p>$ or $global command nodes must be used to modify the context values of the exit condition. There is a limit of 10000 iterations to guard against accidental loops, after that an exception is raised.</p><h3>$ comman node</h3><p>Allow manipulation of the template context.</p><p>May declare and modify template context variables that have ittf document scope.</p><div>May modify template context variables that have global scope.</div><div>Statements are js-wizzi instructions.</div><p>Single line format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="kwd">$</span><span class="expr"> js-wizzi-statement</span></li></ol></pre><p>Multi-line format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="kwd">$</span><span class="expr"> </span></li><li class="L2"><span class="pnl">  </span><span class="expr">js-wizzi-statement</span><span class="expr"> </span></li><li class="L3"><span class="pnl">  </span><span class="expr">js-wizzi-statement</span><span class="expr"> </span></li><li class="L4"><span class="pnl">  </span><span class="expr">...</span><span class="expr"> </span></li></ol></pre><h3>$global command node</h3><p>May declare and modify template context variables of the global scope.</p><div>Statements are js-wizzi instructions.</div><p>Single line format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">...</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="kwd">$global</span><span class="pln"> js-wizzi-statement</span></li></ol></pre><p>Multi-line format:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="kwd">$global</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="expr">js-wizzi-statement</span><span class="expr"> </span></li><li class="L3"><span class="pnl">  </span><span class="expr">js-wizzi-statement</span><span class="expr"> </span></li><li class="L4"><span class="pnl">  </span><span class="expr">...</span><span class="expr"> </span></li></ol></pre></div>
                    <h2 id="concept-2" class="concept">Path resolution of mixin and include documents</h2>
                    <div class="summary">
                        <p>When IttfDocuments are included or mixed-in, given {path current-dir{path} as the path of the including or mixing IttfDocument, they are searched (in order):</p><ul>    <li>in the {path current-dir{path} folder;    </li><li>in the {path current-dir{path}/t folder;    </li><li>in the folder named {path t{path} of the parent folder of the {path current-dir{path};    </li><li>in the folder named {path t{path} of the ancestor folders of the {path current-dir{path}.    </li></ul><p>Given this folder structure</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="tag">folder-a</span><span class="pln"> </span></li><li class="L2"><span class="pnl">  </span><span class="tag">t</span><span class="pln"> </span></li><li class="L3"><span class="pnl">    </span><span class="tag">layout.html.ittf</span><span class="pln"> </span></li><li class="L4"><span class="pnl">  </span><span class="tag">folder-b</span><span class="pln"> </span></li><li class="L5"><span class="pnl">    </span><span class="tag">t</span><span class="pln"> </span></li><li class="L6"><span class="pnl">      </span><span class="tag">dialog.html.ittf</span><span class="pln"> </span></li><li class="L7"><span class="pnl">    </span><span class="tag">my-home-page.html.ittf</span><span class="pln"> </span></li></ol></pre><p>The IttfDocument my-home-page.html.ittf could be:</p><pre class="prettyprint"><ol class="linenums"><li class="L1"><span class="pnl"></span><span class="mix">layout(</span><span class="pln"> home )</span></li><li class="L2"><span class="pnl">  </span><span class="kwd">$include</span><span class="pln"> dialog( )</span></li></ol></pre></div>
                    <h2 id="concept-3" class="concept">t-folders</h2>
                    <div class="summary">
                        <p>Mixin and include ittf document have a special path resolution algorithm when they are located in folders named 't', that we call t-folders.</p><p>The mTree loader path finder method, when cannot resolve a path for a mixin or include document, searches the documents in 't' folders just like nodejs searches a module in 'node_modules' folders.</p></div>
                    <section></section>
                </div>
            </main>
        </div>
        <script src="jquery-3.2.1.js"></script>
        <script src="../wizzifactory.js"></script>
    </body>

</html>
